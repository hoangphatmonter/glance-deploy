import{S as r,B as I,A as l,D as O,m as N,a as _,C as A,b as K,d as M,e as L,f as v,h as D,i as j,j as X,k as G,l as U,P as $,n as z,o as W,F as u,E as H,p as V}from"./game.js";const{DEMO_SPINE:le}=r;class Q extends I{fontName;img;text;run=()=>{};preload(){this.events.on("wake",this.run),this.events.once("create",this.run),this.scene.isPaused(),this.fontName="Ephesis",this.textStyler.addFont({type:"google",fontName:this.fontName,fontType:"truetype"})}create(){super.create(),this.cameras.main.setBackgroundColor(4868682),this.createTextObject()}createTextObject(){this.text=this.add.text(0,0,"Text Styler",{fontFamily:this.fontName,fontSize:`${this.fontSize(50)}px`,color:"#21242d",stroke:"#000000",strokeThickness:3}),this.text.setHighQuality(),Phaser.Display.Align.In.Center(this.text,this.gameZone)}}const ue=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),{KEY:q,TEXTURE:J,FRAME_RATE:tt,END:et,PREFIX:st,ZERO_PAD:it}=l.CONFETTI_HEXAGON;class nt extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:tt,frames:t.generateFrameNames(J,{prefix:st,end:et,zeroPad:it}),yoyo:!0,showOnStart:!0};super(t,q,e)}}const{KEY:at,FRAME:ot}=r.EFFECTS;class rt extends Phaser.GameObjects.Image{onUpdate;onComplete;positions;eatAnimation;constructor(t,e){super(t,0,0,at,ot.COIN),this.setWorldSize(16.5,15.5),this.positions=e,this.setDepth(O.PRIORITY),this.createAnimation(),this.scene.add.existing(this)}createAnimation(){const t=1/GameCore.Utils.Image.getImageScale(),{from:e,to:s}=this.positions;this.eatAnimation=this.scene.add.tween({targets:this,duration:1125,ease:"Circ.easeInOut",paused:!0,props:{x:{from:e.x,to:s.x},y:{from:e.y,to:s.y},scale:{from:t*2,to:t*2}},onUpdate:()=>{typeof this.onUpdate=="function"&&this.onUpdate()},onComplete:()=>{this.destroy(),typeof this.onComplete=="function"&&this.onComplete()}})}run(){this.eatAnimation.play()}}const{KEY:ct,FRAME:S}=r.EFFECTS;class ht extends Phaser.GameObjects.Particles.ParticleEmitterManager{onUpdate;onComplete;emitter;circle;constructor(t,e,s){super(t,ct,S.COIN),this.createEmitters(e,s),this.setActive(!1),this.setVisible(!1),this.scene.add.existing(this)}createEmitters(t,e){const s=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:S.COIN,angle:{min:0,max:360},speed:{min:240,max:340},scale:{start:s,end:s},lifespan:5e3,emitCallback:i=>{i.accelerationX=-i.velocityX/1.2,i.accelerationY=-i.velocityY/1.2},deathCallback:i=>{const n=new rt(this.scene,{from:{x:i.x,y:i.y},to:{x:t,y:e}});n.onUpdate=()=>{typeof this.onUpdate=="function"&&this.onUpdate()},n.onComplete=()=>{typeof this.onComplete=="function"&&this.onComplete()},n.setDepth(O.ON_TOP),n.run()}})}explode(t,e,s){this.setActive(!0),this.setVisible(!0),this.circle||(this.circle=new Phaser.Geom.Circle(e,s,100)),this.emitter.deathZone=new Phaser.GameObjects.Particles.Zones.DeathZone(this.circle,!1),this.emitter.explode(t,e,s)}}class mt extends Phaser.GameObjects.Particles.Particle{lastChange=0;currentFrame=-1;isYoyo=!1;confettiAnim;constructor(t){super(t),this.lastChange=0,this.confettiAnim=window.game.anims.get(l.CONFETTI_HEXAGON.KEY)}update(t,e,s){const i=super.update(t,e,s);return this.lastChange+=t,this.lastChange>=this.confettiAnim.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.confettiAnim.frames.length&&(this.isYoyo=!0,this.currentFrame-=2),this.frame=this.confettiAnim.frames[this.currentFrame].frame,this.lastChange-=this.confettiAnim.msPerFrame),i}}const{KEY:lt,FRAME:ut}=r.EFFECTS;class pt extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitter;constructor(t){super(t,lt,ut.FX_CONFETTI_HEXAGON+"0"),this.setActive(!1),this.scene.add.existing(this)}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale(),e={on:!1,particleBringToTop:!0,particleClass:mt,tint:[14223402,1021804,5420529,16702052],timeScale:1,reserve:20,frequency:100,maxParticles:2,gravityY:-5,speedX:{min:-100,max:100},speedY:{min:50,max:150},alpha:{start:1,end:.2},rotate:{start:0,end:360*3},scale:{min:t*1,max:t*.3},angle:{min:10,max:170},lifespan:{min:8e3,max:12e3}};this.emitter=this.createEmitter(e)}run(t,e,s){this.setActive(!0),this.stop(),this.reset(),this.emitter.setQuantity(t),this.emitter.setPosition(e,s),this.emitter.start()}stop(){this.emitter?.killAll(),this.emitter?.stop()}reset(){this.createEmitters()}}const{KEY:dt,FRAME:f}=r.EFFECTS;class Et extends Phaser.GameObjects.Particles.ParticleEmitterManager{config;emitter;constructor(t,e){super(t,dt,f.BLANK),this.config=e||{},this.scene.add.existing(this)}createEmitters(){const{FX_CONFETTI_SMALL_1:t,FX_CONFETTI_SMALL_2:e,FX_CONFETTI_SMALL_3:s,FX_CONFETTI_SMALL_4:i}=f,n=1/GameCore.Utils.Image.getImageScale(),o={on:!1,particleBringToTop:!0,frame:[t,e,s,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,alpha:{start:1,end:.8},scale:{min:n*.6,max:n*1},lifespan:{min:2e3,max:3e3},speedX:{min:-100,max:100},speedY:{min:-20,max:-40},gravityY:50,rotate:{start:-360*3,end:0},angle:{min:110,max:145}},c=N(o,this.config);this.emitter=this.createEmitter(c)}run(t,e,s){this.stop(),this.emitter.setQuantity(t),this.emitter.setPosition(e,s),this.emitter.start()}explode(t,e,s){this.emitter||this.createEmitters(),this.emitter.explode(t,e,s)}stop(){this.emitter?.killAll(),this.emitter?.stop(),this.emitter?.remove(),this.createEmitters()}}const{KEY:gt,FRAME:y}=r.DEFAULT;class xt extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitter;constructor(t){super(t,gt,y.ICON_DIAMOND),this.createEmitters(),this.setActive(!1),this.setVisible(!1),this.scene.add.existing(this)}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:y.ICON_DIAMOND,gravityY:160,angle:{min:-180,max:0},speed:{min:50,max:200},scale:{min:t*.3,max:t*1},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:1500})}explode(t,e,s){this.setActive(!0),this.setVisible(!0),this.emitter.explode(t,e,s)}}class B extends Phaser.GameObjects.Particles.Particle{scale;constructor(t){super(t)}update(t,e,s){const i=super.update(t,e,s);return this.updateScale(),this.updateVelocity(),i}setScale(t){this.scale=Phaser.Math.FloatBetween(t.min,t.max)}easeInCubic(t){return t*t*t}updateScale(){const t=this.easeInCubic(1-this.lifeT);this.scaleX=this.scale*Math.sin(t*Math.PI),this.scaleY=this.scale*Math.sin(t*Math.PI)}updateVelocity(){this.velocityX+=Phaser.Math.Between(-1,1)}}const{KEY:At,FRAME:St}=r.EFFECTS,T=St;class ft extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;emitter;constructor(t){super(t,At,T.FX_SPARK_YELLOW),this.createEmitZone(),this.createEmitters(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({frame:T.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},frequency:200,speedX:{min:-1,max:1},speedY:{min:7,max:11},lifespan:{min:1e3,max:1500},scale:{min:.01,max:.015},emitCallback:e=>{e.setScale({min:t/4,max:t})},particleClass:B})}run(t,e,s,i,n){this.stop(),this.emitZone.setSize(i,n),this.emitZone.setPosition(e-i/2,s-n/2),this.emitter.setQuantity(t),this.emitter.start()}stop(){this.emitter?.killAll(),this.emitter?.stop()}}const{KEY:yt,FRAME:P}=r.EFFECTS;class Tt extends Phaser.GameObjects.Particles.ParticleEmitterManager{deathZone;emitter;constructor(t){super(t,yt,P.FX_SPARK),this.createDeathZone(),this.createEmitters(),this.setActive(!1),this.setVisible(!1),this.scene.add.existing(this)}createDeathZone(){this.deathZone=new Phaser.Geom.Circle}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale(),e=[8443204,2928867,12013036,16376097,15285798];this.emitter=this.createEmitter({on:!1,frame:P.ANIMATION_STAR_X+"1",speed:{min:85,max:150},alpha:{start:1,end:0},tint:e,scale:t/2,deathZone:{source:this.deathZone,type:"onLeave"},lifespan:1e3})}explode(t,e,s,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(e,s),this.emitter.explode(t,e,s)}}const{KEY:Pt,FRAME:F}=r.EFFECTS;class Ft extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;timeScaleTween;emitter;constructor(t){super(t,Pt,F.FX_STAR_YELLOW),this.scene=t,this.createEmitZone(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:F.FX_STAR_YELLOW,tint:[16449272,10471662,16381924,14663817],emitZone:{source:this.emitZone},reserve:3,timeScale:1,frequency:10,maxParticles:300,speedY:{min:-100,max:-350},alpha:{start:.2,end:1},scale:{start:t*.6,end:t*.1},lifespan:{min:5e3,max:1e4}})}run(t,e,s,i,n){this.stop(),this.reset(),this.emitZone.setSize(i,n),this.emitZone.setPosition(e-i/2,s-n/2),this.emitter.setQuantity(t),this.emitter.start(),this.runTimeScaleAnimation()}stop(){this.timeScaleTween?.stop(),this.emitter?.killAll(),this.emitter?.stop()}reset(){this.createEmitters()}runTimeScaleAnimation(){if(!this.timeScaleTween){this.timeScaleTween=this.scene.tweens.add({targets:[this.emitter],duration:2e3,ease:Phaser.Math.Easing.Quartic.In,props:{frequency:{from:1,to:200},timeScale:{from:20,to:1}}});return}this.timeScaleTween.restart()}}const{KEY:Ct,FRAME:wt}=r.EFFECTS,C=wt;class kt extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;emitter;constructor(t){super(t,Ct,C.FX_SPARK_YELLOW),this.createEmitZone(),this.createEmitters(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({frame:C.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},frequency:200,speedX:{min:-1,max:1},speedY:{min:-9,max:-13},lifespan:{min:1e3,max:1500},scale:{min:.01,max:.015},emitCallback:e=>{e.setScale({min:t/4,max:t})},particleClass:B})}run(t,e,s,i,n){this.stop(),this.emitZone.setSize(i,n),this.emitZone.setPosition(e-i/2,s-n/2),this.emitter.setQuantity(t),this.emitter.start()}stop(){this.emitter?.killAll(),this.emitter?.stop()}}const{KEY:bt,FRAME:w}=r.EFFECTS;class R extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;emitter;constructor(t){super(t,bt,w.FX_STAR_YELLOW),this.createEmitZone(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:w.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:t*1,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})}run(t,e,s,i,n){this.stop(),this.reset(),this.emitZone.setSize(i,n),this.emitZone.setPosition(e-i/2,s-n/2),this.emitter.setQuantity(t),this.emitter.start()}stop(){this.emitter?.killAll(),this.emitter?.stop()}reset(){this.createEmitters()}}const{KEY:It,FRAME:k}=r.EFFECTS;class Ot extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;emitter;constructor(t){super(t,It,k.FX_STAR_YELLOW),this.scene=t,this.createEmitZone(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/GameCore.Utils.Image.getImageScale();this.emitter=this.createEmitter({on:!1,frame:k.FX_STAR_WHITE,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:80,maxParticles:15,scale:{start:0,end:t*1,ease:Phaser.Math.Easing.Bounce.Out},lifespan:400})}run(t,e,s,i,n){this.stop(),this.reset(),this.emitZone.setSize(i,n),this.emitZone.setPosition(e-i/2,s-n/2),this.emitter.setQuantity(t),this.emitter.start()}explode(t,e,s,i,n){this.stop(),this.reset(),this.emitZone.setSize(i,n),this.emitZone.setPosition(-i/2,-n/2),this.emitter.explode(t,e,s)}stop(){this.emitter?.killAll(),this.emitter?.stop()}reset(){this.createEmitters()}}const{KEY:Mt,FRAME:vt}=r.EFFECTS,Bt=vt;class Rt{scene;name;animation1;animation2;constructor(t){this.scene=t,this.name="SlideToTopAnimation"}run=()=>{const t=new _({targets:[this.scene.source],delay:250,duration:600,ease:"Back.easeInOut",props:{scale:1,y:{from:500,to:200}}});t?.play(),t.next(this.runStarTwinkle),this.animation1=t};stop=()=>{this.animation1.stop(),this.animation2?.stop(),this.scene.alignObjects()};runStarTwinkle=()=>{const t=new R(this.scene),{x:e,y:s,displayWidth:i,displayHeight:n}=this.scene.source;t.run(1,e,s,i,n),this.animation2=t}}class Yt{scene;name;confetti1;confetti2;constructor(t){this.scene=t,this.name="ConfettiSmallAnimation"}run=()=>{const t=this.scene,e=new A(t,{speedX:{min:-20,max:100},rotate:{start:-360*3,end:0}}),s=new A(t,{speedX:{min:20,max:-100},rotate:{start:0,end:360*3}}),{width:i}=t.gameZone;e.run(1,0,0),s.run(1,i,0),this.confetti1=e,this.confetti2=s};stop=()=>{this.confetti1?.stop(),this.confetti2?.stop(),this.confetti1?.kill(),this.confetti2?.kill()}}class Zt{scene;name;confetti;constructor(t){this.scene=t,this.name="ConfettiHexagonAnimation"}run=()=>{const t=this.scene,e=new pt(t),{x:s,y:i}=t.target;e.run(2,s,i),this.confetti=e};stop=()=>{this.confetti.stop(),this.confetti.kill()}}class Nt{scene;name;animation;constructor(t){this.scene=t,this.name="StarExplosive"}run=()=>{const t=this.scene;this.animation||(this.animation=new K(t));const{x:e,y:s}=t.source;this.animation.explode(10,e,s)};stop=()=>{this.animation.pause(),this.animation.kill()}}class _t{scene;name;animation;constructor(t){this.scene=t,this.name="DiamondsExplosive"}run=()=>{const t=this.scene,e=new xt(t);e.explode(20,t.source.x,t.source.y),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class Kt{scene;name;animation;constructor(t){this.scene=t,this.name="SparksExplosive"}run=()=>{const t=this.scene,e=new M(t);e.explode(100,t.source.x,t.source.y,180),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class Lt{scene;name;animation;constructor(t){this.scene=t,this.name="SparksIdle"}run=()=>{const t=this.scene,e=new R(t),{x:s,y:i,displayWidth:n,displayHeight:o}=t.source;e.run(1,s,i,n,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class Dt{scene;name;animation;constructor(t){this.scene=t,this.name="StarTwinkleUp"}run=()=>{const t=this.scene,e=new L(t),{x:s,y:i,displayWidth:n,displayHeight:o}=t.source;e.run(1,s,i,n,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class jt{scene;name;animation;constructor(t){this.scene=t,this.name="StarWhiteTwinkle"}run=()=>{const t=this.scene,e=new Ot(t),{x:s,y:i,displayWidth:n,displayHeight:o}=t.source;e.run(1,s,i,n,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class Xt{scene;name;animation;constructor(t){this.scene=t,this.name="CometTwinkle"}run=()=>{const t=this.scene,e=new v(t),{x:s,y:i,displayWidth:n,displayHeight:o}=t.source;e.run(1,s,i,n,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class Gt{scene;name;animation;constructor(t){this.scene=t,this.name="BigStarExplosive"}run=()=>{const t=this.scene,e=new D(t);Phaser.Display.Align.In.Center(t.source,t.gameZone),Phaser.Display.Align.In.Center(e,t.source),e.run(),this.animation=e};stop=()=>{this.animation.kill(),this.scene.alignObjects()}}class Ut{scene;name;animation;constructor(t){this.scene=t,this.name="StarsFlyUp"}run=()=>{const t=this.scene,e=new Ft(t),{width:s,height:i}=t.gameZone;e.run(1,s/2,i,s,i),this.animation=e};stop=()=>{this.animation.stop(),this.animation.kill()}}class $t{scene;name;animation;constructor(t){this.scene=t,this.name="ShakeHorizontal"}run=()=>{const t=this.scene,e=new j({targets:[t.source]});e.play(),this.animation=e};stop=()=>{this.animation.stop(),this.scene.alignObjects()}}class zt{scene;name;animation1;animation2;animation3;constructor(t){this.scene=t,this.name="CurveAnimation"}run=()=>{const t=this.scene,{x:e,y:s}=t.target,{x:i,y:n}=t.source,o={x:i,y:n},c={x:e,y:s};t.objects.setVisible(!1);const p=new v(t),d=250,E=40,g=new X({targets:[t.objects.getChildren()[0]],delay:t.tweens.stagger(80,{}),duration:Phaser.Math.RND.between(1e3,2500),curve:[[o.x,o.y],[o.x-Phaser.Math.RND.between(-d,d),o.y-Phaser.Math.RND.between(-E,E)],[c.x,c.y]],onComplete:()=>{t.objects.setVisible(!1),this.run(),this.runSparksExplosive()},onCurveUpdate:x=>{const Y=x.x+Phaser.Math.RND.between(-16,16),Z=x.y+Phaser.Math.RND.between(-16,16);p.explode(1,Y,Z)}});g.play(),this.animation1=p,this.animation2=g};stop=()=>{this.animation1?.stop(),this.animation1?.kill(),this.animation2?.stop(),this.animation3?.pause(),this.animation3?.kill()};runSparksExplosive=()=>{const t=this.scene,e=new M(t);e.explode(100,t.target.x,t.target.y,180),this.animation3=e}}class Wt{scene;name;animation;constructor(t){this.scene=t,this.name="StarTouchAnimation"}run=()=>{const t=this.scene,e=t.make.image({key:Mt,frame:Bt.FX_CIRCLE_LIGHT});e.setWorldSize(75.5,75),e.setPosition(t.source.x,t.source.y);const s=1/GameCore.Utils.Image.getImageScale(),i=new G({targets:[e],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:s*2,alpha:0},onStop:()=>{e.kill()}});i.play(),this.animation=i};stop=()=>{this.animation.stop()}}class Ht{scene;name;animation;constructor(t){this.scene=t,this.name="CoinsExplosive"}run=()=>{if(!this.animation){const{x:s,y:i}=this.scene.target;this.animation=new ht(this.scene,s,i)}const{x:t,y:e}=this.scene.source;this.animation.explode(15,t,e)};stop=()=>{}}class Vt{scene;name;animation;constructor(t){this.scene=t,this.name="CoinsExplosive2"}run=()=>{this.animation||(this.animation=new U(this.scene));const{x:t,y:e}=this.scene.source,{x:s,y:i}=this.scene.target;this.animation.explode(15,t,e,s,i)};stop=()=>{}}class Qt{scene;name;timer;animation;constructor(t){this.scene=t,this.name="PaperFireworkExplosive"}run=()=>{this.animation=new Tt(this.scene);const t=Phaser.Math.Between(0,375),e=Phaser.Math.Between(0,620);this.animation.explode(100,t,e,90),this.timer?.remove(),this.timer=this.scene.time.addEvent({delay:Phaser.Math.Between(100,800),callback:this.run})};stop=()=>{this.timer?.remove()}}class qt{scene;name;animation;constructor(t){this.scene=t,this.name="ConfettiSmallFly"}run=()=>{this.animation?.destroy(),this.animation=new Et(this.scene,{speedY:{min:-12,max:-200},rotate:{start:0,end:360*3},angle:{min:320,max:355}});const{x:t,y:e}=this.scene.source;this.animation.explode(100,t,e)};stop=()=>{}}class Jt{scene;name;animation;constructor(t){this.scene=t,this.name="PaperFireworksCelebration"}run=()=>{this.animation||(this.animation=new $(this.scene)),this.animation.run(0,this.scene.gameZone.height,375,200)};stop=()=>{}}class te{scene;name;animation;constructor(t){this.scene=t,this.name="StarsExplosiveSmall"}run=()=>{this.animation||(this.animation=new z(this.scene));const{x:t,y:e}=this.scene.source;this.animation.explode(12,t,e)};stop=()=>{}}class ee{scene;name;animation;constructor(t){this.scene=t,this.name="FallingStarSparkle"}run=()=>{this.animation||(this.animation=new ft(this.scene));const{x:t,y:e,displayWidth:s,displayHeight:i}=this.scene.target;this.animation.run(1,t,e,s*2,i)};stop=()=>{this.animation.stop()}}class se{scene;name;animation;constructor(t){this.scene=t,this.name="StarSparkle"}run=()=>{this.animation||(this.animation=new kt(this.scene));const{x:t,y:e,displayWidth:s,displayHeight:i}=this.scene.target;this.animation.run(1,t,e,s*2,i)};stop=()=>{this.animation.stop()}}class ie extends W{payload;constructor(t,e,s,i){super(t,e.key,e.button,s,i),this.payload=e,this.createIcon(),this.createText()}createIcon(){const t=this.scene.add.image(0,0,this.payload.key,this.payload.icon);t.setWorldSize(43,43),this.add(t),Phaser.Display.Align.In.LeftCenter(t,this,-25)}createText(){const{text:t}=this.payload,e=this.scene.make.bitmapText({font:u.PRIMARY.KEY,size:this.scene.fontSize(24),text:t,origin:{x:.2,y:.5}});this.add(e)}}const{KEY:b,FRAME:ne}=r.DEFAULT;class ae extends H{animationNameStr;animationName;constructor(t,e){const s=t.textures.exists(e);super(t,{key:s?e:b,frame:s?"":ne.BLANK,width:160,height:120}),this.updateSize(),this.createText(s?b:e||""),this.scene.children.bringToTop(this),!s&&this.loadImage(e)}createText(t){this.animationNameStr=t;const e=this.scene.make.bitmapText({font:u.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.normalizeText(t),origin:{x:.5,y:0}});e.setPosition(0,this.button.height/2),e.setCenterAlign(),e.setMaxWidth(this.button.width,95),this.animationName=e,this.add([e])}normalizeText(t){return t.replace(/\.?([A-Z]+)/g,"_$1").replace(/^_/,"")}loadImage(t){const e=this.scene.load.image(t,`./assets/animation-thumbnails/${t}.png`);this.scene.load.start(),e.on("filecomplete",s=>{if(s===t){const{width:i,height:n}=this.button;this.createButton(s,"",i-6,n-6),this.bringToTop(this.animationName)}})}getName(){return this.normalizeText(this.animationNameStr)}}class oe extends V{scene;nextItemPos;animationButtons=[];openAnimationScrollerButton;currentAnimation;currentAnimationText;background;constructor(t){const{width:e,height:s}=t.gameZone,i={listConfigs:[],width:e,height:s};super(t,i),this.scene=t;const n=5;this.nextItemPos={x:0,y:-s/2,offsetX:-e/4-n},this.setPosition(375/2,667/2),this.setEnable(!0),this.createBackground(e,s),this.createOpenButton(),this.createCurrentAnimationText(),this.closeScroller()}createBackground(t,e){this.background=this.scene.make.image({key:r.DEFAULT.KEY,frame:r.DEFAULT.FRAME.BLANK}),this.background.setOrigin(0,0),this.background.setTint(0),this.background.setWorldSize(t,e),this.scene.children.bringToTop(this),this.background.kill()}createOpenButton(){const{KEY:t,FRAME:e}=r.DEFAULT,s=new ie(this.scene,{key:t,button:e.BUTTON_BLUE,icon:e.BLANK,text:"     Menu"},148,60);s.setPosition(0,50),s.kill(),this.openAnimationScrollerButton=s,this.openAnimationScrollerButton.onClick=this.openScroller}createCurrentAnimationText(){this.currentAnimationText=this.scene.make.bitmapText({font:u.PRIMARY.KEY,size:this.scene.fontSize(18),text:"",origin:{x:.5,y:0}},!0),this.currentAnimationText.setMaxWidth(300,95),this.currentAnimationText.setCenterAlign(),Phaser.Display.Align.In.TopCenter(this.currentAnimationText,this.scene.gameZone,0,-50)}openScroller=()=>{this.currentAnimation?.stop(),this.revive(),this.currentAnimationText.kill(),this.openAnimationScrollerButton.kill(),this.background.revive()};closeScroller=()=>{this.background.kill(),this.currentAnimationText.revive(),this.openAnimationScrollerButton.revive(),this.kill()};addButton(t){const{x:e,y:s,offsetX:i}=this.nextItemPos,n=34,o=new ae(this.scene,t.name);o.setPosition(e+i,s+o.height/2+n),this.nextItemPos.offsetX=-i,i>0&&(this.nextItemPos.y+=o.height+n),this.animationButtons.push(o),o.onClick=()=>{this.closeScroller(),this.currentAnimation?.stop(),t.run(),this.currentAnimation=t,this.currentAnimationText.setText(o.getName())},super.addItem(o)}runCurrentAnim=()=>{this.currentAnimation&&(this.currentAnimation.stop(),this.currentAnimation.run())}}const{KEY:h,FRAME:m}=r.EFFECTS;class re extends I{target;source;objects;scroller;preload(){this.textures.removeKey(r.EFFECTS.KEY),this.load.multiatlas({key:r.ANIMATION_SCENE.KEY,path:r.ANIMATION_SCENE.PATH,atlasURL:r.ANIMATION_SCENE.JSON})}create(){super.create(),this.createBackground(h,m.BLANK,0),this.createTargetObject(),this.createSourceObject(),this.createMultiObjects(),this.createSpriteAnimations(),this.createAnimationScroller(),this.alignObjects();const{POINTER_DOWN:t}=Phaser.Input.Events;this.gameZone.setInteractive().on(t,this.scroller.runCurrentAnim)}createAnimationScroller(){const t=new oe(this);t.addButton(new Gt(this)),t.addButton(new Ht(this)),t.addButton(new Vt(this)),t.addButton(new Xt(this)),t.addButton(new Zt(this)),t.addButton(new Yt(this)),t.addButton(new qt(this)),t.addButton(new zt(this)),t.addButton(new _t(this)),t.addButton(new ee(this)),t.addButton(new Qt(this)),t.addButton(new Jt(this)),t.addButton(new $t(this)),t.addButton(new Rt(this)),t.addButton(new Kt(this)),t.addButton(new Lt(this)),t.addButton(new Nt(this)),t.addButton(new te(this)),t.addButton(new Ut(this)),t.addButton(new se(this)),t.addButton(new Wt(this)),t.addButton(new Dt(this)),t.addButton(new jt(this)),this.scroller=t}createTargetObject(){this.target=this.make.image({key:h,frame:m.BLANK}),this.target.setTint(5162135),this.target.setWorldSize(50,50)}createSourceObject(){this.source=this.make.image({key:h,frame:m.BLANK}),this.source.setTint(4824278),this.source.setWorldSize(50,50)}createMultiObjects(){this.objects=this.make.group({repeat:10,key:h,frame:m.BLANK,classType:Phaser.GameObjects.Image,createMultipleCallback:t=>{t.forEach(e=>{e.setSize(80,80)})}}),this.objects.setTint(12433838),this.objects.setVisible(!1)}createSpriteAnimations(){const t=new nt(this.anims);this.anims.add(l.CONFETTI_HEXAGON.KEY,t)}alignObjects(){Phaser.Display.Align.In.TopCenter(this.target,this.gameZone,0,-100),Phaser.Display.Align.In.BottomCenter(this.source,this.gameZone,0,-150)}}const ce=re,pe=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{ue as T,pe as i};
