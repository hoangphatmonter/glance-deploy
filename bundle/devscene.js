import{S as c,B as D,D as b,a as et,m as st,b as it,d as K,C as O,e as nt,f as Z,h as at,i as ot,j as $,k as rt,l as ct,n as ht,o as mt,p as lt,F as G,q as ut,I as Et}from"./game.js";const{DEMO_SPINE:P}=c;class pt extends D{fontName;text;run=()=>{};preload(){this.events.on("wake",this.run),this.events.once("create",this.run),this.scene.isPaused(),this.fontName="Bebas",this.textStyler.addFont({type:"local",fontName:this.fontName,fontType:"truetype"}),this.load.spine(P.KEY,P.jsonPATH,P.atlasPATH,!0)}create(){super.create(),this.cameras.main.setBackgroundColor(4868682),this.createSpine(),this.createTextObject()}createTextObject(){this.text=this.add.text(0,0,"Text Styler",{fontFamily:this.fontName,fontSize:"50px",color:"#ffffff",stroke:"#000000",strokeThickness:3}),this.text.setHighQuality(),Phaser.Display.Align.In.Center(this.text,this.gameZone)}createSpine(){const t=this.add.spine(200,300,P.KEY);t.setScale(.5);const e=t.getAnimationList();console.log("ðŸ¤– ? Spine animations",e);const s=Math.floor(Math.random()*e.length);t.setAnimation(0,e[s],!0)}}const Ss=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"})),{KEY:x,FRAME:dt}=c.EFFECTS,T=dt,r={CONFETTI_HEXAGON:{KEY:"confetti-hexagon-animation",TEXTURE:x,PREFIX:T.FX_CONFETTI_HEXAGON,FRAME_RATE:8,END:5,ZERO_PAD:0},CONFETTI_STAR_X:{KEY:"confetti-star-x",TEXTURE:x,PREFIX:T.ANIMATION_STAR_X,FRAME_RATE:4,END:4,ZERO_PAD:0},CONFETTI_STAR_Y:{KEY:"confetti-star-y",TEXTURE:x,PREFIX:T.ANIMATION_STAR_Y,FRAME_RATE:4,END:4,ZERO_PAD:0},RIBBON_A:{KEY:"animation-ribbon-a",TEXTURE:x,PREFIX:T.PREFIX_ANIMATION_RIBBON_CONFETTI_A,FRAME_RATE:16,END:3,ZERO_PAD:0},RIBBON_B:{KEY:"animation-ribbon-b",TEXTURE:x,PREFIX:T.PREFIX_ANIMATION_RIBBON_CONFETTI_B,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_C:{KEY:"animation-ribbon-c",TEXTURE:x,PREFIX:T.PREFIX_ANIMATION_RIBBON_CONFETTI_C,FRAME_RATE:16,END:4,ZERO_PAD:0},RIBBON_D:{KEY:"animation-ribbon-d",TEXTURE:x,PREFIX:T.PREFIX_ANIMATION_RIBBON_CONFETTI_D,FRAME_RATE:16,END:4,ZERO_PAD:0}},{KEY:ft,TEXTURE:At,FRAME_RATE:gt,END:xt,PREFIX:Tt,ZERO_PAD:Rt}=r.CONFETTI_HEXAGON;class Pt extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:gt,frames:t.generateFrameNames(At,{prefix:Tt,end:xt,zeroPad:Rt}),yoyo:!0,showOnStart:!0};super(t,ft,e)}}const{KEY:Ft,FRAME:St}=c.EFFECTS,bt=St;class Ct extends Phaser.GameObjects.Image{onUpdate;onComplete;positions;eatAnimation;constructor(t,e){super(t,0,0,Ft,bt.COIN),this.setWorldSize(16.5,15.5),this.positions=e,this.setDepth(b.PRIORITY),this.createAnimation(),this.scene.add.existing(this)}createAnimation(){const t=1/this.scene.world.getPixelRatio(),{from:e,to:s}=this.positions;this.eatAnimation=this.scene.add.tween({targets:this,duration:1125,ease:"Circ.easeInOut",paused:!0,props:{x:{from:e.x,to:s.x},y:{from:e.y,to:s.y},scale:{from:t,to:t}},onUpdate:()=>{typeof this.onUpdate=="function"&&this.onUpdate()},onComplete:()=>{this.destroy(),typeof this.onComplete=="function"&&this.onComplete()}})}run(){this.eatAnimation.play()}}const{KEY:yt,FRAME:wt}=c.EFFECTS,_=wt;class Ot extends Phaser.GameObjects.Particles.ParticleEmitterManager{onUpdate;onComplete;emitter;circle;constructor(t,e,s){super(t,yt,_.COIN),this.createEmitters(e,s),this.setActive(!1),this.setVisible(!1),this.scene.add.existing(this)}createEmitters(t,e){const s=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:_.COIN,angle:{min:0,max:360},speed:{min:240,max:340},scale:{start:s,end:s},lifespan:5e3,emitCallback:i=>{i.accelerationX=-i.velocityX/1.2,i.accelerationY=-i.velocityY/1.2},deathCallback:i=>{const a=new Ct(this.scene,{from:{x:i.x,y:i.y},to:{x:t,y:e}});a.onUpdate=()=>{typeof this.onUpdate=="function"&&this.onUpdate()},a.onComplete=()=>{typeof this.onComplete=="function"&&this.onComplete()},a.setDepth(b.ON_TOP),a.run()}})}explode(t,e,s){this.setActive(!0),this.setVisible(!0),this.circle||(this.circle=new Phaser.Geom.Circle(e,s,100)),this.emitter.deathZone=new Phaser.GameObjects.Particles.Zones.DeathZone(this.circle,!1),this.emitter.explode(t,e,s)}}const{KEY:_t,FRAME:N}=c.EFFECTS;class L extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitter;constructor(t){super(t,_t,N.FX_STAR_YELLOW),this.scene=t,this.createEmitters(),this.setActive(!1),this.setVisible(!1),this.scene.add.existing(this)}createEmitters(){const t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:N.FX_STAR_YELLOW,alpha:{start:1,end:.8},speed:{min:50,max:150},scale:{start:t*.4,end:t*1},lifespan:{min:600,max:1500}})}explode(t,e,s){this.setActive(!0),this.setVisible(!0),this.emitter.explode(t,e,s)}}const{KEY:Nt,FRAME:I}=c.EFFECTS;class U extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitter;constructor(t){super(t,Nt,I.FX_COMET),this.scene=t,this.createEmitters(),this.setActive(!1),this.setVisible(!1),this.scene.add.existing(this)}createEmitters(){const t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:I.FX_COMET,alpha:{start:1,end:.8},speed:{min:40,max:80},scale:{start:t*.4,end:t*.7},lifespan:{min:400,max:600}})}explode(t,e,s){this.revive(),this.emitter.explode(t,e,s)}}const{KEY:It,FRAME:Bt}=c.EFFECTS,Mt=Bt;class Yt extends Phaser.GameObjects.Container{coinGroup;containerGroup;startsExplosive;startsExplosiveSmall;startsExplosiveSmallTimer;constructor(t){super(t),this.setVisible(!0),this.coinGroup=this.scene.add.group({defaultKey:It,defaultFrame:Mt.COIN}),this.containerGroup=this.scene.add.group({classType:Phaser.GameObjects.Container}),this.startsExplosive=new L(t),this.startsExplosive.setDepth(b.ON_TOP+1),this.startsExplosiveSmall=new U(t),this.startsExplosiveSmall.setDepth(b.ON_TOP+1),this.scene.add.existing(this)}createConfigOne(t,e,s){const i=t/300,a=new Phaser.Math.Vector2(0,0),o=new Phaser.Math.Vector2(0,-t),l=s?-1:1,h=Phaser.Math.RND.between(-90,90),u=h<0?1:(300-Math.abs(h))/300,f=(h+90)/180*180*u*i,m=Phaser.Math.RND.between(20,f+20),E=new Phaser.Math.Vector2(1,0);E.setAngle(h*Math.PI/180);const p=Phaser.Math.RND.between(-Math.abs(h)-15,-Math.abs(h)+15),d=m*(100-Math.abs(h))/100*i,A=Phaser.Math.RND.between(d*.2,d),C=new Phaser.Math.Vector2(1,0);C.setAngle(p*Math.PI/180);const z=l*E.x*m,W=E.y*m,H=l*C.x*A,V=C.y*A-t,q=new Phaser.Math.Vector2(z,W),Q=new Phaser.Math.Vector2(H,V),J=new Phaser.Curves.CubicBezier(a,q,Q,o),tt=Phaser.Math.RND.between(1500+m*3,2e3+m*3),g=this.coinGroup.get(0,0);return g.revive(),g.setRotation(-e.rotation),g.setWorldSize(24,22),e.add(g),{from:0,to:1,duration:tt,ease:"Sine.In",onUpdate:y=>{const R=J.getPointAt(y.getValue());g.setPosition(R.x,R.y)},onComplete:y=>{if(g.kill(),y.totalProgress<1||(this.scene.audio.playSound(et.DIAMONDS_EAT),this.startsExplosiveSmallTimer&&!this.startsExplosiveSmallTimer.hasDispatched))return;this.startsExplosiveSmallTimer=this.scene.time.delayedCall(100,()=>null);const R=g.getWorldPosition();this.startsExplosiveSmall.explode(10,R.x,R.y)}}}explode(t,e,s,i,a){if(t<=0)return[];this.startsExplosive.explode(30,e,s);const o=new Phaser.Math.Vector2(i-e,a-s),l=o.length(),h=this.containerGroup.get(e,s);h.setRotation(o.angle()+Math.PI/2),h.revive(),this.add(h);let u,f=0;const m=[];for(let p=0;p<t;p++){const d=this.createConfigOne(l,h,p%2===0),A=this.scene.tweens.addCounter(d);m.push(A),d.duration>f&&(f=d.duration,u=A)}const E=()=>{m.forEach(p=>{p.complete()}),this.startsExplosive.emitters.getAt(0)?.killAll(),this.startsExplosiveSmall.emitters.getAt(0)?.killAll(),h.kill()};return u?.once(Phaser.Tweens.Events.TWEEN_COMPLETE,()=>{h.kill(),this.scene.events.off("sleep",E)}),this.scene.events.once("sleep",E),m}}class vt extends Phaser.GameObjects.Particles.Particle{lastChange=0;currentFrame=-1;isYoyo=!1;confettiAnim;constructor(t){super(t),this.lastChange=0,this.confettiAnim=window.game.anims.get(r.CONFETTI_HEXAGON.KEY)}update(t,e,s){const i=super.update(t,e,s);return this.lastChange+=t,this.lastChange>=this.confettiAnim.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.confettiAnim.frames.length&&(this.isYoyo=!0,this.currentFrame-=2),this.frame=this.confettiAnim.frames[this.currentFrame].frame,this.lastChange-=this.confettiAnim.msPerFrame),i}}const{KEY:kt,FRAME:Xt}=c.EFFECTS;class Dt extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitter;constructor(t){super(t,kt,Xt.FX_CONFETTI_HEXAGON+"0"),this.setActive(!1),this.scene.add.existing(this)}createEmitters(){const t=1/this.scene.world.getPixelRatio(),e={on:!1,particleBringToTop:!0,particleClass:vt,tint:[14223402,1021804,5420529,16702052],timeScale:1,reserve:20,frequency:100,maxParticles:2,gravityY:-5,speedX:{min:-100,max:100},speedY:{min:50,max:150},alpha:{start:1,end:.2},rotate:{start:0,end:360*3},scale:{min:t*1,max:t*.3},angle:{min:10,max:170},lifespan:{min:8e3,max:12e3}};this.emitter=this.createEmitter(e)}run(t,e,s){this.setActive(!0),this.stop(),this.reset(),this.emitter.setQuantity(t),this.emitter.setPosition(e,s),this.emitter.start()}stop(){this.emitter?.killAll(),this.emitter?.stop()}reset(){this.createEmitters()}}const{KEY:Kt,FRAME:B}=c.EFFECTS;class Zt extends Phaser.GameObjects.Particles.ParticleEmitterManager{config;emitter;constructor(t,e){super(t,Kt,B.BLANK),this.config=e||{},this.scene.add.existing(this)}createEmitters(){const{FX_CONFETTI_SMALL_1:t,FX_CONFETTI_SMALL_2:e,FX_CONFETTI_SMALL_3:s,FX_CONFETTI_SMALL_4:i}=B,a=1/this.scene.world.getPixelRatio(),o={on:!1,particleBringToTop:!0,frame:[t,e,s,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,alpha:{start:1,end:.8},scale:{min:a*.6,max:a*1},lifespan:{min:2e3,max:3e3},speedX:{min:-100,max:100},speedY:{min:-20,max:-40},gravityY:50,rotate:{start:-360*3,end:0},angle:{min:110,max:145}},l=st(o,this.config);this.emitter=this.createEmitter(l)}run(t,e,s){this.stop(),this.emitter.setQuantity(t),this.emitter.setPosition(e,s),this.emitter.start()}explode(t,e,s){this.emitter||this.createEmitters(),this.emitter.explode(t,e,s)}stop(){this.emitter?.killAll(),this.emitter?.stop(),this.emitter?.remove(),this.createEmitters()}}class j extends Phaser.GameObjects.Particles.Particle{scale;constructor(t){super(t)}update(t,e,s){const i=super.update(t,e,s);return this.updateScale(),this.updateVelocity(),i}setScale(t){this.scale=Phaser.Math.FloatBetween(t.min,t.max)}easeInCubic(t){return t*t*t}updateScale(){const t=this.easeInCubic(1-this.lifeT);this.scaleX=this.scale*Math.sin(t*Math.PI),this.scaleY=this.scale*Math.sin(t*Math.PI)}updateVelocity(){this.velocityX+=Phaser.Math.Between(-1,1)}}const{KEY:$t,FRAME:Gt}=c.EFFECTS,M=Gt;class Lt extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;emitter;constructor(t){super(t,$t,M.FX_SPARK_YELLOW),this.createEmitZone(),this.createEmitters(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({frame:M.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},frequency:200,speedX:{min:-1,max:1},speedY:{min:7,max:11},lifespan:{min:1e3,max:1500},scale:{min:.01,max:.015},emitCallback:e=>{e.setScale({min:t/4,max:t})},particleClass:j})}run(t,e,s,i,a){this.stop(),this.emitZone.setSize(i,a),this.emitZone.setPosition(e-i/2,s-a/2),this.emitter.setQuantity(t),this.emitter.start()}stop(){this.emitter?.killAll(),this.emitter?.stop()}}const{KEY:Ut,FRAME:jt}=c.EFFECTS,Y=jt;class zt extends Phaser.GameObjects.Particles.ParticleEmitterManager{deathZone;emitter;constructor(t){super(t,Ut,Y.FX_SPARK),this.createDeathZone(),this.createEmitters(),this.setActive(!1),this.setVisible(!1),this.scene.add.existing(this)}createDeathZone(){this.deathZone=new Phaser.Geom.Circle}createEmitters(){const t=1/this.scene.world.getPixelRatio(),e=[8443204,2928867,12013036,16376097,15285798];this.emitter=this.createEmitter({on:!1,frame:Y.ANIMATION_STAR_X+"1",speed:{min:85,max:150},alpha:{start:1,end:0},tint:e,scale:t/2,deathZone:{source:this.deathZone,type:"onLeave"},lifespan:1e3})}explode(t,e,s,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(e,s),this.emitter.explode(t,e,s)}}const{KEY:Wt,TEXTURE:Ht,FRAME_RATE:Vt,END:qt,PREFIX:Qt,ZERO_PAD:Jt}=r.RIBBON_A;class te extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:Vt,frames:t.generateFrameNames(Ht,{prefix:Qt,end:qt,zeroPad:Jt,start:1}),yoyo:!0,showOnStart:!0};super(t,Wt,e)}}const{KEY:ee,TEXTURE:se,FRAME_RATE:ie,END:ne,PREFIX:ae,ZERO_PAD:oe}=r.RIBBON_B;class re extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:ie,frames:t.generateFrameNames(se,{prefix:ae,end:ne,zeroPad:oe,start:1}),yoyo:!0,showOnStart:!0};super(t,ee,e)}}const{KEY:ce,TEXTURE:he,FRAME_RATE:me,END:le,PREFIX:ue,ZERO_PAD:Ee}=r.RIBBON_C;class pe extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:me,frames:t.generateFrameNames(he,{prefix:ue,end:le,zeroPad:Ee,start:1}),yoyo:!0,showOnStart:!0};super(t,ce,e)}}const{KEY:de,TEXTURE:fe,FRAME_RATE:Ae,END:ge,PREFIX:xe,ZERO_PAD:Te}=r.RIBBON_D;class Re extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:Ae,frames:t.generateFrameNames(fe,{prefix:xe,end:ge,zeroPad:Te,start:1}),yoyo:!0,showOnStart:!0};super(t,de,e)}}const{KEY:Pe,TEXTURE:Fe,FRAME_RATE:Se,END:be,PREFIX:Ce,ZERO_PAD:ye}=r.CONFETTI_STAR_X;class we extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:Se,frames:t.generateFrameNames(Fe,{prefix:Ce,end:be,zeroPad:ye,start:1}),yoyo:!0,showOnStart:!0};super(t,Pe,e)}}const{KEY:Oe,TEXTURE:_e,FRAME_RATE:Ne,END:Ie,PREFIX:Be,ZERO_PAD:Me}=r.CONFETTI_STAR_Y;class Ye extends Phaser.Animations.Animation{constructor(t){const e={repeat:-1,frameRate:Ne,frames:t.generateFrameNames(_e,{prefix:Be,end:Ie,zeroPad:Me,start:1}),showOnStart:!0};super(t,Oe,e)}}class ve extends Phaser.GameObjects.Particles.Particle{scene;ribbon;graphics;colorUse;lastChange;currentFrame;isYoyo;isGravityChanged;points;constructor(t){super(t),this.scene=t.manager.scene;const{x:e,y:s}=this.emitter.manager;this.points=new Array(10).fill(null).map(()=>({x:this.x+e,y:this.y+s})),this.isYoyo=!1,this.isGravityChanged=!1,this.lastChange=0,this.currentFrame=-1,this.createGraphics(),this.randomRibbonUsedWhenFall()}randomRibbonUsedWhenFall(){switch(Phaser.Math.Between(0,3)){case 0:this.ribbon=this.scene.anims.get(r.RIBBON_A.KEY);break;case 1:this.ribbon=this.scene.anims.get(r.RIBBON_B.KEY);break;case 2:this.ribbon=this.scene.anims.get(r.RIBBON_C.KEY);break;case 3:this.ribbon=this.scene.anims.get(r.RIBBON_D.KEY);break;default:this.ribbon=this.scene.anims.get(r.RIBBON_A.KEY);break}}setRibbonPosition(t,e){this.points.map(s=>{s.x=t,s.y=e})}createGraphics(){const t=[8443204,2928867,12013036,16376097,15285798];this.colorUse=t[Phaser.Math.Between(0,t.length-1)],this.graphics=this.scene.add.graphics({lineStyle:{width:3,color:this.colorUse}});const{x:e,y:s,depth:i}=this.emitter.manager;this.graphics.setDepth(i),this.graphics.setPosition(e,s)}update(t,e,s){const i=super.update(t,e,s);return this.updateFrames(t),this.updatePoints(),this.updateGraphics(),this.updateGravity(),this.updateVelocity(),this.updateColor(),i}updateFrames(t){this.lastChange+=t,this.lastChange>=this.ribbon.msPerFrame&&(this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1),this.currentFrame>=this.ribbon.frames.length&&(this.isYoyo=!0,this.currentFrame-=1),this.frame=this.ribbon.frames[this.currentFrame].frame,this.lastChange-=this.ribbon.msPerFrame)}updatePoints(){this.graphics.visible&&(this.points.shift(),this.points.push({x:this.x,y:this.y}))}updateGraphics(){this.graphics.visible&&(this.graphics.clear(),this.graphics.strokePoints(this.points))}updateGravity(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.graphics.destroy(),this.emitter.setVisible(!0),this.emitter.setGravityY(45))}updateVelocity(){if(this.graphics.visible){if(this.lifeCurrent>this.life-1800){this.velocityX+=Phaser.Math.Between(-12,12);return}this.velocityX>0?this.velocityX+=Phaser.Math.Between(-10,6):this.velocityX+=Phaser.Math.Between(-6,10)}}updateColor(){this.graphics.visible||(this.tint=this.colorUse)}}class ke extends Phaser.GameObjects.Particles.Particle{scene;isYoyo;isGravityChanged;lastChange;currentFrame;star;starX;starY;constructor(t){super(t),this.isYoyo=!1,this.isGravityChanged=!1,this.lastChange=0,this.currentFrame=-1,this.scene=t.manager.scene,this.starX=this.scene.anims.get(r.CONFETTI_STAR_X.KEY),this.starY=this.scene.anims.get(r.CONFETTI_STAR_Y.KEY),this.star=this.starX}update(t,e,s){const i=super.update(t,e,s);return this.updateGravity(),this.updateVelocity(),this.updateFrameRate(),this.updateFrames(t),i}updateGravity(){this.lifeCurrent>this.life-2e3||this.isGravityChanged||(this.isGravityChanged=!0,this.emitter.setGravityY(15),this.emitter.setSpeedX(0))}updateVelocity(){this.lifeCurrent>this.life-2e3||(this.velocityX>0?this.velocityX+=Phaser.Math.Between(-6,3):this.velocityX+=Phaser.Math.Between(-3,6))}updateFrames(t){if(this.lastChange+=t,this.lastChange>=this.star.msPerFrame){const e=Phaser.Math.RND.between(0,1);this.star=e>0?this.starX:this.starY,this.isYoyo?this.currentFrame--:this.currentFrame++,this.currentFrame<0&&(this.isYoyo=!1,this.currentFrame=1,this.emitter.setAlpha(1)),this.currentFrame>=this.star.frames.length&&(this.isYoyo=!0,this.currentFrame-=1,this.emitter.setAlpha(.8)),this.frame=this.star.frames[this.currentFrame].frame,this.lastChange-=this.star.msPerFrame}}updateFrameRate(){this.lifeCurrent<this.life-2e3?this.star.msPerFrame=150:this.star.msPerFrame=Phaser.Math.RND.between(300,600)}}const{KEY:Xe,FRAME:De}=c.EFFECTS,w=De;class Ke extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitterConfetti;emitterRibbons;ribbonConfig;confettiConfig;width;height;constructor(t){super(t,Xe,w.BLANK),this.emitterRibbons=[],this.emitterConfetti=[],this.createConfigs(),this.createAnimations(),this.scene.add.existing(this)}createConfigs(){const t=[8443204,2928867,12013036,16376097,15285798],e=1/this.scene.world.getPixelRatio();this.ribbonConfig={on:!1,visible:!1,timeScale:1.5,frame:w.BLANK,particleBringToTop:!0,speedY:{min:-480,max:-560},gravityY:290,lifespan:{min:4e3,max:6e3},rotate:{start:0,end:360*5,random:!0},scale:{min:e*.6,max:e},particleClass:ve},this.confettiConfig={on:!1,delay:200,timeScale:2,tint:t,particleBringToTop:!0,frame:w.PREFIX_ANIMATION_RIBBON_CONFETTI_A+"1",speedY:{min:-460,max:-580},gravityY:280,lifespan:{min:5e3,max:8e3},rotate:{start:0,end:360*3},scale:{min:e*.6,max:e},particleClass:ke}}createAnimations(){if(!this.scene.anims.get(r.CONFETTI_STAR_X.KEY)){const t=new we(this.scene.anims);this.scene.anims.add(r.CONFETTI_STAR_X.KEY,t)}if(!this.scene.anims.get(r.CONFETTI_STAR_Y.KEY)){const t=new Ye(this.scene.anims);this.scene.anims.add(r.CONFETTI_STAR_Y.KEY,t)}if(!this.scene.anims.get(r.RIBBON_A.KEY)){const t=new te(this.scene.anims);this.scene.anims.add(r.RIBBON_A.KEY,t)}if(!this.scene.anims.get(r.RIBBON_B.KEY)){const t=new re(this.scene.anims);this.scene.anims.add(r.RIBBON_B.KEY,t)}if(!this.scene.anims.get(r.RIBBON_C.KEY)){const t=new pe(this.scene.anims);this.scene.anims.add(r.RIBBON_C.KEY,t)}if(!this.scene.anims.get(r.RIBBON_D.KEY)){const t=new Re(this.scene.anims);this.scene.anims.add(r.RIBBON_D.KEY,t)}}run(t,e,s,i){this.setPosition(t,e),this.width=s,this.height=i,this.createEmitters(),this.emitterConfetti.forEach(a=>{a.emitParticle(25)}),this.emitterRibbons.forEach(a=>{a.emitParticle(20)})}stop(){this.emitterConfetti.forEach(t=>{t.killAll()}),this.emitterRibbons.forEach(t=>{t.killAll()}),this.kill()}createEmitters(){this.emitterRibbons=[],this.emitterConfetti=[],this.createConfettiLeftEmitter(),this.createConfettiRightEmitter(),this.createRibbonLeftEmitter(),this.createRibbonRightEmitter()}createConfettiLeftEmitter(){const t={...this.confettiConfig,speedX:{min:5,max:90}},e=this.createEmitter(t);this.emitterConfetti.push(e)}createConfettiRightEmitter(){const{width:t}=this,e={...this.confettiConfig,x:t,speedX:{min:-5,max:-90}},s=this.createEmitter(e);this.emitterConfetti.push(s)}createRibbonLeftEmitter(){const t={...this.ribbonConfig,speedX:{min:20,max:80},emitCallback:s=>{s.setRibbonPosition(0,0)}},e=this.createEmitter(t);this.emitterRibbons.push(e)}createRibbonRightEmitter(){const{width:t}=this,e={...this.ribbonConfig,x:t,speedX:{min:-20,max:-80},emitCallback:i=>{i.setRibbonPosition(t,0)}},s=this.createEmitter(e);this.emitterRibbons.push(s)}}const{KEY:Ze,FRAME:v}=c.EFFECTS;class $e extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;timeScaleTween;emitter;constructor(t){super(t,Ze,v.FX_STAR_YELLOW),this.scene=t,this.createEmitZone(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:v.FX_STAR_YELLOW,tint:[16449272,10471662,16381924,14663817],emitZone:{source:this.emitZone},reserve:3,timeScale:1,frequency:10,maxParticles:300,speedY:{min:-100,max:-350},alpha:{start:.2,end:1},scale:{start:t*.6,end:t*.1},lifespan:{min:5e3,max:1e4}})}run(t,e,s,i,a){this.stop(),this.reset(),this.emitZone.setSize(i,a),this.emitZone.setPosition(e-i/2,s-a/2),this.emitter.setQuantity(t),this.emitter.start(),this.runTimeScaleAnimation()}stop(){this.timeScaleTween?.stop(),this.emitter?.killAll(),this.emitter?.stop()}reset(){this.createEmitters()}runTimeScaleAnimation(){if(!this.timeScaleTween){this.timeScaleTween=this.scene.tweens.add({targets:[this.emitter],duration:2e3,ease:Phaser.Math.Easing.Quartic.In,props:{frequency:{from:1,to:200},timeScale:{from:20,to:1}}});return}this.timeScaleTween.restart()}}const{KEY:Ge,FRAME:Le}=c.EFFECTS,k=Le;class Ue extends Phaser.GameObjects.Particles.ParticleEmitterManager{emitZone;emitter;constructor(t){super(t,Ge,k.FX_SPARK_YELLOW),this.createEmitZone(),this.createEmitters(),this.scene.add.existing(this)}createEmitZone(){this.emitZone=new Phaser.Geom.Rectangle}createEmitters(){const t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({frame:k.FX_STAR_YELLOW,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},frequency:200,speedX:{min:-1,max:1},speedY:{min:-9,max:-13},lifespan:{min:1e3,max:1500},scale:{min:.01,max:.015},emitCallback:e=>{e.setScale({min:t/4,max:t})},particleClass:j})}run(t,e,s,i,a){this.stop(),this.emitZone.setSize(i,a),this.emitZone.setPosition(e-i/2,s-a/2),this.emitter.setQuantity(t),this.emitter.start()}stop(){this.emitter?.killAll(),this.emitter?.stop()}}const{KEY:je,FRAME:ze}=c.EFFECTS;class We{scene;name;animation1;animation2;constructor(t){this.scene=t,this.name="SlideToTopAnimation"}run=()=>{const t=new it({targets:[this.scene.source],delay:250,duration:600,ease:"Back.easeInOut",props:{scale:1,y:{from:500,to:200}}});t?.play(),t.next(this.runStarTwinkle),this.animation1=t};stop=()=>{this.animation1.stop(),this.animation2?.stop(),this.scene.alignObjects()};runStarTwinkle=()=>{const t=new K(this.scene),{x:e,y:s,displayWidth:i,displayHeight:a}=this.scene.source;t.run(1,e,s,i,a),this.animation2=t}}class He{scene;name;confetti1;confetti2;constructor(t){this.scene=t,this.name="ConfettiSmallAnimation"}run=()=>{const t=this.scene,e=new O(t,{speedX:{min:-20,max:100},rotate:{start:-360*3,end:0}}),s=new O(t,{speedX:{min:20,max:-100},rotate:{start:0,end:360*3}}),{width:i}=t.gameZone;e.run(1,0,0),s.run(1,i,0),this.confetti1=e,this.confetti2=s};stop=()=>{this.confetti1?.stop(),this.confetti2?.stop(),this.confetti1?.kill(),this.confetti2?.kill()}}class Ve{scene;name;confetti;constructor(t){this.scene=t,this.name="ConfettiHexagonAnimation"}run=()=>{const t=this.scene,e=new Dt(t),{x:s,y:i}=t.target;e.run(2,s,i),this.confetti=e};stop=()=>{this.confetti.stop(),this.confetti.kill()}}class qe{scene;name;animation;constructor(t){this.scene=t,this.name="StarExplosive"}run=()=>{const t=this.scene;this.animation||(this.animation=new L(t));const{x:e,y:s}=t.source;this.animation.explode(10,e,s)};stop=()=>{this.animation.pause(),this.animation.kill()}}class Qe{scene;name;animation;constructor(t){this.scene=t,this.name="DiamondsExplosive"}run=()=>{const t=this.scene,e=new nt(t);e.explode(20,t.source.x,t.source.y),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class Je{scene;name;animation;constructor(t){this.scene=t,this.name="SparksExplosive"}run=()=>{const t=this.scene,e=new Z(t);e.explode(100,t.source.x,t.source.y,180),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class ts{scene;name;animation;constructor(t){this.scene=t,this.name="SparksIdle"}run=()=>{const t=this.scene,e=new K(t),{x:s,y:i,displayWidth:a,displayHeight:o}=t.source;e.run(1,s,i,a,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class es{scene;name;animation;constructor(t){this.scene=t,this.name="StarTwinkleUp"}run=()=>{const t=this.scene,e=new at(t),{x:s,y:i,displayWidth:a,displayHeight:o}=t.source;e.run(1,s,i,a,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class ss{scene;name;animation;constructor(t){this.scene=t,this.name="StarWhiteTwinkle"}run=()=>{const t=this.scene,e=new ot(t),{x:s,y:i,displayWidth:a,displayHeight:o}=t.source;e.run(1,s,i,a,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class is{scene;name;animation;constructor(t){this.scene=t,this.name="CometTwinkle"}run=()=>{const t=this.scene,e=new $(t),{x:s,y:i,displayWidth:a,displayHeight:o}=t.source;e.run(1,s,i,a,o),this.animation=e};stop=()=>{this.animation.pause(),this.animation.kill()}}class ns{scene;name;animation;constructor(t){this.scene=t,this.name="BigStarExplosive"}run=()=>{const t=this.scene,e=new rt(t);Phaser.Display.Align.In.Center(t.source,t.gameZone),Phaser.Display.Align.In.Center(e,t.source),e.run(),this.animation=e};stop=()=>{this.animation.kill(),this.scene.alignObjects()}}class as{scene;name;animation;constructor(t){this.scene=t,this.name="StarsFlyUp"}run=()=>{const t=this.scene,e=new $e(t),{width:s,height:i}=t.gameZone;e.run(1,s/2,i,s,i),this.animation=e};stop=()=>{this.animation.stop(),this.animation.kill()}}class os{scene;name;animation;constructor(t){this.scene=t,this.name="ShakeHorizontal"}run=()=>{const t=this.scene,e=new ct({targets:[t.source]});e.play(),this.animation=e};stop=()=>{this.animation.stop(),this.scene.alignObjects()}}class rs{scene;name;animation1;animation2;animation3;constructor(t){this.scene=t,this.name="CurveAnimation"}run=()=>{const t=this.scene,{x:e,y:s}=t.target,{x:i,y:a}=t.source,o={x:i,y:a},l={x:e,y:s};t.objects.setVisible(!1);const h=new $(t),u=250,f=40,m=new ht({targets:[t.objects.getChildren()[0]],delay:t.tweens.stagger(80,{}),duration:Phaser.Math.RND.between(1e3,2500),curve:[[o.x,o.y],[o.x-Phaser.Math.RND.between(-u,u),o.y-Phaser.Math.RND.between(-f,f)],[l.x,l.y]],onComplete:()=>{t.objects.setVisible(!1),this.run(),this.runSparksExplosive()},onCurveUpdate:E=>{const d=E.x+Phaser.Math.RND.between(-16,16),A=E.y+Phaser.Math.RND.between(-16,16);h.explode(1,d,A)}});m.play(),this.animation1=h,this.animation2=m};stop=()=>{this.animation1?.stop(),this.animation1?.kill(),this.animation2?.stop(),this.animation3?.pause(),this.animation3?.kill()};runSparksExplosive=()=>{const t=this.scene,e=new Z(t);e.explode(100,t.target.x,t.target.y,180),this.animation3=e}}class cs{scene;name;animation;constructor(t){this.scene=t,this.name="StarTouchAnimation"}run=()=>{const t=this.scene,e=t.make.image({key:je,frame:ze.FX_CIRCLE_LIGHT});e.setWorldSize(75.5,75),e.setPosition(t.source.x,t.source.y);const s=1/t.world.getPixelRatio(),i=new mt({targets:[e],duration:800,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:s*2,alpha:0},onStop:()=>{e.kill()}});i.play(),this.animation=i};stop=()=>{this.animation.stop()}}class hs{scene;name;animation;constructor(t){this.scene=t,this.name="CoinsExplosive"}run=()=>{if(!this.animation){const{x:s,y:i}=this.scene.target;this.animation=new Ot(this.scene,s,i)}const{x:t,y:e}=this.scene.source;this.animation.explode(15,t,e)};stop=()=>{}}class ms{scene;name;animation;constructor(t){this.scene=t,this.name="CoinsExplosive2"}run=()=>{this.animation||(this.animation=new Yt(this.scene));const{x:t,y:e}=this.scene.source,{x:s,y:i}=this.scene.target;this.animation.explode(15,t,e,s,i)};stop=()=>{}}class ls{scene;name;timer;animation;constructor(t){this.scene=t,this.name="PaperFireworkExplosive"}run=()=>{this.animation=new zt(this.scene);const t=Phaser.Math.Between(0,375),e=Phaser.Math.Between(0,620);this.animation.explode(100,t,e,90),this.timer?.remove(),this.timer=this.scene.time.addEvent({delay:Phaser.Math.Between(100,800),callback:this.run})};stop=()=>{this.timer?.remove()}}class us{scene;name;animation;constructor(t){this.scene=t,this.name="ConfettiSmallFly"}run=()=>{this.animation?.destroy(),this.animation=new Zt(this.scene,{speedY:{min:-12,max:-200},rotate:{start:0,end:360*3},angle:{min:320,max:355}});const{x:t,y:e}=this.scene.source;this.animation.explode(100,t,e)};stop=()=>{}}class Es{scene;name;animation;constructor(t){this.scene=t,this.name="PaperFireworksCelebration"}run=()=>{this.animation||(this.animation=new Ke(this.scene)),this.animation.run(0,this.scene.gameZone.height,375,200)};stop=()=>{}}class ps{scene;name;animation;constructor(t){this.scene=t,this.name="StarsExplosiveSmall"}run=()=>{this.animation||(this.animation=new U(this.scene));const{x:t,y:e}=this.scene.source;this.animation.explode(12,t,e)};stop=()=>{}}class ds{scene;name;animation;constructor(t){this.scene=t,this.name="FallingStarSparkle"}run=()=>{this.animation||(this.animation=new Lt(this.scene));const{x:t,y:e,displayWidth:s,displayHeight:i}=this.scene.target;this.animation.run(1,t,e,s*2,i)};stop=()=>{this.animation.stop()}}class fs{scene;name;animation;constructor(t){this.scene=t,this.name="StarSparkle"}run=()=>{this.animation||(this.animation=new Ue(this.scene));const{x:t,y:e,displayWidth:s,displayHeight:i}=this.scene.target;this.animation.run(1,t,e,s*2,i)};stop=()=>{this.animation.stop()}}class As extends lt{paddingZone;showDebugZone;debugZone;constructor(t,e){const{key:s,frame:i,width:a,height:o,usePixelPerfect:l}=e;super(t,s,i,a,o,l);const{paddingZone:h=0,showDebugZone:u=!1}=e;this.paddingZone=h,this.showDebugZone=u}updateSize(){super.updateSize();const{width:t,height:e}=this,s=t+this.paddingZone,i=e+this.paddingZone;this.setSize(s,i),this.hitZone.setSize(s,i),this.showDebugZone&&(this.debugZone?.destroy(),this.debugZone=this.hitZone.drawDebugBox(10699282,.5),this.add(this.debugZone))}}const{KEY:X,FRAME:gs}=c.DEFAULT;class xs extends As{animationNameStr;animationName;constructor(t,e){const s=t.textures.exists(e);super(t,{key:s?e:X,frame:s?"":gs.BLANK,width:160,height:120}),this.updateSize(),this.createText(s?X:e||""),this.scene.children.bringToTop(this),!s&&this.loadImage(e)}createText(t){this.animationNameStr=t;const e=this.scene.make.bitmapText({font:G.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.normalizeText(t),origin:{x:.5,y:0}});e.setPosition(0,this.button.height/2),e.setCenterAlign(),e.setMaxWidth(this.button.width,95),this.animationName=e,this.add([e])}normalizeText(t){return t.replace(/\.?([A-Z]+)/g,"_$1").replace(/^_/,"")}loadImage(t){const e=this.scene.load.image(t,`./assets/animation-thumbnails/${t}.png`);this.scene.load.start(),e.on("filecomplete",s=>{if(s===t){const{width:i,height:a}=this.button;this.createButton(s,"",i-6,a-6),this.bringToTop(this.animationName)}})}getName(){return this.normalizeText(this.animationNameStr)}}class Ts extends ut{scene;nextItemPos;animationButtons=[];openAnimationScrollerButton;currentAnimation;currentAnimationText;background;constructor(t){const{width:e,height:s}=t.gameZone,i={listConfigs:[],width:e,height:s};super(t,i),this.scene=t;const a=5;this.nextItemPos={x:0,y:-s/2,offsetX:-e/4-a},this.setPosition(375/2,667/2),this.setEnable(!0),this.createBackground(e,s),this.createOpenButton(),this.createCurrentAnimationText(),this.closeScroller()}createBackground(t,e){this.background=this.scene.make.image({key:c.DEFAULT.KEY,frame:c.DEFAULT.FRAME.BLANK}),this.background.setOrigin(0,0),this.background.setTint(0),this.background.setWorldSize(t,e),this.scene.children.bringToTop(this),this.background.kill()}createOpenButton(){const{KEY:t,FRAME:e}=c.DEFAULT,s=new Et(this.scene,{key:t,button:e.BUTTON_BLUE,icon:e.BLANK,text:"     Menu"},148,60);s.setPosition(0,50),s.kill(),this.openAnimationScrollerButton=s,this.openAnimationScrollerButton.onClick=this.openScroller}createCurrentAnimationText(){this.currentAnimationText=this.scene.make.bitmapText({font:G.PRIMARY.KEY,size:this.scene.fontSize(18),text:"",origin:{x:.5,y:0}},!0),this.currentAnimationText.setMaxWidth(300,95),this.currentAnimationText.setCenterAlign(),Phaser.Display.Align.In.TopCenter(this.currentAnimationText,this.scene.gameZone,0,-50)}openScroller=()=>{this.currentAnimation?.stop(),this.revive(),this.currentAnimationText.kill(),this.openAnimationScrollerButton.kill(),this.background.revive()};closeScroller=()=>{this.background.kill(),this.currentAnimationText.revive(),this.openAnimationScrollerButton.revive(),this.kill()};addButton(t){const{x:e,y:s,offsetX:i}=this.nextItemPos,a=34,o=new xs(this.scene,t.name);o.setPosition(e+i,s+o.height/2+a),this.nextItemPos.offsetX=-i,i>0&&(this.nextItemPos.y+=o.height+a),this.animationButtons.push(o),o.onClick=()=>{this.closeScroller(),this.currentAnimation?.stop(),t.run(),this.currentAnimation=t,this.currentAnimationText.setText(o.getName())},super.addItem(o)}runCurrentAnim=()=>{this.currentAnimation&&(this.currentAnimation.stop(),this.currentAnimation.run())}}const{KEY:F,FRAME:S}=c.EFFECTS;class Rs extends D{target;source;objects;scroller;preload(){this.textures.removeKey(c.EFFECTS.KEY),this.load.multiatlas({key:c.ANIMATION_SCENE.KEY,path:c.ANIMATION_SCENE.PATH,atlasURL:c.ANIMATION_SCENE.JSON})}create(){super.create(),this.createBackground(F,S.BLANK,0),this.createTargetObject(),this.createSourceObject(),this.createMultiObjects(),this.createSpriteAnimations(),this.createAnimationScroller(),this.alignObjects();const{POINTER_DOWN:t}=Phaser.Input.Events;this.gameZone.setInteractive().on(t,this.scroller.runCurrentAnim)}createAnimationScroller(){const t=new Ts(this);t.addButton(new ns(this)),t.addButton(new hs(this)),t.addButton(new ms(this)),t.addButton(new is(this)),t.addButton(new Ve(this)),t.addButton(new He(this)),t.addButton(new us(this)),t.addButton(new rs(this)),t.addButton(new Qe(this)),t.addButton(new ds(this)),t.addButton(new ls(this)),t.addButton(new Es(this)),t.addButton(new os(this)),t.addButton(new We(this)),t.addButton(new Je(this)),t.addButton(new ts(this)),t.addButton(new qe(this)),t.addButton(new ps(this)),t.addButton(new as(this)),t.addButton(new fs(this)),t.addButton(new cs(this)),t.addButton(new es(this)),t.addButton(new ss(this)),this.scroller=t}createTargetObject(){this.target=this.make.image({key:F,frame:S.BLANK}),this.target.setTint(5162135),this.target.setWorldSize(50,50)}createSourceObject(){this.source=this.make.image({key:F,frame:S.BLANK}),this.source.setTint(4824278),this.source.setWorldSize(50,50)}createMultiObjects(){this.objects=this.make.group({repeat:10,key:F,frame:S.BLANK,classType:Phaser.GameObjects.Image,createMultipleCallback:t=>{t.forEach(e=>{e.setSize(80,80)})}}),this.objects.setTint(12433838),this.objects.setVisible(!1)}createSpriteAnimations(){const t=new Pt(this.anims);this.anims.add(r.CONFETTI_HEXAGON.KEY,t)}alignObjects(){Phaser.Display.Align.In.TopCenter(this.target,this.gameZone,0,-100),Phaser.Display.Align.In.BottomCenter(this.source,this.gameZone,0,-150)}}const Ps=Rs,bs=Object.freeze(Object.defineProperty({__proto__:null,default:Ps},Symbol.toStringTag,{value:"Module"}));export{Ss as T,bs as i};
