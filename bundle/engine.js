var St=(ct,at)=>()=>(at||ct((at={exports:{}}).exports,at),at.exports);var At=St((yt,Tt)=>{/*! For license information please see phaser-custom.min.js.LICENSE.txt */(function(ct,at){typeof yt=="object"&&typeof Tt=="object"?Tt.exports=at():typeof define=="function"&&define.amd?define("Phaser",[],at):typeof yt=="object"?yt.Phaser=at():ct.Phaser=at()})(self,()=>(()=>{var ct={26729:v=>{var p=Object.prototype.hasOwnProperty,t="~";function f(){}function i(a,r,u){this.fn=a,this.context=r,this.once=u||!1}function n(a,r,u,s,o){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,s||a,o),c=t?t+r:r;return a._events[c]?a._events[c].fn?a._events[c]=[a._events[c],h]:a._events[c].push(h):(a._events[c]=h,a._eventsCount++),a}function l(a,r){--a._eventsCount==0?a._events=new f:delete a._events[r]}function e(){this._events=new f,this._eventsCount=0}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(t=!1)),e.prototype.eventNames=function(){var a,r,u=[];if(this._eventsCount===0)return u;for(r in a=this._events)p.call(a,r)&&u.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(a)):u},e.prototype.listeners=function(a){var r=t?t+a:a,u=this._events[r];if(!u)return[];if(u.fn)return[u.fn];for(var s=0,o=u.length,h=new Array(o);s<o;s++)h[s]=u[s].fn;return h},e.prototype.listenerCount=function(a){var r=t?t+a:a,u=this._events[r];return u?u.fn?1:u.length:0},e.prototype.emit=function(a,r,u,s,o,h){var c=t?t+a:a;if(!this._events[c])return!1;var d,g,m=this._events[c],y=arguments.length;if(m.fn){switch(m.once&&this.removeListener(a,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,r),!0;case 3:return m.fn.call(m.context,r,u),!0;case 4:return m.fn.call(m.context,r,u,s),!0;case 5:return m.fn.call(m.context,r,u,s,o),!0;case 6:return m.fn.call(m.context,r,u,s,o,h),!0}for(g=1,d=new Array(y-1);g<y;g++)d[g-1]=arguments[g];m.fn.apply(m.context,d)}else{var w,x=m.length;for(g=0;g<x;g++)switch(m[g].once&&this.removeListener(a,m[g].fn,void 0,!0),y){case 1:m[g].fn.call(m[g].context);break;case 2:m[g].fn.call(m[g].context,r);break;case 3:m[g].fn.call(m[g].context,r,u);break;case 4:m[g].fn.call(m[g].context,r,u,s);break;default:if(!d)for(w=1,d=new Array(y-1);w<y;w++)d[w-1]=arguments[w];m[g].fn.apply(m[g].context,d)}}return!0},e.prototype.on=function(a,r,u){return n(this,a,r,u,!1)},e.prototype.once=function(a,r,u){return n(this,a,r,u,!0)},e.prototype.removeListener=function(a,r,u,s){var o=t?t+a:a;if(!this._events[o])return this;if(!r)return l(this,o),this;var h=this._events[o];if(h.fn)h.fn!==r||s&&!h.once||u&&h.context!==u||l(this,o);else{for(var c=0,d=[],g=h.length;c<g;c++)(h[c].fn!==r||s&&!h[c].once||u&&h[c].context!==u)&&d.push(h[c]);d.length?this._events[o]=d.length===1?d[0]:d:l(this,o)}return this},e.prototype.removeAllListeners=function(a){var r;return a?(r=t?t+a:a,this._events[r]&&l(this,r)):(this._events=new f,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prefixed=t,e.EventEmitter=e,v.exports=e},55365:v=>{v.exports=function(p,t,f){return{instance:t,placementID:p,shown:!1,video:f}}},55625:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(99551),l=new f({Extends:i,initialize:function(e,a){i.call(this),this.plugin=e,this.ref=a,this.name=a.getName(),this.contextID=a.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var e=this;return this.ref.getEntryCountAsync().then(function(a){e.entryCount=a,e.emit("getentrycount",a,e.name)}).catch(function(a){console.warn(a)}),this},setScore:function(e,a){a===void 0&&(a=""),typeof a=="object"&&(a=JSON.stringify(a));var r=this;return this.ref.setScoreAsync(e,a).then(function(u){if(u){var s=n(u);r.playerScore=s,r.emit("setscore",s,r.name)}else r.emit("setscore",null,r.name)}).catch(function(u){console.warn(u)}),this},getPlayerScore:function(){var e=this;return this.ref.getPlayerEntryAsync().then(function(a){if(a){var r=n(a);e.playerScore=r,e.emit("getplayerscore",r,e.name)}else e.emit("getplayerscore",null,e.name)}).catch(function(a){console.warn(a)}),this},getScores:function(e,a){e===void 0&&(e=10),a===void 0&&(a=0);var r=this;return this.ref.getEntriesAsync(e,a).then(function(u){r.scores=[],u.forEach(function(s){r.scores.push(n(s))}),r.emit("getscores",r.scores,r.name)}).catch(function(u){console.warn(u)}),this},getConnectedScores:function(){var e=this;return this.ref.getConnectedPlayerEntriesAsync().then(function(a){e.scores=[],a.forEach(function(r){e.scores.push(n(r))}),e.emit("getconnectedscores",e.scores,e.name)}).catch(function(a){console.warn(a)}),this}});v.exports=l},99551:v=>{v.exports=function(p){return{score:p.getScore(),scoreFormatted:p.getFormattedScore(),timestamp:p.getTimestamp(),rank:p.getRank(),data:p.getExtraData(),playerName:p.getPlayer().getName(),playerPhotoURL:p.getPlayer().getPhoto(),playerID:p.getPlayer().getID()}}},7478:(v,p,t)=>{var f=t(25738);v.exports=function(i){return{title:f(i,"title",""),productID:f(i,"productID",""),description:f(i,"description",""),imageURI:f(i,"imageURI",""),price:f(i,"price",""),priceCurrencyCode:f(i,"priceCurrencyCode","")}}},34876:(v,p,t)=>{var f=t(25738);v.exports=function(i){return{developerPayload:f(i,"developerPayload",""),paymentID:f(i,"paymentID",""),productID:f(i,"productID",""),purchaseTime:f(i,"purchaseTime",""),purchaseToken:f(i,"purchaseToken",""),signedRequest:f(i,"signedRequest","")}}},68608:(v,p,t)=>{var f=t(92611);v.exports=function(i,n,l,e){for(var a=i[0],r=1;r<i.length;r++){var u=i[r];f(u,a,n,l,e),a=u}return i}},11461:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a){return f(i,"angle",n,l,e,a)}},97644:v=>{v.exports=function(p,t,f){for(var i=0;i<p.length;i++){var n=p[i];t.call(f,n)}return p}},79532:v=>{v.exports=function(p,t,f){f===void 0&&(f=0);for(var i=f;i<p.length;i++){var n=p[i],l=!0;for(var e in t)n[e]!==t[e]&&(l=!1);if(l)return n}return null}},21683:v=>{v.exports=function(p,t,f){f===void 0&&(f=0);for(var i=f;i<p.length;i++){var n=p[i],l=!0;for(var e in t)n[e]!==t[e]&&(l=!1);if(l)return n}return null}},42507:(v,p,t)=>{var f=t(19918),i=t(68494),n=t(25738),l=t(45733),e=new(t(64043))({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1);v.exports=function(a,r){r===void 0&&(r={});var u=r.hasOwnProperty("width"),s=r.hasOwnProperty("height"),o=n(r,"width",-1),h=n(r,"height",-1),c=n(r,"cellWidth",1),d=n(r,"cellHeight",c),g=n(r,"position",i.TOP_LEFT),m=n(r,"x",0),y=n(r,"y",0),w=0,x=0,T=o*c,E=h*d;e.setPosition(m,y),e.setSize(c,d);for(var S=0;S<a.length;S++)if(f(a[S],e,g),u&&o===-1)e.x+=c;else if(s&&h===-1)e.y+=d;else if(s&&!u){if(x+=d,e.y+=d,x===E&&(x=0,w+=c,e.y=y,e.x+=c,w===T))break}else if(w+=c,e.x+=c,w===T&&(w=0,x+=d,e.x=m,e.y+=d,x===E))break;return a}},74277:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a){return f(i,"alpha",n,l,e,a)}},92038:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a){return f(i,"x",n,l,e,a)}},80824:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a,r,u){return l==null&&(l=n),f(i,"x",n,e,r,u),f(i,"y",l,a,r,u)}},2690:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a){return f(i,"y",n,l,e,a)}},39799:v=>{v.exports=function(p,t,f,i){f===void 0&&(f=0),i===void 0&&(i=6.28);for(var n=f,l=(i-f)/p.length,e=0;e<p.length;e++)p[e].x=t.x+t.radius*Math.cos(n),p[e].y=t.y+t.radius*Math.sin(n),n+=l;return p}},14618:v=>{v.exports=function(p,t,f,i){f===void 0&&(f=0),i===void 0&&(i=6.28);for(var n=f,l=(i-f)/p.length,e=t.width/2,a=t.height/2,r=0;r<p.length;r++)p[r].x=t.x+e*Math.cos(n),p[r].y=t.y+a*Math.sin(n),n+=l;return p}},59083:(v,p,t)=>{var f=t(26299);v.exports=function(i,n){for(var l=f(n,i.length),e=0;e<i.length;e++){var a=i[e],r=l[e];a.x=r.x,a.y=r.y}return i}},40898:(v,p,t)=>{var f=t(16178),i=t(34383),n=t(8405);v.exports=function(l,e,a){a===void 0&&(a=0);var r=f(e,!1,l.length);a>0?i(r,a):a<0&&n(r,Math.abs(a));for(var u=0;u<l.length;u++)l[u].x=r[u].x,l[u].y=r[u].y;return l}},59580:(v,p,t)=>{var f=t(62579);v.exports=function(i,n,l){var e=f({x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},l),a=f({x1:n.x2,y1:n.y2,x2:n.x3,y2:n.y3},l),r=f({x1:n.x3,y1:n.y3,x2:n.x1,y2:n.y1},l);e.pop(),a.pop(),r.pop();for(var u=(e=e.concat(a,r)).length/i.length,s=0,o=0;o<i.length;o++){var h=i[o],c=e[Math.floor(s)];h.x=c.x,h.y=c.y,s+=u}return i}},99030:v=>{v.exports=function(p,t,f){for(var i=0;i<p.length;i++){var n=p[i];n.anims&&n.anims.play(t,f)}return p}},15759:v=>{v.exports=function(p,t,f,i,n,l){var e;i===void 0&&(i=0),n===void 0&&(n=0),l===void 0&&(l=1);var a=0,r=p.length;if(l===1)for(e=n;e<r;e++)p[e][t]+=f+a*i,a++;else for(e=n;e>=0;e--)p[e][t]+=f+a*i,a++;return p}},77449:v=>{v.exports=function(p,t,f,i,n,l){var e;i===void 0&&(i=0),n===void 0&&(n=0),l===void 0&&(l=1);var a=0,r=p.length;if(l===1)for(e=n;e<r;e++)p[e][t]=f+a*i,a++;else for(e=n;e>=0;e--)p[e][t]=f+a*i,a++;return p}},39320:(v,p,t)=>{var f=t(87764);v.exports=function(i,n){for(var l=0;l<i.length;l++)f(n,i[l]);return i}},55401:(v,p,t)=>{var f=t(49620);v.exports=function(i,n){for(var l=0;l<i.length;l++)f(n,i[l]);return i}},29226:(v,p,t)=>{var f=t(57747);v.exports=function(i,n){for(var l=0;l<i.length;l++)f(n,i[l]);return i}},43711:(v,p,t)=>{var f=t(61852);v.exports=function(i,n){for(var l=0;l<i.length;l++)f(n,i[l]);return i}},96793:(v,p,t)=>{var f=t(86407);v.exports=function(i,n){for(var l=0;l<i.length;l++)f(n,i[l]);return i}},56211:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a){return f(i,"rotation",n,l,e,a)}},55833:(v,p,t)=>{var f=t(79749),i=t(76914);v.exports=function(n,l,e){for(var a=l.x,r=l.y,u=0;u<n.length;u++){var s=n[u];f(s,a,r,e,Math.max(1,i(s.x,s.y,a,r)))}return n}},86251:(v,p,t)=>{var f=t(79749);v.exports=function(i,n,l,e){var a=n.x,r=n.y;if(e===0)return i;for(var u=0;u<i.length;u++)f(i[u],a,r,l,e);return i}},43783:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a){return f(i,"scaleX",n,l,e,a)}},57803:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a,r,u){return l==null&&(l=n),f(i,"scaleX",n,e,r,u),f(i,"scaleY",l,a,r,u)}},55511:(v,p,t)=>{var f=t(15759);v.exports=function(i,n,l,e,a){return f(i,"scaleY",n,l,e,a)}},47040:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"alpha",n,l,e,a)}},56809:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e){return f(i,"blendMode",n,0,l,e)}},77510:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"depth",n,l,e,a)}},78672:v=>{v.exports=function(p,t,f){for(var i=0;i<p.length;i++)p[i].setInteractive(t,f);return p}},1696:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a,r,u){return l==null&&(l=n),f(i,"originX",n,e,r,u),f(i,"originY",l,a,r,u),i.forEach(function(s){s.updateDisplayOrigin()}),i}},39656:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"rotation",n,l,e,a)}},66465:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a,r,u){return l==null&&(l=n),f(i,"scaleX",n,e,r,u),f(i,"scaleY",l,a,r,u)}},82710:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"scaleX",n,l,e,a)}},19860:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"scaleY",n,l,e,a)}},18257:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a,r,u){return l==null&&(l=n),f(i,"scrollFactorX",n,e,r,u),f(i,"scrollFactorY",l,a,r,u)}},53220:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"scrollFactorX",n,l,e,a)}},70033:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"scrollFactorY",n,l,e,a)}},29088:v=>{v.exports=function(p,t,f,i,n){for(var l=0;l<p.length;l++)p[l].setTint(t,f,i,n);return p}},9792:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e){return f(i,"visible",n,0,l,e)}},45099:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"x",n,l,e,a)}},47406:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a,r,u){return l==null&&(l=n),f(i,"x",n,e,r,u),f(i,"y",l,a,r,u)}},59843:(v,p,t)=>{var f=t(77449);v.exports=function(i,n,l,e,a){return f(i,"y",n,l,e,a)}},57084:(v,p,t)=>{var f=t(17321);v.exports=function(i,n,l,e,a){var r,u,s,o,h,c;if(e===void 0&&(e=0),a===void 0&&(a=new f),i.length>1)if(e===0){var d=i.length-1;for(r=i[d].x,u=i[d].y,s=d-1;s>=0;s--)o=(c=i[s]).x,h=c.y,c.x=r,c.y=u,r=o,u=h;i[d].x=n,i[d].y=l}else{for(r=i[0].x,u=i[0].y,s=1;s<i.length;s++)o=(c=i[s]).x,h=c.y,c.x=r,c.y=u,r=o,u=h;i[0].x=n,i[0].y=l}else r=i[0].x,u=i[0].y,i[0].x=n,i[0].y=l;return a.x=r,a.y=u,a}},10010:(v,p,t)=>{var f=t(80675);v.exports=function(i){return f(i)}},59901:(v,p,t)=>{var f=t(89989);v.exports=function(i,n,l,e,a){a===void 0&&(a=!1);var r,u=Math.abs(e-l)/i.length;if(a)for(r=0;r<i.length;r++)i[r][n]+=f(r*u,l,e);else for(r=0;r<i.length;r++)i[r][n]=f(r*u,l,e);return i}},75833:(v,p,t)=>{var f=t(29817);v.exports=function(i,n,l,e,a){a===void 0&&(a=!1);var r,u=Math.abs(e-l)/i.length;if(a)for(r=0;r<i.length;r++)i[r][n]+=f(r*u,l,e);else for(r=0;r<i.length;r++)i[r][n]=f(r*u,l,e);return i}},13385:v=>{v.exports=function(p,t,f,i,n){n===void 0&&(n=!1);var l,e=Math.abs(i-f)/p.length;if(n)for(l=0;l<p.length;l++)p[l][t]+=l*e+f;else for(l=0;l<p.length;l++)p[l][t]=l*e+f;return p}},25995:v=>{v.exports=function(p){for(var t=0;t<p.length;t++)p[t].visible=!p[t].visible;return p}},51601:(v,p,t)=>{var f=t(6704);v.exports=function(i,n,l){l===void 0&&(l=0);for(var e=0;e<i.length;e++){var a=i[e];a.x=f(a.x,n.left-l,n.right+l),a.y=f(a.y,n.top-l,n.bottom+l)}return i}},22603:(v,p,t)=>{v.exports={AlignTo:t(68608),Angle:t(11461),Call:t(97644),GetFirst:t(79532),GetLast:t(21683),GridAlign:t(42507),IncAlpha:t(74277),IncX:t(92038),IncXY:t(80824),IncY:t(2690),PlaceOnCircle:t(39799),PlaceOnEllipse:t(14618),PlaceOnLine:t(59083),PlaceOnRectangle:t(40898),PlaceOnTriangle:t(59580),PlayAnimation:t(99030),PropertyValueInc:t(15759),PropertyValueSet:t(77449),RandomCircle:t(39320),RandomEllipse:t(55401),RandomLine:t(29226),RandomRectangle:t(43711),RandomTriangle:t(96793),Rotate:t(56211),RotateAround:t(55833),RotateAroundDistance:t(86251),ScaleX:t(43783),ScaleXY:t(57803),ScaleY:t(55511),SetAlpha:t(47040),SetBlendMode:t(56809),SetDepth:t(77510),SetHitArea:t(78672),SetOrigin:t(1696),SetRotation:t(39656),SetScale:t(66465),SetScaleX:t(82710),SetScaleY:t(19860),SetScrollFactor:t(18257),SetScrollFactorX:t(53220),SetScrollFactorY:t(70033),SetTint:t(29088),SetVisible:t(9792),SetX:t(45099),SetXY:t(47406),SetY:t(59843),ShiftPosition:t(57084),Shuffle:t(10010),SmootherStep:t(75833),SmoothStep:t(59901),Spread:t(13385),ToggleVisible:t(25995),WrapInRectangle:t(51601)}},95018:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(90316),l=t(81712),e=t(64909),a=t(76076),r=t(16068),u=new i({initialize:function(s,o,h){this.manager=s,this.key=o,this.type="frame",this.frames=this.getFrames(s.textureManager,a(h,"frames",[]),a(h,"defaultTextureKey",null),a(h,"sortFrames",!0)),this.frameRate=a(h,"frameRate",null),this.duration=a(h,"duration",null),this.msPerFrame,this.skipMissedFrames=a(h,"skipMissedFrames",!0),this.delay=a(h,"delay",0),this.repeat=a(h,"repeat",0),this.repeatDelay=a(h,"repeatDelay",0),this.yoyo=a(h,"yoyo",!1),this.showOnStart=a(h,"showOnStart",!1),this.hideOnComplete=a(h,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(s,o,h,c){h===null&&c===null?(s.frameRate=24,s.duration=24/o*1e3):h&&c===null?(s.duration=h,s.frameRate=o/(h/1e3)):(s.frameRate=c,s.duration=o/c*1e3),s.msPerFrame=1e3/s.frameRate},addFrame:function(s){return this.addFrameAt(this.frames.length,s)},addFrameAt:function(s,o){var h=this.getFrames(this.manager.textureManager,o);if(h.length>0){if(s===0)this.frames=h.concat(this.frames);else if(s===this.frames.length)this.frames=this.frames.concat(h);else{var c=this.frames.slice(0,s),d=this.frames.slice(s);this.frames=c.concat(h,d)}this.updateFrameSequence()}return this},checkFrame:function(s){return s>=0&&s<this.frames.length},getFirstTick:function(s){s.accumulator=0,s.nextTick=s.msPerFrame+s.currentFrame.duration},getFrameAt:function(s){return this.frames[s]},getFrames:function(s,o,h,c){c===void 0&&(c=!0);var d,g,m,y,w=[],x=1;if(typeof o=="string"){y=o;var T=s.get(y).getFrameNames();c&&r(T),o=[],T.forEach(function(b){o.push({key:y,frame:b})})}if(!Array.isArray(o)||o.length===0)return w;for(m=0;m<o.length;m++){var E=o[m],S=a(E,"key",h);if(S){var C=a(E,"frame",0),A=s.getFrame(S,C);(g=new e(S,C,x,A)).duration=a(E,"duration",0),g.isFirst=!d,d&&(d.nextFrame=g,g.prevFrame=d),w.push(g),d=g,x++}}if(w.length>0){g.isLast=!0,g.nextFrame=w[0],w[0].prevFrame=g;var M=1/(w.length-1);for(m=0;m<w.length;m++)w[m].progress=m*M}return w},getNextTick:function(s){s.accumulator-=s.nextTick,s.nextTick=s.msPerFrame+s.currentFrame.duration},getFrameByProgress:function(s){return s=f(s,0,1),l(s,this.frames,"progress")},nextFrame:function(s){var o=s.currentFrame;o.isLast?s.yoyo?this.handleYoyoFrame(s,!1):s.repeatCounter>0?s.inReverse&&s.forward?s.forward=!1:this.repeatAnimation(s):s.complete():this.updateAndGetNextTick(s,o.nextFrame)},handleYoyoFrame:function(s,o){if(o||(o=!1),s.inReverse===!o&&s.repeatCounter>0)return(s.repeatDelay===0||s.pendingRepeat)&&(s.forward=o),void this.repeatAnimation(s);if(s.inReverse===o||s.repeatCounter!==0){s.forward=o;var h=o?s.currentFrame.nextFrame:s.currentFrame.prevFrame;this.updateAndGetNextTick(s,h)}else s.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(s){var o=s.currentFrame;o.isFirst?s.yoyo?this.handleYoyoFrame(s,!0):s.repeatCounter>0?(s.inReverse&&!s.forward||(s.forward=!0),this.repeatAnimation(s)):s.complete():this.updateAndGetNextTick(s,o.prevFrame)},updateAndGetNextTick:function(s,o){s.setCurrentFrame(o),this.getNextTick(s)},removeFrame:function(s){var o=this.frames.indexOf(s);return o!==-1&&this.removeFrameAt(o),this},removeFrameAt:function(s){return this.frames.splice(s,1),this.updateFrameSequence(),this},repeatAnimation:function(s){if(s._pendingStop===2){if(s._pendingStopValue===0)return s.stop();s._pendingStopValue--}s.repeatDelay>0&&!s.pendingRepeat?(s.pendingRepeat=!0,s.accumulator-=s.nextTick,s.nextTick+=s.repeatDelay):(s.repeatCounter--,s.forward?s.setCurrentFrame(s.currentFrame.nextFrame):s.setCurrentFrame(s.currentFrame.prevFrame),s.isPlaying&&(this.getNextTick(s),s.handleRepeat()))},toJSON:function(){var s={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(o){s.frames.push(o.toJSON())}),s},updateFrameSequence:function(){for(var s,o=this.frames.length,h=1/(o-1),c=0;c<o;c++)(s=this.frames[c]).index=c+1,s.isFirst=!1,s.isLast=!1,s.progress=c*h,c===0?(s.isFirst=!0,o===1?(s.isLast=!0,s.nextFrame=s,s.prevFrame=s):(s.isLast=!1,s.prevFrame=this.frames[o-1],s.nextFrame=this.frames[c+1])):c===o-1&&o>1?(s.isLast=!0,s.prevFrame=this.frames[o-2],s.nextFrame=this.frames[0]):o>1&&(s.prevFrame=this.frames[c-1],s.nextFrame=this.frames[c+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var s=0;s<this.frames.length;s++)this.frames[s].destroy();this.frames=[],this.manager=null}});v.exports=u},64909:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n,l,e,a){a===void 0&&(a=!1),this.textureKey=i,this.textureFrame=n,this.index=l,this.frame=e,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=a},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});v.exports=f},59460:(v,p,t)=>{var f=t(95018),i=t(69186),n=t(21342),l=t(26729),e=t(90316),a=t(24496),r=t(25738),u=t(76076),s=t(47742),o=t(74934),h=new i({Extends:l,initialize:function(c){l.call(this),this.game=c,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",c.events.once(a.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(a.DESTROY,this.destroy,this)},addMix:function(c,d,g){var m=this.anims,y=this.mixes,w=typeof c=="string"?c:c.key,x=typeof d=="string"?d:d.key;if(m.has(w)&&m.has(x)){var T=y.get(w);T||(T={}),T[x]=g,y.set(w,T)}return this},removeMix:function(c,d){var g=this.mixes,m=typeof c=="string"?c:c.key,y=g.get(m);if(y)if(d){var w=typeof d=="string"?d:d.key;y.hasOwnProperty(w)&&delete y[w]}else d||g.delete(m);return this},getMix:function(c,d){var g=this.mixes,m=typeof c=="string"?c:c.key,y=typeof d=="string"?d:d.key,w=g.get(m);return w&&w.hasOwnProperty(y)?w[y]:0},add:function(c,d){return this.anims.has(c)?(console.warn("Animation key exists: "+c),this):(d.key=c,this.anims.set(c,d),this.emit(e.ADD_ANIMATION,c,d),this)},exists:function(c){return this.anims.has(c)},createFromAseprite:function(c,d){var g=[],m=this.game.cache.json.get(c);if(!m)return g;var y=this,w=u(m,"meta",null),x=u(m,"frames",null);return w&&x&&u(w,"frameTags",[]).forEach(function(T){var E=[],S=r(T,"name",null),C=r(T,"from",0),A=r(T,"to",0),M=r(T,"direction","forward");if(S&&(!d||d&&d.indexOf(S)>-1)){for(var b=[],_=Number.MAX_SAFE_INTEGER,P=C;P<=A;P++){var L=P.toString(),F=x[L];if(F){var D=r(F,"duration",Number.MAX_SAFE_INTEGER);D<_&&(_=D),b.push({frame:L,duration:D})}}b.forEach(function(B){E.push({key:c,frame:B.frame,duration:_-B.duration})});var k=_*E.length;M==="reverse"&&(E=E.reverse());var R={key:S,frames:E,duration:k,yoyo:M==="pingpong"},O=y.create(R);O&&g.push(O)}}),g},create:function(c){var d=c.key,g=!1;return d&&((g=this.get(d))||(g=new f(this,d,c),this.anims.set(d,g),this.emit(e.ADD_ANIMATION,d,g))),g},fromJSON:function(c,d){d===void 0&&(d=!1),d&&this.anims.clear(),typeof c=="string"&&(c=JSON.parse(c));var g=[];if(c.hasOwnProperty("anims")&&Array.isArray(c.anims)){for(var m=0;m<c.anims.length;m++)g.push(this.create(c.anims[m]));c.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=c.globalTimeScale)}else c.hasOwnProperty("key")&&c.type==="frame"&&g.push(this.create(c));return g},generateFrameNames:function(c,d){var g,m=u(d,"prefix",""),y=u(d,"start",0),w=u(d,"end",0),x=u(d,"suffix",""),T=u(d,"zeroPad",0),E=u(d,"outputArray",[]),S=u(d,"frames",!1),C=this.textureManager.get(c);if(!C)return E;if(d)for(S||(S=o(y,w)),g=0;g<S.length;g++){var A=m+s(S[g],T,"0",1)+x;C.has(A)?E.push({key:c,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+c)}else for(S=C.getFrameNames(),g=0;g<S.length;g++)E.push({key:c,frame:S[g]});return E},generateFrameNumbers:function(c,d){var g=u(d,"start",0),m=u(d,"end",-1),y=u(d,"first",!1),w=u(d,"outputArray",[]),x=u(d,"frames",!1),T=this.textureManager.get(c);if(!T)return w;y&&T.has(y)&&w.push({key:c,frame:y}),x||(m===-1&&(m=T.frameTotal-2),x=o(g,m));for(var E=0;E<x.length;E++)T.has(x[E])?w.push({key:c,frame:x[E]}):console.warn("generateFrameNumbers: Frame "+E+" missing from texture: "+c);return w},get:function(c){return this.anims.get(c)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(e.PAUSE_ALL)),this},play:function(c,d){Array.isArray(d)||(d=[d]);for(var g=0;g<d.length;g++)d[g].anims.play(c);return this},staggerPlay:function(c,d,g,m){g===void 0&&(g=0),m===void 0&&(m=!0),Array.isArray(d)||(d=[d]);var y=d.length;m||y--;for(var w=0;w<d.length;w++){var x=g<0?Math.abs(g)*(y-w):g*w;d[w].anims.playAfterDelay(c,x)}return this},remove:function(c){var d=this.get(c);return d&&(this.emit(e.REMOVE_ANIMATION,c,d),this.anims.delete(c),this.removeMix(c)),d},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(e.RESUME_ALL)),this},toJSON:function(c){var d={anims:[],globalTimeScale:this.globalTimeScale};return c!==void 0&&c!==""?d.anims.push(this.anims.get(c).toJSON()):this.anims.each(function(g,m){d.anims.push(m.toJSON())}),d},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});v.exports=h},56579:(v,p,t)=>{var f=t(69186),i=t(21342),n=t(25738),l=t(90316),e=t(95018),a=new f({initialize:function(r){this.parent=r,this.animationManager=r.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(r){var u=this.parent;if(r===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,u;Array.isArray(r)||(r=[r]);for(var s=0;s<r.length;s++){var o=r[s];this.nextAnim===null?this.nextAnim=o:this.nextAnimsQueue.push(o)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(r){this.isPlaying&&this.stop();var u=this.animationManager,s=typeof r=="string"?r:n(r,"key",null),o=this.exists(s)?this.get(s):u.get(s);if(o){this.currentAnim=o;var h=o.getTotalFrames(),c=n(r,"frameRate",o.frameRate),d=n(r,"duration",o.duration);o.calculateDuration(this,h,d,c),this.delay=n(r,"delay",o.delay),this.repeat=n(r,"repeat",o.repeat),this.repeatDelay=n(r,"repeatDelay",o.repeatDelay),this.yoyo=n(r,"yoyo",o.yoyo),this.showOnStart=n(r,"showOnStart",o.showOnStart),this.hideOnComplete=n(r,"hideOnComplete",o.hideOnComplete),this.skipMissedFrames=n(r,"skipMissedFrames",o.skipMissedFrames),this.timeScale=n(r,"timeScale",this.timeScale);var g=n(r,"startFrame",0);g>o.getTotalFrames()&&(g=0);var m=o.frames[g];g!==0||this.forward||(m=o.getLastFrame()),this.currentFrame=m}else console.warn("Missing animation: "+s);return this.parent},pause:function(r){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),r!==void 0&&this.setCurrentFrame(r),this.parent},resume:function(r){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),r!==void 0&&this.setCurrentFrame(r),this.parent},playAfterDelay:function(r,u){if(this.isPlaying){var s=this.nextAnim,o=this.nextAnimsQueue;s&&o.unshift(s),this.nextAnim=r,this._pendingStop=1,this._pendingStopValue=u}else this.delayCounter=u,this.play(r,!0);return this.parent},playAfterRepeat:function(r,u){if(u===void 0&&(u=1),this.isPlaying){var s=this.nextAnim,o=this.nextAnimsQueue;s&&o.unshift(s),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this.nextAnim=r,this._pendingStop=2,this._pendingStopValue=u}else this.play(r);return this.parent},play:function(r,u){u===void 0&&(u=!1);var s=this.currentAnim,o=this.parent,h=typeof r=="string"?r:r.key;if(u&&this.isPlaying&&s.key===h)return o;if(s&&this.isPlaying){var c=this.animationManager.getMix(s.key,r);if(c>0)return this.playAfterDelay(r,c)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r)},playReverse:function(r,u){u===void 0&&(u=!1);var s=typeof r=="string"?r:r.key;return u&&this.isPlaying&&this.currentAnim.key===s?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r))},startAnimation:function(r){this.load(r);var u=this.currentAnim,s=this.parent;return u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,u.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),s},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function(r,u){var s=this.currentAnim,o=this.currentFrame,h=this.parent,c=o.textureFrame;h.emit(r,s,o,h,c),u&&h.emit(u+s.key,s,o,h,c)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var r=this.currentFrame;if(!r)return 0;var u=r.progress;return this.inReverse&&(u*=-1),u},setProgress:function(r){return this.forward||(r=1-r),this.setCurrentFrame(this.currentAnim.getFrameByProgress(r)),this.parent},setRepeat:function(r){return this.repeatCounter=r===-1?Number.MAX_VALUE:r,this.parent},globalRemove:function(r,u){u===void 0&&(u=this.currentAnim),this.isPlaying&&u.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(r,u){r===void 0&&(r=!1),u===void 0&&(u=!1);var s=this.currentAnim,o=this.parent;return s?(u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),s.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!r,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(s.frames[0]),this.parent):o},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(r)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(r)}return this.parent},stopAfterDelay:function(r){return this._pendingStop=1,this._pendingStopValue=r,this.parent},stopAfterRepeat:function(r){return r===void 0&&(r=1),this.repeatCounter!==-1&&r>this.repeatCounter&&(r=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=r,this.parent},stopOnFrame:function(r){return this._pendingStop=3,this._pendingStopValue=r,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(r,u){var s=this.currentAnim;if(this.isPlaying&&s&&!s.paused){if(this.accumulator+=u*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=u,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?s.nextFrame(this):s.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var o=0;do this.forward?s.nextFrame(this):s.previousFrame(this),o++;while(this.isPlaying&&this.accumulator>this.nextTick&&o<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(r){var u=this.parent;return this.currentFrame=r,u.texture=r.frame.texture,u.frame=r.frame,u.isCropped&&u.frame.updateCropUVs(u._crop,u.flipX,u.flipY),r.setAlpha&&(u.alpha=r.alpha),u.setSizeToFrame(),u._originComponent&&(r.frame.customPivot?u.setOrigin(r.frame.pivotX,r.frame.pivotY):u.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===r&&this.stop()),u},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(r){return this.anims?this.anims.get(r):null},exists:function(r){return!!this.anims&&this.anims.has(r)},create:function(r){var u=r.key,s=!1;return u&&((s=this.get(u))||(s=new e(this,u,r),this.anims||(this.anims=new i),this.anims.set(u,s))),s},generateFrameNames:function(r,u){return this.animationManager.generateFrameNames(r,u)},generateFrameNumbers:function(r,u){return this.animationManager.generateFrameNumbers(r,u)},remove:function(r){var u=this.get(r);return u&&(this.currentAnim===u&&this.stop(),this.anims.delete(r)),u},destroy:function(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});v.exports=a},59021:v=>{v.exports="add"},15687:v=>{v.exports="animationcomplete"},17084:v=>{v.exports="animationcomplete-"},48571:v=>{v.exports="animationrepeat"},36994:v=>{v.exports="animationrestart"},21036:v=>{v.exports="animationstart"},48492:v=>{v.exports="animationstop"},11937:v=>{v.exports="animationupdate"},18742:v=>{v.exports="pauseall"},34018:v=>{v.exports="remove"},45208:v=>{v.exports="resumeall"},90316:(v,p,t)=>{v.exports={ADD_ANIMATION:t(59021),ANIMATION_COMPLETE:t(15687),ANIMATION_COMPLETE_KEY:t(17084),ANIMATION_REPEAT:t(48571),ANIMATION_RESTART:t(36994),ANIMATION_START:t(21036),ANIMATION_STOP:t(48492),ANIMATION_UPDATE:t(11937),PAUSE_ALL:t(18742),REMOVE_ANIMATION:t(34018),RESUME_ALL:t(45208)}},88552:(v,p,t)=>{v.exports={Animation:t(95018),AnimationFrame:t(64909),AnimationManager:t(59460),AnimationState:t(56579),Events:t(90316)}},80063:(v,p,t)=>{var f=t(69186),i=t(21342),n=t(26729),l=t(38453),e=new f({initialize:function(){this.entries=new i,this.events=new n},add:function(a,r){return this.entries.set(a,r),this.events.emit(l.ADD,this,a,r),this},has:function(a){return this.entries.has(a)},exists:function(a){return this.entries.has(a)},get:function(a){return this.entries.get(a)},remove:function(a){var r=this.get(a);return r&&(this.entries.delete(a),this.events.emit(l.REMOVE,this,a,r.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});v.exports=e},95937:(v,p,t)=>{var f=t(80063),i=t(69186),n=t(24496),l=new i({initialize:function(e){this.game=e,this.binary=new f,this.bitmapFont=new f,this.json=new f,this.physics=new f,this.shader=new f,this.audio=new f,this.video=new f,this.text=new f,this.html=new f,this.obj=new f,this.tilemap=new f,this.xml=new f,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(e){return this.custom.hasOwnProperty(e)||(this.custom[e]=new f),this.custom[e]},destroy:function(){for(var e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],a=0;a<e.length;a++)this[e[a]].destroy(),this[e[a]]=null;for(var r in this.custom)this.custom[r].destroy();this.custom=null,this.game=null}});v.exports=l},35693:v=>{v.exports="add"},40702:v=>{v.exports="remove"},38453:(v,p,t)=>{v.exports={ADD:t(35693),REMOVE:t(40702)}},80425:(v,p,t)=>{v.exports={BaseCache:t(80063),CacheManager:t(95937),Events:t(38453)}},43929:(v,p,t)=>{var f=t(69186),i=t(19506),n=t(23407),l=t(26729),e=t(26088),a=t(75380),r=t(9329),u=t(58909),s=t(17321),o=new f({Extends:l,Mixins:[i.Alpha,i.Visible],initialize:function(h,c,d,g){h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=0),l.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new a,this.dirty=!0,this._x=h,this._y=c,this._width=d,this._height=g,this._bounds=new a,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new r,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new s(d/2,g/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(h){this.renderList.push(h)},setOrigin:function(h,c){return h===void 0&&(h=.5),c===void 0&&(c=h),this.originX=h,this.originY=c,this},getScroll:function(h,c,d){d===void 0&&(d=new s);var g=.5*this.width,m=.5*this.height;return d.x=h-g,d.y=c-m,this.useBounds&&(d.x=this.clampX(d.x),d.y=this.clampY(d.y)),d},centerOnX:function(h){var c=.5*this.width;return this.midPoint.x=h,this.scrollX=h-c,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(h){var c=.5*this.height;return this.midPoint.y=h,this.scrollY=h-c,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(h,c){return this.centerOnX(h),this.centerOnY(c),this},centerToBounds:function(){if(this.useBounds){var h=this._bounds,c=.5*this.width,d=.5*this.height;this.midPoint.set(h.centerX,h.centerY),this.scrollX=h.centerX-c,this.scrollY=h.centerY-d}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(h){if(this.disableCull)return h;var c=this.matrix.matrix,d=c[0],g=c[1],m=c[2],y=c[3],w=d*y-g*m;if(!w)return h;var x=c[4],T=c[5],E=this.scrollX,S=this.scrollY,C=this.width,A=this.height,M=this.y,b=M+A,_=this.x,P=_+C,L=this.culledObjects,F=h.length;w=1/w,L.length=0;for(var D=0;D<F;++D){var k=h[D];if(k.hasOwnProperty("width")&&!k.parentContainer){var R=k.width,O=k.height,B=k.x-E*k.scrollFactorX-R*k.originX,U=k.y-S*k.scrollFactorY-O*k.originY;(B+R)*d+(U+O)*m+x>_&&B*d+U*m+x<P&&(B+R)*g+(U+O)*y+T>M&&B*g+U*y+T<b&&L.push(k)}else L.push(k)}return L},getWorldPoint:function(h,c,d){d===void 0&&(d=new s);var g=this.matrix.matrix,m=g[0],y=g[1],w=g[2],x=g[3],T=g[4],E=g[5],S=m*x-y*w;if(!S)return d.x=h,d.y=c,d;var C=x*(S=1/S),A=-y*S,M=-w*S,b=m*S,_=(w*E-x*T)*S,P=(y*T-m*E)*S,L=Math.cos(this.rotation),F=Math.sin(this.rotation),D=this.zoomX,k=this.zoomY,R=this.scrollX,O=this.scrollY,B=h+(R*L-O*F)*D,U=c+(R*F+O*L)*k;return d.x=B*C+U*M+_,d.y=B*A+U*b+P,d},ignore:function(h){var c=this.id;Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var g=h[d];Array.isArray(g)?this.ignore(g):g.isParent?this.ignore(g.getChildren()):g.cameraFilter|=c}return this},preRender:function(){this.renderList.length=0;var h=this.width,c=this.height,d=.5*h,g=.5*c,m=this.zoomX,y=this.zoomY,w=this.matrix,x=h*this.originX,T=c*this.originY,E=this.scrollX,S=this.scrollY;this.useBounds&&(E=this.clampX(E),S=this.clampY(S)),this.roundPixels&&(x=Math.round(x),T=Math.round(T)),this.scrollX=E,this.scrollY=S;var C=E+d,A=S+g;this.midPoint.set(C,A);var M=h/m,b=c/y;this.worldView.setTo(C-M/2,A-b/2,M,b),w.applyITRS(this.x+x,this.y+T,this.rotation,m,y),w.translate(-x,-T)},clampX:function(h){var c=this._bounds,d=this.displayWidth,g=c.x+(d-this.width)/2,m=Math.max(g,g+c.width-d);return h<g?h=g:h>m&&(h=m),h},clampY:function(h){var c=this._bounds,d=this.displayHeight,g=c.y+(d-this.height)/2,m=Math.max(g,g+c.height-d);return h<g?h=g:h>m&&(h=m),h},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(h){return h===void 0&&(h=0),this.rotation=n(h),this},setBackgroundColor:function(h){return h===void 0&&(h="rgba(0,0,0,0)"),this.backgroundColor=u(h),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(h,c,d,g,m){return m===void 0&&(m=!1),this._bounds.setTo(h,c,d,g),this.dirty=!0,this.useBounds=!0,m?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(h){h===void 0&&(h=new a);var c=this._bounds;return h.setTo(c.x,c.y,c.width,c.height),h},setName:function(h){return h===void 0&&(h=""),this.name=h,this},setPosition:function(h,c){return c===void 0&&(c=h),this.x=h,this.y=c,this},setRotation:function(h){return h===void 0&&(h=0),this.rotation=h,this},setRoundPixels:function(h){return this.roundPixels=h,this},setScene:function(h){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=h;var c=h.sys;return this.sceneManager=c.game.scene,this.scaleManager=c.scale,this.cameraManager=c.cameras,this.updateSystem(),this},setScroll:function(h,c){return c===void 0&&(c=h),this.scrollX=h,this.scrollY=c,this},setSize:function(h,c){return c===void 0&&(c=h),this.width=h,this.height=c,this},setViewport:function(h,c,d,g){return this.x=h,this.y=c,this.width=d,this.height=g,this},setZoom:function(h,c){return h===void 0&&(h=1),c===void 0&&(c=h),h===0&&(h=.001),c===0&&(c=.001),this.zoomX=h,this.zoomY=c,this},setMask:function(h,c){return c===void 0&&(c=!0),this.mask=h,this._maskCamera=c?this.cameraManager.default:this,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var h={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(h.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),h},update:function(){},updateSystem:function(){if(this.scaleManager){var h=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,c=this.sceneManager;h&&!this._customViewport?c.customViewports++:!h&&this._customViewport&&c.customViewports--,this.dirty=!0,this._customViewport=h}},destroy:function(){this.emit(e.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(h){this._x=h,this.updateSystem()}},y:{get:function(){return this._y},set:function(h){this._y=h,this.updateSystem()}},width:{get:function(){return this._width},set:function(h){this._width=h,this.updateSystem()}},height:{get:function(){return this._height},set:function(h){this._height=h,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(h){this._scrollX=h,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(h){this._scrollY=h,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(h){this._zoomX=h,this._zoomY=h,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(h){this._zoomX=h,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(h){this._zoomY=h,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=h,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});v.exports=o},77146:(v,p,t)=>{var f=t(43929),i=t(39414),n=t(2543),l=t(69186),e=t(19506),a=t(49893),r=t(26088),u=t(3821),s=t(75380),o=t(17321),h=new l({Extends:f,Mixins:[e.Flip,e.Tint,e.Pipeline],initialize:function(c,d,g,m){f.call(this,c,d,g,m),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new a.Fade(this),this.flashEffect=new a.Flash(this),this.shakeEffect=new a.Shake(this),this.panEffect=new a.Pan(this),this.rotateToEffect=new a.RotateTo(this),this.zoomEffect=new a.Zoom(this),this.lerp=new o(1,1),this.followOffset=new o,this.deadzone=null,this._follow=null},setDeadzone:function(c,d){if(c===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=c,this.deadzone.height=d):this.deadzone=new s(0,0,c,d),this._follow){var g=this.width/2,m=this.height/2,y=this._follow.x-this.followOffset.x,w=this._follow.y-this.followOffset.y;this.midPoint.set(y,w),this.scrollX=y-g,this.scrollY=w-m}i(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(c,d,g,m,y,w){return this.fadeEffect.start(!1,c,d,g,m,!0,y,w)},fadeOut:function(c,d,g,m,y,w){return this.fadeEffect.start(!0,c,d,g,m,!0,y,w)},fadeFrom:function(c,d,g,m,y,w,x){return this.fadeEffect.start(!1,c,d,g,m,y,w,x)},fade:function(c,d,g,m,y,w,x){return this.fadeEffect.start(!0,c,d,g,m,y,w,x)},flash:function(c,d,g,m,y,w,x){return this.flashEffect.start(c,d,g,m,y,w,x)},shake:function(c,d,g,m,y){return this.shakeEffect.start(c,d,g,m,y)},pan:function(c,d,g,m,y,w,x){return this.panEffect.start(c,d,g,m,y,w,x)},rotateTo:function(c,d,g,m,y,w,x){return this.rotateToEffect.start(c,d,g,m,y,w,x)},zoomTo:function(c,d,g,m,y,w){return this.zoomEffect.start(c,d,g,m,y,w)},preRender:function(){this.renderList.length=0;var c=this.width,d=this.height,g=.5*c,m=.5*d,y=this.zoom,w=this.matrix,x=c*this.originX,T=d*this.originY,E=this._follow,S=this.deadzone,C=this.scrollX,A=this.scrollY;S&&i(S,this.midPoint.x,this.midPoint.y);var M=!1;if(E&&!this.panEffect.isRunning){var b=E.x-this.followOffset.x,_=E.y-this.followOffset.y;S?(b<S.x?C=u(C,C-(S.x-b),this.lerp.x):b>S.right&&(C=u(C,C+(b-S.right),this.lerp.x)),_<S.y?A=u(A,A-(S.y-_),this.lerp.y):_>S.bottom&&(A=u(A,A+(_-S.bottom),this.lerp.y))):(C=u(C,b-x,this.lerp.x),A=u(A,_-T,this.lerp.y)),M=!0}this.useBounds&&(C=this.clampX(C),A=this.clampY(A)),this.roundPixels&&(x=Math.round(x),T=Math.round(T),C=Math.round(C),A=Math.round(A)),this.scrollX=C,this.scrollY=A;var P=C+g,L=A+m;this.midPoint.set(P,L);var F=c/y,D=d/y,k=P-F/2,R=L-D/2;this.roundPixels&&(k=Math.round(k),R=Math.round(R)),this.worldView.setTo(k,R,F,D),w.applyITRS(this.x+x,this.y+T,this.rotation,y,y),w.translate(-x,-T),this.shakeEffect.preRender(),M&&this.emit(r.FOLLOW_UPDATE,this,E)},setLerp:function(c,d){return c===void 0&&(c=1),d===void 0&&(d=c),this.lerp.set(c,d),this},setFollowOffset:function(c,d){return c===void 0&&(c=0),d===void 0&&(d=0),this.followOffset.set(c,d),this},startFollow:function(c,d,g,m,y,w){d===void 0&&(d=!1),g===void 0&&(g=1),m===void 0&&(m=g),y===void 0&&(y=0),w===void 0&&(w=y),this._follow=c,this.roundPixels=d,g=n(g,0,1),m=n(m,0,1),this.lerp.set(g,m),this.followOffset.set(y,w);var x=this.width/2,T=this.height/2,E=c.x-y,S=c.y-w;return this.midPoint.set(E,S),this.scrollX=E-x,this.scrollY=S-T,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(c,d){this.visible&&(this.rotateToEffect.update(c,d),this.panEffect.update(c,d),this.zoomEffect.update(c,d),this.shakeEffect.update(c,d),this.flashEffect.update(c,d),this.fadeEffect.update(c,d))},destroy:function(){this.resetFX(),f.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});v.exports=h},8226:(v,p,t)=>{var f=t(77146),i=t(69186),n=t(25738),l=t(46236),e=t(26813),a=t(48958),r=t(12063),u=new i({initialize:function(s){this.scene=s,this.systems=s.sys,this.roundPixels=s.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,s.sys.events.once(r.BOOT,this.boot,this),s.sys.events.on(r.START,this.start,this)},boot:function(){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new f(0,0,s.scale.width,s.scale.height).setScene(this.scene),s.game.scale.on(a.RESIZE,this.onResize,this),this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){if(!this.main){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0]}var o=this.systems.events;o.on(r.UPDATE,this.update,this),o.once(r.SHUTDOWN,this.shutdown,this)},add:function(s,o,h,c,d,g){s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),d===void 0&&(d=!1),g===void 0&&(g="");var m=new f(s,o,h,c);return m.setName(g),m.setScene(this.scene),m.setRoundPixels(this.roundPixels),m.id=this.getNextID(),this.cameras.push(m),d&&(this.main=m),m},addExisting:function(s,o){return o===void 0&&(o=!1),this.cameras.indexOf(s)===-1?(s.id=this.getNextID(),s.setRoundPixels(this.roundPixels),this.cameras.push(s),o&&(this.main=s),s):null},getNextID:function(){for(var s=this.cameras,o=1,h=0;h<32;h++){for(var c=!1,d=0;d<s.length;d++){var g=s[d];g&&g.id===o&&(c=!0)}if(!c)return o;o<<=1}return 0},getTotal:function(s){s===void 0&&(s=!1);for(var o=0,h=this.cameras,c=0;c<h.length;c++){var d=h[c];(!s||s&&d.visible)&&o++}return o},fromJSON:function(s){Array.isArray(s)||(s=[s]);for(var o=this.scene.sys.scale.width,h=this.scene.sys.scale.height,c=0;c<s.length;c++){var d=s[c],g=n(d,"x",0),m=n(d,"y",0),y=n(d,"width",o),w=n(d,"height",h),x=this.add(g,m,y,w);x.name=n(d,"name",""),x.zoom=n(d,"zoom",1),x.rotation=n(d,"rotation",0),x.scrollX=n(d,"scrollX",0),x.scrollY=n(d,"scrollY",0),x.roundPixels=n(d,"roundPixels",!1),x.visible=n(d,"visible",!0);var T=n(d,"backgroundColor",!1);T&&x.setBackgroundColor(T);var E=n(d,"bounds",null);if(E){var S=n(E,"x",0),C=n(E,"y",0),A=n(E,"width",o),M=n(E,"height",h);x.setBounds(S,C,A,M)}}return this},getCamera:function(s){for(var o=this.cameras,h=0;h<o.length;h++)if(o[h].name===s)return o[h];return null},getCamerasBelowPointer:function(s){for(var o=this.cameras,h=s.x,c=s.y,d=[],g=0;g<o.length;g++){var m=o[g];m.visible&&m.inputEnabled&&e(m,h,c)&&d.unshift(m)}return d},remove:function(s,o){o===void 0&&(o=!0),Array.isArray(s)||(s=[s]);for(var h=0,c=this.cameras,d=0;d<s.length;d++){var g=c.indexOf(s[d]);g!==-1&&(o?c[g].destroy():c[g].renderList=[],c.splice(g,1),h++)}return!this.main&&c[0]&&(this.main=c[0]),h},render:function(s,o){for(var h=this.scene,c=this.cameras,d=0;d<this.cameras.length;d++){var g=c[d];if(g.visible&&g.alpha>0){g.preRender();var m=this.getVisibleChildren(o.getChildren(),g);s.render(h,m,g)}}},getVisibleChildren:function(s,o){for(var h=[],c=0;c<s.length;c++){var d=s[c];d.willRender(o)&&h.push(d)}return h},resetAll:function(){for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(s,o){for(var h=0;h<this.cameras.length;h++)this.cameras[h].update(s,o)},onResize:function(s,o,h,c,d){for(var g=0;g<this.cameras.length;g++){var m=this.cameras[g];m._x===0&&m._y===0&&m._width===c&&m._height===d&&m.setSize(o.width,o.height)}},resize:function(s,o){for(var h=0;h<this.cameras.length;h++)this.cameras[h].setSize(s,o)},shutdown:function(){this.main=void 0;for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();this.cameras=[];var o=this.systems.events;o.off(r.UPDATE,this.update,this),o.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});l.register("CameraManager",u,"cameras"),v.exports=u},10982:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(26088),l=new i({initialize:function(e){this.camera=e,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,a,r,u,s,o,h,c){if(e===void 0&&(e=!0),a===void 0&&(a=1e3),r===void 0&&(r=0),u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=!1),h===void 0&&(h=null),c===void 0&&(c=this.camera.scene),!o&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=a,this.direction=e,this.progress=0,this.red=r,this.green=u,this.blue=s,this.alpha=e?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=h,this._onUpdateScope=c;var d=e?n.FADE_OUT_START:n.FADE_IN_START;return this.camera.emit(d,this.camera,this,a,r,u,s),this.camera},update:function(e,a){this.isRunning&&(this._elapsed+=a,this.progress=f(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(e){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(e,a){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera,u=this.red/255,s=this.green/255,o=this.blue/255;return e.drawFillRect(r.x,r.y,r.width,r.height,a(o,s,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var e=this.direction?n.FADE_OUT_COMPLETE:n.FADE_IN_COMPLETE;this.camera.emit(e,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=l},28980:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(26088),l=new i({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,a,r,u,s,o,h){return e===void 0&&(e=250),a===void 0&&(a=255),r===void 0&&(r=255),u===void 0&&(u=255),s===void 0&&(s=!1),o===void 0&&(o=null),h===void 0&&(h=this.camera.scene),!s&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.red=a,this.green=r,this.blue=u,this.alpha=1,this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.camera.emit(n.FLASH_START,this.camera,this,e,a,r,u)),this.camera},update:function(e,a){this.isRunning&&(this._elapsed+=a,this.progress=f(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(e){if(!this.isRunning)return!1;var a=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(e,a){if(!this.isRunning)return!1;var r=this.camera,u=this.red/255,s=this.green/255,o=this.blue/255;return e.drawFillRect(r.x,r.y,r.width,r.height,a(o,s,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=l},66033:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(45044),l=t(26088),e=t(17321),a=new i({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=new e,this.current=new e,this.destination=new e,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,u,s,o,h,c,d){s===void 0&&(s=1e3),o===void 0&&(o=n.Linear),h===void 0&&(h=!1),c===void 0&&(c=null),d===void 0&&(d=this.camera.scene);var g=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source.set(g.scrollX,g.scrollY),this.destination.set(r,u),g.getScroll(r,u,this.current),typeof o=="string"&&n.hasOwnProperty(o)?this.ease=n[o]:typeof o=="function"&&(this.ease=o),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.camera.emit(l.PAN_START,this.camera,this,s,r,u)),g},update:function(r,u){if(this.isRunning){this._elapsed+=u;var s=f(this._elapsed/this.duration,0,1);this.progress=s;var o=this.camera;if(this._elapsed<this.duration){var h=this.ease(s);o.getScroll(this.destination.x,this.destination.y,this.current);var c=this.source.x+(this.current.x-this.source.x)*h,d=this.source.y+(this.current.y-this.source.y)*h;o.setScroll(c,d),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,s,c,d)}else o.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,s,o.scrollX,o.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});v.exports=a},9783:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(26088),l=t(45044),e=new i({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(a,r,u,s,o,h,c){u===void 0&&(u=1e3),s===void 0&&(s=l.Linear),o===void 0&&(o=!1),h===void 0&&(h=null),c===void 0&&(c=this.camera.scene),r===void 0&&(r=!1),this.shortestPath=r;var d=a;a<0?(d=-1*a,this.clockwise=!1):this.clockwise=!0;var g=360*Math.PI/180;d-=Math.floor(d/g)*g;var m=this.camera;if(!o&&this.isRunning)return m;if(this.isRunning=!0,this.duration=u,this.progress=0,this.source=m.rotation,this.destination=d,typeof s=="string"&&l.hasOwnProperty(s)?this.ease=l[s]:typeof s=="function"&&(this.ease=s),this._elapsed=0,this._onUpdate=h,this._onUpdateScope=c,this.shortestPath){var y,w;(y=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+g)-this.source)<(w=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+g)-this.destination)?this.clockwise=!0:y>w&&(this.clockwise=!1)}return this.camera.emit(n.ROTATE_START,this.camera,this,u,d),m},update:function(a,r){if(this.isRunning){this._elapsed+=r;var u=f(this._elapsed/this.duration,0,1);this.progress=u;var s=this.camera;if(this._elapsed<this.duration){var o=this.ease(u);this.current=s.rotation;var h,c=360*Math.PI/180,d=this.destination,g=this.current;this.clockwise===!1&&(d=this.current,g=this.destination),h=d>=g?Math.abs(d-g):Math.abs(d+c)-g;var m;m=this.clockwise?s.rotation+h*o:s.rotation-h*o,s.rotation=m,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,u,m)}else s.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,u,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});v.exports=e},68006:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(26088),l=t(17321),e=new i({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(a,r,u,s,o){return a===void 0&&(a=100),r===void 0&&(r=.05),u===void 0&&(u=!1),s===void 0&&(s=null),o===void 0&&(o=this.camera.scene),!u&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,typeof r=="number"?this.intensity.set(r):this.intensity.set(r.x,r.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=s,this._onUpdateScope=o,this.camera.emit(n.SHAKE_START,this.camera,this,a,r)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(a,r){if(this.isRunning)if(this._elapsed+=r,this.progress=f(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var u=this.intensity,s=this.camera.width,o=this.camera.height,h=this.camera.zoom;this._offsetX=(Math.random()*u.x*s*2-u.x*s)*h,this._offsetY=(Math.random()*u.y*o*2-u.y*o)*h,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(n.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});v.exports=e},36052:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(45044),l=t(26088),e=new i({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,r,u,s,o,h){r===void 0&&(r=1e3),u===void 0&&(u=n.Linear),s===void 0&&(s=!1),o===void 0&&(o=null),h===void 0&&(h=this.camera.scene);var c=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source=c.zoom,this.destination=a,typeof u=="string"&&n.hasOwnProperty(u)?this.ease=n[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.camera.emit(l.ZOOM_START,this.camera,this,r,a)),c},update:function(a,r){this.isRunning&&(this._elapsed+=r,this.progress=f(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=e},49893:(v,p,t)=>{v.exports={Fade:t(10982),Flash:t(28980),Pan:t(66033),Shake:t(68006),RotateTo:t(9783),Zoom:t(36052)}},97451:v=>{v.exports="cameradestroy"},67998:v=>{v.exports="camerafadeincomplete"},19794:v=>{v.exports="camerafadeinstart"},70884:v=>{v.exports="camerafadeoutcomplete"},79642:v=>{v.exports="camerafadeoutstart"},56307:v=>{v.exports="cameraflashcomplete"},36063:v=>{v.exports="cameraflashstart"},96725:v=>{v.exports="followupdate"},45957:v=>{v.exports="camerapancomplete"},84011:v=>{v.exports="camerapanstart"},21180:v=>{v.exports="postrender"},54573:v=>{v.exports="prerender"},19207:v=>{v.exports="camerarotatecomplete"},51323:v=>{v.exports="camerarotatestart"},89100:v=>{v.exports="camerashakecomplete"},85444:v=>{v.exports="camerashakestart"},23984:v=>{v.exports="camerazoomcomplete"},88715:v=>{v.exports="camerazoomstart"},26088:(v,p,t)=>{v.exports={DESTROY:t(97451),FADE_IN_COMPLETE:t(67998),FADE_IN_START:t(19794),FADE_OUT_COMPLETE:t(70884),FADE_OUT_START:t(79642),FLASH_COMPLETE:t(56307),FLASH_START:t(36063),FOLLOW_UPDATE:t(96725),PAN_COMPLETE:t(45957),PAN_START:t(84011),POST_RENDER:t(21180),PRE_RENDER:t(54573),ROTATE_COMPLETE:t(19207),ROTATE_START:t(51323),SHAKE_COMPLETE:t(89100),SHAKE_START:t(85444),ZOOM_COMPLETE:t(23984),ZOOM_START:t(88715)}},79859:(v,p,t)=>{v.exports={Camera:t(77146),BaseCamera:t(43929),CameraManager:t(8226),Effects:t(49893),Events:t(26088)}},31975:(v,p,t)=>{var f=t(69186),i=t(76076),n=new f({initialize:function(l){this.camera=i(l,"camera",null),this.left=i(l,"left",null),this.right=i(l,"right",null),this.up=i(l,"up",null),this.down=i(l,"down",null),this.zoomIn=i(l,"zoomIn",null),this.zoomOut=i(l,"zoomOut",null),this.zoomSpeed=i(l,"zoomSpeed",.01),this.minZoom=i(l,"minZoom",.001),this.maxZoom=i(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=i(l,"speed",null);typeof e=="number"?(this.speedX=e,this.speedY=e):(this.speedX=i(l,"speed.x",0),this.speedY=i(l,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var e=this.camera;this.up&&this.up.isDown?e.scrollY-=this.speedY*l|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*l|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*l|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*l|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});v.exports=n},92250:(v,p,t)=>{var f=t(69186),i=t(76076),n=new f({initialize:function(l){this.camera=i(l,"camera",null),this.left=i(l,"left",null),this.right=i(l,"right",null),this.up=i(l,"up",null),this.down=i(l,"down",null),this.zoomIn=i(l,"zoomIn",null),this.zoomOut=i(l,"zoomOut",null),this.zoomSpeed=i(l,"zoomSpeed",.01),this.minZoom=i(l,"minZoom",.001),this.maxZoom=i(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=i(l,"acceleration",null);typeof e=="number"?(this.accelX=e,this.accelY=e):(this.accelX=i(l,"acceleration.x",0),this.accelY=i(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var a=i(l,"drag",null);typeof a=="number"?(this.dragX=a,this.dragY=a):(this.dragX=i(l,"drag.x",0),this.dragY=i(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var r=i(l,"maxSpeed",null);typeof r=="number"?(this.maxSpeedX=r,this.maxSpeedY=r):(this.maxSpeedX=i(l,"maxSpeed.x",0),this.maxSpeedY=i(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var e=this.camera;this._speedX>0?(this._speedX-=this.dragX*l,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*l,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*l,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*l,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(e.scrollX-=this._speedX*l|0),this._speedY!==0&&(e.scrollY-=this._speedY*l|0),this._zoom!==0&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});v.exports=n},78241:(v,p,t)=>{v.exports={FixedKeyControl:t(31975),SmoothedKeyControl:t(92250)}},75527:(v,p,t)=>{v.exports={Controls:t(78241),Scene2D:t(79859)}},11318:(v,p,t)=>{var f={VERSION:"3.55.2",BlendModes:t(87626),ScaleModes:t(29718),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};v.exports=f},45279:(v,p,t)=>{var f=t(69186),i=t(11318),n=t(47345),l=t(25738),e=t(76076),a=t(53013),r=t(68533),u=t(45733),s=t(32122),o=t(58909),h=new f({initialize:function(c){c===void 0&&(c={}),this.width=e(c,"width",1024),this.height=e(c,"height",768),this.zoom=e(c,"zoom",1),this.parent=e(c,"parent",void 0),this.scaleMode=e(c,"scaleMode",0),this.expandParent=e(c,"expandParent",!0),this.autoRound=e(c,"autoRound",!1),this.autoCenter=e(c,"autoCenter",0),this.resizeInterval=e(c,"resizeInterval",500),this.fullscreenTarget=e(c,"fullscreenTarget",null),this.minWidth=e(c,"minWidth",0),this.maxWidth=e(c,"maxWidth",0),this.minHeight=e(c,"minHeight",0),this.maxHeight=e(c,"maxHeight",0);var d=e(c,"scale",null);d&&(this.width=e(d,"width",this.width),this.height=e(d,"height",this.height),this.zoom=e(d,"zoom",this.zoom),this.parent=e(d,"parent",this.parent),this.scaleMode=e(d,"mode",this.scaleMode),this.expandParent=e(d,"expandParent",this.expandParent),this.autoRound=e(d,"autoRound",this.autoRound),this.autoCenter=e(d,"autoCenter",this.autoCenter),this.resizeInterval=e(d,"resizeInterval",this.resizeInterval),this.fullscreenTarget=e(d,"fullscreenTarget",this.fullscreenTarget),this.minWidth=e(d,"min.width",this.minWidth),this.maxWidth=e(d,"max.width",this.maxWidth),this.minHeight=e(d,"min.height",this.minHeight),this.maxHeight=e(d,"max.height",this.maxHeight)),this.renderType=e(c,"type",i.AUTO),this.canvas=e(c,"canvas",null),this.context=e(c,"context",null),this.canvasStyle=e(c,"canvasStyle",null),this.customEnvironment=e(c,"customEnvironment",!1),this.sceneConfig=e(c,"scene",null),this.seed=e(c,"seed",[(Date.now()*Math.random()).toString()]),r.RND=new r.RandomDataGenerator(this.seed),this.gameTitle=e(c,"title",""),this.gameURL=e(c,"url","https://phaser.io"),this.gameVersion=e(c,"version",""),this.autoFocus=e(c,"autoFocus",!0),this.domCreateContainer=e(c,"dom.createContainer",!1),this.domBehindCanvas=e(c,"dom.behindCanvas",!1),this.domPointerEvents=e(c,"dom.pointerEvents","none"),this.inputKeyboard=e(c,"input.keyboard",!0),this.inputKeyboardEventTarget=e(c,"input.keyboard.target",window),this.inputKeyboardCapture=e(c,"input.keyboard.capture",[]),this.inputMouse=e(c,"input.mouse",!0),this.inputMouseEventTarget=e(c,"input.mouse.target",null),this.inputMousePreventDefaultDown=e(c,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=e(c,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=e(c,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=e(c,"input.mouse.preventDefaultWheel",!0),this.inputTouch=e(c,"input.touch",n.input.touch),this.inputTouchEventTarget=e(c,"input.touch.target",null),this.inputTouchCapture=e(c,"input.touch.capture",!0),this.inputActivePointers=e(c,"input.activePointers",1),this.inputSmoothFactor=e(c,"input.smoothFactor",0),this.inputWindowEvents=e(c,"input.windowEvents",!0),this.inputGamepad=e(c,"input.gamepad",!1),this.inputGamepadEventTarget=e(c,"input.gamepad.target",window),this.disableContextMenu=e(c,"disableContextMenu",!1),this.audio=e(c,"audio",{}),this.hideBanner=e(c,"banner",null)===!1,this.hidePhaser=e(c,"banner.hidePhaser",!1),this.bannerTextColor=e(c,"banner.text","#ffffff"),this.bannerBackgroundColor=e(c,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=e(c,"fps",null);var g=e(c,"render",c);this.pipeline=e(g,"pipeline",null),this.antialias=e(g,"antialias",!0),this.antialiasGL=e(g,"antialiasGL",!0),this.mipmapFilter=e(g,"mipmapFilter","LINEAR"),this.desynchronized=e(g,"desynchronized",!1),this.roundPixels=e(g,"roundPixels",!1),this.pixelArt=e(g,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=e(g,"transparent",!1),this.clearBeforeRender=e(g,"clearBeforeRender",!0),this.preserveDrawingBuffer=e(g,"preserveDrawingBuffer",!1),this.premultipliedAlpha=e(g,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=e(g,"failIfMajorPerformanceCaveat",!1),this.powerPreference=e(g,"powerPreference","default"),this.batchSize=e(g,"batchSize",4096),this.maxTextures=e(g,"maxTextures",-1),this.maxLights=e(g,"maxLights",10);var m=e(c,"backgroundColor",0);this.backgroundColor=o(m),this.transparent&&(this.backgroundColor=o(0),this.backgroundColor.alpha=0),this.preBoot=e(c,"callbacks.preBoot",u),this.postBoot=e(c,"callbacks.postBoot",u),this.physics=e(c,"physics",{}),this.defaultPhysicsSystem=e(this.physics,"default",!1),this.loaderBaseURL=e(c,"loader.baseURL",""),this.loaderPath=e(c,"loader.path","");var y=n.os.android?6:32;this.loaderMaxParallelDownloads=e(c,"loader.maxParallelDownloads",y),this.loaderCrossOrigin=e(c,"loader.crossOrigin",void 0),this.loaderResponseType=e(c,"loader.responseType",""),this.loaderAsync=e(c,"loader.async",!0),this.loaderUser=e(c,"loader.user",""),this.loaderPassword=e(c,"loader.password",""),this.loaderTimeout=e(c,"loader.timeout",0),this.loaderWithCredentials=e(c,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var w=e(c,"plugins",null),x=s.DefaultScene;w&&(Array.isArray(w)?this.defaultPlugins=w:a(w)&&(this.installGlobalPlugins=l(w,"global",[]),this.installScenePlugins=l(w,"scene",[]),Array.isArray(w.default)?x=w.default:Array.isArray(w.defaultMerge)&&(x=x.concat(w.defaultMerge)))),this.defaultPlugins=x;var T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=e(c,"images.default",T+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=e(c,"images.missing",T+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=e(c,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=i.WEBGL:window.FORCE_CANVAS&&(this.renderType=i.CANVAS))}});v.exports=h},68611:(v,p,t)=>{var f=t(42485),i=t(55579),n=t(11318),l=t(61052);v.exports=function(e){var a=e.config;if((a.customEnvironment||a.canvas)&&a.renderType===n.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!a.customEnvironment&&!a.canvas&&a.renderType!==n.HEADLESS)if(a.renderType===n.CANVAS||a.renderType!==n.CANVAS&&!l.webGL){if(!l.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");a.renderType=n.CANVAS}else a.renderType=n.WEBGL;a.antialias||i.disableSmoothing();var r,u,s=e.scale.baseSize,o=s.width,h=s.height;a.canvas?(e.canvas=a.canvas,e.canvas.width=o,e.canvas.height=h):e.canvas=i.create(e,o,h,a.renderType),a.canvasStyle&&(e.canvas.style=a.canvasStyle),a.antialias||f.setCrisp(e.canvas),a.renderType!==n.HEADLESS&&(r=t(65125),u=t(58410),a.renderType===n.WEBGL?e.renderer=new u(e):(e.renderer=new r(e),e.context=e.renderer.gameContext))}},50403:(v,p,t)=>{var f=t(11318);v.exports=function(i){var n=i.config;if(!n.hideBanner){var l="WebGL";n.renderType===f.CANVAS?l="Canvas":n.renderType===f.HEADLESS&&(l="Headless");var e,a=n.audio,r=i.device.audio;if(e=r.webAudio&&!a.disableWebAudio?"Web Audio":a.noAudio||!r.webAudio&&!r.audioData?"No Audio":"HTML5 Audio",i.device.browser.ie)window.console&&console.log("Phaser v"+f.VERSION+" / https://phaser.io");else{var u,s="",o=[s];Array.isArray(n.bannerBackgroundColor)?(n.bannerBackgroundColor.forEach(function(h){s=s.concat("%c "),o.push("background: "+h),u=h}),o[o.length-1]="color: "+n.bannerTextColor+"; background: "+u):(s=s.concat("%c "),o.push("color: "+n.bannerTextColor+"; background: "+n.bannerBackgroundColor)),o.push("background: transparent"),n.gameTitle&&(s=s.concat(n.gameTitle),n.gameVersion&&(s=s.concat(" v"+n.gameVersion)),n.hidePhaser||(s=s.concat(" / "))),n.hidePhaser||(s=s.concat("Phaser v"+f.VERSION+"-FB ("+l+" | "+e+")")),s=s.concat(" %c "+n.gameURL),o[0]=s,console.log.apply(console,o)}}}},61003:(v,p,t)=>{var f=t(21778),i=t(59460),n=t(95937),l=t(55579),e=t(69186),a=t(45279),r=t(3804),u=t(68611),s=t(92941),o=t(50403),h=t(47345),c=t(8277),d=t(26729),g=t(24496),m=t(79976),y=t(46236),w=t(87037),x=t(70360),T=t(26236),E=t(61632),S=t(64138),C=t(82140),A=t(41640),M=t(72875),b=t(54075),_=new e({initialize:function(P){this.config=new a(P),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new d,this.anims=new i(this),this.textures=new S(this),this.cache=new n(this),this.registry=new s(this),this.input=new m(this,this.config),this.scene=new T(this,this.config.sceneConfig),this.device=h,this.scale=new x(this,this.config),this.sound=null,this.sound=M.create(this),this.loop=new C(this,this.config.fps),this.plugins=new w(this,this.config),this.facebook=new b(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,c(this.boot.bind(this))},boot:function(){y.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),r(this),o(this),f(this.canvas,this.config.parent),this.textures.once(E.READY,this.texturesReady,this),this.events.emit(g.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(g.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var P=this.events;P.on(g.HIDDEN,this.onHidden,this),P.on(g.VISIBLE,this.onVisible,this),P.on(g.BLUR,this.onBlur,this),P.on(g.FOCUS,this.onFocus,this)},step:function(P,L){if(this.pendingDestroy)return this.runDestroy();var F=this.events;F.emit(g.PRE_STEP,P,L),F.emit(g.STEP,P,L),this.scene.update(P,L),F.emit(g.POST_STEP,P,L);var D=this.renderer;D.preRender(),F.emit(g.PRE_RENDER,D,P,L),this.scene.render(D),D.postRender(),F.emit(g.POST_RENDER,D,P,L)},headlessStep:function(P,L){if(this.pendingDestroy)return this.runDestroy();var F=this.events;F.emit(g.PRE_STEP,P,L),F.emit(g.STEP,P,L),this.scene.update(P,L),F.emit(g.POST_STEP,P,L),F.emit(g.PRE_RENDER),F.emit(g.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(g.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(g.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(P,L){L===void 0&&(L=!1),this.pendingDestroy=!0,this.removeCanvas=P,this.noReturn=L},runDestroy:function(){this.scene.destroy(),this.events.emit(g.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});v.exports=_},82140:(v,p,t)=>{var f=t(69186),i=t(76076),n=t(45733),l=t(948),e=new f({initialize:function(a,r){this.game=a,this.raf=new l,this.started=!1,this.running=!1,this.minFps=i(r,"min",5),this.targetFps=i(r,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=i(r,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=i(r,"deltaHistory",10),this.panicMax=i(r,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=i(r,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var a=window.performance.now();this.time=a,this.lastTime=a,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=Math.min(this._target,this.deltaHistory[r]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(a){if(this.started)return this;this.started=!0,this.running=!0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=a,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var a=window.performance.now();this.now=a;var r=a-this.lastTime;r<0&&(r=0),this.rawDelta=r;var u=this.deltaIndex,s=this.deltaHistory,o=this.deltaSmoothingMax,h=r,c=r;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,h=Math.min(h,this._target)),h>this._min&&(h=s[u],h=Math.min(h,this._min)),s[u]=h,this.deltaIndex++,this.deltaIndex>o&&(this.deltaIndex=0),c=0;for(var d=0;d<o;d++)c+=s[d];c/=o}this.delta=c,this.time+=this.rawDelta,a>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0),this.framesThisSecond++;var g=c/this._target;this.callback(a,c,g),this.lastTime=a,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(a){this.running||(a&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=n,this.raf=null,this.game=null}});v.exports=e},41640:(v,p,t)=>{var f=t(24496);v.exports=function(i){var n,l=i.events;document.hidden!==void 0?n="visibilitychange":["webkit","moz","ms"].forEach(function(e){document[e+"Hidden"]!==void 0&&(document.hidden=function(){return document[e+"Hidden"]},n=e+"visibilitychange")}),n&&document.addEventListener(n,function(e){document.hidden||e.type==="pause"?l.emit(f.HIDDEN):l.emit(f.VISIBLE)},!1),window.onblur=function(){l.emit(f.BLUR)},window.onfocus=function(){l.emit(f.FOCUS)},window.focus&&i.config.autoFocus&&window.focus()}},8600:v=>{v.exports="blur"},32055:v=>{v.exports="boot"},91696:v=>{v.exports="contextlost"},90358:v=>{v.exports="contextrestored"},89703:v=>{v.exports="destroy"},74873:v=>{v.exports="focus"},61944:v=>{v.exports="hidden"},66651:v=>{v.exports="pause"},51739:v=>{v.exports="postrender"},44031:v=>{v.exports="poststep"},63372:v=>{v.exports="prerender"},25984:v=>{v.exports="prestep"},18010:v=>{v.exports="ready"},82086:v=>{v.exports="resume"},34779:v=>{v.exports="step"},16883:v=>{v.exports="visible"},24496:(v,p,t)=>{v.exports={BLUR:t(8600),BOOT:t(32055),CONTEXT_LOST:t(91696),CONTEXT_RESTORED:t(90358),DESTROY:t(89703),FOCUS:t(74873),HIDDEN:t(61944),PAUSE:t(66651),POST_RENDER:t(51739),POST_STEP:t(44031),PRE_RENDER:t(63372),PRE_STEP:t(25984),READY:t(18010),RESUME:t(82086),STEP:t(34779),VISIBLE:t(16883)}},91004:(v,p,t)=>{v.exports={Config:t(45279),CreateRenderer:t(68611),DebugHeader:t(50403),Events:t(24496),TimeStep:t(82140),VisibilityHandler:t(41640)}},48819:(v,p,t)=>{var f=t(99489),i=t(55579),n=t(76076);v.exports=function(l){var e=n(l,"data",[]),a=n(l,"canvas",null),r=n(l,"palette",f),u=n(l,"pixelWidth",1),s=n(l,"pixelHeight",u),o=n(l,"resizeCanvas",!0),h=n(l,"clearCanvas",!0),c=n(l,"preRender",null),d=n(l,"postRender",null),g=Math.floor(Math.abs(e[0].length*u)),m=Math.floor(Math.abs(e.length*s));a||(a=i.create2D(this,g,m),o=!1,h=!1),o&&(a.width=g,a.height=m);var y=a.getContext("2d");h&&y.clearRect(0,0,g,m),c&&c(a,y);for(var w=0;w<e.length;w++)for(var x=e[w],T=0;T<x.length;T++){var E=x[T];E!=="."&&E!==" "&&(y.fillStyle=r[E],y.fillRect(T*u,w*s,u,s))}return d&&d(a,y),a}},99489:v=>{v.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},15327:(v,p,t)=>{var f=t(69186),i=t(70183),n=t(23730),l=t(17321),e=new f({Extends:n,initialize:function(a,r,u,s){n.call(this,"CubicBezierCurve"),Array.isArray(a)&&(s=new l(a[6],a[7]),u=new l(a[4],a[5]),r=new l(a[2],a[3]),a=new l(a[0],a[1])),this.p0=a,this.p1=r,this.p2=u,this.p3=s},getStartPoint:function(a){return a===void 0&&(a=new l),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,r){r===void 0&&(r=new l);var u=this.p0,s=this.p1,o=this.p2,h=this.p3;return r.set(i(a,u.x,s.x,o.x,h.x),i(a,u.y,s.y,o.y,h.y))},draw:function(a,r){r===void 0&&(r=32);var u=this.getPoints(r);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var s=1;s<u.length;s++)a.lineTo(u[s].x,u[s].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});e.fromJSON=function(a){var r=a.points,u=new l(r[0],r[1]),s=new l(r[2],r[3]),o=new l(r[4],r[5]),h=new l(r[6],r[7]);return new e(u,s,o,h)},v.exports=e},23730:(v,p,t)=>{var f=t(69186),i=t(79803),n=t(75380),l=t(17321),e=new f({initialize:function(a){this.type=a,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function(a,r){return r===void 0&&(r=32),a.strokePoints(this.getPoints(r))},getBounds:function(a,r){a||(a=new n),r===void 0&&(r=16);var u=this.getLength();r>u&&(r=u/2);var s=Math.max(1,Math.round(u/r));return i(this.getSpacedPoints(s),a)},getDistancePoints:function(a){var r=this.getLength(),u=Math.max(1,r/a);return this.getSpacedPoints(u)},getEndPoint:function(a){return a===void 0&&(a=new l),this.getPointAt(1,a)},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a===void 0&&(a=this.arcLengthDivisions),this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r,u=[],s=this.getPoint(0,this._tmpVec2A),o=0;u.push(0);for(var h=1;h<=a;h++)o+=(r=this.getPoint(h/a,this._tmpVec2B)).distance(s),u.push(o),s.copy(r);return this.cacheArcLengths=u,u},getPointAt:function(a,r){var u=this.getUtoTmapping(a);return this.getPoint(u,r)},getPoints:function(a,r,u){u===void 0&&(u=[]),a||(a=r?this.getLength()/r:this.defaultDivisions);for(var s=0;s<=a;s++)u.push(this.getPoint(s/a));return u},getRandomPoint:function(a){return a===void 0&&(a=new l),this.getPoint(Math.random(),a)},getSpacedPoints:function(a,r,u){u===void 0&&(u=[]),a||(a=r?this.getLength()/r:this.defaultDivisions);for(var s=0;s<=a;s++){var o=this.getUtoTmapping(s/a,null,a);u.push(this.getPoint(o))}return u},getStartPoint:function(a){return a===void 0&&(a=new l),this.getPointAt(0,a)},getTangent:function(a,r){r===void 0&&(r=new l);var u=1e-4,s=a-u,o=a+u;return s<0&&(s=0),o>1&&(o=1),this.getPoint(s,this._tmpVec2A),this.getPoint(o,r),r.subtract(this._tmpVec2A).normalize()},getTangentAt:function(a,r){var u=this.getUtoTmapping(a);return this.getTangent(u,r)},getTFromDistance:function(a,r){return a<=0?0:this.getUtoTmapping(0,a,r)},getUtoTmapping:function(a,r,u){var s,o=this.getLengths(u),h=0,c=o.length;s=r?Math.min(r,o[c-1]):a*o[c-1];for(var d,g=0,m=c-1;g<=m;)if((d=o[h=Math.floor(g+(m-g)/2)]-s)<0)g=h+1;else{if(!(d>0)){m=h;break}m=h-1}if(o[h=m]===s)return h/(c-1);var y=o[h];return(h+(s-y)/(o[h+1]-y))/(c-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});v.exports=e},36811:(v,p,t)=>{var f=t(69186),i=t(23730),n=t(23407),l=t(76076),e=t(33642),a=t(17321),r=new f({Extends:i,initialize:function(u,s,o,h,c,d,g,m){if(typeof u=="object"){var y=u;u=l(y,"x",0),s=l(y,"y",0),o=l(y,"xRadius",0),h=l(y,"yRadius",o),c=l(y,"startAngle",0),d=l(y,"endAngle",360),g=l(y,"clockwise",!1),m=l(y,"rotation",0)}else h===void 0&&(h=o),c===void 0&&(c=0),d===void 0&&(d=360),g===void 0&&(g=!1),m===void 0&&(m=0);i.call(this,"EllipseCurve"),this.p0=new a(u,s),this._xRadius=o,this._yRadius=h,this._startAngle=n(c),this._endAngle=n(d),this._clockwise=g,this._rotation=n(m)},getStartPoint:function(u){return u===void 0&&(u=new a),this.getPoint(0,u)},getResolution:function(u){return 2*u},getPoint:function(u,s){s===void 0&&(s=new a);for(var o=2*Math.PI,h=this._endAngle-this._startAngle,c=Math.abs(h)<Number.EPSILON;h<0;)h+=o;for(;h>o;)h-=o;h<Number.EPSILON&&(h=c?0:o),this._clockwise&&!c&&(h===o?h=-o:h-=o);var d=this._startAngle+u*h,g=this.p0.x+this._xRadius*Math.cos(d),m=this.p0.y+this._yRadius*Math.sin(d);if(this._rotation!==0){var y=Math.cos(this._rotation),w=Math.sin(this._rotation),x=g-this.p0.x,T=m-this.p0.y;g=x*y-T*w+this.p0.x,m=x*w+T*y+this.p0.y}return s.set(g,m)},setXRadius:function(u){return this.xRadius=u,this},setYRadius:function(u){return this.yRadius=u,this},setWidth:function(u){return this.xRadius=u/2,this},setHeight:function(u){return this.yRadius=u/2,this},setStartAngle:function(u){return this.startAngle=u,this},setEndAngle:function(u){return this.endAngle=u,this},setClockwise:function(u){return this.clockwise=u,this},setRotation:function(u){return this.rotation=u,this},x:{get:function(){return this.p0.x},set:function(u){this.p0.x=u}},y:{get:function(){return this.p0.y},set:function(u){this.p0.y=u}},xRadius:{get:function(){return this._xRadius},set:function(u){this._xRadius=u}},yRadius:{get:function(){return this._yRadius},set:function(u){this._yRadius=u}},startAngle:{get:function(){return e(this._startAngle)},set:function(u){this._startAngle=n(u)}},endAngle:{get:function(){return e(this._endAngle)},set:function(u){this._endAngle=n(u)}},clockwise:{get:function(){return this._clockwise},set:function(u){this._clockwise=u}},angle:{get:function(){return e(this._rotation)},set:function(u){this._rotation=n(u)}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:e(this._startAngle),endAngle:e(this._endAngle),clockwise:this._clockwise,rotation:e(this._rotation)}}});r.fromJSON=function(u){return new r(u)},v.exports=r},55964:(v,p,t)=>{var f=t(69186),i=t(23730),n=t(79803),l=t(75380),e=t(17321),a=new f({Extends:i,initialize:function(r,u){i.call(this,"LineCurve"),Array.isArray(r)&&(u=new e(r[2],r[3]),r=new e(r[0],r[1])),this.p0=r,this.p1=u,this.arcLengthDivisions=1},getBounds:function(r){return r===void 0&&(r=new l),n([this.p0,this.p1],r)},getStartPoint:function(r){return r===void 0&&(r=new e),r.copy(this.p0)},getResolution:function(r){return r===void 0&&(r=1),r},getPoint:function(r,u){return u===void 0&&(u=new e),r===1?u.copy(this.p1):(u.copy(this.p1).subtract(this.p0).scale(r).add(this.p0),u)},getPointAt:function(r,u){return this.getPoint(r,u)},getTangent:function(r,u){return u===void 0&&(u=new e),u.copy(this.p1).subtract(this.p0).normalize(),u},getUtoTmapping:function(r,u,s){var o;if(u){var h=this.getLengths(s),c=h[h.length-1];o=Math.min(u,c)/c}else o=r;return o},draw:function(r){return r.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});a.fromJSON=function(r){var u=r.points,s=new e(u[0],u[1]),o=new e(u[2],u[3]);return new a(s,o)},v.exports=a},68680:(v,p,t)=>{var f=t(69186),i=t(23730),n=t(67372),l=t(17321),e=new f({Extends:i,initialize:function(a,r,u){i.call(this,"QuadraticBezier"),Array.isArray(a)&&(u=new l(a[4],a[5]),r=new l(a[2],a[3]),a=new l(a[0],a[1])),this.p0=a,this.p1=r,this.p2=u},getStartPoint:function(a){return a===void 0&&(a=new l),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,r){r===void 0&&(r=new l);var u=this.p0,s=this.p1,o=this.p2;return r.set(n(a,u.x,s.x,o.x),n(a,u.y,s.y,o.y))},draw:function(a,r){r===void 0&&(r=32);var u=this.getPoints(r);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var s=1;s<u.length;s++)a.lineTo(u[s].x,u[s].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});e.fromJSON=function(a){var r=a.points,u=new l(r[0],r[1]),s=new l(r[2],r[3]),o=new l(r[4],r[5]);return new e(u,s,o)},v.exports=e},14575:(v,p,t)=>{var f=t(51929),i=t(69186),n=t(23730),l=t(17321),e=new i({Extends:n,initialize:function(a){a===void 0&&(a=[]),n.call(this,"SplineCurve"),this.points=[],this.addPoints(a)},addPoints:function(a){for(var r=0;r<a.length;r++){var u=new l;typeof a[r]=="number"?(u.x=a[r],u.y=a[r+1],r++):Array.isArray(a[r])?(u.x=a[r][0],u.y=a[r][1]):(u.x=a[r].x,u.y=a[r].y),this.points.push(u)}return this},addPoint:function(a,r){var u=new l(a,r);return this.points.push(u),u},getStartPoint:function(a){return a===void 0&&(a=new l),a.copy(this.points[0])},getResolution:function(a){return a*this.points.length},getPoint:function(a,r){r===void 0&&(r=new l);var u=this.points,s=(u.length-1)*a,o=Math.floor(s),h=s-o,c=u[o===0?o:o-1],d=u[o],g=u[o>u.length-2?u.length-1:o+1],m=u[o>u.length-3?u.length-1:o+2];return r.set(f(h,c.x,d.x,g.x,m.x),f(h,c.y,d.y,g.y,m.y))},toJSON:function(){for(var a=[],r=0;r<this.points.length;r++)a.push(this.points[r].x),a.push(this.points[r].y);return{type:this.type,points:a}}});e.fromJSON=function(a){return new e(a.points)},v.exports=e},994:(v,p,t)=>{v.exports={Path:t(96841),MoveTo:t(63565),CubicBezier:t(15327),Curve:t(23730),Ellipse:t(36811),Line:t(55964),QuadraticBezier:t(68680),Spline:t(14575)}},63565:(v,p,t)=>{var f=t(69186),i=t(17321),n=new f({initialize:function(l,e){this.active=!1,this.p0=new i(l,e)},getPoint:function(l,e){return e===void 0&&(e=new i),e.copy(this.p0)},getPointAt:function(l,e){return this.getPoint(l,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});v.exports=n},96841:(v,p,t)=>{var f=t(69186),i=t(15327),n=t(36811),l=t(66642),e=t(55964),a=t(63565),r=t(68680),u=t(75380),s=t(14575),o=t(17321),h=t(80925),c=new f({initialize:function(d,g){d===void 0&&(d=0),g===void 0&&(g=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new o,this._tmpVec2A=new o,this._tmpVec2B=new o,typeof d=="object"?this.fromJSON(d):this.startPoint.set(d,g)},add:function(d){return this.curves.push(d),this},circleTo:function(d,g,m){return g===void 0&&(g=!1),this.ellipseTo(d,d,0,360,g,m)},closePath:function(){var d=this.curves[0].getPoint(0),g=this.curves[this.curves.length-1].getPoint(1);return d.equals(g)||this.curves.push(new e(g,d)),this},cubicBezierTo:function(d,g,m,y,w,x){var T,E,S,C=this.getEndPoint();return d instanceof o?(T=d,E=g,S=m):(T=new o(m,y),E=new o(w,x),S=new o(d,g)),this.add(new i(C,T,E,S))},quadraticBezierTo:function(d,g,m,y){var w,x,T=this.getEndPoint();return d instanceof o?(w=d,x=g):(w=new o(m,y),x=new o(d,g)),this.add(new r(T,w,x))},draw:function(d,g){for(var m=0;m<this.curves.length;m++){var y=this.curves[m];y.active&&y.draw(d,g)}return d},ellipseTo:function(d,g,m,y,w,x){var T=new n(0,0,d,g,m,y,w,x),E=this.getEndPoint(this._tmpVec2A),S=T.getStartPoint(this._tmpVec2B);return E.subtract(S),T.x=E.x,T.y=E.y,this.add(T)},fromJSON:function(d){this.curves=[],this.cacheLengths=[],this.startPoint.set(d.x,d.y),this.autoClose=d.autoClose;for(var g=0;g<d.curves.length;g++){var m=d.curves[g];switch(m.type){case"LineCurve":this.add(e.fromJSON(m));break;case"EllipseCurve":this.add(n.fromJSON(m));break;case"SplineCurve":this.add(s.fromJSON(m));break;case"CubicBezierCurve":this.add(i.fromJSON(m));break;case"QuadraticBezierCurve":this.add(r.fromJSON(m))}}return this},getBounds:function(d,g){d===void 0&&(d=new u),g===void 0&&(g=16),d.x=Number.MAX_VALUE,d.y=Number.MAX_VALUE;for(var m=new u,y=h.MIN_SAFE_INTEGER,w=h.MIN_SAFE_INTEGER,x=0;x<this.curves.length;x++){var T=this.curves[x];T.active&&(T.getBounds(m,g),d.x=Math.min(d.x,m.x),d.y=Math.min(d.y,m.y),y=Math.max(y,m.right),w=Math.max(w,m.bottom))}return d.right=y,d.bottom=w,d},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var d=[],g=0,m=0;m<this.curves.length;m++)g+=this.curves[m].getLength(),d.push(g);return this.cacheLengths=d,d},getEndPoint:function(d){return d===void 0&&(d=new o),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,d):d.copy(this.startPoint),d},getLength:function(){var d=this.getCurveLengths();return d[d.length-1]},getPoint:function(d,g){g===void 0&&(g=new o);for(var m=d*this.getLength(),y=this.getCurveLengths(),w=0;w<y.length;){if(y[w]>=m){var x=y[w]-m,T=this.curves[w],E=T.getLength(),S=E===0?0:1-x/E;return T.getPointAt(S,g)}w++}return null},getPoints:function(d){d===void 0&&(d=12);for(var g,m=[],y=0;y<this.curves.length;y++){var w=this.curves[y];if(w.active)for(var x=w.getResolution(d),T=w.getPoints(x),E=0;E<T.length;E++){var S=T[E];g&&g.equals(S)||(m.push(S),g=S)}}return this.autoClose&&m.length>1&&!m[m.length-1].equals(m[0])&&m.push(m[0]),m},getRandomPoint:function(d){return d===void 0&&(d=new o),this.getPoint(Math.random(),d)},getSpacedPoints:function(d){d===void 0&&(d=40);for(var g=[],m=0;m<=d;m++)g.push(this.getPoint(m/d));return this.autoClose&&g.push(g[0]),g},getStartPoint:function(d){return d===void 0&&(d=new o),d.copy(this.startPoint)},getTangent:function(d,g){g===void 0&&(g=new o);for(var m=d*this.getLength(),y=this.getCurveLengths(),w=0;w<y.length;){if(y[w]>=m){var x=y[w]-m,T=this.curves[w],E=T.getLength(),S=E===0?0:1-x/E;return T.getTangentAt(S,g)}w++}return null},lineTo:function(d,g){d instanceof o?this._tmpVec2B.copy(d):this._tmpVec2B.set(d,g);var m=this.getEndPoint(this._tmpVec2A);return this.add(new e([m.x,m.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(d){return d.unshift(this.getEndPoint()),this.add(new s(d))},moveTo:function(d,g){return d instanceof o?this.add(new a(d.x,d.y)):this.add(new a(d,g))},toJSON:function(){for(var d=[],g=0;g<this.curves.length;g++)d.push(this.curves[g].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:d}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",function(d,g){return new c(d,g)}),v.exports=c},92941:(v,p,t)=>{var f=t(69186),i=t(82461),n=new f({initialize:function(l,e){this.parent=l,this.events=e,e||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(i.DESTROY,this.destroy,this)},get:function(l){var e=this.list;if(Array.isArray(l)){for(var a=[],r=0;r<l.length;r++)a.push(e[l[r]]);return a}return e[l]},getAll:function(){var l={};for(var e in this.list)this.list.hasOwnProperty(e)&&(l[e]=this.list[e]);return l},query:function(l){var e={};for(var a in this.list)this.list.hasOwnProperty(a)&&a.match(l)&&(e[a]=this.list[a]);return e},set:function(l,e){if(this._frozen)return this;if(typeof l=="string")return this.setValue(l,e);for(var a in l)this.setValue(a,l[a]);return this},inc:function(l,e){if(this._frozen)return this;e===void 0&&(e=1);var a=this.get(l);return a===void 0&&(a=0),this.set(l,a+e),this},toggle:function(l){return this._frozen||this.set(l,!this.get(l)),this},setValue:function(l,e){if(this._frozen)return this;if(this.has(l))this.values[l]=e;else{var a=this,r=this.list,u=this.events,s=this.parent;Object.defineProperty(this.values,l,{enumerable:!0,configurable:!0,get:function(){return r[l]},set:function(o){if(!a._frozen){var h=r[l];r[l]=o,u.emit(i.CHANGE_DATA,s,l,o,h),u.emit(i.CHANGE_DATA_KEY+l,s,o,h)}}}),r[l]=e,u.emit(i.SET_DATA,s,l,e)}return this},each:function(l,e){for(var a=[this.parent,null,void 0],r=1;r<arguments.length;r++)a.push(arguments[r]);for(var u in this.list)a[1]=u,a[2]=this.list[u],l.apply(e,a);return this},merge:function(l,e){for(var a in e===void 0&&(e=!0),l)l.hasOwnProperty(a)&&(e||!e&&!this.has(a))&&this.setValue(a,l[a]);return this},remove:function(l){if(this._frozen)return this;if(!Array.isArray(l))return this.removeValue(l);for(var e=0;e<l.length;e++)this.removeValue(l[e]);return this},removeValue:function(l){if(this.has(l)){var e=this.list[l];delete this.list[l],delete this.values[l],this.events.emit(i.REMOVE_DATA,this.parent,l,e)}return this},pop:function(l){var e=void 0;return!this._frozen&&this.has(l)&&(e=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(i.REMOVE_DATA,this.parent,l,e)),e},has:function(l){return this.list.hasOwnProperty(l)},setFreeze:function(l){return this._frozen=l,this},reset:function(){for(var l in this.list)delete this.list[l],delete this.values[l];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(i.CHANGE_DATA),this.events.off(i.SET_DATA),this.events.off(i.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(l){this._frozen=!!l}},count:{get:function(){var l=0;for(var e in this.list)this.list[e]!==void 0&&l++;return l}}});v.exports=n},19421:(v,p,t)=>{var f=t(69186),i=t(92941),n=t(46236),l=t(12063),e=new f({Extends:i,initialize:function(a){i.call(this,a,a.sys.events),this.scene=a,this.systems=a.sys,a.sys.events.once(l.BOOT,this.boot,this),a.sys.events.on(l.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){i.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",e,"data"),v.exports=e},13378:v=>{v.exports="changedata"},23922:v=>{v.exports="changedata-"},99928:v=>{v.exports="destroy"},74393:v=>{v.exports="removedata"},1582:v=>{v.exports="setdata"},82461:(v,p,t)=>{v.exports={CHANGE_DATA:t(13378),CHANGE_DATA_KEY:t(23922),DESTROY:t(99928),REMOVE_DATA:t(74393),SET_DATA:t(1582)}},97216:(v,p,t)=>{v.exports={DataManager:t(92941),DataManagerPlugin:t(19421),Events:t(82461)}},26926:(v,p,t)=>{var f=t(82153),i={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};v.exports=function(){if(typeof importScripts=="function")return i;i.audioData=!!window.Audio,i.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var n=document.createElement("audio"),l=!!n.canPlayType;try{if(l&&(n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(i.ogg=!0),(n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||n.canPlayType("audio/opus;").replace(/^no$/,""))&&(i.opus=!0),n.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(i.mp3=!0),n.canPlayType("audio/wav").replace(/^no$/,"")&&(i.wav=!0),(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/aac;").replace(/^no$/,""))&&(i.m4a=!0),n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(i.webm=!0),n.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(f.edge)i.dolby=!0;else if(f.safari&&f.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var e=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(e===10&&a>=11||e>10)&&(i.dolby=!0)}}}catch{}return i}()},82153:(v,p,t)=>{var f,i=t(89771),n={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};v.exports=(f=navigator.userAgent,/Edge\/\d+/.test(f)?n.edge=!0:/Chrome\/(\d+)/.test(f)&&!i.windowsPhone?(n.chrome=!0,n.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(f)?(n.firefox=!0,n.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(f)&&i.iOS?n.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(f)?(n.ie=!0,n.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(f)?n.opera=!0:/Safari/.test(f)&&!i.windowsPhone?n.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(f)&&(n.ie=!0,n.trident=!0,n.tridentVersion=parseInt(RegExp.$1,10),n.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(f)&&(n.silk=!0),n)},23404:(v,p,t)=>{var f,i,n,l=t(55579),e={supportInverseAlpha:!1,supportNewBlendModes:!1};v.exports=(typeof importScripts!="function"&&document!==void 0&&(e.supportNewBlendModes=(f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",i="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(n=new Image).onload=function(){var a=new Image;a.onload=function(){var r=l.create(a,6,1).getContext("2d");if(r.globalCompositeOperation="multiply",r.drawImage(n,0,0),r.drawImage(a,2,0),!r.getImageData(2,0,1,1))return!1;var u=r.getImageData(2,0,1,1).data;l.remove(a),e.supportNewBlendModes=u[0]===255&&u[1]===0&&u[2]===0},a.src=f+"/wCKxvRF"+i},n.src=f+"AP804Oa6"+i,!1),e.supportInverseAlpha=function(){var a=l.create(this,2,1).getContext("2d");a.fillStyle="rgba(10, 20, 30, 0.5)",a.fillRect(0,0,1,1);var r=a.getImageData(0,0,1,1);if(r===null)return!1;a.putImageData(r,1,0);var u=a.getImageData(1,0,1,1);return u.data[0]===r.data[0]&&u.data[1]===r.data[1]&&u.data[2]===r.data[2]&&u.data[3]===r.data[3]}()),e)},61052:(v,p,t)=>{var f=t(89771),i=t(82153),n=t(55579),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};v.exports=function(){if(typeof importScripts=="function")return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch{l.localStorage=!1}l.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),l.fileSystem=!!window.requestFileSystem;var e,a,r,u=!1;return l.webGL=function(){if(window.WebGLRenderingContext)try{var s=n.createWebGL(this),o=s.getContext("webgl")||s.getContext("experimental-webgl"),h=n.create2D(this),c=h.getContext("2d").createImageData(1,1);return u=c.data instanceof Uint8ClampedArray,n.remove(s),n.remove(h),!!o}catch{return!1}return!1}(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,i.firefox&&i.firefoxVersion<21&&(l.getUserMedia=!1),!f.iOS&&(i.ie||i.firefox||i.chrome)&&(l.canvasBitBltShift=!0),(i.safari||i.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(l.littleEndian=(e=new ArrayBuffer(4),a=new Uint8Array(e),r=new Uint32Array(e),a[0]=161,a[1]=178,a[2]=195,a[3]=212,r[0]===3569595041||r[0]!==2712847316&&null)),l.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&l.littleEndian!==null&&u,l}()},30053:v=>{var p={available:!1,cancel:"",keyboard:!1,request:""};v.exports=function(){if(typeof importScripts=="function")return p;var t,f="Fullscreen",i="FullScreen",n=["request"+f,"request"+i,"webkitRequest"+f,"webkitRequest"+i,"msRequest"+f,"msRequest"+i,"mozRequest"+i,"mozRequest"+f];for(t=0;t<n.length;t++)if(document.documentElement[n[t]]){p.available=!0,p.request=n[t];break}var l=["cancel"+i,"exit"+f,"webkitCancel"+i,"webkitExit"+f,"msCancel"+i,"msExit"+f,"mozCancel"+i,"mozExit"+f];if(p.available){for(t=0;t<l.length;t++)if(document[l[t]]){p.cancel=l[t];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(p.keyboard=!0),Object.defineProperty(p,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),p}()},16252:(v,p,t)=>{var f=t(82153),i={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};v.exports=(typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(i.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(i.mspointer=!0),navigator.getGamepads&&(i.gamepads=!0),"onwheel"in window||f.ie&&"WheelEvent"in window?i.wheelEvent="wheel":"onmousewheel"in window?i.wheelEvent="mousewheel":f.firefox&&"MouseScrollEvent"in window&&(i.wheelEvent="DOMMouseScroll")),i)},89771:v=>{var p={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};v.exports=function(){if(typeof importScripts=="function")return p;var t=navigator.userAgent;/Windows/.test(t)?p.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(p.iOS=!0,p.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),p.iOSVersion=parseInt(RegExp.$1,10)):p.macOS=!0:/Android/.test(t)?p.android=!0:/Linux/.test(t)?p.linux=!0:/iP[ao]d|iPhone/i.test(t)?(p.iOS=!0,navigator.appVersion.match(/OS (\d+)/),p.iOSVersion=parseInt(RegExp.$1,10),p.iPhone=t.toLowerCase().indexOf("iphone")!==-1,p.iPad=t.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?p.kindle=!0:/CrOS/.test(t)&&(p.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(p.android=!1,p.iOS=!1,p.macOS=!1,p.windows=!0,p.windowsPhone=!0);var f=/Silk/.test(t);return(p.windows||p.macOS||p.linux&&!f||p.chromeOS)&&(p.desktop=!0),(p.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(p.desktop=!1),navigator.standalone&&(p.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(p.cordova=!0),window.ejecta!==void 0&&(p.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(p.node=!0),p.node&&typeof process.versions=="object"&&(p.nodeWebkit=!!process.versions["node-webkit"],p.electron=!!process.versions.electron),/Crosswalk/.test(t)&&(p.crosswalk=!0),p.pixelRatio=window.devicePixelRatio||1,p}()},6:v=>{var p={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};v.exports=function(){if(typeof importScripts=="function")return p;var t=document.createElement("video"),f=!!t.canPlayType;try{f&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(p.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(p.h264=!0,p.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(p.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(p.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(p.hls=!0))}catch{}return p}()},47345:(v,p,t)=>{v.exports={os:t(89771),browser:t(82153),features:t(61052),input:t(16252),audio:t(26926),video:t(6),fullscreen:t(30053),canvasFeatures:t(23404)}},40013:(v,p,t)=>{var f=new(t(69186))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(i){return this._matrix=i,this._dirty=!0,this},reset:function(){var i=this._matrix;return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=0,i[6]=1,i[7]=0,i[8]=0,i[9]=0,i[10]=0,i[11]=0,i[12]=1,i[13]=0,i[14]=0,i[15]=0,i[16]=0,i[17]=0,i[18]=1,i[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var i=new Float32Array(this._matrix);i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,this._data=i,this._dirty=!1}return this._data},brightness:function(i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var l=i;return this.multiply([l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0],n)},saturate:function(i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var l=2*i/3+1,e=-.5*(l-1);return this.multiply([l,e,e,0,0,e,l,e,0,0,e,e,l,0,0,0,0,0,1,0],n)},desaturate:function(i){return i===void 0&&(i=!1),this.saturate(-1,i)},hue:function(i,n){i===void 0&&(i=0),n===void 0&&(n=!1),i=i/180*Math.PI;var l=Math.cos(i),e=Math.sin(i),a=.213,r=.715,u=.072;return this.multiply([a+.787*l+e*-a,r+l*-r+e*-r,u+l*-u+.928*e,0,0,a+l*-a+.143*e,r+l*(1-r)+.14*e,u+l*-u+-.283*e,0,0,a+l*-a+-.787*e,r+l*-r+e*r,u+.928*l+e*u,0,0,0,0,0,1,0],n)},grayscale:function(i,n){return i===void 0&&(i=1),n===void 0&&(n=!1),this.saturate(-i,n)},blackWhite:function(i){return i===void 0&&(i=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],i)},contrast:function(i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var l=i+1,e=-.5*(l-1);return this.multiply([l,0,0,0,e,0,l,0,0,e,0,0,l,0,e,0,0,0,1,0],n)},negative:function(i){return i===void 0&&(i=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],i)},desaturateLuminance:function(i){return i===void 0&&(i=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],i)},sepia:function(i){return i===void 0&&(i=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],i)},night:function(i,n){return i===void 0&&(i=.1),n===void 0&&(n=!1),this.multiply([-2*i,-i,0,0,0,-i,0,i,0,0,0,i,2*i,0,0,0,0,0,1,0],n)},lsd:function(i){return i===void 0&&(i=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],i)},brown:function(i){return i===void 0&&(i=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],i)},vintagePinhole:function(i){return i===void 0&&(i=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],i)},kodachrome:function(i){return i===void 0&&(i=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],i)},technicolor:function(i){return i===void 0&&(i=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],i)},polaroid:function(i){return i===void 0&&(i=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],i)},shiftToBGR:function(i){return i===void 0&&(i=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],i)},multiply:function(i,n){n||this.reset();for(var l=this._matrix,e=[],a=0;a<20;a++)e[a]=l[a];return l[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],l[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],l[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],l[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],l[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],l[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],l[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],l[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],l[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],l[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],l[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],l[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],l[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],l[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],l[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],l[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],l[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],l[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],l[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],l[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],this._dirty=!0,this}});v.exports=f},33332:(v,p,t)=>{var f=t(69186),i=t(45733),n=new f({initialize:function(l,e,a){this._rgb=[0,0,0],this.onChangeCallback=i,this.dirty=!1,this.set(l,e,a)},set:function(l,e,a){return l===void 0&&(l=0),e===void 0&&(e=0),a===void 0&&(a=0),this._rgb=[l,e,a],this.onChange(),this},equals:function(l,e,a){var r=this._rgb;return r.r===l&&r.g===e&&r.b===a},onChange:function(){this.dirty=!0;var l=this._rgb;this.onChangeCallback.call(this,l[0],l[1],l[2])},r:{get:function(){return this._rgb[0]},set:function(l){this._rgb[0]=l,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(l){this._rgb[1]=l,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(l){this._rgb[2]=l,this.onChange()}},destroy:function(){this.onChangeCallback=null}});v.exports=n},68494:v=>{v.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},44240:(v,p,t)=>{var f=t(94638),i=t(34463),n=t(62447),l=t(52217);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)+r),n(e,f(a)+u),e}},71308:(v,p,t)=>{var f=t(94638),i=t(40353),n=t(62447),l=t(64899);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)-r),n(e,f(a)+u),e}},50547:(v,p,t)=>{var f=t(94638),i=t(58380),n=t(62447),l=t(23855);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)+r),n(e,f(a)+u),e}},68698:(v,p,t)=>{var f=t(84070),i=t(34463),n=t(1355);v.exports=function(l,e,a,r){return a===void 0&&(a=0),r===void 0&&(r=0),f(l,i(e)+a,n(e)+r),l}},6125:(v,p,t)=>{var f=t(1355),i=t(40353),n=t(80327),l=t(64899);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)-r),n(e,f(a)+u),e}},19918:(v,p,t)=>{var f=t(68494),i=[];i[f.BOTTOM_CENTER]=t(44240),i[f.BOTTOM_LEFT]=t(71308),i[f.BOTTOM_RIGHT]=t(50547),i[f.CENTER]=t(68698),i[f.LEFT_CENTER]=t(6125),i[f.RIGHT_CENTER]=t(48756),i[f.TOP_CENTER]=t(68292),i[f.TOP_LEFT]=t(54062),i[f.TOP_RIGHT]=t(13257),i[f.LEFT_BOTTOM]=i[f.BOTTOM_LEFT],i[f.LEFT_TOP]=i[f.TOP_LEFT],i[f.RIGHT_BOTTOM]=i[f.BOTTOM_RIGHT],i[f.RIGHT_TOP]=i[f.TOP_RIGHT],v.exports=function(n,l,e,a,r){return i[e](n,l,a,r)}},48756:(v,p,t)=>{var f=t(1355),i=t(58380),n=t(80327),l=t(23855);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)+r),n(e,f(a)+u),e}},68292:(v,p,t)=>{var f=t(34463),i=t(8970),n=t(52217),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,f(a)+r),l(e,i(a)-u),e}},54062:(v,p,t)=>{var f=t(40353),i=t(8970),n=t(64899),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,f(a)-r),l(e,i(a)-u),e}},13257:(v,p,t)=>{var f=t(58380),i=t(8970),n=t(23855),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,f(a)+r),l(e,i(a)-u),e}},25524:(v,p,t)=>{v.exports={BottomCenter:t(44240),BottomLeft:t(71308),BottomRight:t(50547),Center:t(68698),LeftCenter:t(6125),QuickSet:t(19918),RightCenter:t(48756),TopCenter:t(68292),TopLeft:t(54062),TopRight:t(13257)}},87150:(v,p,t)=>{var f=t(68494),i=t(72646),n={In:t(25524),To:t(23553)};n=i(!1,n,f),v.exports=n},11569:(v,p,t)=>{var f=t(94638),i=t(34463),n=t(52217),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,i(a)+r),l(e,f(a)+u),e}},40660:(v,p,t)=>{var f=t(94638),i=t(40353),n=t(64899),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,i(a)-r),l(e,f(a)+u),e}},50157:(v,p,t)=>{var f=t(94638),i=t(58380),n=t(23855),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,i(a)+r),l(e,f(a)+u),e}},75455:(v,p,t)=>{var f=t(94638),i=t(40353),n=t(62447),l=t(23855);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)-r),n(e,f(a)+u),e}},82302:(v,p,t)=>{var f=t(1355),i=t(40353),n=t(80327),l=t(23855);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)-r),n(e,f(a)+u),e}},66639:(v,p,t)=>{var f=t(40353),i=t(8970),n=t(23855),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,f(a)-r),l(e,i(a)-u),e}},92611:(v,p,t)=>{var f=t(68494),i=[];i[f.BOTTOM_CENTER]=t(11569),i[f.BOTTOM_LEFT]=t(40660),i[f.BOTTOM_RIGHT]=t(50157),i[f.LEFT_BOTTOM]=t(75455),i[f.LEFT_CENTER]=t(82302),i[f.LEFT_TOP]=t(66639),i[f.RIGHT_BOTTOM]=t(56635),i[f.RIGHT_CENTER]=t(62444),i[f.RIGHT_TOP]=t(24467),i[f.TOP_CENTER]=t(92695),i[f.TOP_LEFT]=t(10184),i[f.TOP_RIGHT]=t(86520),v.exports=function(n,l,e,a,r){return i[e](n,l,a,r)}},56635:(v,p,t)=>{var f=t(94638),i=t(58380),n=t(62447),l=t(64899);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)+r),n(e,f(a)+u),e}},62444:(v,p,t)=>{var f=t(1355),i=t(58380),n=t(80327),l=t(64899);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,i(a)+r),n(e,f(a)+u),e}},24467:(v,p,t)=>{var f=t(58380),i=t(8970),n=t(64899),l=t(91873);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),n(e,f(a)+r),l(e,i(a)-u),e}},92695:(v,p,t)=>{var f=t(34463),i=t(8970),n=t(62447),l=t(52217);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,f(a)+r),n(e,i(a)-u),e}},10184:(v,p,t)=>{var f=t(40353),i=t(8970),n=t(62447),l=t(64899);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,f(a)-r),n(e,i(a)-u),e}},86520:(v,p,t)=>{var f=t(58380),i=t(8970),n=t(62447),l=t(23855);v.exports=function(e,a,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),l(e,f(a)+r),n(e,i(a)-u),e}},23553:(v,p,t)=>{v.exports={BottomCenter:t(11569),BottomLeft:t(40660),BottomRight:t(50157),LeftBottom:t(75455),LeftCenter:t(82302),LeftTop:t(66639),QuickSet:t(92611),RightBottom:t(56635),RightCenter:t(62444),RightTop:t(24467),TopCenter:t(92695),TopLeft:t(10184),TopRight:t(86520)}},84070:(v,p,t)=>{var f=t(52217),i=t(80327);v.exports=function(n,l,e){return f(n,l),i(n,e)}},94638:v=>{v.exports=function(p){return p.y+p.height-p.height*p.originY}},46310:(v,p,t)=>{var f=t(94638),i=t(40353),n=t(58380),l=t(8970);v.exports=function(e,a){a===void 0&&(a={});var r=i(e),u=l(e);return a.x=r,a.y=u,a.width=n(e)-r,a.height=f(e)-u,a}},34463:v=>{v.exports=function(p){return p.x-p.width*p.originX+.5*p.width}},1355:v=>{v.exports=function(p){return p.y-p.height*p.originY+.5*p.height}},40353:v=>{v.exports=function(p){return p.x-p.width*p.originX}},81808:v=>{v.exports=function(p){return p.width*p.originX}},33776:v=>{v.exports=function(p){return p.height*p.originY}},58380:v=>{v.exports=function(p){return p.x+p.width-p.width*p.originX}},8970:v=>{v.exports=function(p){return p.y-p.height*p.originY}},62447:v=>{v.exports=function(p,t){return p.y=t-p.height+p.height*p.originY,p}},52217:v=>{v.exports=function(p,t){var f=p.width*p.originX;return p.x=t+f-.5*p.width,p}},80327:v=>{v.exports=function(p,t){var f=p.height*p.originY;return p.y=t+f-.5*p.height,p}},64899:v=>{v.exports=function(p,t){return p.x=t+p.width*p.originX,p}},23855:v=>{v.exports=function(p,t){return p.x=t-p.width+p.width*p.originX,p}},91873:v=>{v.exports=function(p,t){return p.y=t+p.height*p.originY,p}},40654:(v,p,t)=>{v.exports={CenterOn:t(84070),GetBottom:t(94638),GetBounds:t(46310),GetCenterX:t(34463),GetCenterY:t(1355),GetLeft:t(40353),GetOffsetX:t(81808),GetOffsetY:t(33776),GetRight:t(58380),GetTop:t(8970),SetBottom:t(62447),SetCenterX:t(52217),SetCenterY:t(80327),SetLeft:t(64899),SetRight:t(23855),SetTop:t(91873)}},42485:v=>{v.exports={setCrisp:function(p){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(t){p.style["image-rendering"]=t}),p.style.msInterpolationMode="nearest-neighbor",p},setBicubic:function(p){return p.style["image-rendering"]="auto",p.style.msInterpolationMode="bicubic",p}}},55579:(v,p,t)=>{var f,i,n,l=t(11318),e=t(83468),a=[],r=!1;v.exports=(n=function(){var u=0;return a.forEach(function(s){s.parent&&u++}),u},{create2D:function(u,s,o){return f(u,s,o,l.CANVAS)},create:f=function(u,s,o,h,c){var d;s===void 0&&(s=1),o===void 0&&(o=1),h===void 0&&(h=l.CANVAS),c===void 0&&(c=!1);var g=i(h);return g===null?(g={parent:u,canvas:document.createElement("canvas"),type:h},h===l.CANVAS&&a.push(g),d=g.canvas):(g.parent=u,d=g.canvas),c&&(g.parent=d),d.width=s,d.height=o,r&&h===l.CANVAS&&e.disable(d.getContext("2d")),d},createWebGL:function(u,s,o){return f(u,s,o,l.WEBGL)},disableSmoothing:function(){r=!0},enableSmoothing:function(){r=!1},first:i=function(u){if(u===void 0&&(u=l.CANVAS),u===l.WEBGL)return null;for(var s=0;s<a.length;s++){var o=a[s];if(!o.parent&&o.type===u)return o}return null},free:function(){return a.length-n()},pool:a,remove:function(u){var s=u instanceof HTMLCanvasElement;a.forEach(function(o){(s&&o.canvas===u||!s&&o.parent===u)&&(o.parent=null,o.canvas.width=1,o.canvas.height=1)})},total:n})},83468:v=>{var p,t="";v.exports={disable:function(f){return t===""&&(t=p(f)),t&&(f[t]=!1),f},enable:function(f){return t===""&&(t=p(f)),t&&(f[t]=!0),f},getPrefix:p=function(f){for(var i=["i","webkitI","msI","mozI","oI"],n=0;n<i.length;n++){var l=i[n]+"mageSmoothingEnabled";if(l in f)return l}return null},isEnabled:function(f){return t!==null?f[t]:null}}},96477:v=>{v.exports=function(p,t){return t===void 0&&(t="none"),p.style.msTouchAction=t,p.style["ms-touch-action"]=t,p.style["touch-action"]=t,p}},66544:v=>{v.exports=function(p,t){return t===void 0&&(t="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(f){p.style[f+"user-select"]=t}),p.style["-webkit-touch-callout"]=t,p.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",p}},20250:(v,p,t)=>{v.exports={CanvasInterpolation:t(42485),CanvasPool:t(55579),Smoothing:t(83468),TouchAction:t(96477),UserSelect:t(66544)}},13499:(v,p,t)=>{var f=t(69186),i=t(55117),n=t(29700),l=t(51457),e=t(31372),a=new f({initialize:function(r,u,s,o){r===void 0&&(r=0),u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(r,u,s,o)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(r,u,s,o,h){return o===void 0&&(o=255),h===void 0&&(h=!0),this._locked=!0,this.red=r,this.green=u,this.blue=s,this.alpha=o,this._locked=!1,this.update(h)},setGLTo:function(r,u,s,o){return o===void 0&&(o=1),this._locked=!0,this.redGL=r,this.greenGL=u,this.blueGL=s,this.alphaGL=o,this._locked=!1,this.update(!0)},setFromRGB:function(r){return this._locked=!0,this.red=r.r,this.green=r.g,this.blue=r.b,r.hasOwnProperty("a")&&(this.alpha=r.a),this._locked=!1,this.update(!0)},setFromHSV:function(r,u,s){return l(r,u,s,this)},update:function(r){if(r===void 0&&(r=!1),this._locked)return this;var u=this.r,s=this.g,o=this.b,h=this.a;return this._color=i(u,s,o),this._color32=n(u,s,o,h),this._rgba="rgba("+u+","+s+","+o+","+h/255+")",r&&e(u,s,o,this),this},updateHSV:function(){var r=this.r,u=this.g,s=this.b;return e(r,u,s,this),this},clone:function(){return new a(this.r,this.g,this.b,this.a)},gray:function(r){return this.setTo(r,r,r)},random:function(r,u){r===void 0&&(r=0),u===void 0&&(u=255);var s=Math.floor(r+Math.random()*(u-r)),o=Math.floor(r+Math.random()*(u-r)),h=Math.floor(r+Math.random()*(u-r));return this.setTo(s,o,h)},randomGray:function(r,u){r===void 0&&(r=0),u===void 0&&(u=255);var s=Math.floor(r+Math.random()*(u-r));return this.setTo(s,s,s)},saturate:function(r){return this.s+=r/100,this},desaturate:function(r){return this.s-=r/100,this},lighten:function(r){return this.v+=r/100,this},darken:function(r){return this.v-=r/100,this},brighten:function(r){var u=this.r,s=this.g,o=this.b;return u=Math.max(0,Math.min(255,u-Math.round(-r/100*255))),s=Math.max(0,Math.min(255,s-Math.round(-r/100*255))),o=Math.max(0,Math.min(255,o-Math.round(-r/100*255))),this.setTo(u,s,o)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(r){this.gl[0]=Math.min(Math.abs(r),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(r){this.gl[1]=Math.min(Math.abs(r),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(r){this.gl[2]=Math.min(Math.abs(r),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(r){this.gl[3]=Math.min(Math.abs(r),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(r){r=Math.floor(Math.abs(r)),this.r=Math.min(r,255),this.gl[0]=r/255,this.update(!0)}},green:{get:function(){return this.g},set:function(r){r=Math.floor(Math.abs(r)),this.g=Math.min(r,255),this.gl[1]=r/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(r){r=Math.floor(Math.abs(r)),this.b=Math.min(r,255),this.gl[2]=r/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(r){r=Math.floor(Math.abs(r)),this.a=Math.min(r,255),this.gl[3]=r/255,this.update()}},h:{get:function(){return this._h},set:function(r){this._h=r,l(r,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(r){this._s=r,l(this._h,r,this._v,this)}},v:{get:function(){return this._v},set:function(r){this._v=r,l(this._h,this._s,r,this)}}});v.exports=a},81654:(v,p,t)=>{var f=t(55117);v.exports=function(i){i===void 0&&(i=1024);var n,l=[],e=255,a=255,r=0,u=0;for(n=0;n<=e;n++)l.push({r:a,g:n,b:u,color:f(a,n,u)});for(r=255,n=e;n>=0;n--)l.push({r:n,g:r,b:u,color:f(n,r,u)});for(a=0,n=0;n<=e;n++,r--)l.push({r:a,g:r,b:n,color:f(a,r,n)});for(r=0,u=255,n=0;n<=e;n++,u--,a++)l.push({r:a,g:r,b:u,color:f(a,r,u)});if(i===1024)return l;var s=[],o=0,h=1024/i;for(n=0;n<i;n++)s.push(l[Math.floor(o)]),o+=h;return s}},76503:v=>{v.exports=function(p){var t={r:p>>16&255,g:p>>8&255,b:255&p,a:255};return p>16777215&&(t.a=p>>>24),t}},60850:v=>{v.exports=function(p){var t=p.toString(16);return t.length===1?"0"+t:t}},55117:v=>{v.exports=function(p,t,f){return p<<16|t<<8|f}},29700:v=>{v.exports=function(p,t,f,i){return i<<24|p<<16|t<<8|f}},29782:(v,p,t)=>{var f=t(13499),i=t(84502);v.exports=function(n,l,e){var a=e,r=e,u=e;if(l!==0){var s=e<.5?e*(1+l):e+l-e*l,o=2*e-s;a=i(o,s,n+.3333333333333333),r=i(o,s,n),u=i(o,s,n-.3333333333333333)}return new f().setGLTo(a,r,u,1)}},50432:(v,p,t)=>{var f=t(51457);v.exports=function(i,n){i===void 0&&(i=1),n===void 0&&(n=1);for(var l=[],e=0;e<=359;e++)l.push(f(e/359,i,n));return l}},51457:(v,p,t)=>{var f=t(55117);function i(n,l,e,a){var r=(n+6*l)%6,u=Math.min(r,4-r,1);return Math.round(255*(a-a*e*Math.max(0,u)))}v.exports=function(n,l,e,a){l===void 0&&(l=1),e===void 0&&(e=1);var r=i(5,n,l,e),u=i(3,n,l,e),s=i(1,n,l,e);return a?a.setTo?a.setTo(r,u,s,a.alpha,!1):(a.r=r,a.g=u,a.b=s,a.color=f(r,u,s),a):{r,g:u,b:s,color:f(r,u,s)}}},65435:(v,p,t)=>{var f=t(13499);v.exports=function(i){var n=new f;i=i.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(u,s,o,h){return s+s+o+o+h+h});var l=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);if(l){var e=parseInt(l[1],16),a=parseInt(l[2],16),r=parseInt(l[3],16);n.setTo(e,a,r)}return n}},84502:v=>{v.exports=function(p,t,f){return f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?p+6*(t-p)*f:f<.5?t:f<.6666666666666666?p+(t-p)*(.6666666666666666-f)*6:p}},57284:(v,p,t)=>{var f=t(13499),i=t(3382);v.exports=function(n){var l=i(n);return new f(l.r,l.g,l.b,l.a)}},3382:v=>{v.exports=function(p){return p>16777215?{a:p>>>24,r:p>>16&255,g:p>>8&255,b:255&p}:{a:255,r:p>>16&255,g:p>>8&255,b:255&p}}},47625:(v,p,t)=>{var f=t(3821),i=function(n,l,e,a,r,u,s,o){s===void 0&&(s=100),o===void 0&&(o=0);var h=o/s;return{r:f(n,a,h),g:f(l,r,h),b:f(e,u,h)}};v.exports={RGBWithRGB:i,ColorWithRGB:function(n,l,e,a,r,u){return r===void 0&&(r=100),u===void 0&&(u=0),i(n.r,n.g,n.b,l,e,a,r,u)},ColorWithColor:function(n,l,e,a){return e===void 0&&(e=100),a===void 0&&(a=0),i(n.r,n.g,n.b,l.r,l.g,l.b,e,a)}}},37684:(v,p,t)=>{var f=t(13499);v.exports=function(i){return new f(i.r,i.g,i.b,i.a)}},33548:(v,p,t)=>{var f=t(13499);v.exports=function(i){var n=new f,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(i.toLowerCase());if(l){var e=parseInt(l[1],10),a=parseInt(l[2],10),r=parseInt(l[3],10),u=l[4]!==void 0?parseFloat(l[4]):1;n.setTo(e,a,r,255*u)}return n}},31372:v=>{v.exports=function(p,t,f,i){i===void 0&&(i={h:0,s:0,v:0}),p/=255,t/=255,f/=255;var n=Math.min(p,t,f),l=Math.max(p,t,f),e=l-n,a=0,r=l===0?0:e/l,u=l;return l!==n&&(l===p?a=(t-f)/e+(t<f?6:0):l===t?a=(f-p)/e+2:l===f&&(a=(p-t)/e+4),a/=6),i.hasOwnProperty("_h")?(i._h=a,i._s=r,i._v=u):(i.h=a,i.s=r,i.v=u),i}},92613:(v,p,t)=>{var f=t(60850);v.exports=function(i,n,l,e,a){return e===void 0&&(e=255),a===void 0&&(a="#"),a==="#"?"#"+(16777216+(i<<16)+(n<<8)+l).toString(16).slice(1,7):"0x"+f(e)+f(i)+f(n)+f(l)}},61039:(v,p,t)=>{var f=t(27019),i=t(13499);v.exports=function(n,l){return n===void 0&&(n=0),l===void 0&&(l=255),new i(f(n,l),f(n,l),f(n,l))}},58909:(v,p,t)=>{var f=t(65435),i=t(57284),n=t(37684),l=t(33548);v.exports=function(e){switch(typeof e){case"string":return e.substr(0,3).toLowerCase()==="rgb"?l(e):f(e);case"number":return i(e);case"object":return n(e)}}},80586:(v,p,t)=>{var f=t(13499);f.ColorSpectrum=t(81654),f.ColorToRGBA=t(76503),f.ComponentToHex=t(60850),f.GetColor=t(55117),f.GetColor32=t(29700),f.HexStringToColor=t(65435),f.HSLToColor=t(29782),f.HSVColorWheel=t(50432),f.HSVToRGB=t(51457),f.HueToComponent=t(84502),f.IntegerToColor=t(57284),f.IntegerToRGB=t(3382),f.Interpolate=t(47625),f.ObjectToColor=t(37684),f.RandomRGB=t(61039),f.RGBStringToColor=t(33548),f.RGBToHSV=t(31372),f.RGBToString=t(92613),f.ValueToColor=t(58909),v.exports=f},39795:(v,p,t)=>{v.exports={Align:t(87150),BaseShader:t(45964),Bounds:t(40654),Canvas:t(20250),Color:t(80586),ColorMatrix:t(40013),Masks:t(88472),RGB:t(33332)}},8091:(v,p,t)=>{var f=t(69186),i=t(24496),n=t(37710),l=new f({initialize:function(e,a){var r=e.sys.renderer;this.renderer=r,this.bitmapMask=a,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),e.sys.game.events.on(i.CONTEXT_RESTORED,this.createMask,this),r&&r.on(n.RESIZE,this.createMask,this)},createMask:function(){var e=this.renderer;if(e&&e.gl){this.mainTexture&&this.clearMask();var a=e.width,r=e.height,u=(a&a-1)==0&&(r&r-1)==0,s=e.gl,o=u?s.REPEAT:s.CLAMP_TO_EDGE,h=s.LINEAR;this.mainTexture=e.createTexture2D(0,h,h,o,o,s.RGBA,null,a,r),this.maskTexture=e.createTexture2D(0,h,h,o,o,s.RGBA,null,a,r),this.mainFramebuffer=e.createFramebuffer(a,r,this.mainTexture,!0),this.maskFramebuffer=e.createFramebuffer(a,r,this.maskTexture,!0)}},clearMask:function(){var e=this.renderer;e&&e.gl&&this.mainTexture&&(e.deleteTexture(this.mainTexture),e.deleteTexture(this.maskTexture),e.deleteFramebuffer(this.mainFramebuffer),e.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,a,r){e.pipelines.BITMAPMASK_PIPELINE.beginMask(this,a,r)},postRenderWebGL:function(e,a){e.pipelines.BITMAPMASK_PIPELINE.endMask(this,a)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(n.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});v.exports=l},70611:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n){this.geometryMask=n,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(i){return this.geometryMask=i,this},setInvertAlpha:function(i){return i===void 0&&(i=!0),this.invertAlpha=i,this},preRenderWebGL:function(i,n,l){var e=i.gl;i.flush(),i.maskStack.length===0&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),i.maskCount=0),i.currentCameraMask.mask!==this&&(i.currentMask.mask=this),i.maskStack.push({mask:this,camera:l}),this.applyStencil(i,l,!0),i.maskCount++},applyStencil:function(i,n,l){var e=i.gl,a=this.geometryMask,r=i.maskCount;e.colorMask(!1,!1,!1,!1),l?(e.stencilFunc(e.EQUAL,r,255),e.stencilOp(e.KEEP,e.KEEP,e.INCR)):(e.stencilFunc(e.EQUAL,r+1,255),e.stencilOp(e.KEEP,e.KEEP,e.DECR)),a.renderWebGL(i,a,n),i.flush(),e.colorMask(!0,!0,!0,!0),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),l?this.invertAlpha?e.stencilFunc(e.NOTEQUAL,r+1,255):e.stencilFunc(e.EQUAL,r+1,255):this.invertAlpha?e.stencilFunc(e.NOTEQUAL,r,255):e.stencilFunc(e.EQUAL,r,255)},postRenderWebGL:function(i){var n=i.gl;i.maskStack.pop(),i.maskCount--,i.flush();var l=i.currentMask;if(i.maskStack.length===0)l.mask=null,n.disable(n.STENCIL_TEST);else{var e=i.maskStack[i.maskStack.length-1];e.mask.applyStencil(i,e.camera,!1),i.currentCameraMask.mask!==e.mask?(l.mask=e.mask,l.camera=e.camera):l.mask=null}},preRenderCanvas:function(i,n,l){var e=this.geometryMask;i.currentContext.save(),e.renderCanvas(i,e,l,null,null,!0),i.currentContext.clip()},postRenderCanvas:function(i){i.currentContext.restore()},destroy:function(){this.geometryMask=null}});v.exports=f},88472:(v,p,t)=>{v.exports={BitmapMask:t(8091),GeometryMask:t(70611)}},45964:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n,l,e){n&&n!==""||(n=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),l&&l!==""||(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),e===void 0&&(e=null),this.key=i,this.fragmentSrc=n,this.vertexSrc=l,this.uniforms=e}});v.exports=f},21778:v=>{v.exports=function(p,t){var f;if(t)typeof t=="string"?f=document.getElementById(t):typeof t=="object"&&t.nodeType===1&&(f=t);else if(p.parentElement||t===null)return p;return f||(f=document.body),f.appendChild(p),p}},3804:(v,p,t)=>{var f=t(21778);v.exports=function(i){var n=i.config;if(n.parent&&n.domCreateContainer){var l=document.createElement("div");l.style.cssText=["display: block;","width: "+i.scale.width+"px;","height: "+i.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+n.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),i.domContainer=l,f(l,n.parent)}}},8277:(v,p,t)=>{var f=t(89771);v.exports=function(i){if(document.readyState!=="complete"&&document.readyState!=="interactive"){var n=function(){document.removeEventListener("deviceready",n,!0),document.removeEventListener("DOMContentLoaded",n,!0),window.removeEventListener("load",n,!0),i()};document.body?f.cordova?document.addEventListener("deviceready",n,!1):(document.addEventListener("DOMContentLoaded",n,!0),window.addEventListener("load",n,!0)):window.setTimeout(n,20)}else i()}},57886:v=>{v.exports=function(p){if(!p)return window.innerHeight;var t=Math.abs(window.orientation),f={w:0,h:0},i=document.createElement("div");return i.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(i),f.w=t===90?i.offsetHeight:window.innerWidth,f.h=t===90?window.innerWidth:i.offsetHeight,document.documentElement.removeChild(i),i=null,Math.abs(window.orientation)!==90?f.h:f.w}},84846:(v,p,t)=>{var f=t(24790);v.exports=function(i,n){var l=window.screen,e=!!l&&(l.orientation||l.mozOrientation||l.msOrientation);return e&&typeof e.type=="string"?e.type:typeof e=="string"?e:typeof window.orientation=="number"?window.orientation===0||window.orientation===180?f.ORIENTATION.PORTRAIT:f.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?f.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?f.ORIENTATION.LANDSCAPE:void 0:n>i?f.ORIENTATION.PORTRAIT:f.ORIENTATION.LANDSCAPE}},44095:v=>{v.exports=function(p){var t;return p!==""&&(typeof p=="string"?t=document.getElementById(p):p&&p.nodeType===1&&(t=p)),t||(t=document.body),t}},3726:v=>{v.exports=function(p){var t="";try{window.DOMParser?t=new DOMParser().parseFromString(p,"text/xml"):(t=new ActiveXObject("Microsoft.XMLDOM")).loadXML(p)}catch{t=null}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length?t:null}},20662:v=>{v.exports=function(p){p.parentNode&&p.parentNode.removeChild(p)}},948:(v,p,t)=>{var f=t(69186),i=t(45733),n=new f({initialize:function(){this.isRunning=!1,this.callback=i,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var l=this;this.step=function e(){var a=window.performance.now();l.lastTime=l.tick,l.tick=a,l.callback(a),l.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var a=Date.now(),r=Math.min(Math.max(2*l.target+l.tick-a,0),l.target);l.lastTime=l.tick,l.tick=a,l.callback(a),l.timeOutID=window.setTimeout(e,r)}},start:function(l,e,a){this.isRunning||(this.callback=l,this.isSetTimeOut=e,this.target=a,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=i}});v.exports=n},9675:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(46236),l=new f({Extends:i,initialize:function(){i.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});n.register("EventEmitter",l,"events"),v.exports=l},85817:(v,p,t)=>{v.exports={EventEmitter:t(9675)}},90062:(v,p,t)=>{var f=t(87626),i=t(7973);v.exports=function(n,l,e){l.x=i(e,"x",0),l.y=i(e,"y",0),l.depth=i(e,"depth",0),l.flipX=i(e,"flipX",!1),l.flipY=i(e,"flipY",!1);var a=i(e,"scale",null);typeof a=="number"?l.setScale(a):a!==null&&(l.scaleX=i(a,"x",1),l.scaleY=i(a,"y",1));var r=i(e,"scrollFactor",null);typeof r=="number"?l.setScrollFactor(r):r!==null&&(l.scrollFactorX=i(r,"x",1),l.scrollFactorY=i(r,"y",1)),l.rotation=i(e,"rotation",0);var u=i(e,"angle",null);u!==null&&(l.angle=u),l.alpha=i(e,"alpha",1);var s=i(e,"origin",null);if(typeof s=="number")l.setOrigin(s);else if(s!==null){var o=i(s,"x",.5),h=i(s,"y",.5);l.setOrigin(o,h)}return l.blendMode=i(e,"blendMode",f.NORMAL),l.visible=i(e,"visible",!0),i(e,"add",!0)&&n.sys.displayList.add(l),l.preUpdate&&n.sys.updateList.add(l),l}},38596:(v,p,t)=>{var f=t(7973);v.exports=function(i,n){var l=f(n,"anims",null);if(l===null)return i;if(typeof l=="string")i.anims.play(l);else if(typeof l=="object"){var e=i.anims,a=f(l,"key",void 0);if(a){var r=f(l,"startFrame",void 0),u=f(l,"delay",0),s=f(l,"repeat",0),o=f(l,"repeatDelay",0),h=f(l,"yoyo",!1),c=f(l,"play",!1),d=f(l,"delayedPlay",0),g={key:a,delay:u,repeat:s,repeatDelay:o,yoyo:h,startFrame:r};c?e.play(g):d>0?e.playAfterDelay(g,d):e.load(g)}}return i}},96656:(v,p,t)=>{var f=t(69186),i=t(49469),n=t(46236),l=t(99370),e=t(12063),a=t(46414),r=new f({Extends:i,initialize:function(u){i.call(this,u),this.sortChildrenFlag=!1,this.scene=u,this.systems=u.sys,this.events=u.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(e.BOOT,this.boot,this),this.events.on(e.START,this.start,this)},boot:function(){this.events.once(e.DESTROY,this.destroy,this)},addChildCallback:function(u){u.displayList&&u.displayList!==this&&u.removeFromDisplayList(),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(l.ADDED_TO_SCENE,u,this.scene),this.events.emit(e.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(l.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(e.REMOVED_FROM_SCENE,u,this.scene)},start:function(){this.events.once(e.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(a(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,s){return u._depth-s._depth},getChildren:function(){return this.list},shutdown:function(){for(var u=this.list,s=u.length;s--;)u[s].destroy(!0);u.length=0,this.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(e.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",r,"displayList"),v.exports=r},38236:(v,p,t)=>{var f=t(69186),i=t(20847),n=t(92941),l=t(26729),e=t(99370),a=t(12063),r=new f({Extends:l,initialize:function(u,s){l.call(this),this.scene=u,this.displayList=null,this.type=s,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(e.ADDED_TO_SCENE,this.addedToScene,this),this.on(e.REMOVED_FROM_SCENE,this.removedFromScene,this),u.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(u,s){return this.data||(this.data=new n(this)),this.data.set(u,s),this},incData:function(u,s){return this.data||(this.data=new n(this)),this.data.inc(u,s),this},toggleData:function(u){return this.data||(this.data=new n(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new n(this)),this.data.get(u)},setInteractive:function(u,s,o){return this.scene.sys.input.enable(this,u,s,o),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return i(this)},willRender:function(u){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,s=this.parentContainer,o=[];s&&(o.unshift(s.getIndex(u)),u=s,s.parentContainer);)s=s.parentContainer;return this.displayList?o.unshift(this.displayList.getIndex(u)):o.unshift(this.scene.sys.displayList.getIndex(u)),o},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(e.ADDED_TO_SCENE,this,this.scene),u.events.emit(a.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(e.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(a.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(u){this.scene&&!this.ignoreDestroy&&(u===void 0&&(u=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(e.DESTROY,this,u),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});r.RENDER_MASK=15,v.exports=r},78757:(v,p,t)=>{var f=t(69186),i=t(46236),n=t(12063),l=new f({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(e,a){l.prototype.hasOwnProperty(e)||(l.prototype[e]=a)},l.remove=function(e){l.prototype.hasOwnProperty(e)&&delete l.prototype[e]},i.register("GameObjectCreator",l,"make"),v.exports=l},66642:(v,p,t)=>{var f=t(69186),i=t(46236),n=t(12063),l=new f({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(e){return(e.renderCanvas||e.renderWebGL)&&this.displayList.add(e),e.preUpdate&&this.updateList.add(e),e},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(e,a){l.prototype.hasOwnProperty(e)||(l.prototype[e]=a)},l.remove=function(e){l.prototype.hasOwnProperty(e)&&delete l.prototype[e]},i.register("GameObjectFactory",l,"add"),v.exports=l},3142:(v,p,t)=>{var f=t(9329),i=new f,n=new f,l=new f,e={camera:i,sprite:n,calc:l};v.exports=function(a,r,u){var s=i,o=n,h=l;return o.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),s.copyFrom(r.matrix),u?(s.multiplyWithOffset(u,-r.scrollX*a.scrollFactorX,-r.scrollY*a.scrollFactorY),o.e=a.x,o.f=a.y):(o.e-=r.scrollX*a.scrollFactorX,o.f-=r.scrollY*a.scrollFactorY),s.multiply(o,h),e}},66007:(v,p,t)=>{var f=t(69186),i=t(48547),n=t(46236),l=t(12063),e=new f({Extends:i,initialize:function(a){i.call(this),this.checkQueue=!0,this.scene=a,this.systems=a.sys,a.sys.events.once(l.BOOT,this.boot,this),a.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var a=this.systems.events;a.on(l.PRE_UPDATE,this.update,this),a.on(l.UPDATE,this.sceneUpdate,this),a.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(a,r){for(var u=this._active,s=u.length,o=0;o<s;o++){var h=u[o];h.active&&h.preUpdate.call(h,a,r)}},shutdown:function(){for(var a=this._active.length;a--;)this._active[a].destroy(!0);for(a=this._pending.length;a--;)this._pending[a].destroy(!0);for(a=this._destroy.length;a--;)this._destroy[a].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var r=this.systems.events;r.off(l.PRE_UPDATE,this.update,this),r.off(l.UPDATE,this.sceneUpdate,this),r.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",e,"updateList"),v.exports=e},83162:v=>{v.exports=function(p,t,f,i,n,l,e,a,r,u,s,o,h,c,d){var g=f.x-t.displayOriginX+n,m=f.y-t.displayOriginY+l,y=g+f.w,w=m+f.h,x=e.getXRound(g,m,a),T=e.getYRound(g,m,a),E=e.getXRound(g,w,a),S=e.getYRound(g,w,a),C=e.getXRound(y,w,a),A=e.getYRound(y,w,a),M=e.getXRound(y,m,a),b=e.getYRound(y,m,a);p.batchQuad(t,x,T,E,S,C,A,M,b,i.u0,i.v0,i.u1,i.v1,r,u,s,o,h,c,d)}},88537:(v,p,t)=>{var f=t(95634);v.exports=function(i,n,l,e,a,r,u){var s=i.sys.textures.get(l),o=s.get(e),h=i.sys.cache.xml.get(a);if(o&&h){var c=f(h,o,r,u,s);return i.sys.cache.bitmapFont.add(n,{data:c,texture:l,frame:e,fromAtlas:!0}),!0}return!1}},95634:v=>{function p(t,f){return parseInt(t.getAttribute(f),10)}v.exports=function(t,f,i,n,l){i===void 0&&(i=0),n===void 0&&(n=0);var e=f.cutX,a=f.cutY,r=f.source.width,u=f.source.height,s=f.sourceIndex,o={},h=t.getElementsByTagName("info")[0],c=t.getElementsByTagName("common")[0];o.font=h.getAttribute("face"),o.size=p(h,"size"),o.lineHeight=p(c,"lineHeight")+n,o.chars={};var d=t.getElementsByTagName("char"),g=f!==void 0&&f.trimmed;if(g)var m=f.height,y=f.width;for(var w=0;w<d.length;w++){var x=d[w],T=p(x,"id"),E=String.fromCharCode(T),S=p(x,"x"),C=p(x,"y"),A=p(x,"width"),M=p(x,"height");g&&(S<y&&(y=S),C<m&&(m=C)),g&&m!==0&&y!==0&&(S-=f.x,C-=f.y);var b=(e+S)/r,_=(a+C)/u,P=(e+S+A)/r,L=(a+C+M)/u;if(o.chars[T]={x:S,y:C,width:A,height:M,centerX:Math.floor(A/2),centerY:Math.floor(M/2),xOffset:p(x,"xoffset"),yOffset:p(x,"yoffset"),xAdvance:p(x,"xadvance")+i,data:{},kerning:{},u0:b,v0:_,u1:P,v1:L},l&&A!==0&&M!==0){var F=l.add(E,s,S,C,A,M);F&&F.setUVs(A,M,b,_,P,L)}}var D=t.getElementsByTagName("kerning");for(w=0;w<D.length;w++){var k=D[w],R=p(k,"first"),O=p(k,"second"),B=p(k,"amount");o.chars[O].kerning[R]=B}return o}},74797:(v,p,t)=>{var f=t(69186),i=t(2543),n=t(19506),l=t(38236),e=t(57774),a=t(88537),r=t(95634),u=t(75380),s=t(17459),o=new f({Extends:l,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,s],initialize:function(h,c,d,g,m,y,w){m===void 0&&(m=""),w===void 0&&(w=0),l.call(this,h,"BitmapText"),this.font=g;var x=this.scene.sys.cache.bitmapFont.get(g);x||console.warn("Invalid BitmapText key: "+g),this.fontData=x.data,this._text="",this._fontSize=y||this.fontData.size,this._letterSpacing=0,this._align=w,this._bounds=e(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=x.fromAtlas,this.setTexture(x.texture,x.frame),this.setPosition(c,d),this.setOrigin(0,0),this.initPipeline(),this.setText(m)},setLeftAlign:function(){return this._align=o.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=o.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=o.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(h){return this._fontSize=h,this._dirty=!0,this},setLetterSpacing:function(h){return h===void 0&&(h=0),this._letterSpacing=h,this._dirty=!0,this},setText:function(h){return h||h===0||(h=""),Array.isArray(h)&&(h=h.join(`
`)),h!==this.text&&(this._text=h.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(h,c,d,g){return h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=.5),this.dropShadowX=h,this.dropShadowY=c,this.dropShadowColor=d,this.dropShadowAlpha=g,this},setCharacterTint:function(h,c,d,g,m,y,w){h===void 0&&(h=0),c===void 0&&(c=1),d===void 0&&(d=!1),g===void 0&&(g=-1),m===void 0&&(m=g,y=g,w=g);var x=this.text.length;c===-1&&(c=x),h<0&&(h=x+h),h=i(h,0,x-1);for(var T=i(h+c,h,x),E=this.charColors,S=h;S<T;S++){var C=E[S];if(g===-1)E[S]=null;else{var A=d?1:0;C?(C.tintEffect=A,C.tintTL=g,C.tintTR=m,C.tintBL=y,C.tintBR=w):E[S]={tintEffect:A,tintTL:g,tintTR:m,tintBL:y,tintBR:w}}}return this},setWordTint:function(h,c,d,g,m,y,w){c===void 0&&(c=1);for(var x=this.getTextBounds().words,T=typeof h=="number",E=0,S=0;S<x.length;S++){var C=x[S];if((T&&S===h||!T&&C.word===h)&&(this.setCharacterTint(C.i,C.word.length,d,g,m,y,w),++E===c))return this}return this},getTextBounds:function(h){var c=this._bounds;return(this._dirty||h||this.scaleX!==c.scaleX||this.scaleY!==c.scaleY)&&(e(this,h,!0,c),this._dirty=!1),c},getCharacterAt:function(h,c,d){for(var g=this.getLocalPoint(h,c,null,d),m=this.getTextBounds().characters,y=new u,w=0;w<m.length;w++){var x=m[w];if(y.setTo(x.x,x.t,x.r-x.x,x.b),y.contains(g.x,g.y))return x}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(h,c,d){if(c===void 0&&(c=this._fontSize),d===void 0&&(d=this._align),h!==this.font){var g=this.scene.sys.cache.bitmapFont.get(h);g&&(this.font=h,this.fontData=g.data,this._fontSize=c,this._align=d,this.fromAtlas=g.fromAtlas===!0,this.setTexture(g.texture,g.frame),e(this,!1,!0,this._bounds))}return this},setMaxWidth:function(h,c){return this._maxWidth=h,this._dirty=!0,c!==void 0&&(this.wordWrapCharCode=c),this},align:{set:function(h){this._align=h,this._dirty=!0},get:function(){return this._align}},text:{set:function(h){this.setText(h)},get:function(){return this._text}},fontSize:{set:function(h){this._fontSize=h,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(h){this._letterSpacing=h,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(h){this._maxWidth=h,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var h=n.ToJSON(this),c={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return h.data=c,h},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});o.ALIGN_LEFT=0,o.ALIGN_CENTER=1,o.ALIGN_RIGHT=2,o.ParseFromAtlas=a,o.ParseXMLBitmapFont=r,v.exports=o},39005:(v,p,t)=>{var f=t(14437);v.exports=function(i,n,l,e){var a=n._text,r=a.length,u=i.currentContext;if(r!==0&&f(i,u,n,l,e)){l.addToRenderList(n);var s=n.fromAtlas?n.frame:n.texture.frames.__BASE,o=n.fontData.chars,h=n.fontData.lineHeight,c=n._letterSpacing,d=0,g=0,m=0,y=null,w=0,x=0,T=0,E=0,S=0,C=0,A=null,M=0,b=s.source.image,_=s.cutX,P=s.cutY,L=n._fontSize/n.fontData.size,F=n._align,D=0,k=0,R=n.getTextBounds(!1);n.maxWidth>0&&(r=(a=R.wrappedText).length);var O=n._bounds.lines;F===1?k=(O.longest-O.lengths[0])/2:F===2&&(k=O.longest-O.lengths[0]),u.translate(-n.displayOriginX,-n.displayOriginY);for(var B=l.roundPixels,U=0;U<r;U++)if((m=a.charCodeAt(U))!==10){if(y=o[m]){if(w=_+y.x,x=P+y.y,T=y.width,E=y.height,S=y.xOffset+d,C=y.yOffset+g,A!==null){var I=y.kerning[M];S+=I!==void 0?I:0}S*=L,C*=L,S+=k,d+=y.xAdvance+c,A=y,M=m,T!==0&&E!==0&&m!==32&&(B&&(S=Math.round(S),C=Math.round(C)),u.save(),u.translate(S,C),u.scale(L,L),u.drawImage(b,w,x,T,E,0,0,T,E),u.restore())}}else D++,F===1?k=(O.longest-O.lengths[D])/2:F===2&&(k=O.longest-O.lengths[D]),d=0,g+=h,A=null;u.restore()}}},46292:(v,p,t)=>{var f=t(74797),i=t(90062),n=t(78757),l=t(7973),e=t(76076);n.register("bitmapText",function(a,r){a===void 0&&(a={});var u=e(a,"font",""),s=l(a,"text",""),o=l(a,"size",!1),h=e(a,"align",0),c=new f(this.scene,0,0,u,s,o,h);return r!==void 0&&(a.add=r),i(this.scene,c,a),c})},93676:(v,p,t)=>{var f=t(74797);t(66642).register("bitmapText",function(i,n,l,e,a,r){return this.displayList.add(new f(this.scene,i,n,l,e,a,r))})},17459:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(35158),i=t(39005),v.exports={renderWebGL:f,renderCanvas:i}},35158:(v,p,t)=>{var f=t(83162),i=t(3142),n=t(64564);v.exports=function(l,e,a,r){if(e._text.length!==0){a.addToRenderList(e);var u,s,o,h=l.pipelines.set(e.pipeline,e),c=i(e,a,r).calc,d=a.roundPixels,g=a.alpha,m=e.charColors,y=e.tintFill,w=n.getTintAppendFloatAlpha,x=w(e.tintTopLeft,g*e._alphaTL),T=w(e.tintTopRight,g*e._alphaTR),E=w(e.tintBottomLeft,g*e._alphaBL),S=w(e.tintBottomRight,g*e._alphaBR),C=e.frame.glTexture,A=h.setGameObject(e),M=e.getTextBounds(!1).characters,b=e.dropShadowX,_=e.dropShadowY,P=b!==0||_!==0;if(l.pipelines.preBatch(e),P){var L=e.dropShadowColor,F=e.dropShadowAlpha,D=w(L,g*F*e._alphaTL),k=w(L,g*F*e._alphaTR),R=w(L,g*F*e._alphaBL),O=w(L,g*F*e._alphaBR);for(u=0;u<M.length;u++)o=(s=M[u]).glyph,s.code!==32&&o.width!==0&&o.height!==0&&f(h,e,s,o,b,_,c,d,D,k,R,O,1,C,A)}for(u=0;u<M.length;u++)if(o=(s=M[u]).glyph,s.code!==32&&o.width!==0&&o.height!==0)if(m[s.i]){var B=m[s.i],U=B.tintEffect,I=w(B.tintTL,g*e._alphaTL),Y=w(B.tintTR,g*e._alphaTR),N=w(B.tintBL,g*e._alphaBL),X=w(B.tintBR,g*e._alphaBR);f(h,e,s,o,0,0,c,d,I,Y,N,X,U,C,A)}else f(h,e,s,o,0,0,c,d,x,T,E,S,y,C,A);l.pipelines.postBatch(e)}}},60452:(v,p,t)=>{var f=t(2543),i={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(n,l,e,a){return n===void 0&&(n=1),l===void 0?this.alpha=n:(this._alphaTL=f(n,0,1),this._alphaTR=f(l,0,1),this._alphaBL=f(e,0,1),this._alphaBR=f(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(n){var l=f(n,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,this._alphaBR=l,l===0?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(n){var l=f(n,0,1);this._alphaTL=l,l!==0&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(n){var l=f(n,0,1);this._alphaTR=l,l!==0&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(n){var l=f(n,0,1);this._alphaBL=l,l!==0&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(n){var l=f(n,0,1);this._alphaBR=l,l!==0&&(this.renderFlags|=2)}}};v.exports=i},95057:(v,p,t)=>{var f=t(2543),i={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(n){return n===void 0&&(n=1),this.alpha=n,this},alpha:{get:function(){return this._alpha},set:function(n){var l=f(n,0,1);this._alpha=l,l===0?this.renderFlags&=-3:this.renderFlags|=2}}};v.exports=i},13006:(v,p,t)=>{var f=t(87626),i={_blendMode:f.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){typeof n=="string"&&(n=f[n]),(n|=0)>=-1&&(this._blendMode=n)}},setBlendMode:function(n){return this.blendMode=n,this}};v.exports=i},45289:v=>{v.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,t){return this.width=p,this.height=t,this},setDisplaySize:function(p,t){return this.displayWidth=p,this.displayHeight=t,this}}},12051:v=>{v.exports={texture:null,frame:null,isCropped:!1,setCrop:function(p,t,f,i){if(p===void 0)this.isCropped=!1;else if(this.frame){if(typeof p=="number")this.frame.setCropUVs(this._crop,p,t,f,i,this.flipX,this.flipY);else{var n=p;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},59764:v=>{v.exports={_depth:0,depth:{get:function(){return this._depth},set:function(p){this.displayList&&this.displayList.queueDepthSort(),this._depth=p}},setDepth:function(p){return p===void 0&&(p=0),this.depth=p,this}}},41489:v=>{v.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(p){return this.flipX=p,this},setFlipY:function(p){return this.flipY=p,this},setFlip:function(p,t){return this.flipX=p,this.flipY=t,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},25942:(v,p,t)=>{var f=t(75380),i=t(45707),n=t(17321),l={prepareBoundsOutput:function(e,a){return a===void 0&&(a=!1),this.rotation!==0&&i(e,this.x,this.y,this.rotation),a&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(e.x,e.y,e),e},getCenter:function(e){return e===void 0&&(e=new n),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,e},getTopLeft:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,a)},getTopCenter:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,a)},getTopRight:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,a)},getLeftCenter:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,a)},getRightCenter:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,a)},getBottomLeft:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,a)},getBottomCenter:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,a)},getBottomRight:function(e,a){return e||(e=new n),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,a)},getBounds:function(e){var a,r,u,s,o,h,c,d;if(e===void 0&&(e=new f),this.parentContainer){var g=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e),g.transformPoint(e.x,e.y,e),a=e.x,r=e.y,this.getTopRight(e),g.transformPoint(e.x,e.y,e),u=e.x,s=e.y,this.getBottomLeft(e),g.transformPoint(e.x,e.y,e),o=e.x,h=e.y,this.getBottomRight(e),g.transformPoint(e.x,e.y,e),c=e.x,d=e.y}else this.getTopLeft(e),a=e.x,r=e.y,this.getTopRight(e),u=e.x,s=e.y,this.getBottomLeft(e),o=e.x,h=e.y,this.getBottomRight(e),c=e.x,d=e.y;return e.x=Math.min(a,u,o,c),e.y=Math.min(r,s,h,d),e.width=Math.max(a,u,o,c)-e.x,e.height=Math.max(r,s,h,d)-e.y,e}};v.exports=l},50231:(v,p,t)=>{var f=t(8091),i=t(70611),n={mask:null,setMask:function(l){return this.mask=l,this},clearMask:function(l){return l===void 0&&(l=!1),l&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(l){return l===void 0&&(this.texture||this.shader)&&(l=this),new f(this.scene,l)},createGeometryMask:function(l){return l===void 0&&this.type==="Graphics"&&(l=this),new i(this.scene,l)}};v.exports=n},94610:v=>{v.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(p){this._displayOriginX=p,this.originX=p/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(p){this._displayOriginY=p,this.originY=p/this.height}},setOrigin:function(p,t){return p===void 0&&(p=.5),t===void 0&&(t=p),this.originX=p,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(p,t){return p===void 0&&(p=0),t===void 0&&(t=p),this.displayOriginX=p,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},13632:(v,p,t)=>{var f=t(23407),i=t(51146),n=t(76076),l=t(24191),e=t(17321),a={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function(r,u){u===void 0&&(u=this.pathConfig);var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this.path=r,u&&this.startFollow(u),this},setRotateToPath:function(r,u){return u===void 0&&(u=0),this.rotateToPath=r,this.pathRotationOffset=u,this},isFollowing:function(){var r=this.pathTween;return r&&r.isPlaying()},startFollow:function(r,u){r===void 0&&(r={}),u===void 0&&(u=0);var s=this.pathTween;s&&s.isPlaying()&&s.stop(),typeof r=="number"&&(r={duration:r}),r.from=n(r,"from",0),r.to=n(r,"to",1);var o=i(r,"positionOnPath",!1);this.rotateToPath=i(r,"rotateToPath",!1),this.pathRotationOffset=n(r,"rotationOffset",0);var h=n(r,"startAt",u);if(h&&(r.onStart=function(d){var g=d.data[0];g.progress=h,g.elapsed=g.duration*h;var m=g.ease(g.progress);g.current=g.start+(g.end-g.start)*m,g.target[g.key]=g.current}),this.pathOffset||(this.pathOffset=new e(this.x,this.y)),this.pathVector||(this.pathVector=new e),this.pathDelta||(this.pathDelta=new e),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(r),this.path.getStartPoint(this.pathOffset),o&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var c=this.path.getPoint(.1);this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+f(this.pathRotationOffset)}return this.pathConfig=r,this},pauseFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.pause(),this},resumeFollow:function(){var r=this.pathTween;return r&&r.isPaused()&&r.resume(),this},stopFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this},pathUpdate:function(){var r=this.pathTween;if(r){var u=r.data[0],s=this.pathDelta,o=this.pathVector;if(s.copy(o).negate(),u.state===l.COMPLETE)return this.path.getPoint(1,o),s.add(o),o.add(this.pathOffset),void this.setPosition(o.x,o.y);if(u.state!==l.PLAYING_FORWARD&&u.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(r.getValue(),o),s.add(o),o.add(this.pathOffset);var h=this.x,c=this.y;this.setPosition(o.x,o.y);var d=this.x-h,g=this.y-c;if(d===0&&g===0)return;if(u.state!==this._prevDirection)return void(this._prevDirection=u.state);this.rotateToPath&&(this.rotation=Math.atan2(g,d)+f(this.pathRotationOffset))}}};v.exports=a},99285:(v,p,t)=>{var f=t(12229),i=t(46098),n=t(28088),l={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(e){e===void 0&&(e=i.MULTI_PIPELINE);var a=this.scene.sys.renderer;if(!a)return!1;var r=a.pipelines;if(this.postPipelines=[],this.pipelineData={},r){var u=r.get(e);if(u)return this.defaultPipeline=u,this.pipeline=u,!0}return!1},setPipeline:function(e,a,r){var u=this.scene.sys.renderer;if(!u)return this;var s=u.pipelines;if(s){var o=s.get(e);o&&(this.pipeline=o),a&&(this.pipelineData=r?f(a):a)}return this},setPostPipeline:function(e,a,r){var u=this.scene.sys.renderer;if(!u)return this;var s=u.pipelines;if(s){Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){var h=s.getPostPipeline(e[o],this);h&&this.postPipelines.push(h)}a&&(this.pipelineData=r?f(a):a)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(e,a){var r=this.pipelineData;return a===void 0?delete r[e]:r[e]=a,this},getPostPipeline:function(e){for(var a=this.postPipelines,r=[],u=0;u<a.length;u++){var s=a[u];(typeof e=="string"&&s.name===e||s instanceof e)&&r.push(s)}return r.length===1?r[0]:r},resetPipeline:function(e,a){return e===void 0&&(e=!1),a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,e&&(this.postPipelines=[],this.hasPostPipeline=!1),a&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(e){e===void 0&&(e=!1);for(var a=this.postPipelines,r=0;r<a.length;r++)a[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,e&&(this.pipelineData={})},removePostPipeline:function(e){for(var a=this.postPipelines,r=a.length-1;r>=0;r--){var u=a[r];(typeof e=="string"&&u.name===e||typeof e!="string"&&u instanceof e)&&(u.destroy(),n(a,r))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};v.exports=l},10125:v=>{v.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(p,t){return t===void 0&&(t=p),this.scrollFactorX=p,this.scrollFactorY=t,this}}},95051:v=>{var p={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return t===void 0&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,f){return this.width=t,this.height=f,this},setDisplaySize:function(t,f){return this.displayWidth=t,this.displayHeight=f,this}};v.exports=p},96103:v=>{v.exports={texture:null,frame:null,isCropped:!1,setTexture:function(p,t){return this.texture=this.scene.sys.textures.get(p),this.setFrame(t)},setFrame:function(p,t,f){return t===void 0&&(t=!0),f===void 0&&(f=!0),this.frame=this.texture.get(p),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&f&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},13966:v=>{v.exports={texture:null,frame:null,isCropped:!1,setCrop:function(p,t,f,i){if(p===void 0)this.isCropped=!1;else if(this.frame){if(typeof p=="number")this.frame.setCropUVs(this._crop,p,t,f,i,this.flipX,this.flipY);else{var n=p;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(p,t){return this.texture=this.scene.sys.textures.get(p),this.setFrame(t)},setFrame:function(p,t,f){return t===void 0&&(t=!0),f===void 0&&(f=!0),this.frame=this.texture.get(p),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&f&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},4381:v=>{v.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(p,t,f,i){return p===void 0&&(p=16777215),t===void 0&&(t=p,f=p,i=p),this.tintTopLeft=p,this.tintTopRight=t,this.tintBottomLeft=f,this.tintBottomRight=i,this.tintFill=!1,this},setTintFill:function(p,t,f,i){return this.setTint(p,t,f,i),this.tintFill=!0,this},tint:{set:function(p){this.setTint(p,p,p,p)}},isTinted:{get:function(){var p=16777215;return this.tintFill||this.tintTopLeft!==p||this.tintTopRight!==p||this.tintBottomLeft!==p||this.tintBottomRight!==p}}}},20847:v=>{v.exports=function(p){var t={name:p.name,type:p.type,x:p.x,y:p.y,depth:p.depth,scale:{x:p.scaleX,y:p.scaleY},origin:{x:p.originX,y:p.originY},flipX:p.flipX,flipY:p.flipY,rotation:p.rotation,alpha:p.alpha,visible:p.visible,blendMode:p.blendMode,textureKey:"",frameKey:"",data:{}};return p.texture&&(t.textureKey=p.texture.key,t.frameKey=p.frame.name),t}},27589:(v,p,t)=>{var f=t(80925),i=t(9329),n=t(37423),l=t(12784),e=t(7011),a=t(17321),r={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(u){this._scaleX=u,this._scaleY=u,u===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(u){this._scaleX=u,u===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(u){this._scaleY=u,u===0?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return e(this._rotation*f.RAD_TO_DEG)},set:function(u){this.rotation=e(u)*f.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=l(u)}},setPosition:function(u,s,o,h){return u===void 0&&(u=0),s===void 0&&(s=u),o===void 0&&(o=0),h===void 0&&(h=0),this.x=u,this.y=s,this.z=o,this.w=h,this},copyPosition:function(u){return u.x!==void 0&&(this.x=u.x),u.y!==void 0&&(this.y=u.y),u.z!==void 0&&(this.z=u.z),u.w!==void 0&&(this.w=u.w),this},setRandomPosition:function(u,s,o,h){return u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=this.scene.sys.scale.width),h===void 0&&(h=this.scene.sys.scale.height),this.x=u+Math.random()*o,this.y=s+Math.random()*h,this},setRotation:function(u){return u===void 0&&(u=0),this.rotation=u,this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,this},setScale:function(u,s){return u===void 0&&(u=1),s===void 0&&(s=u),this.scaleX=u,this.scaleY=s,this},setX:function(u){return u===void 0&&(u=0),this.x=u,this},setY:function(u){return u===void 0&&(u=0),this.y=u,this},setZ:function(u){return u===void 0&&(u=0),this.z=u,this},setW:function(u){return u===void 0&&(u=0),this.w=u,this},getLocalTransformMatrix:function(u){return u===void 0&&(u=new i),u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(u,s){u===void 0&&(u=new i),s===void 0&&(s=new i);var o=this.parentContainer;if(!o)return this.getLocalTransformMatrix(u);for(u.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);o;)s.applyITRS(o.x,o.y,o._rotation,o._scaleX,o._scaleY),s.multiply(u,u),o=o.parentContainer;return u},getLocalPoint:function(u,s,o,h){o||(o=new a),h||(h=this.scene.sys.cameras.main);var c=h.scrollX,d=h.scrollY,g=u+c*this.scrollFactorX-c,m=s+d*this.scrollFactorY-d;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(g,m,o):n(g,m,this.x,this.y,this.rotation,this.scaleX,this.scaleY,o),this._originComponent&&(o.x+=this._displayOriginX,o.y+=this._displayOriginY),o},getParentRotation:function(){for(var u=0,s=this.parentContainer;s;)u+=s.rotation,s=s.parentContainer;return u}};v.exports=r},9329:(v,p,t)=>{var f=t(69186),i=t(80925),n=t(17321),l=new f({initialize:function(e,a,r,u,s,o){e===void 0&&(e=1),a===void 0&&(a=0),r===void 0&&(r=0),u===void 0&&(u=1),s===void 0&&(s=0),o===void 0&&(o=0),this.matrix=new Float32Array([e,a,r,u,s,o,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix,a=e[0],r=e[1],u=e[2],s=e[3];return a||r?r>0?Math.acos(a/this.scaleX):-Math.acos(a/this.scaleX):u||s?i.TAU-(s>0?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},translate:function(e,a){var r=this.matrix;return r[4]=r[0]*e+r[2]*a+r[4],r[5]=r[1]*e+r[3]*a+r[5],this},scale:function(e,a){var r=this.matrix;return r[0]*=e,r[1]*=e,r[2]*=a,r[3]*=a,this},rotate:function(e){var a=Math.sin(e),r=Math.cos(e),u=this.matrix,s=u[0],o=u[1],h=u[2],c=u[3];return u[0]=s*r+h*a,u[1]=o*r+c*a,u[2]=s*-a+h*r,u[3]=o*-a+c*r,this},multiply:function(e,a){var r=this.matrix,u=e.matrix,s=r[0],o=r[1],h=r[2],c=r[3],d=r[4],g=r[5],m=u[0],y=u[1],w=u[2],x=u[3],T=u[4],E=u[5],S=a===void 0?this:a;return S.a=m*s+y*h,S.b=m*o+y*c,S.c=w*s+x*h,S.d=w*o+x*c,S.e=T*s+E*h+d,S.f=T*o+E*c+g,S},multiplyWithOffset:function(e,a,r){var u=this.matrix,s=e.matrix,o=u[0],h=u[1],c=u[2],d=u[3],g=a*o+r*c+u[4],m=a*h+r*d+u[5],y=s[0],w=s[1],x=s[2],T=s[3],E=s[4],S=s[5];return u[0]=y*o+w*c,u[1]=y*h+w*d,u[2]=x*o+T*c,u[3]=x*h+T*d,u[4]=E*o+S*c+g,u[5]=E*h+S*d+m,this},transform:function(e,a,r,u,s,o){var h=this.matrix,c=h[0],d=h[1],g=h[2],m=h[3],y=h[4],w=h[5];return h[0]=e*c+a*g,h[1]=e*d+a*m,h[2]=r*c+u*g,h[3]=r*d+u*m,h[4]=s*c+o*g+y,h[5]=s*d+o*m+w,this},transformPoint:function(e,a,r){r===void 0&&(r={x:0,y:0});var u=this.matrix,s=u[0],o=u[1],h=u[2],c=u[3],d=u[4],g=u[5];return r.x=e*s+a*h+d,r.y=e*o+a*c+g,r},invert:function(){var e=this.matrix,a=e[0],r=e[1],u=e[2],s=e[3],o=e[4],h=e[5],c=a*s-r*u;return e[0]=s/c,e[1]=-r/c,e[2]=-u/c,e[3]=a/c,e[4]=(u*h-s*o)/c,e[5]=-(a*h-r*o)/c,this},copyFrom:function(e){var a=this.matrix;return a[0]=e.a,a[1]=e.b,a[2]=e.c,a[3]=e.d,a[4]=e.e,a[5]=e.f,this},copyFromArray:function(e){var a=this.matrix;return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],this},copyToContext:function(e){var a=this.matrix;return e.transform(a[0],a[1],a[2],a[3],a[4],a[5]),e},setToContext:function(e){var a=this.matrix;return e.setTransform(a[0],a[1],a[2],a[3],a[4],a[5]),e},copyToArray:function(e){var a=this.matrix;return e===void 0?e=[a[0],a[1],a[2],a[3],a[4],a[5]]:(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5]),e},setTransform:function(e,a,r,u,s,o){var h=this.matrix;return h[0]=e,h[1]=a,h[2]=r,h[3]=u,h[4]=s,h[5]=o,this},decomposeMatrix:function(){var e=this.decomposedMatrix,a=this.matrix,r=a[0],u=a[1],s=a[2],o=a[3],h=r*o-u*s;if(e.translateX=a[4],e.translateY=a[5],r||u){var c=Math.sqrt(r*r+u*u);e.rotation=u>0?Math.acos(r/c):-Math.acos(r/c),e.scaleX=c,e.scaleY=h/c}else if(s||o){var d=Math.sqrt(s*s+o*o);e.rotation=.5*Math.PI-(o>0?Math.acos(-s/d):-Math.acos(s/d)),e.scaleX=h/d,e.scaleY=d}else e.rotation=0,e.scaleX=0,e.scaleY=0;return e},applyITRS:function(e,a,r,u,s){var o=this.matrix,h=Math.sin(r),c=Math.cos(r);return o[4]=e,o[5]=a,o[0]=c*u,o[1]=h*u,o[2]=-h*s,o[3]=c*s,this},applyInverse:function(e,a,r){r===void 0&&(r=new n);var u=this.matrix,s=u[0],o=u[1],h=u[2],c=u[3],d=u[4],g=u[5],m=1/(s*c+h*-o);return r.x=c*m*e+-h*m*a+(g*h-d*c)*m,r.y=s*m*a+-o*m*e+(-g*s+d*o)*m,r},getX:function(e,a){return e*this.a+a*this.c+this.e},getY:function(e,a){return e*this.b+a*this.d+this.f},getXRound:function(e,a,r){var u=this.getX(e,a);return r&&(u=Math.round(u)),u},getYRound:function(e,a,r){var u=this.getY(e,a);return r&&(u=Math.round(u)),u},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});v.exports=l},50663:v=>{v.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(p){p?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(p){return this.visible=p,this}}},19506:(v,p,t)=>{v.exports={Alpha:t(60452),AlphaSingle:t(95057),BlendMode:t(13006),ComputedSize:t(45289),Crop:t(12051),Depth:t(59764),Flip:t(41489),GetBounds:t(25942),Mask:t(50231),Origin:t(94610),PathFollower:t(13632),Pipeline:t(99285),ScrollFactor:t(10125),Size:t(95051),Texture:t(96103),TextureCrop:t(13966),Tint:t(4381),ToJSON:t(20847),Transform:t(27589),TransformMatrix:t(9329),Visible:t(50663)}},22675:(v,p,t)=>{var f=t(47205),i=t(87626),n=t(69186),l=t(19506),e=t(99370),a=t(38236),r=t(75380),u=t(1449),s=t(20822),o=t(17321),h=new n({Extends:a,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.Pipeline,l.Transform,l.Visible,u],initialize:function(c,d,g,m){a.call(this,c,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this.tempTransformMatrix=new l.TransformMatrix,this._sortKey="",this._sysEvents=c.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(d,g),this.clearAlpha(),this.setBlendMode(i.SKIP_CHECK),m&&this.add(m)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return .5*this.width}},displayOriginY:{get:function(){return .5*this.height}},setExclusive:function(c){return c===void 0&&(c=!0),this.exclusive=c,this},getBounds:function(c){if(c===void 0&&(c=new r),c.setTo(this.x,this.y,0,0),this.parentContainer){var d=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);c.setTo(d.x,d.y,0,0)}if(this.list.length>0){var g=this.list,m=new r,y=!1;c.setEmpty();for(var w=0;w<g.length;w++){var x=g[w];x.getBounds&&(x.getBounds(m),y?s(m,c,c):(c.setTo(m.x,m.y,m.width,m.height),y=!0))}}return c},addHandler:function(c){c.once(e.DESTROY,this.remove,this),this.exclusive&&(c.parentContainer&&c.parentContainer.remove(c),c.removeFromDisplayList(),c.parentContainer=this)},removeHandler:function(c){c.off(e.DESTROY,this.remove),this.exclusive&&(c.parentContainer=null,c.addToDisplayList())},pointToContainer:function(c,d){d===void 0&&(d=new o),this.parentContainer?this.parentContainer.pointToContainer(c,d):d=new o(c.x,c.y);var g=this.tempTransformMatrix;return g.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),g.invert(),g.transformPoint(c.x,c.y,d),d},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(c){return f.Add(this.list,c,this.maxSize,this.addHandler,this),this},addAt:function(c,d){return f.AddAt(this.list,c,d,this.maxSize,this.addHandler,this),this},getAt:function(c){return this.list[c]},getIndex:function(c){return this.list.indexOf(c)},sort:function(c,d){return c?(d===void 0&&(d=function(g,m){return g[c]-m[c]}),f.StableSort(this.list,d),this):this},getByName:function(c){return f.GetFirst(this.list,"name",c)},getRandom:function(c,d){return f.GetRandom(this.list,c,d)},getFirst:function(c,d,g,m){return f.GetFirst(this.list,c,d,g,m)},getAll:function(c,d,g,m){return f.GetAll(this.list,c,d,g,m)},count:function(c,d,g,m){return f.CountAllMatching(this.list,c,d,g,m)},swap:function(c,d){return f.Swap(this.list,c,d),this},moveTo:function(c,d){return f.MoveTo(this.list,c,d),this},moveAbove:function(c,d){return f.MoveAbove(this.list,c,d),this},moveBelow:function(c,d){return f.MoveBelow(this.list,c,d),this},remove:function(c,d){var g=f.Remove(this.list,c,this.removeHandler,this);if(d&&g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++)g[m].destroy()}return this},removeAt:function(c,d){var g=f.RemoveAt(this.list,c,this.removeHandler,this);return d&&g&&g.destroy(),this},removeBetween:function(c,d,g){var m=f.RemoveBetween(this.list,c,d,this.removeHandler,this);if(g)for(var y=0;y<m.length;y++)m[y].destroy();return this},removeAll:function(c){var d=f.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(c)for(var g=0;g<d.length;g++)d[g].destroy();return this},bringToTop:function(c){return f.BringToTop(this.list,c),this},sendToBack:function(c){return f.SendToBack(this.list,c),this},moveUp:function(c){return f.MoveUp(this.list,c),this},moveDown:function(c){return f.MoveDown(this.list,c),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return f.Shuffle(this.list),this},replace:function(c,d,g){return f.Replace(this.list,c,d)&&(this.addHandler(d),this.removeHandler(c),g&&c.destroy()),this},exists:function(c){return this.list.indexOf(c)>-1},setAll:function(c,d,g,m){return f.SetAll(this.list,c,d,g,m),this},each:function(c,d){var g,m=[null],y=this.list.slice(),w=y.length;for(g=2;g<arguments.length;g++)m.push(arguments[g]);for(g=0;g<w;g++)m[0]=y[g],c.apply(d,m);return this},iterate:function(c,d){var g,m=[null];for(g=2;g<arguments.length;g++)m.push(arguments[g]);for(g=0;g<this.list.length;g++)m[0]=this.list[g],c.apply(d,m);return this},setScrollFactor:function(c,d,g){return d===void 0&&(d=c),g===void 0&&(g=!1),this.scrollFactorX=c,this.scrollFactorY=d,g&&(f.SetAll(this.list,"scrollFactorX",c),f.SetAll(this.list,"scrollFactorY",d)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});v.exports=h},4168:v=>{v.exports=function(p,t,f,i){f.addToRenderList(t);var n=t.list;if(n.length!==0){var l=t.localTransform;i?(l.loadIdentity(),l.multiply(i),l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(t.scaleX,t.scaleY)):l.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var e=t.blendMode!==-1;e||p.setBlendMode(0);var a=t._alpha,r=t.scrollFactorX,u=t.scrollFactorY;t.mask&&t.mask.preRenderCanvas(p,null,f);for(var s=0;s<n.length;s++){var o=n[s];if(o.willRender(f)){var h=o.alpha,c=o.scrollFactorX,d=o.scrollFactorY;e||o.blendMode===p.currentBlendMode||p.setBlendMode(o.blendMode),o.setScrollFactor(c*r,d*u),o.setAlpha(h*a),o.renderCanvas(p,o,f,l),o.setAlpha(h),o.setScrollFactor(c,d)}}t.mask&&t.mask.postRenderCanvas(p)}}},92359:(v,p,t)=>{var f=t(90062),i=t(22675),n=t(78757),l=t(7973);n.register("container",function(e,a){e===void 0&&(e={});var r=l(e,"x",0),u=l(e,"y",0),s=l(e,"children",null),o=new i(this.scene,r,u,s);return a!==void 0&&(e.add=a),f(this.scene,o,e),o})},51273:(v,p,t)=>{var f=t(22675);t(66642).register("container",function(i,n,l){return this.displayList.add(new f(this.scene,i,n,l))})},1449:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(58784),i=t(4168),v.exports={renderWebGL:f,renderCanvas:i}},58784:v=>{v.exports=function(p,t,f,i){f.addToRenderList(t);var n=t.list,l=n.length;if(l!==0){var e=t.localTransform;i?(e.loadIdentity(),e.multiply(i),e.translate(t.x,t.y),e.rotate(t.rotation),e.scale(t.scaleX,t.scaleY)):e.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),p.pipelines.preBatch(t);var a=t.blendMode!==-1;a||p.setBlendMode(0);for(var r=t.alpha,u=t.scrollFactorX,s=t.scrollFactorY,o=0;o<l;o++){var h=n[o];if(h.willRender(f)){var c,d,g,m;if(h.alphaTopLeft!==void 0)c=h.alphaTopLeft,d=h.alphaTopRight,g=h.alphaBottomLeft,m=h.alphaBottomRight;else{var y=h.alpha;c=y,d=y,g=y,m=y}var w=h.scrollFactorX,x=h.scrollFactorY;a||h.blendMode===p.currentBlendMode||p.setBlendMode(h.blendMode);var T=h.mask;T&&T.preRenderWebGL(p,h,f);var E=h.type;E!==p.currentType&&(p.newType=!0,p.currentType=E),p.nextTypeMatch=o<l-1&&n[o+1].type===p.currentType,h.setScrollFactor(w*u,x*s),h.setAlpha(c*r,d*r,g*r,m*r),h.renderWebGL(p,h,f,e),h.setAlpha(c,d,g,m),h.setScrollFactor(w,x),T&&T.postRenderWebGL(p,f),p.newType=!1}}p.pipelines.postBatch(t)}}},7121:v=>{v.exports="addedtoscene"},32674:v=>{v.exports="destroy"},87298:v=>{v.exports="removedfromscene"},77460:v=>{v.exports="complete"},5105:v=>{v.exports="created"},18076:v=>{v.exports="error"},24953:v=>{v.exports="loop"},49615:v=>{v.exports="play"},65441:v=>{v.exports="seeked"},67987:v=>{v.exports="seeking"},65048:v=>{v.exports="stop"},27332:v=>{v.exports="timeout"},22637:v=>{v.exports="unlocked"},99370:(v,p,t)=>{v.exports={ADDED_TO_SCENE:t(7121),DESTROY:t(32674),REMOVED_FROM_SCENE:t(87298),VIDEO_COMPLETE:t(77460),VIDEO_CREATED:t(5105),VIDEO_ERROR:t(18076),VIDEO_LOOP:t(24953),VIDEO_PLAY:t(49615),VIDEO_SEEKED:t(65441),VIDEO_SEEKING:t(67987),VIDEO_STOP:t(65048),VIDEO_TIMEOUT:t(27332),VIDEO_UNLOCKED:t(22637)}},15972:v=>{v.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},19613:(v,p,t)=>{var f=t(43929),i=t(69186),n=t(15972),l=t(95057),e=t(13006),a=t(59764),r=t(50231),u=t(99285),s=t(10125),o=t(27589),h=t(50663),c=t(81385),d=t(38236),g=t(25738),m=t(76076),y=t(80925),w=t(71906),x=new i({Extends:d,Mixins:[l,e,a,r,u,o,h,s,w],initialize:function(T,E){var S=m(E,"x",0),C=m(E,"y",0);d.call(this,T,"Graphics"),this.setPosition(S,C),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(E)},setDefaultStyles:function(T){return m(T,"lineStyle",null)&&(this.defaultStrokeWidth=m(T,"lineStyle.width",1),this.defaultStrokeColor=m(T,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(T,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(T,"fillStyle",null)&&(this.defaultFillColor=m(T,"fillStyle.color",16777215),this.defaultFillAlpha=m(T,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(T,E,S){return S===void 0&&(S=1),this.commandBuffer.push(n.LINE_STYLE,T,E,S),this._lineWidth=T,this},fillStyle:function(T,E){return E===void 0&&(E=1),this.commandBuffer.push(n.FILL_STYLE,T,E),this},fillGradientStyle:function(T,E,S,C,A,M,b,_){return A===void 0&&(A=1),M===void 0&&(M=A),b===void 0&&(b=A),_===void 0&&(_=A),this.commandBuffer.push(n.GRADIENT_FILL_STYLE,A,M,b,_,T,E,S,C),this},lineGradientStyle:function(T,E,S,C,A,M){return M===void 0&&(M=1),this.commandBuffer.push(n.GRADIENT_LINE_STYLE,T,M,E,S,C,A),this},beginPath:function(){return this.commandBuffer.push(n.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(n.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(n.FILL_PATH),this},fill:function(){return this.commandBuffer.push(n.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(n.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(n.STROKE_PATH),this},fillCircleShape:function(T){return this.fillCircle(T.x,T.y,T.radius)},strokeCircleShape:function(T){return this.strokeCircle(T.x,T.y,T.radius)},fillCircle:function(T,E,S){return this.beginPath(),this.arc(T,E,S,0,y.PI2),this.fillPath(),this},strokeCircle:function(T,E,S){return this.beginPath(),this.arc(T,E,S,0,y.PI2),this.strokePath(),this},fillRectShape:function(T){return this.fillRect(T.x,T.y,T.width,T.height)},strokeRectShape:function(T){return this.strokeRect(T.x,T.y,T.width,T.height)},fillRect:function(T,E,S,C){return this.commandBuffer.push(n.FILL_RECT,T,E,S,C),this},strokeRect:function(T,E,S,C){var A=this._lineWidth/2,M=T-A,b=T+A;return this.beginPath(),this.moveTo(T,E),this.lineTo(T,E+C),this.strokePath(),this.beginPath(),this.moveTo(T+S,E),this.lineTo(T+S,E+C),this.strokePath(),this.beginPath(),this.moveTo(M,E),this.lineTo(b+S,E),this.strokePath(),this.beginPath(),this.moveTo(M,E+C),this.lineTo(b+S,E+C),this.strokePath(),this},fillRoundedRect:function(T,E,S,C,A){A===void 0&&(A=20);var M=A,b=A,_=A,P=A;return typeof A!="number"&&(M=g(A,"tl",20),b=g(A,"tr",20),_=g(A,"bl",20),P=g(A,"br",20)),this.beginPath(),this.moveTo(T+M,E),this.lineTo(T+S-b,E),this.arc(T+S-b,E+b,b,-y.TAU,0),this.lineTo(T+S,E+C-P),this.arc(T+S-P,E+C-P,P,0,y.TAU),this.lineTo(T+_,E+C),this.arc(T+_,E+C-_,_,y.TAU,Math.PI),this.lineTo(T,E+M),this.arc(T+M,E+M,M,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(T,E,S,C,A){A===void 0&&(A=20);var M=A,b=A,_=A,P=A;return typeof A!="number"&&(M=g(A,"tl",20),b=g(A,"tr",20),_=g(A,"bl",20),P=g(A,"br",20)),this.beginPath(),this.moveTo(T+M,E),this.lineTo(T+S-b,E),this.moveTo(T+S-b,E),this.arc(T+S-b,E+b,b,-y.TAU,0),this.lineTo(T+S,E+C-P),this.moveTo(T+S,E+C-P),this.arc(T+S-P,E+C-P,P,0,y.TAU),this.lineTo(T+_,E+C),this.moveTo(T+_,E+C),this.arc(T+_,E+C-_,_,y.TAU,Math.PI),this.lineTo(T,E+M),this.moveTo(T,E+M),this.arc(T+M,E+M,M,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(T,E){return this.fillPoint(T.x,T.y,E)},fillPoint:function(T,E,S){return!S||S<1?S=1:(T-=S/2,E-=S/2),this.commandBuffer.push(n.FILL_RECT,T,E,S,S),this},fillTriangleShape:function(T){return this.fillTriangle(T.x1,T.y1,T.x2,T.y2,T.x3,T.y3)},strokeTriangleShape:function(T){return this.strokeTriangle(T.x1,T.y1,T.x2,T.y2,T.x3,T.y3)},fillTriangle:function(T,E,S,C,A,M){return this.commandBuffer.push(n.FILL_TRIANGLE,T,E,S,C,A,M),this},strokeTriangle:function(T,E,S,C,A,M){return this.commandBuffer.push(n.STROKE_TRIANGLE,T,E,S,C,A,M),this},strokeLineShape:function(T){return this.lineBetween(T.x1,T.y1,T.x2,T.y2)},lineBetween:function(T,E,S,C){return this.beginPath(),this.moveTo(T,E),this.lineTo(S,C),this.strokePath(),this},lineTo:function(T,E){return this.commandBuffer.push(n.LINE_TO,T,E),this},moveTo:function(T,E){return this.commandBuffer.push(n.MOVE_TO,T,E),this},strokePoints:function(T,E,S,C){E===void 0&&(E=!1),S===void 0&&(S=!1),C===void 0&&(C=T.length),this.beginPath(),this.moveTo(T[0].x,T[0].y);for(var A=1;A<C;A++)this.lineTo(T[A].x,T[A].y);return E&&this.lineTo(T[0].x,T[0].y),S&&this.closePath(),this.strokePath(),this},fillPoints:function(T,E,S,C){E===void 0&&(E=!1),S===void 0&&(S=!1),C===void 0&&(C=T.length),this.beginPath(),this.moveTo(T[0].x,T[0].y);for(var A=1;A<C;A++)this.lineTo(T[A].x,T[A].y);return E&&this.lineTo(T[0].x,T[0].y),S&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(T,E){E===void 0&&(E=32);var S=T.getPoints(E);return this.strokePoints(S,!0)},strokeEllipse:function(T,E,S,C,A){A===void 0&&(A=32);var M=new c(T,E,S,C).getPoints(A);return this.strokePoints(M,!0)},fillEllipseShape:function(T,E){E===void 0&&(E=32);var S=T.getPoints(E);return this.fillPoints(S,!0)},fillEllipse:function(T,E,S,C,A){A===void 0&&(A=32);var M=new c(T,E,S,C).getPoints(A);return this.fillPoints(M,!0)},arc:function(T,E,S,C,A,M,b){return M===void 0&&(M=!1),b===void 0&&(b=0),this.commandBuffer.push(n.ARC,T,E,S,C,A,M,b),this},slice:function(T,E,S,C,A,M,b){return M===void 0&&(M=!1),b===void 0&&(b=0),this.commandBuffer.push(n.BEGIN_PATH),this.commandBuffer.push(n.MOVE_TO,T,E),this.commandBuffer.push(n.ARC,T,E,S,C,A,M,b),this.commandBuffer.push(n.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(n.SAVE),this},restore:function(){return this.commandBuffer.push(n.RESTORE),this},translateCanvas:function(T,E){return this.commandBuffer.push(n.TRANSLATE,T,E),this},scaleCanvas:function(T,E){return this.commandBuffer.push(n.SCALE,T,E),this},rotateCanvas:function(T){return this.commandBuffer.push(n.ROTATE,T),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(T,E,S){var C,A,M=this.scene.sys,b=M.game.renderer;if(E===void 0&&(E=M.scale.width),S===void 0&&(S=M.scale.height),x.TargetCamera.setScene(this.scene),x.TargetCamera.setViewport(0,0,E,S),x.TargetCamera.scrollX=this.x,x.TargetCamera.scrollY=this.y,typeof T=="string")if(M.textures.exists(T)){var _=(C=M.textures.get(T)).getSourceImage();_ instanceof HTMLCanvasElement&&(A=_.getContext("2d"))}else A=(C=M.textures.createCanvas(T,E,S)).getSourceImage().getContext("2d");else T instanceof HTMLCanvasElement&&(A=T.getContext("2d"));return A&&(this.renderCanvas(b,this,x.TargetCamera,null,A,!1),C&&C.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});x.TargetCamera=new f,v.exports=x},95930:(v,p,t)=>{var f=t(15972),i=t(14437);v.exports=function(n,l,e,a,r,u){var s=l.commandBuffer,o=s.length,h=r||n.currentContext;if(o!==0&&i(n,h,l,e,a)){e.addToRenderList(l);var c=1,d=1,g=0,m=0,y=1,w=0,x=0,T=0;h.beginPath();for(var E=0;E<o;++E)switch(s[E]){case f.ARC:h.arc(s[E+1],s[E+2],s[E+3],s[E+4],s[E+5],s[E+6]),E+=7;break;case f.LINE_STYLE:y=s[E+1],g=s[E+2],c=s[E+3],w=(16711680&g)>>>16,x=(65280&g)>>>8,T=255&g,h.strokeStyle="rgba("+w+","+x+","+T+","+c+")",h.lineWidth=y,E+=3;break;case f.FILL_STYLE:m=s[E+1],d=s[E+2],w=(16711680&m)>>>16,x=(65280&m)>>>8,T=255&m,h.fillStyle="rgba("+w+","+x+","+T+","+d+")",E+=2;break;case f.BEGIN_PATH:h.beginPath();break;case f.CLOSE_PATH:h.closePath();break;case f.FILL_PATH:u||h.fill();break;case f.STROKE_PATH:u||h.stroke();break;case f.FILL_RECT:u?h.rect(s[E+1],s[E+2],s[E+3],s[E+4]):h.fillRect(s[E+1],s[E+2],s[E+3],s[E+4]),E+=4;break;case f.FILL_TRIANGLE:h.beginPath(),h.moveTo(s[E+1],s[E+2]),h.lineTo(s[E+3],s[E+4]),h.lineTo(s[E+5],s[E+6]),h.closePath(),u||h.fill(),E+=6;break;case f.STROKE_TRIANGLE:h.beginPath(),h.moveTo(s[E+1],s[E+2]),h.lineTo(s[E+3],s[E+4]),h.lineTo(s[E+5],s[E+6]),h.closePath(),u||h.stroke(),E+=6;break;case f.LINE_TO:h.lineTo(s[E+1],s[E+2]),E+=2;break;case f.MOVE_TO:h.moveTo(s[E+1],s[E+2]),E+=2;break;case f.LINE_FX_TO:h.lineTo(s[E+1],s[E+2]),E+=5;break;case f.MOVE_FX_TO:h.moveTo(s[E+1],s[E+2]),E+=5;break;case f.SAVE:h.save();break;case f.RESTORE:h.restore();break;case f.TRANSLATE:h.translate(s[E+1],s[E+2]),E+=2;break;case f.SCALE:h.scale(s[E+1],s[E+2]),E+=2;break;case f.ROTATE:h.rotate(s[E+1]),E+=1;break;case f.GRADIENT_FILL_STYLE:E+=5;break;case f.GRADIENT_LINE_STYLE:E+=6}h.restore()}}},2923:(v,p,t)=>{var f=t(78757),i=t(19613);f.register("graphics",function(n,l){n===void 0&&(n={}),l!==void 0&&(n.add=l);var e=new i(this.scene,n);return n.add&&this.scene.sys.displayList.add(e),e})},4268:(v,p,t)=>{var f=t(19613);t(66642).register("graphics",function(i){return this.displayList.add(new f(this.scene,i))})},71906:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(3484),t(95930),i=t(95930),v.exports={renderWebGL:f,renderCanvas:i}},3484:(v,p,t)=>{var f=t(15972),i=t(3142),n=t(9329),l=t(64564),e=function(s,o,h){this.x=s,this.y=o,this.width=h},a=function(s,o,h){this.points=[],this.pointsLength=1,this.points[0]=new e(s,o,h)},r=[],u=new n;v.exports=function(s,o,h,c){if(o.commandBuffer.length!==0){h.addToRenderList(o);var d=s.pipelines.set(o.pipeline,o);s.pipelines.preBatch(o);for(var g=i(o,h,c).calc,m=u.loadIdentity(),y=o.commandBuffer,w=h.alpha*o.alpha,x=1,T=d.fillTint,E=d.strokeTint,S=0,C=0,A=0,M=2*Math.PI,b=[],_=0,P=!0,L=null,F=l.getTintAppendFloatAlpha,D=0;D<y.length;D++)switch(y[D]){case f.BEGIN_PATH:b.length=0,L=null,P=!0;break;case f.CLOSE_PATH:P=!1,L&&L.points.length&&L.points.push(L.points[0]);break;case f.FILL_PATH:for(_=0;_<b.length;_++)d.batchFillPath(b[_].points,m,g);break;case f.STROKE_PATH:for(_=0;_<b.length;_++)d.batchStrokePath(b[_].points,x,P,m,g);break;case f.LINE_STYLE:x=y[++D];var k=F(y[++D],y[++D]*w);E.TL=k,E.TR=k,E.BL=k,E.BR=k;break;case f.FILL_STYLE:var R=F(y[++D],y[++D]*w);T.TL=R,T.TR=R,T.BL=R,T.BR=R;break;case f.GRADIENT_FILL_STYLE:var O=y[++D]*w,B=y[++D]*w,U=y[++D]*w,I=y[++D]*w;T.TL=F(y[++D],O),T.TR=F(y[++D],B),T.BL=F(y[++D],U),T.BR=F(y[++D],I);break;case f.GRADIENT_LINE_STYLE:x=y[++D];var Y=y[++D]*w;E.TL=F(y[++D],Y),E.TR=F(y[++D],Y),E.BL=F(y[++D],Y),E.BR=F(y[++D],Y);break;case f.ARC:var N=0,X=y[++D],z=y[++D],V=y[++D],G=y[++D],W=y[++D],H=y[++D],j=y[++D];for(W-=G,H?W<-M?W=-M:W>0&&(W=W%M-M):W>M?W=M:W<0&&(W=M+W%M),L===null&&(L=new a(X+Math.cos(G)*V,z+Math.sin(G)*V,x),b.push(L),N+=.01);N<1+j;)A=W*N+G,S=X+Math.cos(A)*V,C=z+Math.sin(A)*V,L.points.push(new e(S,C,x)),N+=.01;A=W+G,S=X+Math.cos(A)*V,C=z+Math.sin(A)*V,L.points.push(new e(S,C,x));break;case f.FILL_RECT:d.batchFillRect(y[++D],y[++D],y[++D],y[++D],m,g);break;case f.FILL_TRIANGLE:d.batchFillTriangle(y[++D],y[++D],y[++D],y[++D],y[++D],y[++D],m,g);break;case f.STROKE_TRIANGLE:d.batchStrokeTriangle(y[++D],y[++D],y[++D],y[++D],y[++D],y[++D],x,m,g);break;case f.LINE_TO:L!==null?L.points.push(new e(y[++D],y[++D],x)):(L=new a(y[++D],y[++D],x),b.push(L));break;case f.MOVE_TO:L=new a(y[++D],y[++D],x),b.push(L);break;case f.SAVE:r.push(m.copyToArray());break;case f.RESTORE:m.copyFromArray(r.pop());break;case f.TRANSLATE:X=y[++D],z=y[++D],m.translate(X,z);break;case f.SCALE:X=y[++D],z=y[++D],m.scale(X,z);break;case f.ROTATE:m.rotate(y[++D])}s.pipelines.postBatch(o)}}},84262:(v,p,t)=>{var f=t(22603),i=t(69186),n=t(99370),l=t(26729),e=t(14999),a=t(25738),r=t(76076),u=t(53013),s=t(17109),o=t(96609),h=t(38590),c=new i({Extends:l,initialize:function(d,g,m){l.call(this),m?g&&!Array.isArray(g)&&(g=[g]):Array.isArray(g)?u(g[0])&&(m=g,g=null):u(g)&&(m=g,g=null),this.scene=d,this.children=new o,this.isParent=!0,this.type="Group",this.classType=a(m,"classType",h),this.name=a(m,"name",""),this.active=a(m,"active",!0),this.maxSize=a(m,"maxSize",-1),this.defaultKey=a(m,"defaultKey",null),this.defaultFrame=a(m,"defaultFrame",null),this.runChildUpdate=a(m,"runChildUpdate",!1),this.createCallback=a(m,"createCallback",null),this.removeCallback=a(m,"removeCallback",null),this.createMultipleCallback=a(m,"createMultipleCallback",null),this.internalCreateCallback=a(m,"internalCreateCallback",null),this.internalRemoveCallback=a(m,"internalRemoveCallback",null),g&&this.addMultiple(g),m&&this.createMultiple(m),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(d,g,m,y,w,x){if(d===void 0&&(d=0),g===void 0&&(g=0),m===void 0&&(m=this.defaultKey),y===void 0&&(y=this.defaultFrame),w===void 0&&(w=!0),x===void 0&&(x=!0),this.isFull())return null;var T=new this.classType(this.scene,d,g,m,y);return T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList(),T.visible=w,T.setActive(x),this.add(T),T},createMultiple:function(d){if(this.isFull())return[];Array.isArray(d)||(d=[d]);var g=[];if(d[0].key)for(var m=0;m<d.length;m++){var y=this.createFromConfig(d[m]);g=g.concat(y)}return g},createFromConfig:function(d){if(this.isFull())return[];this.classType=a(d,"classType",this.classType);var g=a(d,"key",void 0),m=a(d,"frame",null),y=a(d,"visible",!0),w=a(d,"active",!0),x=[];if(g===void 0)return x;Array.isArray(g)||(g=[g]),Array.isArray(m)||(m=[m]);var T=a(d,"repeat",0),E=a(d,"randomKey",!1),S=a(d,"randomFrame",!1),C=a(d,"yoyo",!1),A=a(d,"quantity",!1),M=a(d,"frameQuantity",1),b=a(d,"max",0),_=s(g,m,{max:b,qty:A||M,random:E,randomB:S,repeat:T,yoyo:C});d.createCallback&&(this.createCallback=d.createCallback),d.removeCallback&&(this.removeCallback=d.removeCallback);for(var P=0;P<_.length;P++){var L=this.create(0,0,_[P].a,_[P].b,y,w);if(!L)break;x.push(L)}var F=r(d,"setXY.x",0),D=r(d,"setXY.y",0),k=r(d,"setXY.stepX",0),R=r(d,"setXY.stepY",0);f.SetXY(x,F,D,k,R);var O=r(d,"setRotation.value",0),B=r(d,"setRotation.step",0);f.SetRotation(x,O,B);var U=r(d,"setScale.x",1),I=r(d,"setScale.y",U),Y=r(d,"setScale.stepX",0),N=r(d,"setScale.stepY",0);f.SetScale(x,U,I,Y,N);var X=r(d,"setOrigin.x",.5),z=r(d,"setOrigin.y",X),V=r(d,"setOrigin.stepX",0),G=r(d,"setOrigin.stepY",0);f.SetOrigin(x,X,z,V,G);var W=r(d,"setAlpha.value",1),H=r(d,"setAlpha.step",0);f.SetAlpha(x,W,H);var j=r(d,"setDepth.value",0),q=r(d,"setDepth.step",0);f.SetDepth(x,j,q);var K=r(d,"setScrollFactor.x",1),it=r(d,"setScrollFactor.y",K),et=r(d,"setScrollFactor.stepX",0),J=r(d,"setScrollFactor.stepY",0);f.SetScrollFactor(x,K,it,et,J);var Z=a(d,"hitArea",null),$=a(d,"hitAreaCallback",null);Z&&f.SetHitArea(x,Z,$);var tt=a(d,"gridAlign",!1);return tt&&f.GridAlign(x,tt),this.createMultipleCallback&&this.createMultipleCallback.call(this,x),x},preUpdate:function(d,g){if(this.runChildUpdate&&this.children.size!==0)for(var m=this.children.entries.slice(),y=0;y<m.length;y++){var w=m[y];w.active&&w.update(d,g)}},add:function(d,g){return g===void 0&&(g=!1),this.isFull()||(this.children.set(d),this.internalCreateCallback&&this.internalCreateCallback.call(this,d),this.createCallback&&this.createCallback.call(this,d),g&&(d.addToDisplayList(this.scene.sys.displayList),d.addToUpdateList()),d.on(n.DESTROY,this.remove,this)),this},addMultiple:function(d,g){if(g===void 0&&(g=!1),Array.isArray(d))for(var m=0;m<d.length;m++)this.add(d[m],g);return this},remove:function(d,g,m){return g===void 0&&(g=!1),m===void 0&&(m=!1),this.children.contains(d)?(this.children.delete(d),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,d),this.removeCallback&&this.removeCallback.call(this,d),d.off(n.DESTROY,this.remove,this),m?d.destroy():g&&(d.removeFromDisplayList(),d.removeFromUpdateList()),this):this},clear:function(d,g){d===void 0&&(d=!1),g===void 0&&(g=!1);for(var m=this.children,y=0;y<m.size;y++){var w=m.entries[y];w.off(n.DESTROY,this.remove,this),g?w.destroy():d&&(w.removeFromDisplayList(),w.removeFromUpdateList())}return this.children.clear(),this},contains:function(d){return this.children.contains(d)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(d,g,m,y){return e(this.children.entries,d,g,m,y)},getFirst:function(d,g,m,y,w,x,T){return this.getHandler(!0,1,d,g,m,y,w,x,T)},getFirstNth:function(d,g,m,y,w,x,T,E){return this.getHandler(!0,d,g,m,y,w,x,T,E)},getLast:function(d,g,m,y,w,x,T){return this.getHandler(!1,1,d,g,m,y,w,x,T)},getLastNth:function(d,g,m,y,w,x,T,E){return this.getHandler(!1,d,g,m,y,w,x,T,E)},getHandler:function(d,g,m,y,w,x,T,E,S){var C,A;m===void 0&&(m=!1),y===void 0&&(y=!1);var M=0,b=this.children.entries;if(d)for(A=0;A<b.length;A++)if((C=b[A]).active===m){if(++M===g)break}else C=null;else for(A=b.length-1;A>=0;A--)if((C=b[A]).active===m){if(++M===g)break}else C=null;return C?(typeof w=="number"&&(C.x=w),typeof x=="number"&&(C.y=x),C):y?this.create(w,x,T,E,S):null},get:function(d,g,m,y,w){return this.getFirst(!1,!0,d,g,m,y,w)},getFirstAlive:function(d,g,m,y,w,x){return this.getFirst(!0,d,g,m,y,w,x)},getFirstDead:function(d,g,m,y,w,x){return this.getFirst(!1,d,g,m,y,w,x)},playAnimation:function(d,g){return f.PlayAnimation(this.children.entries,d,g),this},isFull:function(){return this.maxSize!==-1&&this.children.size>=this.maxSize},countActive:function(d){d===void 0&&(d=!0);for(var g=0,m=0;m<this.children.size;m++)this.children.entries[m].active===d&&g++;return g},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var d=this.getTotalUsed();return(this.maxSize===-1?999999999999:this.maxSize)-d},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},propertyValueSet:function(d,g,m,y,w){return f.PropertyValueSet(this.children.entries,d,g,m,y,w),this},propertyValueInc:function(d,g,m,y,w){return f.PropertyValueInc(this.children.entries,d,g,m,y,w),this},setX:function(d,g){return f.SetX(this.children.entries,d,g),this},setY:function(d,g){return f.SetY(this.children.entries,d,g),this},setXY:function(d,g,m,y){return f.SetXY(this.children.entries,d,g,m,y),this},incX:function(d,g){return f.IncX(this.children.entries,d,g),this},incY:function(d,g){return f.IncY(this.children.entries,d,g),this},incXY:function(d,g,m,y){return f.IncXY(this.children.entries,d,g,m,y),this},shiftPosition:function(d,g,m){return f.ShiftPosition(this.children.entries,d,g,m),this},angle:function(d,g){return f.Angle(this.children.entries,d,g),this},rotate:function(d,g){return f.Rotate(this.children.entries,d,g),this},rotateAround:function(d,g){return f.RotateAround(this.children.entries,d,g),this},rotateAroundDistance:function(d,g,m){return f.RotateAroundDistance(this.children.entries,d,g,m),this},setAlpha:function(d,g){return f.SetAlpha(this.children.entries,d,g),this},setTint:function(d,g,m,y){return f.SetTint(this.children.entries,d,g,m,y),this},setOrigin:function(d,g,m,y){return f.SetOrigin(this.children.entries,d,g,m,y),this},scaleX:function(d,g){return f.ScaleX(this.children.entries,d,g),this},scaleY:function(d,g){return f.ScaleY(this.children.entries,d,g),this},scaleXY:function(d,g,m,y){return f.ScaleXY(this.children.entries,d,g,m,y),this},setDepth:function(d,g){return f.SetDepth(this.children.entries,d,g),this},setBlendMode:function(d){return f.SetBlendMode(this.children.entries,d),this},setHitArea:function(d,g){return f.SetHitArea(this.children.entries,d,g),this},shuffle:function(){return f.Shuffle(this.children.entries),this},kill:function(d){this.children.contains(d)&&d.setActive(!1)},killAndHide:function(d){this.children.contains(d)&&(d.setActive(!1),d.setVisible(!1))},setVisible:function(d,g,m){return f.SetVisible(this.children.entries,d,g,m),this},toggleVisible:function(){return f.ToggleVisible(this.children.entries),this},destroy:function(d,g){d===void 0&&(d=!1),g===void 0&&(g=!1),this.scene&&!this.ignoreDestroy&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(g,d),this.scene=void 0,this.children=void 0)}});v.exports=c},57736:(v,p,t)=>{var f=t(78757),i=t(84262);f.register("group",function(n){return new i(this.scene,null,n)})},97058:(v,p,t)=>{var f=t(84262);t(66642).register("group",function(i,n){return this.updateList.add(new f(this.scene,i,n))})},86479:(v,p,t)=>{var f=t(69186),i=t(19506),n=t(38236),l=t(16217),e=new f({Extends:n,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Size,i.TextureCrop,i.Tint,i.Transform,i.Visible,l],initialize:function(a,r,u,s,o){n.call(this,a,"Image"),this._crop=this.resetCropObject(),this.setTexture(s,o),this.setPosition(r,u),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});v.exports=e},26681:v=>{v.exports=function(p,t,f,i){f.addToRenderList(t),p.batchSprite(t,t.frame,f,i)}},16836:(v,p,t)=>{var f=t(90062),i=t(78757),n=t(7973),l=t(86479);i.register("image",function(e,a){e===void 0&&(e={});var r=n(e,"key",null),u=n(e,"frame",null),s=new l(this.scene,0,0,r,u);return a!==void 0&&(e.add=a),f(this.scene,s,e),s})},48950:(v,p,t)=>{var f=t(86479);t(66642).register("image",function(i,n,l,e){return this.displayList.add(new f(this.scene,i,n,l,e))})},16217:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(84188),i=t(26681),v.exports={renderWebGL:f,renderCanvas:i}},84188:v=>{v.exports=function(p,t,f,i){f.addToRenderList(t),this.pipeline.batchSprite(t,f,i)}},79948:(v,p,t)=>{var f=t(69186),i=t(62193),n=t(17232),l=t(25738),e=t(6704),a=new f({initialize:function(r,u,s,o){o===void 0&&(o=!1),this.propertyKey=u,this.propertyValue=s,this.defaultValue=s,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=o,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(r)},loadConfig:function(r,u){r===void 0&&(r={}),u&&(this.propertyKey=u),this.propertyValue=l(r,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(r){return this.propertyValue=r,this.setMethods()},setMethods:function(){var r=this.propertyValue,u=typeof r;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,u==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(r))this.onEmit=this.randomStaticValueEmit;else if(u==="function")this.emitOnly?this.onEmit=r:this.onUpdate=r;else if(u==="object"&&this.hasBoth(r,"start","end")){this.start=r.start,this.end=r.end;var s=this.has(r,"random");if(s&&(this.onEmit=this.randomRangedValueEmit),this.has(r,"steps"))this.steps=r.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var o=this.has(r,"ease")?r.ease:"Linear";this.ease=n(o,r.easeParams),s||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(u==="object"&&this.hasBoth(r,"min","max"))this.start=r.min,this.end=r.max,this.onEmit=this.randomRangedValueEmit;else if(u==="object"&&this.has(r,"random")){var h=r.random;Array.isArray(h)&&(this.start=h[0],this.end=h[1]),this.onEmit=this.randomRangedValueEmit}else u==="object"&&this.hasEither(r,"onEmit","onUpdate")&&(this.has(r,"onEmit")&&(this.onEmit=r.onEmit),this.has(r,"onUpdate")&&(this.onUpdate=r.onUpdate));return this},has:function(r,u){return r.hasOwnProperty(u)},hasBoth:function(r,u,s){return r.hasOwnProperty(u)&&r.hasOwnProperty(s)},hasEither:function(r,u,s){return r.hasOwnProperty(u)||r.hasOwnProperty(s)},defaultEmit:function(r,u,s){return s},defaultUpdate:function(r,u,s,o){return o},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var r=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[r]},randomRangedValueEmit:function(r,u){var s=i(this.start,this.end);return r&&r.data[u]&&(r.data[u].min=s),s},steppedEmit:function(){var r=this.counter,u=this.counter+(this.end-this.start)/this.steps;return this.counter=e(u,this.start,this.end),r},easedValueEmit:function(r,u){if(r&&r.data[u]){var s=r.data[u];s.min=this.start,s.max=this.end}return this.start},easeValueUpdate:function(r,u,s){var o=r.data[u];return(o.max-o.min)*this.ease(s)+o.min}});v.exports=a},76285:(v,p,t)=>{var f=t(69186),i=t(25738),n=new f({initialize:function(l,e,a,r,u){if(typeof l=="object"){var s=l;l=i(s,"x",0),e=i(s,"y",0),a=i(s,"power",0),r=i(s,"epsilon",100),u=i(s,"gravity",50)}else l===void 0&&(l=0),e===void 0&&(e=0),a===void 0&&(a=0),r===void 0&&(r=100),u===void 0&&(u=50);this.x=l,this.y=e,this.active=!0,this._gravity=u,this._power=0,this._epsilon=0,this.power=a,this.epsilon=r},update:function(l,e){var a=this.x-l.x,r=this.y-l.y,u=a*a+r*r;if(u!==0){var s=Math.sqrt(u);u<this._epsilon&&(u=this._epsilon);var o=this._power*e/(u*s)*100;l.velocityX+=a*o,l.velocityY+=r*o}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(l){this._epsilon=l*l}},power:{get:function(){return this._power/this._gravity},set:function(l){this._power=l*this._gravity}},gravity:{get:function(){return this._gravity},set:function(l){var e=this.power;this._gravity=l,this.power=e}}});v.exports=n},8501:(v,p,t)=>{var f=t(69186),i=t(23407),n=t(76914),l=new f({initialize:function(e){this.emitter=e,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(e,a){var r=this.emitter;this.frame=r.getFrame(),r.emitZone&&r.emitZone.getPoint(this),this.x+=e===void 0?r.x.onEmit(this,"x"):e,this.y+=a===void 0?r.y.onEmit(this,"y"):a,this.life=r.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var u=r.speedX.onEmit(this,"speedX"),s=r.speedY?r.speedY.onEmit(this,"speedY"):u;if(r.radial){var o=i(r.angle.onEmit(this,"angle"));this.velocityX=Math.cos(o)*Math.abs(u),this.velocityY=Math.sin(o)*Math.abs(s)}else if(r.moveTo){var h=r.moveToX.onEmit(this,"moveToX"),c=r.moveToY?r.moveToY.onEmit(this,"moveToY"):h,d=Math.atan2(c-this.y,h-this.x),g=n(this.x,this.y,h,c)/(this.life/1e3);this.velocityX=Math.cos(d)*g,this.velocityY=Math.sin(d)*g}else this.velocityX=u,this.velocityY=s;r.acceleration&&(this.accelerationX=r.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=r.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=r.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=r.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=r.delay.onEmit(this,"delay"),this.scaleX=r.scaleX.onEmit(this,"scaleX"),this.scaleY=r.scaleY?r.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=r.rotate.onEmit(this,"rotate"),this.rotation=i(this.angle),this.bounce=r.bounce.onEmit(this,"bounce"),this.alpha=r.alpha.onEmit(this,"alpha"),this.tint=r.tint.onEmit(this,"tint")},computeVelocity:function(e,a,r,u){var s=this.velocityX,o=this.velocityY,h=this.accelerationX,c=this.accelerationY,d=this.maxVelocityX,g=this.maxVelocityY;s+=e.gravityX*r,o+=e.gravityY*r,h&&(s+=h*r),c&&(o+=c*r),s>d?s=d:s<-d&&(s=-d),o>g?o=g:o<-g&&(o=-g),this.velocityX=s,this.velocityY=o;for(var m=0;m<u.length;m++)u[m].update(this,a,r)},checkBounds:function(e){var a=e.bounds,r=-this.bounce;this.x<a.x&&e.collideLeft?(this.x=a.x,this.velocityX*=r):this.x>a.right&&e.collideRight&&(this.x=a.right,this.velocityX*=r),this.y<a.y&&e.collideTop?(this.y=a.y,this.velocityY*=r):this.y>a.bottom&&e.collideBottom&&(this.y=a.bottom,this.velocityY*=r)},update:function(e,a,r){if(this.delayCurrent>0)return this.delayCurrent-=e,!1;var u=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(u,e,a,r),this.x+=this.velocityX*a,this.y+=this.velocityY*a,u.bounds&&this.checkBounds(u),u.deathZone&&u.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=u.scaleX.onUpdate(this,"scaleX",s,this.scaleX),u.scaleY?this.scaleY=u.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=u.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=i(this.angle),this.alpha=u.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=u.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=e,this.lifeCurrent<=0)}});v.exports=l},32470:(v,p,t)=>{var f=t(87626),i=t(69186),n=t(19506),l=t(79919),e=t(38466),a=t(79948),r=t(25738),u=t(88829),s=t(86908),o=t(60419),h=t(8501),c=t(52372),d=t(75380),g=t(46414),m=t(17321),y=t(6704),w=new i({Mixins:[n.BlendMode,n.Mask,n.ScrollFactor,n.Visible],initialize:function(x,T){this.manager=x,this.texture=x.texture,this.frames=[x.defaultFrame],this.defaultFrame=x.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=h,this.x=new a(T,"x",0,!0),this.y=new a(T,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new a(T,"accelerationX",0,!0),this.accelerationY=new a(T,"accelerationY",0,!0),this.maxVelocityX=new a(T,"maxVelocityX",1e4,!0),this.maxVelocityY=new a(T,"maxVelocityY",1e4,!0),this.speedX=new a(T,"speedX",0,!0),this.speedY=new a(T,"speedY",0,!0),this.moveTo=!1,this.moveToX=new a(T,"moveToX",0,!0),this.moveToY=new a(T,"moveToY",0,!0),this.bounce=new a(T,"bounce",0,!0),this.scaleX=new a(T,"scaleX",1),this.scaleY=new a(T,"scaleY",1),this.tint=new a(T,"tint",16777215),this.alpha=new a(T,"alpha",1),this.lifespan=new a(T,"lifespan",1e3,!0),this.angle=new a(T,"angle",{min:0,max:360},!0),this.rotate=new a(T,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new a(T,"quantity",1,!0),this.delay=new a(T,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=f.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,T&&this.fromJSON(T)},fromJSON:function(x){if(!x)return this;var T=0,E="";for(T=0;T<this.configFastMap.length;T++)E=this.configFastMap[T],o(x,E)&&(this[E]=r(x,E));for(T=0;T<this.configOpMap.length;T++)E=this.configOpMap[T],o(x,E)&&this[E].loadConfig(x);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,o(x,"speed")&&(this.speedX.loadConfig(x,"speed"),this.speedY=null),(s(x,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),o(x,"scale")&&(this.scaleX.loadConfig(x,"scale"),this.scaleY=null),o(x,"callbackScope")){var S=r(x,"callbackScope",null);this.emitCallbackScope=S,this.deathCallbackScope=S}return o(x,"emitZone")&&this.setEmitZone(x.emitZone),o(x,"deathZone")&&this.setDeathZone(x.deathZone),o(x,"bounds")&&this.setBounds(x.bounds),o(x,"followOffset")&&this.followOffset.setFromObject(r(x,"followOffset",0)),o(x,"frame")&&this.setFrame(x.frame),o(x,"reserve")&&this.reserve(x.reserve),this},toJSON:function(x){x===void 0&&(x={});var T=0,E="";for(T=0;T<this.configFastMap.length;T++)x[E=this.configFastMap[T]]=this[E];for(T=0;T<this.configOpMap.length;T++)this[E=this.configOpMap[T]]&&(x[E]=this[E].toJSON());return this.speedY||(delete x.speedX,x.speed=this.speedX.toJSON()),this.scaleY||(delete x.scaleX,x.scale=this.scaleX.toJSON()),x},startFollow:function(x,T,E,S){return T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S=!1),this.follow=x,this.followOffset.set(T,E),this.trackVisible=S,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return u(this.frames);var x=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),x},setFrame:function(x,T,E){T===void 0&&(T=!0),E===void 0&&(E=1),this.randomFrame=T,this.frameQuantity=E,this.currentFrame=0,this._frameCounter=0;var S=typeof x;if(Array.isArray(x)||S==="string"||S==="number")this.manager.setEmitterFrames(x,this);else if(S==="object"){var C=x;(x=r(C,"frames",null))&&this.manager.setEmitterFrames(x,this);var A=r(C,"cycle",!1);this.randomFrame=!A,this.frameQuantity=r(C,"quantity",E)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(x){return x===void 0&&(x=!0),this.radial=x,this},setPosition:function(x,T){return this.x.onChange(x),this.y.onChange(T),this},setBounds:function(x,T,E,S){if(typeof x=="object"){var C=x;x=C.x,T=C.y,E=o(C,"w")?C.w:C.width,S=o(C,"h")?C.h:C.height}return this.bounds?this.bounds.setTo(x,T,E,S):this.bounds=new d(x,T,E,S),this},setSpeedX:function(x){return this.speedX.onChange(x),this.radial=!1,this},setSpeedY:function(x){return this.speedY&&(this.speedY.onChange(x),this.radial=!1),this},setSpeed:function(x){return this.speedX.onChange(x),this.speedY=null,this.radial=!0,this},setScaleX:function(x){return this.scaleX.onChange(x),this},setScaleY:function(x){return this.scaleY.onChange(x),this},setScale:function(x){return this.scaleX.onChange(x),this.scaleY=null,this},setGravityX:function(x){return this.gravityX=x,this},setGravityY:function(x){return this.gravityY=x,this},setGravity:function(x,T){return this.gravityX=x,this.gravityY=T,this},setAlpha:function(x){return this.alpha.onChange(x),this},setTint:function(x){return this.tint.onChange(x),this},setEmitterAngle:function(x){return this.angle.onChange(x),this},setAngle:function(x){return this.angle.onChange(x),this},setLifespan:function(x){return this.lifespan.onChange(x),this},setQuantity:function(x){return this.quantity.onChange(x),this},setFrequency:function(x,T){return this.frequency=x,this._counter=0,T&&this.quantity.onChange(T),this},setEmitZone:function(x){if(x===void 0)this.emitZone=null;else{var T=r(x,"type","random"),E=r(x,"source",null);switch(T){case"random":this.emitZone=new c(E);break;case"edge":var S=r(x,"quantity",1),C=r(x,"stepRate",0),A=r(x,"yoyo",!1),M=r(x,"seamless",!0);this.emitZone=new e(E,S,C,A,M)}}return this},setDeathZone:function(x){if(x===void 0)this.deathZone=null;else{var T=r(x,"type","onEnter"),E=r(x,"source",null);if(E&&typeof E.contains=="function"){var S=T==="onEnter";this.deathZone=new l(E,S)}}return this},reserve:function(x){for(var T=this.dead,E=0;E<x;E++)T.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(x,T){return x===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof x=="function"&&(this.emitCallback=x,T&&(this.emitCallbackScope=T)),this},onParticleDeath:function(x,T){return x===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof x=="function"&&(this.deathCallback=x,T&&(this.deathCallbackScope=T)),this},killAll:function(){for(var x=this.dead,T=this.alive;T.length>0;)x.push(T.pop());return this},forEachAlive:function(x,T){for(var E=this.alive,S=E.length,C=0;C<S;++C)x.call(T,E[C],this);return this},forEachDead:function(x,T){for(var E=this.dead,S=E.length,C=0;C<S;++C)x.call(T,E[C],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return g(this.alive,this.depthSortCallback),this},flow:function(x,T){return T===void 0&&(T=1),this.frequency=x,this.quantity.onChange(T),this.start()},explode:function(x,T,E){return this.frequency=-1,this.emitParticle(x,T,E)},emitParticleAt:function(x,T,E){return this.emitParticle(E,x,T)},emitParticle:function(x,T,E){if(!this.atLimit()){x===void 0&&(x=this.quantity.onEmit());for(var S=this.dead,C=this.follow?this.follow.x+this.followOffset.x:T,A=this.follow?this.follow.y+this.followOffset.y:E,M=0;M<x;M++){var b=S.pop();if(b||(b=new this.particleClass(this)),b.fire(C,A),this.particleBringToTop?this.alive.push(b):this.alive.unshift(b),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,b,this),this.atLimit())break}return b}},preUpdate:function(x,T){var E=(T*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var S=this.manager.getProcessors(),C=this.alive,A=this.dead,M=0,b=[],_=C.length;for(M=0;M<_;M++){var P=C[M];P.update(T,E,S)&&b.push({index:M,particle:P})}if((_=b.length)>0){var L=this.deathCallback,F=this.deathCallbackScope;for(M=_-1;M>=0;M--){var D=b[M];C.splice(D.index,1),A.push(D.particle),L&&L.call(F,D.particle),D.particle.resetPosition()}}this.on&&(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=T,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(x,T){return x.y-T.y}});v.exports=w},81404:(v,p,t)=>{var f=t(69186),i=t(19506),n=t(38236),l=t(76285),e=t(49469),a=t(32470),r=t(31890),u=new f({Extends:n,Mixins:[i.Depth,i.Mask,i.Pipeline,i.Transform,i.Visible,r],initialize:function(s,o,h,c){if(n.call(this,s,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],h===null||typeof h!="object"&&!Array.isArray(h)||(c=h,h=null),this.setTexture(o,h),this.initPipeline(),this.emitters=new e(this),this.wells=new e(this),c){Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++)this.createEmitter(c[d])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(s,o){return this.texture=this.scene.sys.textures.get(s),this.setFrame(o)},setFrame:function(s){this.frame=this.texture.get(s);var o=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),h=[];return o.forEach(function(c){h.push(c.name)}),this.frameNames=h,this.defaultFrame=this.frame,this},setEmitterFrames:function(s,o){Array.isArray(s)||(s=[s]);var h=o.frames;h.length=0;for(var c=0;c<s.length;c++){var d=s[c];this.frameNames.indexOf(d)!==-1&&h.push(this.texture.get(d))}return h.length>0?o.defaultFrame=h[0]:o.defaultFrame=this.defaultFrame,this},addEmitter:function(s){return this.emitters.add(s)},createEmitter:function(s){return this.addEmitter(new a(this,s))},removeEmitter:function(s){return this.emitters.remove(s,!0)},addGravityWell:function(s){return this.wells.add(s)},createGravityWell:function(s){return this.addGravityWell(new l(s))},emitParticle:function(s,o,h){for(var c=this.emitters.list,d=0;d<c.length;d++){var g=c[d];g.active&&g.emitParticle(s,o,h)}return this},emitParticleAt:function(s,o,h){return this.emitParticle(h,s,o)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(s,o){o*=this.timeScale;for(var h=this.emitters.list,c=0;c<h.length;c++){var d=h[c];d.active&&d.preUpdate(s,o)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});v.exports=u},56367:(v,p,t)=>{var f=t(9329),i=new f,n=new f,l=new f,e=new f;v.exports=function(a,r,u,s){var o=r.emitters.list,h=o.length;if(h!==0){var c=i.copyFrom(u.matrix),d=n,g=l,m=e;s?(m.loadIdentity(),m.multiply(s),m.translate(r.x,r.y),m.rotate(r.rotation),m.scale(r.scaleX,r.scaleY)):m.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);for(var y=a.currentContext,w=u.roundPixels,x=0;x<h;x++){var T=o[x],E=T.alive,S=E.length;if(T.visible&&S!==0){u.addToRenderList(T);var C=T.scrollFactorX,A=T.scrollFactorY;y.save(),y.globalCompositeOperation=a.blendModes[T.blendMode];for(var M=0;M<S;M++){var b=E[M],_=b.alpha*u.alpha;if(!(_<=0)){g.applyITRS(b.x,b.y,b.rotation,b.scaleX,b.scaleY),c.copyFrom(u.matrix),c.multiplyWithOffset(m,-u.scrollX*C,-u.scrollY*A),g.e=b.x,g.f=b.y,c.multiply(g,d);var P=b.frame,L=P.canvasData,F=-P.halfWidth,D=-P.halfHeight;y.globalAlpha=_,y.save(),d.setToContext(y),w&&(F=Math.round(F),D=Math.round(D)),y.imageSmoothingEnabled=!(!a.antialias||P.source.scaleMode),y.drawImage(P.source.image,L.x,L.y,L.width,L.height,F,D,L.width,L.height),y.restore()}}y.restore()}}}}},12495:(v,p,t)=>{var f=t(78757),i=t(7973),n=t(25738),l=t(81404);f.register("particles",function(e,a){e===void 0&&(e={});var r=i(e,"key",null),u=i(e,"frame",null),s=n(e,"emitters",null),o=new l(this.scene,r,u,s);return a!==void 0&&(e.add=a),n(e,"add",!1)?this.displayList.add(o):this.updateList.add(o),o})},65419:(v,p,t)=>{var f=t(66642),i=t(81404);f.register("particles",function(n,l,e){return this.displayList.add(new i(this.scene,n,l,e))})},31890:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(99281),i=t(56367),v.exports={renderWebGL:f,renderCanvas:i}},99281:(v,p,t)=>{var f=t(9329),i=t(64564),n=new f,l=new f,e=new f,a=new f;v.exports=function(r,u,s,o){var h=u.emitters.list,c=h.length;if(c!==0){var d=r.pipelines.set(u.pipeline),g=n,m=l,y=e,w=a;o?(w.loadIdentity(),w.multiply(o),w.translate(u.x,u.y),w.rotate(u.rotation),w.scale(u.scaleX,u.scaleY)):w.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var x=s.roundPixels,T=u.defaultFrame.glTexture,E=i.getTintAppendFloatAlpha,S=d.setGameObject(u,u.defaultFrame);r.pipelines.preBatch(u);for(var C=0;C<c;C++){var A=h[C],M=A.alive,b=M.length;if(A.visible&&b!==0){s.addToRenderList(A);var _=A.scrollFactorX,P=A.scrollFactorY;r.setBlendMode(A.blendMode),A.mask&&(A.mask.preRenderWebGL(r,A,s),r.pipelines.set(u.pipeline));for(var L=0;L<b;L++){var F=M[L],D=F.alpha*s.alpha;if(!(D<=0)){y.applyITRS(F.x,F.y,F.rotation,F.scaleX,F.scaleY),g.copyFrom(s.matrix),g.multiplyWithOffset(w,-s.scrollX*_,-s.scrollY*P),y.e=F.x,y.f=F.y,g.multiply(y,m);var k=F.frame,R=-k.halfWidth,O=-k.halfHeight,B=R+k.width,U=O+k.height,I=m.getXRound(R,O,x),Y=m.getYRound(R,O,x),N=m.getXRound(R,U,x),X=m.getYRound(R,U,x),z=m.getXRound(B,U,x),V=m.getYRound(B,U,x),G=m.getXRound(B,O,x),W=m.getYRound(B,O,x),H=E(F.tint,D);d.batchQuad(A,I,Y,N,X,z,V,G,W,k.u0,k.v0,k.u1,k.v1,H,H,H,H,0,T,S)}}A.mask&&A.mask.postRenderWebGL(r,s)}}r.pipelines.postBatch(u)}}},42854:(v,p,t)=>{v.exports={EmitterOp:t(79948),GravityWell:t(76285),Particle:t(8501),ParticleEmitter:t(32470),ParticleEmitterManager:t(81404),Zones:t(79136)}},79919:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n){this.source=i,this.killOnEnter=n},willKill:function(i){var n=this.source.contains(i.x,i.y);return n&&this.killOnEnter||!n&&!this.killOnEnter}});v.exports=f},38466:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n,l,e,a){e===void 0&&(e=!1),a===void 0&&(a=!0),this.source=i,this.points=[],this.quantity=n,this.stepRate=l,this.yoyo=e,this.counter=-1,this.seamless=a,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var i=this.points[0],n=this.points[this.points.length-1];i.x===n.x&&i.y===n.y&&this.points.pop()}var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(i){return this.source=i,this.updateSource()},getPoint:function(i){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var n=this.points[this.counter];n&&(i.x=n.x,i.y=n.y)}});v.exports=f},52372:(v,p,t)=>{var f=t(69186),i=t(17321),n=new f({initialize:function(l){this.source=l,this._tempVec=new i},getPoint:function(l){var e=this._tempVec;this.source.getRandomPoint(e),l.x=e.x,l.y=e.y}});v.exports=n},79136:(v,p,t)=>{v.exports={DeathZone:t(79919),EdgeZone:t(38466),RandomZone:t(52372)}},131:(v,p,t)=>{var f=t(87626),i=t(43929),n=t(55579),l=t(69186),e=t(19506),a=t(11318),r=t(79175),u=t(38236),s=t(45733),o=t(46098),h=t(67454),c=t(50666),d=t(64564),g=t(61004),m=new l({Extends:u,Mixins:[e.Alpha,e.BlendMode,e.ComputedSize,e.Crop,e.Depth,e.Flip,e.GetBounds,e.Mask,e.Origin,e.Pipeline,e.ScrollFactor,e.Tint,e.Transform,e.Visible,h],initialize:function(y,w,x,T,E,S,C){w===void 0&&(w=0),x===void 0&&(x=0),T===void 0&&(T=32),E===void 0&&(E=32),u.call(this,y,"RenderTexture"),this.renderer=y.sys.renderer,this.textureManager=y.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,S===void 0?(this.canvas=n.create2D(this,T,E),this.texture=y.sys.textures.addCanvas(g(),this.canvas),this.frame=this.texture.get()):(this.texture=y.sys.textures.get(S),this.frame=this.texture.get(C),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new i(0,0,T,E),this.renderTarget=null;var A=this.renderer;A?A.type===a.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new c(A,T,E,1,0,!1)):A.type===a.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=s,this.camera.setScene(y),this.setPosition(w,x),S===void 0&&this.setSize(T,E),this.setOrigin(0,0),this.initPipeline(o.SINGLE_PIPELINE)},setSize:function(y,w){return this.resize(y,w)},resize:function(y,w){w===void 0&&(w=y);var x=this.frame;if(y!==this.width||w!==this.height){if(x.name==="__BASE"){this.canvas.width=y,this.canvas.height=w,this.texture.width=y,this.texture.height=w;var T=this.renderTarget;T&&(T.resize(y,w),x.glTexture=T.texture,x.source.isRenderTexture=!0,x.source.isGLTexture=!0,x.source.glTexture=T.texture),this.camera.setSize(y,w),x.source.width=y,x.source.height=w,x.setSize(y,w),this.width=y,this.height=w}}else{var E=this.texture.getSourceImage();x.cutX+y>E.width&&(y=E.width-x.cutX),x.cutY+w>E.height&&(w=E.height-x.cutY),x.setSize(y,w,x.cutX,x.cutY)}this.updateDisplayOrigin();var S=this.input;return S&&!S.customHitArea&&(S.hitArea.width=y,S.hitArea.height=w),this},setGlobalTint:function(y){return this.globalTint=y,this},setGlobalAlpha:function(y){return this.globalAlpha=y,this},saveTexture:function(y){return this.textureManager.renameTexture(this.texture.key,y),this._saved=!0,this.texture},fill:function(y,w,x,T,E,S){var C=this.frame,A=this.camera,M=this.renderer;w===void 0&&(w=1),x===void 0&&(x=0),T===void 0&&(T=0),E===void 0&&(E=C.cutWidth),S===void 0&&(S=C.cutHeight);var b=(y>>16&255)/255,_=(y>>8&255)/255,P=(255&y)/255,L=this.renderTarget;if(A.preRender(),L){L.bind(!0);var F=this.pipeline;F.manager.set(F);var D=L.width,k=L.height,R=M.width/D,O=M.height/k;F.drawFillRect(x*R,T*O,E*R,S*O,d.getTintFromFloats(P,_,b,1),w),L.unbind(!0)}else{var B=this.context;M.setContext(B),B.fillStyle="rgba("+b+","+_+","+P+","+w+")",B.fillRect(x+C.cutX,T+C.cutY,E,S),M.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var y=this.renderTarget;if(y)y.clear();else{var w=this.context;w.save(),w.setTransform(1,0,0,1,0,0),w.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),w.restore()}this.dirty=!1}return this},erase:function(y,w,x){return this._eraseMode=!0,this.draw(y,w,x,1,16777215),this._eraseMode=!1,this},draw:function(y,w,x,T,E){return this.beginDraw(),this.batchDraw(y,w,x,T,E),this.endDraw(),this},drawFrame:function(y,w,x,T,E,S){return this.beginDraw(),this.batchDrawFrame(y,w,x,T,E,S),this.endDraw(),this},beginDraw:function(){var y=this.camera,w=this.renderer,x=this.renderTarget;return y.preRender(),x?w.beginCapture(x.width,x.height):w.setContext(this.context),this},batchDraw:function(y,w,x,T,E){return T===void 0&&(T=this.globalAlpha),E=E===void 0?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(E>>16)+(65280&E)+((255&E)<<16),Array.isArray(y)||(y=[y]),this.batchList(y,w,x,T,E),this},batchDrawFrame:function(y,w,x,T,E,S){x===void 0&&(x=0),T===void 0&&(T=0),E===void 0&&(E=this.globalAlpha),S=S===void 0?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(S>>16)+(65280&S)+((255&S)<<16);var C=this.textureManager.getFrame(y,w);return C&&(this.renderTarget?this.pipeline.batchTextureFrame(C,x,T,S,E,this.camera.matrix,null):this.batchTextureFrame(C,x+this.frame.cutX,T+this.frame.cutY,E,S)),this},endDraw:function(y){y===void 0&&(y=this._eraseMode);var w=this.renderer,x=this.renderTarget;if(x){var T=w.endCapture();w.pipelines.setUtility().blitFrame(T,x,1,!1,!1,y),w.resetScissor(),w.resetViewport()}else w.setContext();return this.dirty=!0,this},batchList:function(y,w,x,T,E){for(var S=0;S<y.length;S++){var C=y[S];C&&C!==this&&(C.renderWebGL||C.renderCanvas?this.drawGameObject(C,w,x):C.isParent||C.list?this.batchGroup(C.getChildren(),w,x):typeof C=="string"?this.batchTextureFrameKey(C,null,w,x,T,E):C instanceof r?this.batchTextureFrame(C,w,x,T,E):Array.isArray(C)&&this.batchList(C,w,x,T,E))}},batchGroup:function(y,w,x){w===void 0&&(w=0),x===void 0&&(x=0),w+=this.frame.cutX,x+=this.frame.cutY;for(var T=0;T<y.length;T++){var E=y[T];if(E.willRender(this.camera)){var S=E.x+w,C=E.y+x;this.drawGameObject(E,S,C)}}},batchGameObjectWebGL:function(y,w,x){w===void 0&&(w=y.x),x===void 0&&(x=y.y);var T=y.x,E=y.y;y.setPosition(w+this.frame.cutX,x+this.frame.cutY),y.renderDirect?y.renderDirect(this.renderer,y,this.camera):y.renderWebGL(this.renderer,y,this.camera),y.setPosition(T,E)},batchGameObjectCanvas:function(y,w,x){w===void 0&&(w=y.x),x===void 0&&(x=y.y);var T=y.x,E=y.y;if(this._eraseMode){var S=y.blendMode;y.blendMode=f.ERASE}y.setPosition(w+this.frame.cutX,x+this.frame.cutY),y.renderCanvas(this.renderer,y,this.camera,null),y.setPosition(T,E),this._eraseMode&&(y.blendMode=S)},batchTextureFrameKey:function(y,w,x,T,E,S){var C=this.textureManager.getFrame(y,w);C&&this.batchTextureFrame(C,x,T,E,S)},batchTextureFrame:function(y,w,x,T,E){if(w===void 0&&(w=0),x===void 0&&(x=0),w+=this.frame.cutX,x+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(y,w,x,E,T,this.camera.matrix,null);else{var S=this.context,C=y.canvasData,A=y.source.image,M=this.camera.matrix;S.save(),S.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",S.globalAlpha=T,M.setToContext(S),S.drawImage(A,C.x,C.y,C.width,C.height,w,x,C.width,C.height),S.restore()}},snapshotArea:function(y,w,x,T,E,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,E,!1,y,w,x,T,S,C):this.renderer.snapshotCanvas(this.canvas,E,!1,y,w,x,T,S,C),this},snapshot:function(y,w,x){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,y,!1,0,0,this.width,this.height,w,x):this.renderer.snapshotCanvas(this.canvas,y,!1,0,0,this.width,this.height,w,x),this},snapshotPixel:function(y,w,x){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,x,!0,y,w):this.renderer.snapshotCanvas(this.canvas,x,!0,y,w),this},preDestroy:function(){this._saved||(n.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});v.exports=m},11721:v=>{v.exports=function(p,t,f,i){f.addToRenderList(t),p.batchSprite(t,t.frame,f,i)}},34387:(v,p,t)=>{var f=t(90062),i=t(78757),n=t(7973),l=t(131);i.register("renderTexture",function(e,a){e===void 0&&(e={});var r=n(e,"x",0),u=n(e,"y",0),s=n(e,"width",32),o=n(e,"height",32),h=n(e,"key",void 0),c=n(e,"frame",void 0),d=new l(this.scene,r,u,s,o,h,c);return a!==void 0&&(e.add=a),f(this.scene,d,e),d})},35346:(v,p,t)=>{var f=t(66642),i=t(131);f.register("renderTexture",function(n,l,e,a,r,u){return this.displayList.add(new i(this.scene,n,l,e,a,r,u))})},67454:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(49988),i=t(11721),v.exports={renderWebGL:f,renderCanvas:i}},49988:(v,p,t)=>{var f=t(64564);v.exports=function(i,n,l,e){l.addToRenderList(n);var a=l.alpha,r=n.renderTarget,u=r.width,s=r.height,o=f.getTintAppendFloatAlpha,h=i.pipelines.set(n.pipeline),c=h.setTexture2D(r.texture);i.pipelines.preBatch(n),h.batchTexture(n,r.texture,u,s,n.x,n.y,u,s,n.scaleX,n.scaleY,n.rotation,n.flipX,!n.flipY,n.scrollFactorX,n.scrollFactorY,n.displayOriginX,n.displayOriginY,0,0,u,s,o(n.tintTopLeft,a*n._alphaTL),o(n.tintTopRight,a*n._alphaTR),o(n.tintBottomLeft,a*n._alphaBL),o(n.tintBottomRight,a*n._alphaBR),n.tintFill,0,0,l,e,!0,c),i.resetTextures(),i.pipelines.postBatch(n)}},12374:(v,p,t)=>{var f=t(56579),i=t(69186),n=t(19506),l=t(38236),e=t(46098),a=t(37507),r=t(17321),u=new i({Extends:l,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Flip,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,a],initialize:function(s,o,h,c,d,g,m,y,w){c===void 0&&(c="__DEFAULT"),g===void 0&&(g=2),m===void 0&&(m=!0),l.call(this,s,"Rope"),this.anims=new f(this),this.points=g,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=c==="__DEFAULT",this.dirty=!1,this.horizontal=m,this._flipX=!1,this._flipY=!1,this._perp=new r,this.debugCallback=null,this.debugGraphic=null,this.setTexture(c,d),this.setPosition(o,h),this.setSizeToFrame(),this.initPipeline(e.ROPE_PIPELINE),Array.isArray(g)&&this.resizeArrays(g.length),this.setPoints(g,y,w),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,o){var h=this.anims.currentFrame;this.anims.update(s,o),this.anims.currentFrame!==h&&(this.updateUVs(),this.updateVertices())},play:function(s,o,h){return this.anims.play(s,o,h),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(s,o,h){return s===void 0&&(s=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(s,o,h))},setVertical:function(s,o,h){return s===void 0&&(s=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(s,o,h)):this},setTintFill:function(s){return s===void 0&&(s=!1),this.tintFill=s,this},setAlphas:function(s,o){var h=this.points.length;if(h<1)return this;var c,d=this.alphas;s===void 0?s=[1]:Array.isArray(s)||o!==void 0||(s=[s]);var g=0;if(o!==void 0)for(c=0;c<h;c++)d[g=2*c]=s,d[g+1]=o;else if(s.length===h)for(c=0;c<h;c++)d[g=2*c]=s[c],d[g+1]=s[c];else{var m=s[0];for(c=0;c<h;c++)g=2*c,s.length>g&&(m=s[g]),d[g]=m,s.length>g+1&&(m=s[g+1]),d[g+1]=m}return this},setColors:function(s){var o=this.points.length;if(o<1)return this;var h,c=this.colors;s===void 0?s=[16777215]:Array.isArray(s)||(s=[s]);var d=0;if(s.length===o)for(h=0;h<o;h++)c[d=2*h]=s[h],c[d+1]=s[h];else{var g=s[0];for(h=0;h<o;h++)d=2*h,s.length>d&&(g=s[d]),c[d]=g,s.length>d+1&&(g=s[d+1]),c[d+1]=g}return this},setPoints:function(s,o,h){if(s===void 0&&(s=2),typeof s=="number"){var c,d,g,m=s;if(m<2&&(m=2),s=[],this.horizontal)for(g=-this.frame.halfWidth,d=this.frame.width/(m-1),c=0;c<m;c++)s.push({x:g+c*d,y:0});else for(g=-this.frame.halfHeight,d=this.frame.height/(m-1),c=0;c<m;c++)s.push({x:0,y:g+c*d})}var y=s.length,w=this.points.length;return y<1?(console.warn("Rope: Not enough points given"),this):(y===1&&(s.unshift({x:0,y:0}),y++),w!==y&&this.resizeArrays(y),this.points=s,this.updateUVs(),o!=null&&this.setColors(o),h!=null&&this.setAlphas(h),this)},updateUVs:function(){for(var s=this.uv,o=this.points.length,h=this.frame.u0,c=this.frame.v0,d=this.frame.u1,g=this.frame.v1,m=(d-h)/(o-1),y=(g-c)/(o-1),w=0;w<o;w++){var x,T,E,S,C=4*w;this.horizontal?(this._flipX?(x=d-w*m,E=d-w*m):(x=h+w*m,E=h+w*m),this._flipY?(T=g,S=c):(T=c,S=g)):(this._flipX?(x=h,E=d):(x=d,E=h),this._flipY?(T=g-w*y,S=g-w*y):(T=c+w*y,S=c+w*y)),s[C+0]=x,s[C+1]=T,s[C+2]=E,s[C+3]=S}return this},resizeArrays:function(s){var o=this.colors,h=this.alphas;this.vertices=new Float32Array(4*s),this.uv=new Float32Array(4*s),o=new Uint32Array(2*s),h=new Float32Array(2*s);for(var c=0;c<2*s;c++)o[c]=16777215,h[c]=1;return this.colors=o,this.alphas=h,this.dirty=!0,this},updateVertices:function(){var s=this._perp,o=this.points,h=this.vertices,c=o.length;if(this.dirty=!1,!(c<1)){for(var d,g=o[0],m=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,y=0;y<c;y++){var w=o[y],x=4*y;d=y<c-1?o[y+1]:w,s.x=d.y-g.y,s.y=-(d.x-g.x);var T=s.length();s.x/=T,s.y/=T,s.x*=m,s.y*=m,h[x]=w.x+s.x,h[x+1]=w.y+s.y,h[x+2]=w.x-s.x,h[x+3]=w.y-s.y,g=w}return this}},setDebug:function(s,o){return this.debugGraphic=s,this.debugCallback=s||o?o||this.renderDebugVerts:null,this},renderDebugVerts:function(s,o,h){var c=s.debugGraphic,d=h[0],g=h[1],m=h[2],y=h[3];c.lineBetween(d,g,m,y);for(var w=4;w<o;w+=4){var x=h[w+0],T=h[w+1],E=h[w+2],S=h[w+3];c.lineBetween(d,g,x,T),c.lineBetween(m,y,E,S),c.lineBetween(m,y,x,T),c.lineBetween(x,T,E,S),d=x,g=T,m=E,y=S}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(s){return this._flipX=s,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(s){return this._flipY=s,this.updateUVs()}}});v.exports=u},61059:v=>{v.exports=function(){}},95039:(v,p,t)=>{var f=t(90062),i=t(78757),n=t(7973),l=t(76076),e=t(12374);i.register("rope",function(a,r){a===void 0&&(a={});var u=n(a,"key",null),s=n(a,"frame",null),o=n(a,"horizontal",!0),h=l(a,"points",void 0),c=l(a,"colors",void 0),d=l(a,"alphas",void 0),g=new e(this.scene,0,0,u,s,h,o,c,d);return r!==void 0&&(a.add=r),f(this.scene,g,a),a.add||this.updateList.add(g),g})},56014:(v,p,t)=>{var f=t(12374);t(66642).register("rope",function(i,n,l,e,a,r,u,s){return this.displayList.add(new f(this.scene,i,n,l,e,a,r,u,s))})},37507:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(29839),i=t(61059),v.exports={renderWebGL:f,renderCanvas:i}},29839:(v,p,t)=>{var f=t(3142),i=t(64564);v.exports=function(n,l,e,a){e.addToRenderList(l);var r=n.pipelines.set(l.pipeline,l),u=f(l,e,a).calc,s=l.vertices,o=l.uv,h=l.colors,c=l.alphas,d=l.alpha,g=i.getTintAppendFloatAlpha,m=e.roundPixels,y=s.length,w=Math.floor(.5*y);r.flush(),n.pipelines.preBatch(l);var x=r.setGameObject(l),T=r.vertexViewF32,E=r.vertexViewU32,S=r.vertexCount*r.currentShader.vertexComponentCount-1,C=0,A=l.tintFill;l.dirty&&l.updateVertices();for(var M=l.debugCallback,b=[],_=0;_<y;_+=2){var P=s[_+0],L=s[_+1],F=P*u.a+L*u.c+u.e,D=P*u.b+L*u.d+u.f;m&&(F=Math.round(F),D=Math.round(D)),T[++S]=F,T[++S]=D,T[++S]=o[_+0],T[++S]=o[_+1],T[++S]=x,T[++S]=A,E[++S]=g(h[C],e.alpha*(c[C]*d)),C++,M&&(b[_+0]=F,b[_+1]=D)}M&&M.call(l,l,y,b),r.vertexCount+=w,n.pipelines.postBatch(l)}},83131:(v,p,t)=>{var f=t(64564);v.exports=function(i,n,l,e,a,r){for(var u=f.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*e),s=l.pathData,o=l.pathIndexes,h=0;h<o.length;h+=3){var c=2*o[h],d=2*o[h+1],g=2*o[h+2],m=s[c+0]-a,y=s[c+1]-r,w=s[d+0]-a,x=s[d+1]-r,T=s[g+0]-a,E=s[g+1]-r,S=n.getX(m,y),C=n.getY(m,y),A=n.getX(w,x),M=n.getY(w,x),b=n.getX(T,E),_=n.getY(T,E);i.batchTri(l,S,C,A,M,b,_,0,0,1,1,u,u,u,2)}}},42236:v=>{v.exports=function(p,t,f,i){var n=f||t.fillColor,l=i||t.fillAlpha,e=(16711680&n)>>>16,a=(65280&n)>>>8,r=255&n;p.fillStyle="rgba("+e+","+a+","+r+","+l+")"}},54092:v=>{v.exports=function(p,t,f,i){var n=f||t.strokeColor,l=i||t.strokeAlpha,e=(16711680&n)>>>16,a=(65280&n)>>>8,r=255&n;p.strokeStyle="rgba("+e+","+a+","+r+","+l+")",p.lineWidth=t.lineWidth}},56098:(v,p,t)=>{var f=t(69186),i=t(19506),n=t(38236),l=t(97501),e=new f({Extends:n,Mixins:[i.AlphaSingle,i.BlendMode,i.Depth,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Transform,i.Visible],initialize:function(a,r,u){r===void 0&&(r="Shape"),n.call(this,a,r),this.geom=u,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(a,r){return r===void 0&&(r=1),a===void 0?this.isFilled=!1:(this.fillColor=a,this.fillAlpha=r,this.isFilled=!0),this},setStrokeStyle:function(a,r,u){return u===void 0&&(u=1),a===void 0?this.isStroked=!1:(this.lineWidth=a,this.strokeColor=r,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(a){return this.closePath=a,this},setSize:function(a,r){return this.width=a,this.height=r,this},setDisplaySize:function(a,r){return this.displayWidth=a,this.displayHeight=r,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}}});v.exports=e},29980:(v,p,t)=>{var f=t(64564);v.exports=function(i,n,l,e,a){var r=i.strokeTint,u=f.getTintAppendFloatAlpha(n.strokeColor,n.strokeAlpha*l);r.TL=u,r.TR=u,r.BL=u,r.BR=u;var s=n.pathData,o=s.length-1,h=n.lineWidth,c=h/2,d=s[0]-e,g=s[1]-a;n.closePath||(o-=2);for(var m=2;m<o;m+=2){var y=s[m]-e,w=s[m+1]-a;i.batchLine(d,g,y,w,c,c,h,m-2,!!n.closePath&&m===o-1),d=y,g=w}}},98435:(v,p,t)=>{var f=t(69186),i=t(65444),n=t(64634),l=t(75380),e=t(56098),a=new f({Extends:e,Mixins:[i],initialize:function(r,u,s,o,h,c){u===void 0&&(u=0),s===void 0&&(s=0),e.call(this,r,"Curve",o),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(u,s),h!==void 0&&this.setFillStyle(h,c),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){var r=this._curveBounds,u=this._smoothness;this.geom.getBounds(r,u),this.setSize(r.width,r.height),this.updateDisplayOrigin();for(var s=[],o=this.geom.getPoints(u),h=0;h<o.length;h++)s.push(o[h].x,o[h].y);return s.push(o[0].x,o[0].y),this.pathIndexes=n(s),this.pathData=s,this}});v.exports=a},26704:(v,p,t)=>{var f=t(42236),i=t(54092),n=t(14437);v.exports=function(l,e,a,r){a.addToRenderList(e);var u=l.currentContext;if(n(l,u,e,a,r)){var s=e._displayOriginX+e._curveBounds.x,o=e._displayOriginY+e._curveBounds.y,h=e.pathData,c=h.length-1,d=h[0]-s,g=h[1]-o;u.beginPath(),u.moveTo(d,g),e.closePath||(c-=2);for(var m=2;m<c;m+=2){var y=h[m]-s,w=h[m+1]-o;u.lineTo(y,w)}e.closePath&&u.closePath(),e.isFilled&&(f(u,e),u.fill()),e.isStroked&&(i(u,e),u.stroke()),u.restore()}}},84653:(v,p,t)=>{var f=t(66642),i=t(98435);f.register("curve",function(n,l,e,a,r){return this.displayList.add(new i(this.scene,n,l,e,a,r))})},65444:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(42010),i=t(26704),v.exports={renderWebGL:f,renderCanvas:i}},42010:(v,p,t)=>{var f=t(83131),i=t(3142),n=t(29980);v.exports=function(l,e,a,r){a.addToRenderList(e);var u=l.pipelines.set(e.pipeline),s=i(e,a,r),o=u.calcMatrix.copyFrom(s.calc),h=e._displayOriginX+e._curveBounds.x,c=e._displayOriginY+e._curveBounds.y,d=a.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&f(u,o,e,d,h,c),e.isStroked&&n(u,e,d,h,c),l.pipelines.postBatch(e)}},35308:(v,p,t)=>{var f=t(69186),i=t(56098),n=t(20888),l=new f({Extends:i,Mixins:[n],initialize:function(e,a,r,u,s,o,h,c,d,g,m){a===void 0&&(a=0),r===void 0&&(r=0),u===void 0&&(u=128),s===void 0&&(s=128),o===void 0&&(o=32),h===void 0&&(h=32),i.call(this,e,"Grid",null),this.cellWidth=o,this.cellHeight=h,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(a,r),this.setSize(u,s),this.setFillStyle(c,d),g!==void 0&&this.setOutlineStyle(g,m),this.updateDisplayOrigin()},setFillStyle:function(e,a){return a===void 0&&(a=1),e===void 0?this.showCells=!1:(this.fillColor=e,this.fillAlpha=a,this.showCells=!0),this},setAltFillStyle:function(e,a){return a===void 0&&(a=1),e===void 0?this.showAltCells=!1:(this.altFillColor=e,this.altFillAlpha=a,this.showAltCells=!0),this},setOutlineStyle:function(e,a){return a===void 0&&(a=1),e===void 0?this.showOutline=!1:(this.outlineFillColor=e,this.outlineFillAlpha=a,this.showOutline=!0),this}});v.exports=l},7921:(v,p,t)=>{var f=t(42236),i=t(54092),n=t(14437);v.exports=function(l,e,a,r){a.addToRenderList(e);var u=l.currentContext;if(n(l,u,e,a,r)){var s=-e._displayOriginX,o=-e._displayOriginY,h=a.alpha*e.alpha,c=e.width,d=e.height,g=e.cellWidth,m=e.cellHeight,y=Math.ceil(c/g),w=Math.ceil(d/m),x=g,T=m,E=g-(y*g-c),S=m-(w*m-d),C=e.showCells,A=e.showAltCells,M=e.showOutline,b=0,_=0,P=0,L=0,F=0;if(M&&(x--,T--,E===g&&E--,S===m&&S--),C&&e.fillAlpha>0)for(f(u,e),_=0;_<w;_++)for(A&&(P=_%2),b=0;b<y;b++)A&&P?P=0:(P++,L=b<y-1?x:E,F=_<w-1?T:S,u.fillRect(s+b*g,o+_*m,L,F));if(A&&e.altFillAlpha>0)for(f(u,e,e.altFillColor,e.altFillAlpha*h),_=0;_<w;_++)for(A&&(P=_%2),b=0;b<y;b++)!A||P?(P=0,L=b<y-1?x:E,F=_<w-1?T:S,u.fillRect(s+b*g,o+_*m,L,F)):P=1;if(M&&e.outlineFillAlpha>0){for(i(u,e,e.outlineFillColor,e.outlineFillAlpha*h),b=1;b<y;b++){var D=b*g;u.beginPath(),u.moveTo(D+s,o),u.lineTo(D+s,d+o),u.stroke()}for(_=1;_<w;_++){var k=_*m;u.beginPath(),u.moveTo(s,k+o),u.lineTo(s+c,k+o),u.stroke()}}u.restore()}}},8098:(v,p,t)=>{var f=t(66642),i=t(35308);f.register("grid",function(n,l,e,a,r,u,s,o,h,c){return this.displayList.add(new i(this.scene,n,l,e,a,r,u,s,o,h,c))})},20888:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(15301),i=t(7921),v.exports={renderWebGL:f,renderCanvas:i}},15301:(v,p,t)=>{var f=t(3142),i=t(64564);v.exports=function(n,l,e,a){e.addToRenderList(l);var r=n.pipelines.set(l.pipeline),u=f(l,e,a);r.calcMatrix.copyFrom(u.calc).translate(-l._displayOriginX,-l._displayOriginY);var s,o,h=e.alpha*l.alpha,c=l.width,d=l.height,g=l.cellWidth,m=l.cellHeight,y=Math.ceil(c/g),w=Math.ceil(d/m),x=g,T=m,E=g-(y*g-c),S=m-(w*m-d),C=l.showCells,A=l.showAltCells,M=l.showOutline,b=0,_=0,P=0,L=0,F=0;if(M&&(x--,T--,E===g&&E--,S===m&&S--),n.pipelines.preBatch(l),C&&l.fillAlpha>0)for(s=r.fillTint,o=i.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*h),s.TL=o,s.TR=o,s.BL=o,s.BR=o,_=0;_<w;_++)for(A&&(P=_%2),b=0;b<y;b++)A&&P?P=0:(P++,L=b<y-1?x:E,F=_<w-1?T:S,r.batchFillRect(b*g,_*m,L,F));if(A&&l.altFillAlpha>0)for(s=r.fillTint,o=i.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*h),s.TL=o,s.TR=o,s.BL=o,s.BR=o,_=0;_<w;_++)for(A&&(P=_%2),b=0;b<y;b++)!A||P?(P=0,L=b<y-1?x:E,F=_<w-1?T:S,r.batchFillRect(b*g,_*m,L,F)):P=1;if(M&&l.outlineFillAlpha>0){var D=r.strokeTint,k=i.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*h);for(D.TL=k,D.TR=k,D.BL=k,D.BR=k,b=1;b<y;b++){var R=b*g;r.batchLine(R,0,R,d,1,1,1,0,!1)}for(_=1;_<w;_++){var O=_*m;r.batchLine(0,O,c,O,1,1,1,0,!1)}}n.pipelines.postBatch(l)}},9417:(v,p,t)=>{var f=t(69186),i=t(56098),n=t(97501),l=t(15091),e=new f({Extends:i,Mixins:[l],initialize:function(a,r,u,s,o,h,c,d,g){r===void 0&&(r=0),u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=128),c===void 0&&(c=0),i.call(this,a,"Line",new n(s,o,h,c));var m=Math.max(1,this.geom.right-this.geom.left),y=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(r,u),this.setSize(m,y),d!==void 0&&this.setStrokeStyle(1,d,g),this.updateDisplayOrigin()},setLineWidth:function(a,r){return r===void 0&&(r=a),this._startWidth=a,this._endWidth=r,this.lineWidth=a,this},setTo:function(a,r,u,s){return this.geom.setTo(a,r,u,s),this}});v.exports=e},49506:(v,p,t)=>{var f=t(54092),i=t(14437);v.exports=function(n,l,e,a){e.addToRenderList(l);var r=n.currentContext;if(i(n,r,l,e,a)){var u=l._displayOriginX,s=l._displayOriginY;l.isStroked&&(f(r,l),r.beginPath(),r.moveTo(l.geom.x1-u,l.geom.y1-s),r.lineTo(l.geom.x2-u,l.geom.y2-s),r.stroke()),r.restore()}}},31059:(v,p,t)=>{var f=t(66642),i=t(9417);f.register("line",function(n,l,e,a,r,u,s,o){return this.displayList.add(new i(this.scene,n,l,e,a,r,u,s,o))})},15091:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(38918),i=t(49506),v.exports={renderWebGL:f,renderCanvas:i}},38918:(v,p,t)=>{var f=t(3142),i=t(64564);v.exports=function(n,l,e,a){e.addToRenderList(l);var r=n.pipelines.set(l.pipeline),u=f(l,e,a);r.calcMatrix.copyFrom(u.calc);var s=l._displayOriginX,o=l._displayOriginY,h=e.alpha*l.alpha;if(n.pipelines.preBatch(l),l.isStroked){var c=r.strokeTint,d=i.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*h);c.TL=d,c.TR=d,c.BL=d,c.BR=d;var g=l._startWidth,m=l._endWidth;r.batchLine(l.geom.x1-s,l.geom.y1-o,l.geom.x2-s,l.geom.y2-o,g,m,1,0,!1,u.sprite,u.camera)}n.pipelines.postBatch(l)}},64195:(v,p,t)=>{var f=t(69038),i=t(69186),n=t(64634),l=t(92594),e=t(77816),a=t(56098),r=t(63037),u=new i({Extends:a,Mixins:[f],initialize:function(s,o,h,c,d,g){o===void 0&&(o=0),h===void 0&&(h=0),a.call(this,s,"Polygon",new e(c));var m=l(this.geom);this.setPosition(o,h),this.setSize(m.width,m.height),d!==void 0&&this.setFillStyle(d,g),this.updateDisplayOrigin(),this.updateData()},smooth:function(s){s===void 0&&(s=1);for(var o=0;o<s;o++)r(this.geom);return this.updateData()},updateData:function(){for(var s=[],o=this.geom.points,h=0;h<o.length;h++)s.push(o[h].x,o[h].y);return s.push(o[0].x,o[0].y),this.pathIndexes=n(s),this.pathData=s,this}});v.exports=u},29239:(v,p,t)=>{var f=t(42236),i=t(54092),n=t(14437);v.exports=function(l,e,a,r){a.addToRenderList(e);var u=l.currentContext;if(n(l,u,e,a,r)){var s=e._displayOriginX,o=e._displayOriginY,h=e.pathData,c=h.length-1,d=h[0]-s,g=h[1]-o;u.beginPath(),u.moveTo(d,g),e.closePath||(c-=2);for(var m=2;m<c;m+=2){var y=h[m]-s,w=h[m+1]-o;u.lineTo(y,w)}u.closePath(),e.isFilled&&(f(u,e),u.fill()),e.isStroked&&(i(u,e),u.stroke()),u.restore()}}},42182:(v,p,t)=>{var f=t(66642),i=t(64195);f.register("polygon",function(n,l,e,a,r){return this.displayList.add(new i(this.scene,n,l,e,a,r))})},69038:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(15270),i=t(29239),v.exports={renderWebGL:f,renderCanvas:i}},15270:(v,p,t)=>{var f=t(83131),i=t(3142),n=t(29980);v.exports=function(l,e,a,r){a.addToRenderList(e);var u=l.pipelines.set(e.pipeline),s=i(e,a,r),o=u.calcMatrix.copyFrom(s.calc),h=e._displayOriginX,c=e._displayOriginY,d=a.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&f(u,o,e,d,h,c),e.isStroked&&n(u,e,d,h,c),l.pipelines.postBatch(e)}},41231:(v,p,t)=>{var f=t(69186),i=t(75380),n=t(56098),l=t(56603),e=new f({Extends:n,Mixins:[l],initialize:function(a,r,u,s,o,h,c){r===void 0&&(r=0),u===void 0&&(u=0),s===void 0&&(s=128),o===void 0&&(o=128),n.call(this,a,"Rectangle",new i(0,0,s,o)),this.setPosition(r,u),this.setSize(s,o),h!==void 0&&this.setFillStyle(h,c),this.updateDisplayOrigin(),this.updateData()},setSize:function(a,r){return this.width=a,this.height=r,this.geom.setSize(a,r),this.updateData(),this},updateData:function(){var a=[],r=this.geom,u=this._tempLine;return r.getLineA(u),a.push(u.x1,u.y1,u.x2,u.y2),r.getLineB(u),a.push(u.x2,u.y2),r.getLineC(u),a.push(u.x2,u.y2),r.getLineD(u),a.push(u.x2,u.y2),this.pathData=a,this}});v.exports=e},24586:(v,p,t)=>{var f=t(42236),i=t(54092),n=t(14437);v.exports=function(l,e,a,r){a.addToRenderList(e);var u=l.currentContext;if(n(l,u,e,a,r)){var s=e._displayOriginX,o=e._displayOriginY;e.isFilled&&(f(u,e),u.fillRect(-s,-o,e.width,e.height)),e.isStroked&&(i(u,e),u.beginPath(),u.rect(-s,-o,e.width,e.height),u.stroke()),u.restore()}}},98971:(v,p,t)=>{var f=t(66642),i=t(41231);f.register("rectangle",function(n,l,e,a,r,u){return this.displayList.add(new i(this.scene,n,l,e,a,r,u))})},56603:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(68162),i=t(24586),v.exports={renderWebGL:f,renderCanvas:i}},68162:(v,p,t)=>{var f=t(3142),i=t(29980),n=t(64564);v.exports=function(l,e,a,r){a.addToRenderList(e);var u=l.pipelines.set(e.pipeline),s=f(e,a,r);u.calcMatrix.copyFrom(s.calc);var o=e._displayOriginX,h=e._displayOriginY,c=a.alpha*e.alpha;if(l.pipelines.preBatch(e),e.isFilled){var d=u.fillTint,g=n.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*c);d.TL=g,d.TR=g,d.BL=g,d.BR=g,u.batchFillRect(-o,-h,e.width,e.height)}e.isStroked&&i(u,e,c,o,h),l.pipelines.postBatch(e)}},38590:(v,p,t)=>{var f=t(56579),i=t(69186),n=t(19506),l=t(38236),e=t(42608),a=new i({Extends:l,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,e],initialize:function(r,u,s,o,h){l.call(this,r,"Sprite"),this._crop=this.resetCropObject(),this.anims=new f(this),this.setTexture(o,h),this.setPosition(u,s),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(r,u){this.anims.update(r,u)},play:function(r,u){return this.anims.play(r,u)},playReverse:function(r,u){return this.anims.playReverse(r,u)},playAfterDelay:function(r,u){return this.anims.playAfterDelay(r,u)},playAfterRepeat:function(r,u){return this.anims.playAfterRepeat(r,u)},chain:function(r){return this.anims.chain(r)},stop:function(){return this.anims.stop()},stopAfterDelay:function(r){return this.anims.stopAfterDelay(r)},stopAfterRepeat:function(r){return this.anims.stopAfterRepeat(r)},stopOnFrame:function(r){return this.anims.stopOnFrame(r)},toJSON:function(){return n.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});v.exports=a},68915:v=>{v.exports=function(p,t,f,i){f.addToRenderList(t),p.batchSprite(t,t.frame,f,i)}},29525:(v,p,t)=>{var f=t(90062),i=t(38596),n=t(78757),l=t(7973),e=t(38590);n.register("sprite",function(a,r){a===void 0&&(a={});var u=l(a,"key",null),s=l(a,"frame",null),o=new e(this.scene,0,0,u,s);return r!==void 0&&(a.add=r),f(this.scene,o,a),i(o,a),o})},82364:(v,p,t)=>{var f=t(66642),i=t(38590);f.register("sprite",function(n,l,e,a){var r=new i(this.scene,n,l,e,a);return this.displayList.add(r),r})},42608:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(83803),i=t(68915),v.exports={renderWebGL:f,renderCanvas:i}},83803:v=>{v.exports=function(p,t,f,i){f.addToRenderList(t),t.pipeline.batchSprite(t,f,i)}},83799:v=>{v.exports=function(p,t,f){var i=p.canvas,n=p.context,l=p.style,e=[],a=0,r=f.length;l.maxLines>0&&l.maxLines<f.length&&(r=l.maxLines),l.syncFont(i,n);for(var u=0;u<r;u++){var s=l.strokeThickness;s+=n.measureText(f[u]).width,l.wordWrap&&(s-=n.measureText(" ").width),e[u]=Math.ceil(s),a=Math.max(a,e[u])}var o=t.fontSize+l.strokeThickness,h=o*r,c=p.lineSpacing;return r>1&&(h+=c*(r-1)),{width:a,height:h,lines:r,lineWidths:e,lineSpacing:c,lineHeight:o}}},32800:(v,p,t)=>{var f=t(55579);v.exports=function(i){var n=f.create(this),l=n.getContext("2d");i.syncFont(n,l);var e=l.measureText(i.testString);if("actualBoundingBoxAscent"in e){var a=e.actualBoundingBoxAscent,r=e.actualBoundingBoxDescent;return f.remove(n),{ascent:a,descent:r,fontSize:a+r}}var u=Math.ceil(e.width*i.baselineX),s=u,o=2*s;s=s*i.baselineY|0,n.width=u,n.height=o,l.fillStyle="#f00",l.fillRect(0,0,u,o),l.font=i._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(i.testString,0,s);var h={ascent:0,descent:0,fontSize:0},c=l.getImageData(0,0,u,o);if(!c)return h.ascent=s,h.descent=s+6,h.fontSize=h.ascent+h.descent,f.remove(n),h;var d,g,m=c.data,y=m.length,w=4*u,x=0,T=!1;for(d=0;d<s;d++){for(g=0;g<w;g+=4)if(m[x+g]!==255){T=!0;break}if(T)break;x+=w}for(h.ascent=s-d,x=y-w,T=!1,d=o;d>s;d--){for(g=0;g<w;g+=4)if(m[x+g]!==255){T=!0;break}if(T)break;x-=w}return h.descent=d-s,h.fontSize=h.ascent+h.descent,f.remove(n),h}},77546:(v,p,t)=>{var f=t(21778),i=t(55579),n=t(69186),l=t(19506),e=t(24496),a=t(38236),r=t(83799),u=t(76076),s=t(20662),o=t(61128),h=t(22849),c=new n({Extends:a,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,o],initialize:function(d,g,m,y,w){g===void 0&&(g=0),m===void 0&&(m=0),a.call(this,d,"Text"),this.renderer=d.sys.renderer,this.setPosition(g,m),this.setOrigin(0,0),this.initPipeline(),this.canvas=i.create(this),this.context=this.canvas.getContext("2d"),this.style=new h(this,w),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=d.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(y),w&&w.padding&&this.setPadding(w.padding),w&&w.lineSpacing&&this.setLineSpacing(w.lineSpacing),d.sys.game.events.on(e.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",f(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(d){var g=this.style;if(g.wordWrapCallback){var m=g.wordWrapCallback.call(g.wordWrapCallbackScope,d,this);return Array.isArray(m)&&(m=m.join(`
`)),m}return g.wordWrapWidth?g.wordWrapUseAdvanced?this.advancedWordWrap(d,this.context,this.style.wordWrapWidth):this.basicWordWrap(d,this.context,this.style.wordWrapWidth):d},advancedWordWrap:function(d,g,m){for(var y="",w=d.replace(/ +/gi," ").split(this.splitRegExp),x=w.length,T=0;T<x;T++){var E=w[T],S="";if(E=E.replace(/^ *|\s*$/gi,""),g.measureText(E).width<m)y+=E+`
`;else{for(var C=m,A=E.split(" "),M=0;M<A.length;M++){var b=A[M],_=b+" ",P=g.measureText(_).width;if(P>C){if(M===0){for(var L=_;L.length&&(L=L.slice(0,-1),!((P=g.measureText(L).width)<=C)););if(!L.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var F=b.substr(L.length);A[M]=F,S+=L}var D=A[M].length?M:M+1,k=A.slice(D).join(" ").replace(/[ \n]*$/gi,"");w[T+1]=k+" "+(w[T+1]||""),x=w.length;break}S+=_,C-=P}y+=S.replace(/[ \n]*$/gi,"")+`
`}}return y.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(d,g,m){for(var y="",w=d.split(this.splitRegExp),x=w.length-1,T=g.measureText(" ").width,E=0;E<=x;E++){for(var S=m,C=w[E].split(" "),A=C.length-1,M=0;M<=A;M++){var b=C[M],_=g.measureText(b).width,P=_;M<A&&(P+=T),P>S&&M>0&&(y+=`
`,S=m),y+=b,M<A?(y+=" ",S-=P):S-=_}E<x&&(y+=`
`)}return y},getWrappedText:function(d){return d===void 0&&(d=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(d).split(this.splitRegExp)},setText:function(d){return d||d===0||(d=""),Array.isArray(d)&&(d=d.join(`
`)),d!==this._text&&(this._text=d.toString(),this.updateText()),this},setStyle:function(d){return this.style.setStyle(d)},setFont:function(d){return this.style.setFont(d)},setFontFamily:function(d){return this.style.setFontFamily(d)},setFontSize:function(d){return this.style.setFontSize(d)},setFontStyle:function(d){return this.style.setFontStyle(d)},setFixedSize:function(d,g){return this.style.setFixedSize(d,g)},setBackgroundColor:function(d){return this.style.setBackgroundColor(d)},setFill:function(d){return this.style.setFill(d)},setColor:function(d){return this.style.setColor(d)},setStroke:function(d,g){return this.style.setStroke(d,g)},setShadow:function(d,g,m,y,w,x){return this.style.setShadow(d,g,m,y,w,x)},setShadowOffset:function(d,g){return this.style.setShadowOffset(d,g)},setShadowColor:function(d){return this.style.setShadowColor(d)},setShadowBlur:function(d){return this.style.setShadowBlur(d)},setShadowStroke:function(d){return this.style.setShadowStroke(d)},setShadowFill:function(d){return this.style.setShadowFill(d)},setWordWrapWidth:function(d,g){return this.style.setWordWrapWidth(d,g)},setWordWrapCallback:function(d,g){return this.style.setWordWrapCallback(d,g)},setAlign:function(d){return this.style.setAlign(d)},setResolution:function(d){return this.style.setResolution(d)},setLineSpacing:function(d){return this.lineSpacing=d,this.updateText()},setPadding:function(d,g,m,y){if(typeof d=="object"){var w=d,x=u(w,"x",null);x!==null?(d=x,m=x):(d=u(w,"left",0),m=u(w,"right",d));var T=u(w,"y",null);T!==null?(g=T,y=T):(g=u(w,"top",0),y=u(w,"bottom",g))}else d===void 0&&(d=0),g===void 0&&(g=d),m===void 0&&(m=d),y===void 0&&(y=g);return this.padding.left=d,this.padding.top=g,this.padding.right=m,this.padding.bottom=y,this.updateText()},setMaxLines:function(d){return this.style.setMaxLines(d)},updateText:function(){var d=this.canvas,g=this.context,m=this.style,y=m.resolution,w=m.metrics;m.syncFont(d,g);var x=this._text;(m.wordWrapWidth||m.wordWrapCallback)&&(x=this.runWordWrap(this._text));var T,E=x.split(this.splitRegExp),S=r(this,w,E),C=this.padding;m.fixedWidth===0?(this.width=S.width+C.left+C.right,T=S.width):(this.width=m.fixedWidth,(T=this.width-C.left-C.right)<S.width&&(T=S.width)),m.fixedHeight===0?this.height=S.height+C.top+C.bottom:this.height=m.fixedHeight;var A,M,b=this.width,_=this.height;this.updateDisplayOrigin(),b*=y,_*=y,b=Math.max(b,1),_=Math.max(_,1),d.width!==b||d.height!==_?(d.width=b,d.height=_,this.frame.setSize(b,_),m.syncFont(d,g)):g.clearRect(0,0,b,_),g.save(),g.scale(y,y),m.backgroundColor&&(g.fillStyle=m.backgroundColor,g.fillRect(0,0,b,_)),m.syncStyle(d,g),g.textBaseline="alphabetic",g.translate(C.left,C.top);for(var P=0;P<S.lines;P++){if(A=m.strokeThickness/2,M=m.strokeThickness/2+P*S.lineHeight+w.ascent,P>0&&(M+=S.lineSpacing*P),m.rtl)A=b-A;else if(m.align==="right")A+=T-S.lineWidths[P];else if(m.align==="center")A+=(T-S.lineWidths[P])/2;else if(m.align==="justify"&&S.lineWidths[P]/S.width>=.85){var L=S.width-S.lineWidths[P],F=g.measureText(" ").width,D=E[P].trim(),k=D.split(" ");L+=(E[P].length-D.length)*F;for(var R=Math.floor(L/F),O=0;R>0;)k[O]+=" ",O=(O+1)%(k.length-1||1),--R;E[P]=k.join(" ")}this.autoRound&&(A=Math.round(A),M=Math.round(M)),m.strokeThickness&&(this.style.syncShadow(g,m.shadowStroke),g.strokeText(E[P],A,M)),m.color&&(this.style.syncShadow(g,m.shadowFill),g.fillText(E[P],A,M))}g.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var B=this.input;return B&&!B.customHitArea&&(B.hitArea.width=this.width,B.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(d){this.setText(d)}},toJSON:function(){var d=l.ToJSON(this),g={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return d.data=g,d},preDestroy:function(){this.style.rtl&&s(this.canvas),i.remove(this.canvas),this.texture.destroy()}});v.exports=c},50059:v=>{v.exports=function(p,t,f,i){t.width!==0&&t.height!==0&&(f.addToRenderList(t),p.batchSprite(t,t.frame,f,i))}},53912:(v,p,t)=>{var f=t(90062),i=t(78757),n=t(7973),l=t(77546);i.register("text",function(e,a){e===void 0&&(e={});var r=n(e,"text",""),u=n(e,"style",null),s=n(e,"padding",null);s!==null&&(u.padding=s);var o=new l(this.scene,0,0,r,u);return a!==void 0&&(e.add=a),f(this.scene,o,e),o.autoRound=n(e,"autoRound",!0),o.resolution=n(e,"resolution",1),o})},33979:(v,p,t)=>{var f=t(77546);t(66642).register("text",function(i,n,l,e){return this.displayList.add(new f(this.scene,i,n,l,e))})},61128:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(64651),i=t(50059),v.exports={renderWebGL:f,renderCanvas:i}},22849:(v,p,t)=>{var f=t(69186),i=t(7973),n=t(76076),l=t(32800),e={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},a=new f({initialize:function(r,u){this.parent=r,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(u,!1,!0);var s=n(u,"metrics",!1);this.metrics=s?{ascent:n(s,"ascent",0),descent:n(s,"descent",0),fontSize:n(s,"fontSize",0)}:l(this)},setStyle:function(r,u,s){for(var o in u===void 0&&(u=!0),s===void 0&&(s=!1),r&&r.hasOwnProperty("fontSize")&&typeof r.fontSize=="number"&&(r.fontSize=r.fontSize.toString()+"px"),e){var h=s?e[o][1]:this[o];this[o]=o==="wordWrapCallback"||o==="wordWrapCallbackScope"?n(r,e[o][0],h):i(r,e[o][0],h)}var c=n(r,"font",null);c!==null&&this.setFont(c,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var d=n(r,"fill",null);return d!==null&&(this.color=d),u?this.update(!0):this.parent},syncFont:function(r,u){u.font=this._font},syncStyle:function(r,u){u.textBaseline="alphabetic",u.fillStyle=this.color,u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.lineCap="round",u.lineJoin="round"},syncShadow:function(r,u){u?(r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur):(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowColor=0,r.shadowBlur=0)},update:function(r){return r&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function(r,u){u===void 0&&(u=!0);var s=r,o="",h="";if(typeof r!="string")s=n(r,"fontFamily","Courier"),o=n(r,"fontSize","16px"),h=n(r,"fontStyle","");else{var c=r.split(" "),d=0;h=c.length>2?c[d++]:"",o=c[d++]||"16px",s=c[d++]||"Courier"}return s===this.fontFamily&&o===this.fontSize&&h===this.fontStyle||(this.fontFamily=s,this.fontSize=o,this.fontStyle=h,u&&this.update(!0)),this.parent},setFontFamily:function(r){return this.fontFamily!==r&&(this.fontFamily=r,this.update(!0)),this.parent},setFontStyle:function(r){return this.fontStyle!==r&&(this.fontStyle=r,this.update(!0)),this.parent},setFontSize:function(r){return typeof r=="number"&&(r=r.toString()+"px"),this.fontSize!==r&&(this.fontSize=r,this.update(!0)),this.parent},setTestString:function(r){return this.testString=r,this.update(!0)},setFixedSize:function(r,u){return this.fixedWidth=r,this.fixedHeight=u,r&&(this.parent.width=r),u&&(this.parent.height=u),this.update(!1)},setBackgroundColor:function(r){return this.backgroundColor=r,this.update(!1)},setFill:function(r){return this.color=r,this.update(!1)},setColor:function(r){return this.color=r,this.update(!1)},setResolution:function(r){return this.resolution=r,this.update(!1)},setStroke:function(r,u){return u===void 0&&(u=this.strokeThickness),r===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):this.stroke===r&&this.strokeThickness===u||(this.stroke=r,this.strokeThickness=u,this.update(!0)),this.parent},setShadow:function(r,u,s,o,h,c){return r===void 0&&(r=0),u===void 0&&(u=0),s===void 0&&(s="#000"),o===void 0&&(o=0),h===void 0&&(h=!1),c===void 0&&(c=!0),this.shadowOffsetX=r,this.shadowOffsetY=u,this.shadowColor=s,this.shadowBlur=o,this.shadowStroke=h,this.shadowFill=c,this.update(!1)},setShadowOffset:function(r,u){return r===void 0&&(r=0),u===void 0&&(u=r),this.shadowOffsetX=r,this.shadowOffsetY=u,this.update(!1)},setShadowColor:function(r){return r===void 0&&(r="#000"),this.shadowColor=r,this.update(!1)},setShadowBlur:function(r){return r===void 0&&(r=0),this.shadowBlur=r,this.update(!1)},setShadowStroke:function(r){return this.shadowStroke=r,this.update(!1)},setShadowFill:function(r){return this.shadowFill=r,this.update(!1)},setWordWrapWidth:function(r,u){return u===void 0&&(u=!1),this.wordWrapWidth=r,this.wordWrapUseAdvanced=u,this.update(!1)},setWordWrapCallback:function(r,u){return u===void 0&&(u=null),this.wordWrapCallback=r,this.wordWrapCallbackScope=u,this.update(!1)},setAlign:function(r){return r===void 0&&(r="left"),this.align=r,this.update(!1)},setMaxLines:function(r){return r===void 0&&(r=0),this.maxLines=r,this.update(!1)},getTextMetrics:function(){var r=this.metrics;return{ascent:r.ascent,descent:r.descent,fontSize:r.fontSize}},toJSON:function(){var r={};for(var u in e)r[u]=this[u];return r.metrics=this.getTextMetrics(),r},destroy:function(){this.parent=void 0}});v.exports=a},64651:(v,p,t)=>{var f=t(64564);v.exports=function(i,n,l,e){if(n.width!==0&&n.height!==0){l.addToRenderList(n);var a=n.frame,r=a.width,u=a.height,s=f.getTintAppendFloatAlpha,o=i.pipelines.set(n.pipeline,n),h=o.setTexture2D(a.glTexture,n);i.pipelines.preBatch(n),o.batchTexture(n,a.glTexture,r,u,n.x,n.y,r/n.style.resolution,u/n.style.resolution,n.scaleX,n.scaleY,n.rotation,n.flipX,n.flipY,n.scrollFactorX,n.scrollFactorY,n.displayOriginX,n.displayOriginY,0,0,r,u,s(n.tintTopLeft,l.alpha*n._alphaTL),s(n.tintTopRight,l.alpha*n._alphaTR),s(n.tintBottomLeft,l.alpha*n._alphaBL),s(n.tintBottomRight,l.alpha*n._alphaBR),n.tintFill,0,0,l,e,!1,h),i.pipelines.postBatch(n)}}},99191:(v,p,t)=>{var f=t(55579),i=t(69186),n=t(19506),l=t(24496),e=t(38236),a=t(19865),r=t(83468),u=t(27579),s=t(17321),o=new i({Extends:e,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Crop,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Tint,n.Transform,n.Visible,u],initialize:function(h,c,d,g,m,y,w){var x=h.sys.renderer;e.call(this,h,"TileSprite");var T=h.sys.textures.get(y),E=T.get(w);g&&m?(g=Math.floor(g),m=Math.floor(m)):(g=E.width,m=E.height),this._tilePosition=new s,this._tileScale=new s(1,1),this.dirty=!1,this.renderer=x,this.canvas=f.create(this,g,m),this.context=this.canvas.getContext("2d"),this.displayTexture=T,this.displayFrame=E,this._crop=this.resetCropObject(),this.texture=h.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=a(E.width),this.potHeight=a(E.height),this.fillCanvas=f.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(c,d),this.setSize(g,m),this.setFrame(w),this.setOriginFromFrame(),this.initPipeline(),h.sys.game.events.on(l.CONTEXT_RESTORED,function(S){if(S){var C=S.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=S.createTexture2D(0,C.LINEAR,C.LINEAR,C.REPEAT,C.REPEAT,C.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(h,c){return this.displayTexture=this.scene.sys.textures.get(h),this.setFrame(c)},setFrame:function(h){var c=this.displayTexture.get(h);return this.potWidth=a(c.width),this.potHeight=a(c.height),this.canvas.width=0,c.cutWidth&&c.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=c,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(h,c){return h!==void 0&&(this.tilePositionX=h),c!==void 0&&(this.tilePositionY=c),this},setTileScale:function(h,c){return h===void 0&&(h=this.tileScaleX),c===void 0&&(c=h),this.tileScaleX=h,this.tileScaleY=c,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var h=this.displayFrame;if(h.source.isRenderTexture||h.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var c=this.fillContext,d=this.fillCanvas,g=this.potWidth,m=this.potHeight;this.renderer&&this.renderer.gl||(g=h.cutWidth,m=h.cutHeight),c.clearRect(0,0,g,m),d.width=g,d.height=m,c.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,0,0,g,m),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(d,this.fillPattern):this.fillPattern=c.createPattern(d,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var h=this.canvas;if(h.width===this.width&&h.height===this.height||(h.width=this.width,h.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var c=this.context;this.scene.sys.game.config.antialias||r.disable(c);var d=this._tileScale.x,g=this._tileScale.y,m=this._tilePosition.x,y=this._tilePosition.y;c.clearRect(0,0,this.width,this.height),c.save(),c.scale(d,g),c.translate(-m,-y),c.fillStyle=this.fillPattern,c.fillRect(m,y,this.width/d,this.height/g),c.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),f.remove(this.canvas),f.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(h){this._tilePosition.x=h,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(h){this._tilePosition.y=h,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(h){this._tileScale.x=h,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(h){this._tileScale.y=h,this.dirty=!0}}});v.exports=o},1036:v=>{v.exports=function(p,t,f,i){t.updateCanvas(),f.addToRenderList(t),p.batchSprite(t,t.frame,f,i)}},24249:(v,p,t)=>{var f=t(90062),i=t(78757),n=t(7973),l=t(99191);i.register("tileSprite",function(e,a){e===void 0&&(e={});var r=n(e,"x",0),u=n(e,"y",0),s=n(e,"width",512),o=n(e,"height",512),h=n(e,"key",""),c=n(e,"frame",""),d=new l(this.scene,r,u,s,o,h,c);return a!==void 0&&(e.add=a),f(this.scene,d,e),d})},8175:(v,p,t)=>{var f=t(99191);t(66642).register("tileSprite",function(i,n,l,e,a,r){return this.displayList.add(new f(this.scene,i,n,l,e,a,r))})},27579:(v,p,t)=>{var f=t(45733),i=t(45733);f=t(51040),i=t(1036),v.exports={renderWebGL:f,renderCanvas:i}},51040:(v,p,t)=>{var f=t(64564);v.exports=function(i,n,l,e){n.updateCanvas();var a=n.width,r=n.height;if(a!==0&&r!==0){l.addToRenderList(n),i.pipelines.preBatch(n);var u=f.getTintAppendFloatAlpha,s=i.pipelines.set(n.pipeline,n),o=s.setTexture2D(n.fillPattern,n);s.batchTexture(n,n.fillPattern,n.displayFrame.width*n.tileScaleX,n.displayFrame.height*n.tileScaleY,n.x,n.y,a,r,n.scaleX,n.scaleY,n.rotation,n.flipX,n.flipY,n.scrollFactorX,n.scrollFactorY,n.originX*a,n.originY*r,0,0,a,r,u(n.tintTopLeft,l.alpha*n._alphaTL),u(n.tintTopRight,l.alpha*n._alphaTR),u(n.tintBottomLeft,l.alpha*n._alphaBL),u(n.tintBottomRight,l.alpha*n._alphaBR),n.tintFill,n.tilePositionX%n.displayFrame.width/n.displayFrame.width,n.tilePositionY%n.displayFrame.height/n.displayFrame.height,l,e,!1,o),i.pipelines.postBatch(n)}}},64043:(v,p,t)=>{var f=t(87626),i=t(38459),n=t(57133),l=t(69186),e=t(19506),a=t(38236),r=t(75380),u=t(26813),s=new l({Extends:a,Mixins:[e.Depth,e.GetBounds,e.Origin,e.Transform,e.ScrollFactor,e.Visible],initialize:function(o,h,c,d,g){d===void 0&&(d=1),g===void 0&&(g=d),a.call(this,o,"Zone"),this.setPosition(h,c),this.width=d,this.height=g,this.blendMode=f.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,h,c){c===void 0&&(c=!0),this.width=o,this.height=h,this.updateDisplayOrigin();var d=this.input;return c&&d&&!d.customHitArea&&(d.hitArea.width=o,d.hitArea.height=h),this},setDisplaySize:function(o,h){return this.displayWidth=o,this.displayHeight=h,this},setCircleDropZone:function(o){return this.setDropZone(new i(0,0,o),n)},setRectangleDropZone:function(o,h){return this.setDropZone(new r(0,0,o,h),u)},setDropZone:function(o,h){return o===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(o,h,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(o,h,c){c.addToRenderList(h)},renderWebGL:function(o,h,c){c.addToRenderList(h)}});v.exports=s},42309:(v,p,t)=>{var f=t(78757),i=t(7973),n=t(64043);f.register("zone",function(l){var e=i(l,"x",0),a=i(l,"y",0),r=i(l,"width",1),u=i(l,"height",r);return new n(this.scene,e,a,r,u)})},59037:(v,p,t)=>{var f=t(64043);t(66642).register("zone",function(i,n,l,e){return this.displayList.add(new f(this.scene,i,n,l,e))})},75795:v=>{v.exports=function(p){return p.radius>0?Math.PI*p.radius*p.radius:0}},38459:(v,p,t)=>{var f=t(69186),i=t(57133),n=t(834),l=t(9007),e=t(30097),a=t(87764),r=new f({initialize:function(u,s,o){u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=0),this.type=e.CIRCLE,this.x=u,this.y=s,this._radius=o,this._diameter=2*o},contains:function(u,s){return i(this,u,s)},getPoint:function(u,s){return n(this,u,s)},getPoints:function(u,s,o){return l(this,u,s,o)},getRandomPoint:function(u){return a(this,u)},setTo:function(u,s,o){return this.x=u,this.y=s,this._radius=o,this._diameter=2*o,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,s){return s===void 0&&(s=u),this.x=u,this.y=s,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=2*u}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=.5*u}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});v.exports=r},61458:v=>{v.exports=function(p){return Math.PI*p.radius*2}},14741:(v,p,t)=>{var f=t(47978);v.exports=function(i,n,l){return l===void 0&&(l=new f),l.x=i.x+i.radius*Math.cos(n),l.y=i.y+i.radius*Math.sin(n),l}},4244:(v,p,t)=>{var f=t(38459);v.exports=function(i){return new f(i.x,i.y,i.radius)}},57133:v=>{v.exports=function(p,t,f){return p.radius>0&&t>=p.left&&t<=p.right&&f>=p.top&&f<=p.bottom&&(p.x-t)*(p.x-t)+(p.y-f)*(p.y-f)<=p.radius*p.radius}},31072:(v,p,t)=>{var f=t(57133);v.exports=function(i,n){return f(i,n.x,n.y)}},54851:(v,p,t)=>{var f=t(57133);v.exports=function(i,n){return f(i,n.x,n.y)&&f(i,n.right,n.y)&&f(i,n.x,n.bottom)&&f(i,n.right,n.bottom)}},44600:v=>{v.exports=function(p,t){return t.setTo(p.x,p.y,p.radius)}},40980:v=>{v.exports=function(p,t){return p.x===t.x&&p.y===t.y&&p.radius===t.radius}},70162:(v,p,t)=>{var f=t(75380);v.exports=function(i,n){return n===void 0&&(n=new f),n.x=i.left,n.y=i.top,n.width=i.diameter,n.height=i.diameter,n}},834:(v,p,t)=>{var f=t(14741),i=t(53023),n=t(80925),l=t(47978);v.exports=function(e,a,r){r===void 0&&(r=new l);var u=i(a,0,n.PI2);return f(e,u,r)}},9007:(v,p,t)=>{var f=t(61458),i=t(14741),n=t(53023),l=t(80925);v.exports=function(e,a,r,u){u===void 0&&(u=[]),!a&&r>0&&(a=f(e)/r);for(var s=0;s<a;s++){var o=n(s/a,0,l.PI2);u.push(i(e,o))}return u}},53652:v=>{v.exports=function(p,t,f){return p.x+=t,p.y+=f,p}},52460:v=>{v.exports=function(p,t){return p.x+=t.x,p.y+=t.y,p}},87764:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){n===void 0&&(n=new f);var l=2*Math.PI*Math.random(),e=Math.random()+Math.random(),a=e>1?2-e:e,r=a*Math.cos(l),u=a*Math.sin(l);return n.x=i.x+r*i.radius,n.y=i.y+u*i.radius,n}},58056:(v,p,t)=>{var f=t(38459);f.Area=t(75795),f.Circumference=t(61458),f.CircumferencePoint=t(14741),f.Clone=t(4244),f.Contains=t(57133),f.ContainsPoint=t(31072),f.ContainsRect=t(54851),f.CopyFrom=t(44600),f.Equals=t(40980),f.GetBounds=t(70162),f.GetPoint=t(834),f.GetPoints=t(9007),f.Offset=t(53652),f.OffsetPoint=t(52460),f.Random=t(87764),v.exports=f},30097:v=>{v.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},60908:v=>{v.exports=function(p){return p.isEmpty()?0:p.getMajorRadius()*p.getMinorRadius()*Math.PI}},65027:v=>{v.exports=function(p){var t=p.width/2,f=p.height/2,i=Math.pow(t-f,2)/Math.pow(t+f,2);return Math.PI*(t+f)*(1+3*i/(10+Math.sqrt(4-3*i)))}},97883:(v,p,t)=>{var f=t(47978);v.exports=function(i,n,l){l===void 0&&(l=new f);var e=i.width/2,a=i.height/2;return l.x=i.x+e*Math.cos(n),l.y=i.y+a*Math.sin(n),l}},46681:(v,p,t)=>{var f=t(81385);v.exports=function(i){return new f(i.x,i.y,i.width,i.height)}},87016:v=>{v.exports=function(p,t,f){if(p.width<=0||p.height<=0)return!1;var i=(t-p.x)/p.width,n=(f-p.y)/p.height;return(i*=i)+(n*=n)<.25}},6500:(v,p,t)=>{var f=t(87016);v.exports=function(i,n){return f(i,n.x,n.y)}},73643:(v,p,t)=>{var f=t(87016);v.exports=function(i,n){return f(i,n.x,n.y)&&f(i,n.right,n.y)&&f(i,n.x,n.bottom)&&f(i,n.right,n.bottom)}},58816:v=>{v.exports=function(p,t){return t.setTo(p.x,p.y,p.width,p.height)}},81385:(v,p,t)=>{var f=t(69186),i=t(87016),n=t(38255),l=t(97911),e=t(30097),a=t(49620),r=new f({initialize:function(u,s,o,h){u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),this.type=e.ELLIPSE,this.x=u,this.y=s,this.width=o,this.height=h},contains:function(u,s){return i(this,u,s)},getPoint:function(u,s){return n(this,u,s)},getPoints:function(u,s,o){return l(this,u,s,o)},getRandomPoint:function(u){return a(this,u)},setTo:function(u,s,o,h){return this.x=u,this.y=s,this.width=o,this.height=h,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,s){return s===void 0&&(s=u),this.x=u,this.y=s,this},setSize:function(u,s){return s===void 0&&(s=u),this.width=u,this.height=s,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});v.exports=r},96722:v=>{v.exports=function(p,t){return p.x===t.x&&p.y===t.y&&p.width===t.width&&p.height===t.height}},42390:(v,p,t)=>{var f=t(75380);v.exports=function(i,n){return n===void 0&&(n=new f),n.x=i.left,n.y=i.top,n.width=i.width,n.height=i.height,n}},38255:(v,p,t)=>{var f=t(97883),i=t(53023),n=t(80925),l=t(47978);v.exports=function(e,a,r){r===void 0&&(r=new l);var u=i(a,0,n.PI2);return f(e,u,r)}},97911:(v,p,t)=>{var f=t(65027),i=t(97883),n=t(53023),l=t(80925);v.exports=function(e,a,r,u){u===void 0&&(u=[]),!a&&r>0&&(a=f(e)/r);for(var s=0;s<a;s++){var o=n(s/a,0,l.PI2);u.push(i(e,o))}return u}},41352:v=>{v.exports=function(p,t,f){return p.x+=t,p.y+=f,p}},8646:v=>{v.exports=function(p,t){return p.x+=t.x,p.y+=t.y,p}},49620:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){n===void 0&&(n=new f);var l=Math.random()*Math.PI*2,e=Math.sqrt(Math.random());return n.x=i.x+e*Math.cos(l)*i.width/2,n.y=i.y+e*Math.sin(l)*i.height/2,n}},81528:(v,p,t)=>{var f=t(81385);f.Area=t(60908),f.Circumference=t(65027),f.CircumferencePoint=t(97883),f.Clone=t(46681),f.Contains=t(87016),f.ContainsPoint=t(6500),f.ContainsRect=t(73643),f.CopyFrom=t(58816),f.Equals=t(96722),f.GetBounds=t(42390),f.GetPoint=t(38255),f.GetPoints=t(97911),f.Offset=t(41352),f.OffsetPoint=t(8646),f.Random=t(49620),v.exports=f},67449:(v,p,t)=>{var f=t(30097),i=t(72646),n={Circle:t(58056),Ellipse:t(81528),Intersects:t(33408),Line:t(77201),Mesh:t(61859),Point:t(36937),Polygon:t(10413),Rectangle:t(43550),Triangle:t(9379)};n=i(!1,n,f),v.exports=n},19357:(v,p,t)=>{var f=t(76914);v.exports=function(i,n){return f(i.x,i.y,n.x,n.y)<=i.radius+n.radius}},10882:v=>{v.exports=function(p,t){var f=t.width/2,i=t.height/2,n=Math.abs(p.x-t.x-f),l=Math.abs(p.y-t.y-i),e=f+p.radius,a=i+p.radius;if(n>e||l>a)return!1;if(n<=f||l<=i)return!0;var r=n-f,u=l-i;return r*r+u*u<=p.radius*p.radius}},15375:(v,p,t)=>{var f=t(47978),i=t(19357);v.exports=function(n,l,e){if(e===void 0&&(e=[]),i(n,l)){var a,r,u,s,o=n.x,h=n.y,c=n.radius,d=l.x,g=l.y,m=l.radius;if(h===g)(u=(r=-2*g)*r-4*(a=1)*(d*d+(s=(m*m-c*c-d*d+o*o)/(2*(o-d)))*s-2*d*s+g*g-m*m))==0?e.push(new f(s,-r/(2*a))):u>0&&(e.push(new f(s,(-r+Math.sqrt(u))/(2*a))),e.push(new f(s,(-r-Math.sqrt(u))/(2*a))));else{var y=(o-d)/(h-g),w=(m*m-c*c-d*d+o*o-g*g+h*h)/(2*(h-g));(u=(r=2*h*y-2*w*y-2*o)*r-4*(a=y*y+1)*(o*o+h*h+w*w-c*c-2*h*w))==0?(s=-r/(2*a),e.push(new f(s,w-s*y))):u>0&&(s=(-r+Math.sqrt(u))/(2*a),e.push(new f(s,w-s*y)),s=(-r-Math.sqrt(u))/(2*a),e.push(new f(s,w-s*y)))}}return e}},65971:(v,p,t)=>{var f=t(3351),i=t(10882);v.exports=function(n,l,e){if(e===void 0&&(e=[]),i(n,l)){var a=l.getLineA(),r=l.getLineB(),u=l.getLineC(),s=l.getLineD();f(a,n,e),f(r,n,e),f(u,n,e),f(s,n,e)}return e}},3351:(v,p,t)=>{var f=t(47978),i=t(58595);v.exports=function(n,l,e){if(e===void 0&&(e=[]),i(n,l)){var a,r,u=n.x1,s=n.y1,o=n.x2,h=n.y2,c=l.x,d=l.y,g=l.radius,m=o-u,y=h-s,w=u-c,x=s-d,T=m*m+y*y,E=2*(m*w+y*x),S=E*E-4*T*(w*w+x*x-g*g);if(S===0){var C=-E/(2*T);a=u+C*m,r=s+C*y,C>=0&&C<=1&&e.push(new f(a,r))}else if(S>0){var A=(-E-Math.sqrt(S))/(2*T);a=u+A*m,r=s+A*y,A>=0&&A<=1&&e.push(new f(a,r));var M=(-E+Math.sqrt(S))/(2*T);a=u+M*m,r=s+M*y,M>=0&&M<=1&&e.push(new f(a,r))}}return e}},12694:(v,p,t)=>{var f=t(33736);v.exports=function(i,n,l){var e=i.x1,a=i.y1,r=i.x2,u=i.y2,s=n.x1,o=n.y1,h=r-e,c=u-a,d=n.x2-s,g=n.y2-o;if(h===0||g*h-d*c==0)return!1;var m=(h*(o-a)+c*(e-s))/(d*c-g*h),y=(s+d*m-e)/h;return y<0||m<0||m>1?null:(l===void 0&&(l=new f),l.set(e+h*y,a+c*y,y))}},27449:(v,p,t)=>{var f=t(33736),i=t(12694),n=new(t(97501)),l=new f;v.exports=function(e,a,r){r===void 0&&(r=new f);var u=!1;r.set(),l.set();for(var s=a[0],o=1;o<a.length;o++){var h=a[o];n.setTo(s.x,s.y,h.x,h.y),s=h,i(e,n,l)&&(!u||l.z<r.z)&&(r.copy(l),u=!0)}return u?r:null}},43608:(v,p,t)=>{var f=t(33736),i=t(37254),n=t(27449),l=new f;v.exports=function(e,a,r){r===void 0&&(r=new i),Array.isArray(a)||(a=[a]);var u=!1;r.set(),l.set();for(var s=0;s<a.length;s++)n(e,a[s].points,l)&&(!u||l.z<r.z)&&(r.set(l.x,l.y,l.z,s),u=!0);return u?r:null}},46894:(v,p,t)=>{var f=t(47978),i=t(70972),n=t(63352);v.exports=function(l,e,a){if(a===void 0&&(a=[]),n(l,e))for(var r=e.getLineA(),u=e.getLineB(),s=e.getLineC(),o=e.getLineD(),h=[new f,new f,new f,new f],c=[i(r,l,h[0]),i(u,l,h[1]),i(s,l,h[2]),i(o,l,h[3])],d=0;d<4;d++)c[d]&&a.push(h[d]);return a}},99783:(v,p,t)=>{var f=t(37254),i=t(43608),n=new(t(97501));function l(a,r,u,s,o){var h=Math.cos(a),c=Math.sin(a);n.setTo(r,u,r+h,u+c);var d=i(n,s);d&&o.push(new f(d.x,d.y,a,d.w))}function e(a,r){return a.z-r.z}v.exports=function(a,r,u){Array.isArray(u)||(u=[u]);for(var s=[],o=[],h=0;h<u.length;h++)for(var c=u[h].points,d=0;d<c.length;d++){var g=Math.atan2(c[d].y-r,c[d].x-a);o.indexOf(g)===-1&&(l(g,a,r,u,s),l(g-1e-5,a,r,u,s),l(g+1e-5,a,r,u,s),o.push(g))}return s.sort(e)}},89758:(v,p,t)=>{var f=t(75380),i=t(12402);v.exports=function(n,l,e){return e===void 0&&(e=new f),i(n,l)&&(e.x=Math.max(n.x,l.x),e.y=Math.max(n.y,l.y),e.width=Math.min(n.right,l.right)-e.x,e.height=Math.min(n.bottom,l.bottom)-e.y),e}},5574:(v,p,t)=>{var f=t(46894),i=t(12402);v.exports=function(n,l,e){if(e===void 0&&(e=[]),i(n,l)){var a=n.getLineA(),r=n.getLineB(),u=n.getLineC(),s=n.getLineD();f(a,l,e),f(r,l,e),f(u,l,e),f(s,l,e)}return e}},32346:(v,p,t)=>{var f=t(55299),i=t(46894);v.exports=function(n,l,e){if(e===void 0&&(e=[]),f(n,l)){var a=l.getLineA(),r=l.getLineB(),u=l.getLineC();i(a,n,e),i(r,n,e),i(u,n,e)}return e}},17634:(v,p,t)=>{var f=t(3351),i=t(77678);v.exports=function(n,l,e){if(e===void 0&&(e=[]),i(n,l)){var a=n.getLineA(),r=n.getLineB(),u=n.getLineC();f(a,l,e),f(r,l,e),f(u,l,e)}return e}},82217:(v,p,t)=>{var f=t(47978),i=t(70416),n=t(70972);v.exports=function(l,e,a){if(a===void 0&&(a=[]),i(l,e))for(var r=l.getLineA(),u=l.getLineB(),s=l.getLineC(),o=[new f,new f,new f],h=[n(r,e,o[0]),n(u,e,o[1]),n(s,e,o[2])],c=0;c<3;c++)h[c]&&a.push(o[c]);return a}},62331:(v,p,t)=>{var f=t(99460),i=t(82217);v.exports=function(n,l,e){if(e===void 0&&(e=[]),f(n,l)){var a=l.getLineA(),r=l.getLineB(),u=l.getLineC();i(n,a,e),i(n,r,e),i(n,u,e)}return e}},58595:(v,p,t)=>{var f=t(57133),i=new(t(47978));v.exports=function(n,l,e){if(e===void 0&&(e=i),f(l,n.x1,n.y1))return e.x=n.x1,e.y=n.y1,!0;if(f(l,n.x2,n.y2))return e.x=n.x2,e.y=n.y2,!0;var a=n.x2-n.x1,r=n.y2-n.y1,u=l.x-n.x1,s=l.y-n.y1,o=a*a+r*r,h=a,c=r;if(o>0){var d=(u*a+s*r)/o;h*=d,c*=d}return e.x=n.x1+h,e.y=n.y1+c,h*h+c*c<=o&&h*a+c*r>=0&&f(l,e.x,e.y)}},70972:(v,p,t)=>{var f=t(47978);v.exports=function(i,n,l){l===void 0&&(l=new f);var e=i.x1,a=i.y1,r=i.x2,u=i.y2,s=n.x1,o=n.y1,h=n.x2,c=n.y2,d=(c-o)*(r-e)-(h-s)*(u-a);if(d===0)return!1;var g=((h-s)*(a-o)-(c-o)*(e-s))/d,m=((r-e)*(a-o)-(u-a)*(e-s))/d;return g>=0&&g<=1&&m>=0&&m<=1&&(l.x=e+g*(r-e),l.y=a+g*(u-a),!0)}},63352:v=>{v.exports=function(p,t){var f=p.x1,i=p.y1,n=p.x2,l=p.y2,e=t.x,a=t.y,r=t.right,u=t.bottom,s=0;if(f>=e&&f<=r&&i>=a&&i<=u||n>=e&&n<=r&&l>=a&&l<=u)return!0;if(f<e&&n>=e){if((s=i+(l-i)*(e-f)/(n-f))>a&&s<=u)return!0}else if(f>r&&n<=r&&(s=i+(l-i)*(r-f)/(n-f))>=a&&s<=u)return!0;if(i<a&&l>=a){if((s=f+(n-f)*(a-i)/(l-i))>=e&&s<=r)return!0}else if(i>u&&l<=u&&(s=f+(n-f)*(u-i)/(l-i))>=e&&s<=r)return!0;return!1}},90424:v=>{v.exports=function(p,t,f){f===void 0&&(f=1);var i=t.x1,n=t.y1,l=t.x2,e=t.y2,a=p.x,r=p.y,u=(l-i)*(l-i)+(e-n)*(e-n);if(u===0)return!1;var s=((a-i)*(l-i)+(r-n)*(e-n))/u;if(s<0)return Math.sqrt((i-a)*(i-a)+(n-r)*(n-r))<=f;if(s>=0&&s<=1){var o=((n-r)*(l-i)-(i-a)*(e-n))/u;return Math.abs(o)*Math.sqrt(u)<=f}return Math.sqrt((l-a)*(l-a)+(e-r)*(e-r))<=f}},19169:(v,p,t)=>{var f=t(90424);v.exports=function(i,n){if(!f(i,n))return!1;var l=Math.min(n.x1,n.x2),e=Math.max(n.x1,n.x2),a=Math.min(n.y1,n.y2),r=Math.max(n.y1,n.y2);return i.x>=l&&i.x<=e&&i.y>=a&&i.y<=r}},12402:v=>{v.exports=function(p,t){return!(p.width<=0||p.height<=0||t.width<=0||t.height<=0||p.right<t.x||p.bottom<t.y||p.x>t.right||p.y>t.bottom)}},55299:(v,p,t)=>{var f=t(70972),i=t(26813),n=t(60509),l=t(53998);v.exports=function(e,a){if(a.left>e.right||a.right<e.left||a.top>e.bottom||a.bottom<e.top)return!1;var r=a.getLineA(),u=a.getLineB(),s=a.getLineC();if(i(e,r.x1,r.y1)||i(e,r.x2,r.y2)||i(e,u.x1,u.y1)||i(e,u.x2,u.y2)||i(e,s.x1,s.y1)||i(e,s.x2,s.y2))return!0;var o=e.getLineA(),h=e.getLineB(),c=e.getLineC(),d=e.getLineD();if(f(r,o)||f(r,h)||f(r,c)||f(r,d)||f(u,o)||f(u,h)||f(u,c)||f(u,d)||f(s,o)||f(s,h)||f(s,c)||f(s,d))return!0;var g=l(e);return n(a,g,!0).length>0}},54123:v=>{v.exports=function(p,t,f,i,n,l){return l===void 0&&(l=0),!(t>p.right+l||f<p.left-l||i>p.bottom+l||n<p.top-l)}},77678:(v,p,t)=>{var f=t(58595),i=t(90547);v.exports=function(n,l){return!(n.left>l.right||n.right<l.left||n.top>l.bottom||n.bottom<l.top||!i(n,l.x,l.y)&&!f(n.getLineA(),l)&&!f(n.getLineB(),l)&&!f(n.getLineC(),l))}},70416:(v,p,t)=>{var f=t(70972);v.exports=function(i,n){return!!(i.contains(n.x1,n.y1)||i.contains(n.x2,n.y2)||f(i.getLineA(),n)||f(i.getLineB(),n)||f(i.getLineC(),n))}},99460:(v,p,t)=>{var f=t(60509),i=t(48300),n=t(70972);v.exports=function(l,e){if(l.left>e.right||l.right<e.left||l.top>e.bottom||l.bottom<e.top)return!1;var a=l.getLineA(),r=l.getLineB(),u=l.getLineC(),s=e.getLineA(),o=e.getLineB(),h=e.getLineC();if(n(a,s)||n(a,o)||n(a,h)||n(r,s)||n(r,o)||n(r,h)||n(u,s)||n(u,o)||n(u,h))return!0;var c=i(l),d=f(e,c,!0);return d.length>0||(c=i(e),(d=f(l,c,!0)).length>0)}},33408:(v,p,t)=>{v.exports={CircleToCircle:t(19357),CircleToRectangle:t(10882),GetCircleToCircle:t(15375),GetCircleToRectangle:t(65971),GetLineToCircle:t(3351),GetLineToLine:t(12694),GetLineToPoints:t(27449),GetLineToPolygon:t(43608),GetLineToRectangle:t(46894),GetRaysFromPointToPolygon:t(99783),GetRectangleIntersection:t(89758),GetRectangleToRectangle:t(5574),GetRectangleToTriangle:t(32346),GetTriangleToCircle:t(17634),GetTriangleToLine:t(82217),GetTriangleToTriangle:t(62331),LineToCircle:t(58595),LineToLine:t(70972),LineToRectangle:t(63352),PointToLine:t(90424),PointToLineSegment:t(19169),RectangleToRectangle:t(12402),RectangleToTriangle:t(55299),RectangleToValues:t(54123),TriangleToCircle:t(77678),TriangleToLine:t(70416),TriangleToTriangle:t(99460)}},52256:v=>{v.exports=function(p){return Math.atan2(p.y2-p.y1,p.x2-p.x1)}},62579:v=>{v.exports=function(p,t,f){t===void 0&&(t=1),f===void 0&&(f=[]);var i=Math.round(p.x1),n=Math.round(p.y1),l=Math.round(p.x2),e=Math.round(p.y2),a=Math.abs(l-i),r=Math.abs(e-n),u=i<l?1:-1,s=n<e?1:-1,o=a-r;f.push({x:i,y:n});for(var h=1;i!==l||n!==e;){var c=o<<1;c>-r&&(o-=r,i+=u),c<a&&(o+=a,n+=s),h%t==0&&f.push({x:i,y:n}),h++}return f}},75981:v=>{v.exports=function(p,t,f){var i=t-(p.x1+p.x2)/2,n=f-(p.y1+p.y2)/2;return p.x1+=i,p.y1+=n,p.x2+=i,p.y2+=n,p}},92451:(v,p,t)=>{var f=t(97501);v.exports=function(i){return new f(i.x1,i.y1,i.x2,i.y2)}},14715:v=>{v.exports=function(p,t){return t.setTo(p.x1,p.y1,p.x2,p.y2)}},53250:v=>{v.exports=function(p,t){return p.x1===t.x1&&p.y1===t.y1&&p.x2===t.x2&&p.y2===t.y2}},92593:(v,p,t)=>{var f=t(47064);v.exports=function(i,n,l){l===void 0&&(l=n);var e=f(i),a=i.x2-i.x1,r=i.y2-i.y1;return n&&(i.x1=i.x1-a/e*n,i.y1=i.y1-r/e*n),l&&(i.x2=i.x2+a/e*l,i.y2=i.y2+r/e*l),i}},25511:(v,p,t)=>{var f=t(21274),i=t(17232),n=t(47978);v.exports=function(l,e,a,r,u){r===void 0&&(r=0),u===void 0&&(u=[]);var s,o,h=[],c=l.x1,d=l.y1,g=l.x2-c,m=l.y2-d,y=i(e,u),w=a-1;for(s=0;s<w;s++)o=y(s/w),h.push(new n(c+g*o,d+m*o));if(o=y(1),h.push(new n(c+g*o,d+m*o)),r>0){var x=h[0],T=[x];for(s=1;s<h.length-1;s++){var E=h[s];f(x,E)>=r&&(T.push(E),x=E)}var S=h[h.length-1];return f(x,S)<r&&T.pop(),T.push(S),T}return h}},27797:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){return n===void 0&&(n=new f),n.x=(i.x1+i.x2)/2,n.y=(i.y1+i.y2)/2,n}},24052:(v,p,t)=>{var f=t(47978);v.exports=function(i,n,l){l===void 0&&(l=new f);var e=i.x1,a=i.y1,r=i.x2,u=i.y2,s=(r-e)*(r-e)+(u-a)*(u-a);if(s===0)return l;var o=((n.x-e)*(r-e)+(n.y-a)*(u-a))/s;return l.x=e+o*(r-e),l.y=a+o*(u-a),l}},87047:(v,p,t)=>{var f=t(80925),i=t(52256),n=t(47978);v.exports=function(l,e){e===void 0&&(e=new n);var a=i(l)-f.TAU;return e.x=Math.cos(a),e.y=Math.sin(a),e}},64610:(v,p,t)=>{var f=t(47978);v.exports=function(i,n,l){return l===void 0&&(l=new f),l.x=i.x1+(i.x2-i.x1)*n,l.y=i.y1+(i.y2-i.y1)*n,l}},26299:(v,p,t)=>{var f=t(47064),i=t(47978);v.exports=function(n,l,e,a){a===void 0&&(a=[]),!l&&e>0&&(l=f(n)/e);for(var r=n.x1,u=n.y1,s=n.x2,o=n.y2,h=0;h<l;h++){var c=h/l,d=r+(s-r)*c,g=u+(o-u)*c;a.push(new i(d,g))}return a}},65603:v=>{v.exports=function(p,t){var f=p.x1,i=p.y1,n=p.x2,l=p.y2,e=(n-f)*(n-f)+(l-i)*(l-i);if(e===0)return!1;var a=((i-t.y)*(n-f)-(f-t.x)*(l-i))/e;return Math.abs(a)*Math.sqrt(e)}},42204:v=>{v.exports=function(p){return Math.abs(p.y1-p.y2)}},47064:v=>{v.exports=function(p){return Math.sqrt((p.x2-p.x1)*(p.x2-p.x1)+(p.y2-p.y1)*(p.y2-p.y1))}},97501:(v,p,t)=>{var f=t(69186),i=t(64610),n=t(26299),l=t(30097),e=t(57747),a=t(17321),r=new f({initialize:function(u,s,o,h){u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),this.type=l.LINE,this.x1=u,this.y1=s,this.x2=o,this.y2=h},getPoint:function(u,s){return i(this,u,s)},getPoints:function(u,s,o){return n(this,u,s,o)},getRandomPoint:function(u){return e(this,u)},setTo:function(u,s,o,h){return u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),this.x1=u,this.y1=s,this.x2=o,this.y2=h,this},getPointA:function(u){return u===void 0&&(u=new a),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new a),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});v.exports=r},24364:(v,p,t)=>{var f=t(80925),i=t(6704),n=t(52256);v.exports=function(l){var e=n(l)-f.TAU;return i(e,-Math.PI,Math.PI)}},36618:(v,p,t)=>{var f=t(80925),i=t(52256);v.exports=function(n){return Math.cos(i(n)-f.TAU)}},82233:(v,p,t)=>{var f=t(80925),i=t(52256);v.exports=function(n){return Math.sin(i(n)-f.TAU)}},8462:v=>{v.exports=function(p,t,f){return p.x1+=t,p.y1+=f,p.x2+=t,p.y2+=f,p}},22278:v=>{v.exports=function(p){return-(p.x2-p.x1)/(p.y2-p.y1)}},57747:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){n===void 0&&(n=new f);var l=Math.random();return n.x=i.x1+l*(i.x2-i.x1),n.y=i.y1+l*(i.y2-i.y1),n}},43531:(v,p,t)=>{var f=t(52256),i=t(24364);v.exports=function(n,l){return 2*i(l)-Math.PI-f(n)}},44394:(v,p,t)=>{var f=t(19972);v.exports=function(i,n){var l=(i.x1+i.x2)/2,e=(i.y1+i.y2)/2;return f(i,l,e,n)}},14608:(v,p,t)=>{var f=t(19972);v.exports=function(i,n,l){return f(i,n.x,n.y,l)}},19972:v=>{v.exports=function(p,t,f,i){var n=Math.cos(i),l=Math.sin(i),e=p.x1-t,a=p.y1-f;return p.x1=e*n-a*l+t,p.y1=e*l+a*n+f,e=p.x2-t,a=p.y2-f,p.x2=e*n-a*l+t,p.y2=e*l+a*n+f,p}},81115:v=>{v.exports=function(p,t,f,i,n){return p.x1=t,p.y1=f,p.x2=t+Math.cos(i)*n,p.y2=f+Math.sin(i)*n,p}},34566:v=>{v.exports=function(p){return(p.y2-p.y1)/(p.x2-p.x1)}},55103:v=>{v.exports=function(p){return Math.abs(p.x1-p.x2)}},77201:(v,p,t)=>{var f=t(97501);f.Angle=t(52256),f.BresenhamPoints=t(62579),f.CenterOn=t(75981),f.Clone=t(92451),f.CopyFrom=t(14715),f.Equals=t(53250),f.Extend=t(92593),f.GetEasedPoints=t(25511),f.GetMidPoint=t(27797),f.GetNearestPoint=t(24052),f.GetNormal=t(87047),f.GetPoint=t(64610),f.GetPoints=t(26299),f.GetShortestDistance=t(65603),f.Height=t(42204),f.Length=t(47064),f.NormalAngle=t(24364),f.NormalX=t(36618),f.NormalY=t(82233),f.Offset=t(8462),f.PerpSlope=t(22278),f.Random=t(57747),f.ReflectAngle=t(43531),f.Rotate=t(44394),f.RotateAroundPoint=t(14608),f.RotateAroundXY=t(19972),f.SetToAngle=t(81115),f.Slope=t(34566),f.Width=t(55103),v.exports=f},45934:(v,p,t)=>{var f=t(69186),i=t(75380),n=t(17321);function l(a,r,u,s){var o=a-u,h=r-s,c=o*o+h*h;return Math.sqrt(c)}var e=new f({initialize:function(a,r,u){this.vertex1=a,this.vertex2=r,this.vertex3=u,this.bounds=new i,this._inCenter=new n},getInCenter:function(a){a===void 0&&(a=!0);var r,u,s,o,h,c,d=this.vertex1,g=this.vertex2,m=this.vertex3;a?(r=d.x,u=d.y,s=g.x,o=g.y,h=m.x,c=m.y):(r=d.vx,u=d.vy,s=g.vx,o=g.vy,h=m.vx,c=m.vy);var y=l(h,c,s,o),w=l(r,u,h,c),x=l(s,o,r,u),T=y+w+x;return this._inCenter.set((r*y+s*w+h*x)/T,(u*y+o*w+c*x)/T)},contains:function(a,r,u){var s=this.vertex1,o=this.vertex2,h=this.vertex3,c=s.vx,d=s.vy,g=o.vx,m=o.vy,y=h.vx,w=h.vy;if(u){var x=u.a,T=u.b,E=u.c,S=u.d,C=u.e,A=u.f;c=s.vx*x+s.vy*E+C,d=s.vx*T+s.vy*S+A,g=o.vx*x+o.vy*E+C,m=o.vx*T+o.vy*S+A,y=h.vx*x+h.vy*E+C,w=h.vx*T+h.vy*S+A}var M=y-c,b=w-d,_=g-c,P=m-d,L=a-c,F=r-d,D=M*M+b*b,k=M*_+b*P,R=M*L+b*F,O=_*_+P*P,B=_*L+P*F,U=D*O-k*k,I=U===0?0:1/U,Y=(O*R-k*B)*I,N=(D*B-k*R)*I;return Y>=0&&N>=0&&Y+N<1},isCounterClockwise:function(a){var r=this.vertex1,u=this.vertex2,s=this.vertex3,o=(u.vx-r.vx)*(s.vy-r.vy)-(u.vy-r.vy)*(s.vx-r.vx);return a<=0?o>=0:o<0},load:function(a,r,u,s,o){return u=this.vertex1.load(a,r,u,s,o),u=this.vertex2.load(a,r,u,s,o),this.vertex3.load(a,r,u,s,o)},transformCoordinatesLocal:function(a,r,u,s){return this.vertex1.transformCoordinatesLocal(a,r,u,s),this.vertex2.transformCoordinatesLocal(a,r,u,s),this.vertex3.transformCoordinatesLocal(a,r,u,s),this},updateBounds:function(){var a=this.vertex1,r=this.vertex2,u=this.vertex3,s=this.bounds;return s.x=Math.min(a.vx,r.vx,u.vx),s.y=Math.min(a.vy,r.vy,u.vy),s.width=Math.max(a.vx,r.vx,u.vx)-s.x,s.height=Math.max(a.vy,r.vy,u.vy)-s.y,this},isInView:function(a,r,u,s,o,h,c,d,g,m,y){var w=this.vertex1.update(o,h,c,d,g,m,y,s),x=this.vertex2.update(o,h,c,d,g,m,y,s),T=this.vertex3.update(o,h,c,d,g,m,y,s);if(w.ta<=0&&x.ta<=0&&T.ta<=0||r&&!this.isCounterClockwise(u))return!1;var E=this.bounds;E.x=Math.min(w.tx,x.tx,T.tx),E.y=Math.min(w.ty,x.ty,T.ty),E.width=Math.max(w.tx,x.tx,T.tx)-E.x,E.height=Math.max(w.ty,x.ty,T.ty)-E.y;var S=a.x+a.width,C=a.y+a.height;return!(E.width<=0||E.height<=0||a.width<=0||a.height<=0||E.right<a.x||E.bottom<a.y||E.x>S||E.y>C)},translate:function(a,r){r===void 0&&(r=0);var u=this.vertex1,s=this.vertex2,o=this.vertex3;return u.x+=a,u.y+=r,s.x+=a,s.y+=r,o.x+=a,o.y+=r,this},x:{get:function(){return this.getInCenter().x},set:function(a){var r=this.getInCenter();this.translate(a-r.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(a){var r=this.getInCenter();this.translate(0,a-r.y)}},alpha:{get:function(){var a=this.vertex1,r=this.vertex2,u=this.vertex3;return(a.alpha+r.alpha+u.alpha)/3},set:function(a){this.vertex1.alpha=a,this.vertex2.alpha=a,this.vertex3.alpha=a}},depth:{get:function(){var a=this.vertex1,r=this.vertex2,u=this.vertex3;return(a.vz+r.vz+u.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});v.exports=e},69295:(v,p,t)=>{var f=t(45934),i=t(25738),n=t(54259),l=t(33736),e=t(45978),a=new l,r=new l,u=new n;v.exports=function(s){var o=i(s,"mesh"),h=i(s,"texture",null),c=i(s,"frame"),d=i(s,"width",1),g=i(s,"height",d),m=i(s,"widthSegments",1),y=i(s,"heightSegments",m),w=i(s,"x",0),x=i(s,"y",0),T=i(s,"z",0),E=i(s,"rotateX",0),S=i(s,"rotateY",0),C=i(s,"rotateZ",0),A=i(s,"zIsUp",!0),M=i(s,"isOrtho",!!o&&o.dirtyCache[11]),b=i(s,"colors",[16777215]),_=i(s,"alphas",[1]),P=i(s,"tile",!1),L=i(s,"flipY",!1),F=i(s,"width",null),D={faces:[],verts:[]};if(a.set(w,x,T),r.set(E,S,C),u.fromRotationXYTranslation(r,a,A),!h&&o)h=o.texture;else{if(!o||typeof h!="string")return D;h=o.scene.sys.textures.get(h)}var k=h.get(c);!F&&M&&h&&o&&(d=k.width/o.height,g=k.height/o.height);var R,O,B=d/2,U=g/2,I=Math.floor(m),Y=Math.floor(y),N=I+1,X=Y+1,z=d/I,V=g/Y,G=[],W=[],H=0,j=1,q=0,K=1;k&&(H=k.u0,j=k.u1,L?(q=k.v1,K=k.v0):(q=k.v0,K=k.v1));var it=j-H,et=K-q;for(O=0;O<X;O++){var J=O*V-U;for(R=0;R<N;R++){var Z=R*z-B;W.push(Z,-J);var $=H+it*(R/I),tt=q+et*(O/Y);G.push($,tt)}}Array.isArray(b)||(b=[b]),Array.isArray(_)||(_=[_]);var Q=0,nt=0;for(O=0;O<Y;O++)for(R=0;R<I;R++){var ut=2*(R+N*O),ot=2*(R+N*(O+1)),lt=2*(R+1+N*(O+1)),rt=2*(R+1+N*O),ht=b[nt],st=_[Q],dt=new e(W[ut],W[ut+1],0,G[ut],G[ut+1],ht,st).transformMat4(u),ft=new e(W[ot],W[ot+1],0,G[ot],G[ot+1],ht,st).transformMat4(u),pt=new e(W[rt],W[rt+1],0,G[rt],G[rt+1],ht,st).transformMat4(u),vt=new e(W[ot],W[ot+1],0,G[ot],G[ot+1],ht,st).transformMat4(u),gt=new e(W[lt],W[lt+1],0,G[lt],G[lt+1],ht,st).transformMat4(u),mt=new e(W[rt],W[rt+1],0,G[rt],G[rt+1],ht,st).transformMat4(u);P&&(dt.setUVs(H,K),ft.setUVs(H,q),pt.setUVs(j,K),vt.setUVs(H,q),gt.setUVs(j,q),mt.setUVs(j,K)),++nt===b.length&&(nt=0),++Q===_.length&&(Q=0),D.verts.push(dt,ft,pt,vt,gt,mt),D.faces.push(new f(dt,ft,pt),new f(vt,gt,mt))}return o&&(o.faces=o.faces.concat(D.faces),o.vertices=o.vertices.concat(D.verts)),D}},69750:(v,p,t)=>{var f=t(45934),i=t(54259),n=t(33736),l=t(45978),e=new n,a=new n,r=new i;v.exports=function(u,s,o,h,c,d,g,m,y,w){o===void 0&&(o=1),h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=0),m===void 0&&(m=0),y===void 0&&(y=0),w===void 0&&(w=!0);var x={faces:[],verts:[]},T=u.materials;e.set(h,c,d),a.set(g,m,y),r.fromRotationXYTranslation(a,e,w);for(var E=0;E<u.models.length;E++)for(var S=u.models[E],C=S.vertices,A=S.textureCoords,M=S.faces,b=0;b<M.length;b++){var _=M[b],P=_.vertices[0],L=_.vertices[1],F=_.vertices[2],D=C[P.vertexIndex],k=C[L.vertexIndex],R=C[F.vertexIndex],O=P.textureCoordsIndex,B=L.textureCoordsIndex,U=F.textureCoordsIndex,I=O===-1?{u:0,v:1}:A[O],Y=B===-1?{u:0,v:0}:A[B],N=U===-1?{u:1,v:1}:A[U],X=16777215;_.material!==""&&T[_.material]&&(X=T[_.material]);var z=new l(D.x*o,D.y*o,D.z*o,I.u,I.v,X).transformMat4(r),V=new l(k.x*o,k.y*o,k.z*o,Y.u,Y.v,X).transformMat4(r),G=new l(R.x*o,R.y*o,R.z*o,N.u,N.v,X).transformMat4(r);x.verts.push(z,V,G),x.faces.push(new f(z,V,G))}return s&&(s.faces=s.faces.concat(x.faces),s.vertices=s.vertices.concat(x.verts)),x}},27092:(v,p,t)=>{var f=t(45934),i=t(45978);v.exports=function(n,l,e,a,r,u,s){if(a===void 0&&(a=!1),u===void 0&&(u=16777215),s===void 0&&(s=1),n.length===l.length){var o,h,c,d,g,m,y,w,x,T,E,S={faces:[],vertices:[]},C=a?3:2,A=Array.isArray(u),M=Array.isArray(s);if(Array.isArray(e)&&e.length>0)for(o=0;o<e.length;o++){var b=e[o],_=2*e[o],P=e[o]*C;h=n[P],c=n[P+1],d=a?n[P+2]:0,g=l[_],m=l[_+1],y=A?u[b]:u,w=M?s[b]:s,x=0,T=0,E=0,r&&(x=r[P],T=r[P+1],E=a?r[P+2]:0),S.vertices.push(new i(h,c,d,g,m,y,w,x,T,E))}else{var L=0,F=0;for(o=0;o<n.length;o+=C)h=n[o],c=n[o+1],d=a?n[o+2]:0,g=l[L],m=l[L+1],y=A?u[F]:u,w=M?s[F]:s,x=0,T=0,E=0,r&&(x=r[o],T=r[o+1],E=a?r[o+2]:0),S.vertices.push(new i(h,c,d,g,m,y,w,x,T,E)),L+=2,F++}for(o=0;o<S.vertices.length;o+=3){var D=S.vertices[o],k=S.vertices[o+1],R=S.vertices[o+2];S.faces.push(new f(D,k,R))}return S}console.warn("GenerateVerts: vertices and uvs count not equal")}},11669:v=>{var p=!0,t="untitled",f="",i="";function n(c){return c.models.length===0&&c.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),f="",c.models[c.models.length-1]}function l(c,d){var g=c.length>=2?c[1]:t;d.models.push({faces:[],name:g,textureCoords:[],vertexNormals:[],vertices:[]}),f=""}function e(c){c.length===2&&(f=c[1])}function a(c,d){var g=c.length,m=g>=2?parseFloat(c[1]):0,y=g>=3?parseFloat(c[2]):0,w=g>=4?parseFloat(c[3]):0;n(d).vertices.push({x:m,y,z:w})}function r(c,d){var g=c.length,m=g>=2?parseFloat(c[1]):0,y=g>=3?parseFloat(c[2]):0,w=g>=4?parseFloat(c[3]):0;isNaN(m)&&(m=0),isNaN(y)&&(y=0),isNaN(w)&&(w=0),p&&(y=1-y),n(d).textureCoords.push({u:m,v:y,w})}function u(c,d){var g=c.length,m=g>=2?parseFloat(c[1]):0,y=g>=3?parseFloat(c[2]):0,w=g>=4?parseFloat(c[3]):0;n(d).vertexNormals.push({x:m,y,z:w})}function s(c,d){var g=c.length-1;if(!(g<3)){for(var m={group:f,material:i,vertices:[]},y=0;y<g;y++){var w=c[y+1].split("/"),x=w.length;if(!(x<1||x>3)){var T=0,E=0,S=0;T=parseInt(w[0],10),x>1&&w[1]!==""&&(E=parseInt(w[1],10)),x>2&&(S=parseInt(w[2],10)),T!==0&&(T<0&&(T=n(d).vertices.length+1+T),E-=1,T-=1,S-=1,m.vertices.push({textureCoordsIndex:E,vertexIndex:T,vertexNormalIndex:S}))}}n(d).faces.push(m)}}function o(c,d){c.length>=2&&d.materialLibraries.push(c[1])}function h(c){c.length>=2&&(i=c[1])}v.exports=function(c,d){d===void 0&&(d=!0),p=d;var g,m,y={materials:{},materialLibraries:[],models:[]};f="",i="";for(var w=c.split(`
`),x=0;x<w.length;x++){var T=(g=w[x],m=void 0,m=g.indexOf("#"),m>-1?g.substring(0,m):g).replace(/\s\s+/g," ").trim().split(" ");switch(T[0].toLowerCase()){case"o":l(T,y);break;case"g":e(T);break;case"v":a(T,y);break;case"vt":r(T,y);break;case"vn":u(T,y);break;case"f":s(T,y);break;case"mtllib":o(T,y);break;case"usemtl":h(T)}}return y}},91252:(v,p,t)=>{var f=t(55117);v.exports=function(i){for(var n={},l=i.split(`
`),e="",a=0;a<l.length;a++){var r=l[a].trim();if(r.indexOf("#")!==0&&r!==""){var u=r.replace(/\s\s+/g," ").trim().split(" ");switch(u[0].toLowerCase()){case"newmtl":e=u[1];break;case"kd":var s=Math.floor(255*u[1]),o=u.length>=2?Math.floor(255*u[2]):s,h=u.length>=3?Math.floor(255*u[3]):s;n[e]=f(s,o,h)}}}return n}},56624:v=>{v.exports=function(p,t,f,i){var n,l;if(f===void 0&&i===void 0){var e=p.getInCenter();n=e.x,l=e.y}var a=Math.cos(t),r=Math.sin(t),u=p.vertex1,s=p.vertex2,o=p.vertex3,h=u.x-n,c=u.y-l;u.set(h*a-c*r+n,h*r+c*a+l),h=s.x-n,c=s.y-l,s.set(h*a-c*r+n,h*r+c*a+l),h=o.x-n,c=o.y-l,o.set(h*a-c*r+n,h*r+c*a+l)}},45978:(v,p,t)=>{var f=t(69186),i=t(64564),n=t(33736),l=new f({Extends:n,initialize:function(e,a,r,u,s,o,h,c,d,g){o===void 0&&(o=16777215),h===void 0&&(h=1),c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=0),n.call(this,e,a,r),this.vx=0,this.vy=0,this.vz=0,this.nx=c,this.ny=d,this.nz=g,this.u=u,this.v=s,this.color=o,this.alpha=h,this.tx=0,this.ty=0,this.ta=0},setUVs:function(e,a){return this.u=e,this.v=a,this},transformCoordinatesLocal:function(e,a,r,u){var s=this.x,o=this.y,h=this.z,c=e.val,d=s*c[0]+o*c[4]+h*c[8]+c[12],g=s*c[1]+o*c[5]+h*c[9]+c[13],m=s*c[2]+o*c[6]+h*c[10]+c[14],y=s*c[3]+o*c[7]+h*c[11]+c[15];this.vx=d/y*a,this.vy=-g/y*r,this.vz=u<=0?m/y:-m/y},update:function(e,a,r,u,s,o,h,c){var d=this.vx*e+this.vy*r+s,g=this.vx*a+this.vy*u+o;return h&&(d=Math.round(d),g=Math.round(g)),this.tx=d,this.ty=g,this.ta=this.alpha*c,this},load:function(e,a,r,u,s){return e[++r]=this.tx,e[++r]=this.ty,e[++r]=this.u,e[++r]=this.v,e[++r]=u,e[++r]=s,a[++r]=i.getTintAppendFloatAlpha(this.color,this.ta),r}});v.exports=l},61859:(v,p,t)=>{var f={Face:t(45934),GenerateGridVerts:t(69295),GenerateObjVerts:t(69750),GenerateVerts:t(27092),ParseObj:t(11669),ParseObjMaterial:t(91252),RotateFace:t(56624),Vertex:t(45978)};v.exports=f},42233:v=>{v.exports=function(p){return p.setTo(Math.ceil(p.x),Math.ceil(p.y))}},42762:(v,p,t)=>{var f=t(47978);v.exports=function(i){return new f(i.x,i.y)}},72180:v=>{v.exports=function(p,t){return t.setTo(p.x,p.y)}},81848:v=>{v.exports=function(p,t){return p.x===t.x&&p.y===t.y}},93898:v=>{v.exports=function(p){return p.setTo(Math.floor(p.x),Math.floor(p.y))}},90385:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){if(n===void 0&&(n=new f),!Array.isArray(i))throw new Error("GetCentroid points argument must be an array");var l=i.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(l===1)n.x=i[0].x,n.y=i[0].y;else{for(var e=0;e<l;e++)n.x+=i[e].x,n.y+=i[e].y;n.x/=l,n.y/=l}return n}},72202:v=>{v.exports=function(p){return Math.sqrt(p.x*p.x+p.y*p.y)}},96458:v=>{v.exports=function(p){return p.x*p.x+p.y*p.y}},59235:(v,p,t)=>{var f=t(75380);v.exports=function(i,n){n===void 0&&(n=new f);for(var l=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,u=0;u<i.length;u++){var s=i[u];s.x>l&&(l=s.x),s.x<e&&(e=s.x),s.y>a&&(a=s.y),s.y<r&&(r=s.y)}return n.x=e,n.y=r,n.width=l-e,n.height=a-r,n}},14967:(v,p,t)=>{var f=t(47978);v.exports=function(i,n,l,e){return l===void 0&&(l=0),e===void 0&&(e=new f),e.x=i.x+(n.x-i.x)*l,e.y=i.y+(n.y-i.y)*l,e}},94552:v=>{v.exports=function(p){return p.setTo(p.y,p.x)}},78544:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){return n===void 0&&(n=new f),n.setTo(-i.x,-i.y)}},47978:(v,p,t)=>{var f=t(69186),i=t(30097),n=new f({initialize:function(l,e){l===void 0&&(l=0),e===void 0&&(e=l),this.type=i.POINT,this.x=l,this.y=e},setTo:function(l,e){return l===void 0&&(l=0),e===void 0&&(e=l),this.x=l,this.y=e,this}});v.exports=n},2707:(v,p,t)=>{var f=t(47978),i=t(96458);v.exports=function(n,l,e){e===void 0&&(e=new f);var a=(n.x*l.x+n.y*l.y)/i(l);return a!==0&&(e.x=a*l.x,e.y=a*l.y),e}},61384:(v,p,t)=>{var f=t(47978);v.exports=function(i,n,l){l===void 0&&(l=new f);var e=i.x*n.x+i.y*n.y;return e!==0&&(l.x=e*n.x,l.y=e*n.y),l}},92055:(v,p,t)=>{var f=t(72202);v.exports=function(i,n){if(i.x!==0||i.y!==0){var l=f(i);i.x/=l,i.y/=l}return i.x*=n,i.y*=n,i}},36937:(v,p,t)=>{var f=t(47978);f.Ceil=t(42233),f.Clone=t(42762),f.CopyFrom=t(72180),f.Equals=t(81848),f.Floor=t(93898),f.GetCentroid=t(90385),f.GetMagnitude=t(72202),f.GetMagnitudeSq=t(96458),f.GetRectangleFromPoints=t(59235),f.Interpolate=t(14967),f.Invert=t(94552),f.Negative=t(78544),f.Project=t(2707),f.ProjectUnit=t(61384),f.SetMagnitude=t(92055),v.exports=f},50637:(v,p,t)=>{var f=t(77816);v.exports=function(i){return new f(i.points)}},57997:v=>{v.exports=function(p,t,f){for(var i=!1,n=-1,l=p.points.length-1;++n<p.points.length;l=n){var e=p.points[n].x,a=p.points[n].y,r=p.points[l].x,u=p.points[l].y;(a<=f&&f<u||u<=f&&f<a)&&t<(r-e)*(f-a)/(u-a)+e&&(i=!i)}return i}},89273:(v,p,t)=>{var f=t(57997);v.exports=function(i,n){return f(i,n.x,n.y)}},64634:v=>{function p(b,_,P){P=P||2;var L,F,D,k,R,O,B,U=_&&_.length,I=U?_[0]*P:b.length,Y=t(b,0,I,P,!0),N=[];if(!Y||Y.next===Y.prev)return N;if(U&&(Y=function(z,V,G,W){var H,j,q,K=[];for(H=0,j=V.length;H<j;H++)(q=t(z,V[H]*W,H<j-1?V[H+1]*W:z.length,W,!1))===q.next&&(q.steiner=!0),K.push(h(q));for(K.sort(r),H=0;H<K.length;H++)u(K[H],G),G=f(G,G.next);return G}(b,_,Y,P)),b.length>80*P){L=D=b[0],F=k=b[1];for(var X=P;X<I;X+=P)(R=b[X])<L&&(L=R),(O=b[X+1])<F&&(F=O),R>D&&(D=R),O>k&&(k=O);B=(B=Math.max(D-L,k-F))!==0?1/B:0}return i(Y,N,P,L,F,B),N}function t(b,_,P,L,F){var D,k;if(F===M(b,_,P,L)>0)for(D=_;D<P;D+=L)k=S(D,b[D],b[D+1],k);else for(D=P-L;D>=_;D-=L)k=S(D,b[D],b[D+1],k);return k&&m(k,k.next)&&(C(k),k=k.next),k}function f(b,_){if(!b)return b;_||(_=b);var P,L=b;do if(P=!1,L.steiner||!m(L,L.next)&&g(L.prev,L,L.next)!==0)L=L.next;else{if(C(L),(L=_=L.prev)===L.next)break;P=!0}while(P||L!==_);return _}function i(b,_,P,L,F,D,k){if(b){!k&&D&&function(U,I,Y,N){var X=U;do X.z===null&&(X.z=o(X.x,X.y,I,Y,N)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==U);X.prevZ.nextZ=null,X.prevZ=null,function(z){var V,G,W,H,j,q,K,it,et=1;do{for(G=z,z=null,j=null,q=0;G;){for(q++,W=G,K=0,V=0;V<et&&(K++,W=W.nextZ);V++);for(it=et;K>0||it>0&&W;)K!==0&&(it===0||!W||G.z<=W.z)?(H=G,G=G.nextZ,K--):(H=W,W=W.nextZ,it--),j?j.nextZ=H:z=H,H.prevZ=j,j=H;G=W}j.nextZ=null,et*=2}while(q>1)}(X)}(b,L,F,D);for(var R,O,B=b;b.prev!==b.next;)if(R=b.prev,O=b.next,D?l(b,L,F,D):n(b))_.push(R.i/P),_.push(b.i/P),_.push(O.i/P),C(b),b=O.next,B=O.next;else if((b=O)===B){k?k===1?i(b=e(f(b),_,P),_,P,L,F,D,2):k===2&&a(b,_,P,L,F,D):i(f(b),_,P,L,F,D,1);break}}}function n(b){var _=b.prev,P=b,L=b.next;if(g(_,P,L)>=0)return!1;for(var F=b.next.next;F!==b.prev;){if(c(_.x,_.y,P.x,P.y,L.x,L.y,F.x,F.y)&&g(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function l(b,_,P,L){var F=b.prev,D=b,k=b.next;if(g(F,D,k)>=0)return!1;for(var R=F.x<D.x?F.x<k.x?F.x:k.x:D.x<k.x?D.x:k.x,O=F.y<D.y?F.y<k.y?F.y:k.y:D.y<k.y?D.y:k.y,B=F.x>D.x?F.x>k.x?F.x:k.x:D.x>k.x?D.x:k.x,U=F.y>D.y?F.y>k.y?F.y:k.y:D.y>k.y?D.y:k.y,I=o(R,O,_,P,L),Y=o(B,U,_,P,L),N=b.prevZ,X=b.nextZ;N&&N.z>=I&&X&&X.z<=Y;){if(N!==b.prev&&N!==b.next&&c(F.x,F.y,D.x,D.y,k.x,k.y,N.x,N.y)&&g(N.prev,N,N.next)>=0||(N=N.prevZ,X!==b.prev&&X!==b.next&&c(F.x,F.y,D.x,D.y,k.x,k.y,X.x,X.y)&&g(X.prev,X,X.next)>=0))return!1;X=X.nextZ}for(;N&&N.z>=I;){if(N!==b.prev&&N!==b.next&&c(F.x,F.y,D.x,D.y,k.x,k.y,N.x,N.y)&&g(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;X&&X.z<=Y;){if(X!==b.prev&&X!==b.next&&c(F.x,F.y,D.x,D.y,k.x,k.y,X.x,X.y)&&g(X.prev,X,X.next)>=0)return!1;X=X.nextZ}return!0}function e(b,_,P){var L=b;do{var F=L.prev,D=L.next.next;!m(F,D)&&y(F,L,L.next,D)&&T(F,D)&&T(D,F)&&(_.push(F.i/P),_.push(L.i/P),_.push(D.i/P),C(L),C(L.next),L=b=D),L=L.next}while(L!==b);return f(L)}function a(b,_,P,L,F,D){var k=b;do{for(var R=k.next.next;R!==k.prev;){if(k.i!==R.i&&d(k,R)){var O=E(k,R);return k=f(k,k.next),O=f(O,O.next),i(k,_,P,L,F,D),void i(O,_,P,L,F,D)}R=R.next}k=k.next}while(k!==b)}function r(b,_){return b.x-_.x}function u(b,_){if(_=function(L,F){var D,k=F,R=L.x,O=L.y,B=-1/0;do{if(O<=k.y&&O>=k.next.y&&k.next.y!==k.y){var U=k.x+(O-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(U<=R&&U>B){if(B=U,U===R){if(O===k.y)return k;if(O===k.next.y)return k.next}D=k.x<k.next.x?k:k.next}}k=k.next}while(k!==F);if(!D)return null;if(R===B)return D;var I,Y=D,N=D.x,X=D.y,z=1/0;k=D;do R>=k.x&&k.x>=N&&R!==k.x&&c(O<X?R:B,O,N,X,O<X?B:R,O,k.x,k.y)&&(I=Math.abs(O-k.y)/(R-k.x),T(k,L)&&(I<z||I===z&&(k.x>D.x||k.x===D.x&&s(D,k)))&&(D=k,z=I)),k=k.next;while(k!==Y);return D}(b,_),_){var P=E(_,b);f(_,_.next),f(P,P.next)}}function s(b,_){return g(b.prev,b,_.prev)<0&&g(_.next,b,b.next)<0}function o(b,_,P,L,F){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-P)*F)|b<<8))|b<<4))|b<<2))|b<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-L)*F)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function h(b){var _=b,P=b;do(_.x<P.x||_.x===P.x&&_.y<P.y)&&(P=_),_=_.next;while(_!==b);return P}function c(b,_,P,L,F,D,k,R){return(F-k)*(_-R)-(b-k)*(D-R)>=0&&(b-k)*(L-R)-(P-k)*(_-R)>=0&&(P-k)*(D-R)-(F-k)*(L-R)>=0}function d(b,_){return b.next.i!==_.i&&b.prev.i!==_.i&&!function(P,L){var F=P;do{if(F.i!==P.i&&F.next.i!==P.i&&F.i!==L.i&&F.next.i!==L.i&&y(F,F.next,P,L))return!0;F=F.next}while(F!==P);return!1}(b,_)&&(T(b,_)&&T(_,b)&&function(P,L){var F=P,D=!1,k=(P.x+L.x)/2,R=(P.y+L.y)/2;do F.y>R!=F.next.y>R&&F.next.y!==F.y&&k<(F.next.x-F.x)*(R-F.y)/(F.next.y-F.y)+F.x&&(D=!D),F=F.next;while(F!==P);return D}(b,_)&&(g(b.prev,b,_.prev)||g(b,_.prev,_))||m(b,_)&&g(b.prev,b,b.next)>0&&g(_.prev,_,_.next)>0)}function g(b,_,P){return(_.y-b.y)*(P.x-_.x)-(_.x-b.x)*(P.y-_.y)}function m(b,_){return b.x===_.x&&b.y===_.y}function y(b,_,P,L){var F=x(g(b,_,P)),D=x(g(b,_,L)),k=x(g(P,L,b)),R=x(g(P,L,_));return F!==D&&k!==R||!(F!==0||!w(b,P,_))||!(D!==0||!w(b,L,_))||!(k!==0||!w(P,b,L))||!(R!==0||!w(P,_,L))}function w(b,_,P){return _.x<=Math.max(b.x,P.x)&&_.x>=Math.min(b.x,P.x)&&_.y<=Math.max(b.y,P.y)&&_.y>=Math.min(b.y,P.y)}function x(b){return b>0?1:b<0?-1:0}function T(b,_){return g(b.prev,b,b.next)<0?g(b,_,b.next)>=0&&g(b,b.prev,_)>=0:g(b,_,b.prev)<0||g(b,b.next,_)<0}function E(b,_){var P=new A(b.i,b.x,b.y),L=new A(_.i,_.x,_.y),F=b.next,D=_.prev;return b.next=_,_.prev=b,P.next=F,F.prev=P,L.next=P,P.prev=L,D.next=L,L.prev=D,L}function S(b,_,P,L){var F=new A(b,_,P);return L?(F.next=L.next,F.prev=L,L.next.prev=F,L.next=F):(F.prev=F,F.next=F),F}function C(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function A(b,_,P){this.i=b,this.x=_,this.y=P,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(b,_,P,L){for(var F=0,D=_,k=P-L;D<P;D+=L)F+=(b[k]-b[D])*(b[D+1]+b[k+1]),k=D;return F}p.deviation=function(b,_,P,L){var F=_&&_.length,D=F?_[0]*P:b.length,k=Math.abs(M(b,0,D,P));if(F)for(var R=0,O=_.length;R<O;R++){var B=_[R]*P,U=R<O-1?_[R+1]*P:b.length;k-=Math.abs(M(b,B,U,P))}var I=0;for(R=0;R<L.length;R+=3){var Y=L[R]*P,N=L[R+1]*P,X=L[R+2]*P;I+=Math.abs((b[Y]-b[X])*(b[N+1]-b[Y+1])-(b[Y]-b[N])*(b[X+1]-b[Y+1]))}return k===0&&I===0?0:Math.abs((I-k)/k)},p.flatten=function(b){for(var _=b[0][0].length,P={vertices:[],holes:[],dimensions:_},L=0,F=0;F<b.length;F++){for(var D=0;D<b[F].length;D++)for(var k=0;k<_;k++)P.vertices.push(b[F][D][k]);F>0&&(L+=b[F-1].length,P.holes.push(L))}return P},v.exports=p},92594:(v,p,t)=>{var f=t(75380);v.exports=function(i,n){n===void 0&&(n=new f);for(var l,e=1/0,a=1/0,r=-e,u=-a,s=0;s<i.points.length;s++)l=i.points[s],e=Math.min(e,l.x),a=Math.min(a,l.y),r=Math.max(r,l.x),u=Math.max(u,l.y);return n.x=e,n.y=a,n.width=r-e,n.height=u-a,n}},18801:v=>{v.exports=function(p,t){t===void 0&&(t=[]);for(var f=0;f<p.points.length;f++)t.push(p.points[f].x),t.push(p.points[f].y);return t}},12061:(v,p,t)=>{var f=t(47064),i=t(97501),n=t(13410);v.exports=function(l,e,a,r){r===void 0&&(r=[]);var u=l.points,s=n(l);!e&&a>0&&(e=s/a);for(var o=0;o<e;o++)for(var h=s*(o/e),c=0,d=0;d<u.length;d++){var g=u[d],m=u[(d+1)%u.length],y=new i(g.x,g.y,m.x,m.y),w=f(y);if(!(h<c||h>c+w)){var x=y.getPoint((h-c)/w);r.push(x);break}c+=w}return r}},13410:(v,p,t)=>{var f=t(47064),i=t(97501);v.exports=function(n){for(var l=n.points,e=0,a=0;a<l.length;a++){var r=l[a],u=l[(a+1)%l.length],s=new i(r.x,r.y,u.x,u.y);e+=f(s)}return e}},77816:(v,p,t)=>{var f=t(69186),i=t(57997),n=t(12061),l=t(30097),e=new f({initialize:function(a){this.type=l.POLYGON,this.area=0,this.points=[],a&&this.setTo(a)},contains:function(a,r){return i(this,a,r)},setTo:function(a){if(this.area=0,this.points=[],typeof a=="string"&&(a=a.split(" ")),!Array.isArray(a))return this;for(var r,u=Number.MAX_VALUE,s=0;s<a.length;s++)r={x:0,y:0},typeof a[s]=="number"||typeof a[s]=="string"?(r.x=parseFloat(a[s]),r.y=parseFloat(a[s+1]),s++):Array.isArray(a[s])?(r.x=a[s][0],r.y=a[s][1]):(r.x=a[s].x,r.y=a[s].y),this.points.push(r),r.y<u&&(u=r.y);return this.calculateArea(u),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var a,r,u=0,s=0;s<this.points.length-1;s++)a=this.points[s],u+=((r=this.points[s+1]).x-a.x)*(a.y+r.y);return a=this.points[0],r=this.points[this.points.length-1],u+=(a.x-r.x)*(r.y+a.y),this.area=.5*-u,this.area},getPoints:function(a,r,u){return n(this,a,r,u)}});v.exports=e},90510:v=>{v.exports=function(p){return p.points.reverse(),p}},86934:v=>{function p(i,n,l){var e=n.x,a=n.y,r=l.x-e,u=l.y-a;if(r!==0||u!==0){var s=((i.x-e)*r+(i.y-a)*u)/(r*r+u*u);s>1?(e=l.x,a=l.y):s>0&&(e+=r*s,a+=u*s)}return(r=i.x-e)*r+(u=i.y-a)*u}function t(i,n,l,e,a){for(var r,u=e,s=n+1;s<l;s++){var o=p(i[s],i[n],i[l]);o>u&&(r=s,u=o)}u>e&&(r-n>1&&t(i,n,r,e,a),a.push(i[r]),l-r>1&&t(i,r,l,e,a))}function f(i,n){var l=i.length-1,e=[i[0]];return t(i,0,l,n,e),e.push(i[l]),e}v.exports=function(i,n,l){n===void 0&&(n=1),l===void 0&&(l=!1);var e=i.points;if(e.length>2){var a=n*n;l||(e=function(r,u){for(var s,o,h,c,d,g=r[0],m=[g],y=1,w=r.length;y<w;y++)h=g,(c=(o=s=r[y]).x-h.x)*c+(d=o.y-h.y)*d>u&&(m.push(s),g=s);return g!==s&&m.push(s),m}(e,a)),i.setTo(f(e,a))}return i}},63037:v=>{var p=function(t,f){return t[0]=f[0],t[1]=f[1],t};v.exports=function(t){var f,i=[],n=t.points;for(f=0;f<n.length;f++)i.push([n[f].x,n[f].y]);var l=[];for(i.length>0&&l.push(p([0,0],i[0])),f=0;f<i.length-1;f++){var e=i[f],a=i[f+1],r=e[0],u=e[1],s=a[0],o=a[1];l.push([.85*r+.15*s,.85*u+.15*o]),l.push([.15*r+.85*s,.15*u+.85*o])}return i.length>1&&l.push(p([0,0],i[i.length-1])),t.setTo(l)}},58891:v=>{v.exports=function(p,t,f){for(var i=p.points,n=0;n<i.length;n++)i[n].x+=t,i[n].y+=f;return p}},10413:(v,p,t)=>{var f=t(77816);f.Clone=t(50637),f.Contains=t(57997),f.ContainsPoint=t(89273),f.Earcut=t(64634),f.GetAABB=t(92594),f.GetNumberArray=t(18801),f.GetPoints=t(12061),f.Perimeter=t(13410),f.Reverse=t(90510),f.Simplify=t(86934),f.Smooth=t(63037),f.Translate=t(58891),v.exports=f},89258:v=>{v.exports=function(p){return p.width*p.height}},99158:v=>{v.exports=function(p){return p.x=Math.ceil(p.x),p.y=Math.ceil(p.y),p}},39023:v=>{v.exports=function(p){return p.x=Math.ceil(p.x),p.y=Math.ceil(p.y),p.width=Math.ceil(p.width),p.height=Math.ceil(p.height),p}},39414:v=>{v.exports=function(p,t,f){return p.x=t-p.width/2,p.y=f-p.height/2,p}},68392:(v,p,t)=>{var f=t(75380);v.exports=function(i){return new f(i.x,i.y,i.width,i.height)}},26813:v=>{v.exports=function(p,t,f){return!(p.width<=0||p.height<=0)&&p.x<=t&&p.x+p.width>=t&&p.y<=f&&p.y+p.height>=f}},83613:(v,p,t)=>{var f=t(26813);v.exports=function(i,n){return f(i,n.x,n.y)}},44909:v=>{v.exports=function(p,t){return!(t.width*t.height>p.width*p.height)&&t.x>p.x&&t.x<p.right&&t.right>p.x&&t.right<p.right&&t.y>p.y&&t.y<p.bottom&&t.bottom>p.y&&t.bottom<p.bottom}},90997:v=>{v.exports=function(p,t){return t.setTo(p.x,p.y,p.width,p.height)}},53998:v=>{v.exports=function(p,t){return t===void 0&&(t=[]),t.push({x:p.x,y:p.y}),t.push({x:p.right,y:p.y}),t.push({x:p.right,y:p.bottom}),t.push({x:p.x,y:p.bottom}),t}},97139:v=>{v.exports=function(p,t){return p.x===t.x&&p.y===t.y&&p.width===t.width&&p.height===t.height}},18965:(v,p,t)=>{var f=t(28169);v.exports=function(i,n){var l=f(i);return l<f(n)?i.setSize(n.height*l,n.height):i.setSize(n.width,n.width/l),i.setPosition(n.centerX-i.width/2,n.centerY-i.height/2)}},41290:(v,p,t)=>{var f=t(28169);v.exports=function(i,n){var l=f(i);return l>f(n)?i.setSize(n.height*l,n.height):i.setSize(n.width,n.width/l),i.setPosition(n.centerX-i.width/2,n.centerY-i.height/2)}},45880:v=>{v.exports=function(p){return p.x=Math.floor(p.x),p.y=Math.floor(p.y),p}},46665:v=>{v.exports=function(p){return p.x=Math.floor(p.x),p.y=Math.floor(p.y),p.width=Math.floor(p.width),p.height=Math.floor(p.height),p}},79803:(v,p,t)=>{var f=t(75380),i=t(80925);v.exports=function(n,l){if(l===void 0&&(l=new f),n.length===0)return l;for(var e,a,r,u=Number.MAX_VALUE,s=Number.MAX_VALUE,o=i.MIN_SAFE_INTEGER,h=i.MIN_SAFE_INTEGER,c=0;c<n.length;c++)e=n[c],Array.isArray(e)?(a=e[0],r=e[1]):(a=e.x,r=e.y),u=Math.min(u,a),s=Math.min(s,r),o=Math.max(o,a),h=Math.max(h,r);return l.x=u,l.y=s,l.width=o-u,l.height=h-s,l}},68096:(v,p,t)=>{var f=t(75380);v.exports=function(i,n,l,e,a){return a===void 0&&(a=new f),a.setTo(Math.min(i,l),Math.min(n,e),Math.abs(i-l),Math.abs(n-e))}},28169:v=>{v.exports=function(p){return p.height===0?NaN:p.width/p.height}},99095:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){return n===void 0&&(n=new f),n.x=i.centerX,n.y=i.centerY,n}},85715:(v,p,t)=>{var f=t(93080),i=t(47978);v.exports=function(n,l,e){if(e===void 0&&(e=new i),l<=0||l>=1)return e.x=n.x,e.y=n.y,e;var a=f(n)*l;return l>.5?(a-=n.width+n.height)<=n.width?(e.x=n.right-a,e.y=n.bottom):(e.x=n.x,e.y=n.bottom-(a-n.width)):a<=n.width?(e.x=n.x+a,e.y=n.y):(e.x=n.right,e.y=n.y+(a-n.width)),e}},53292:(v,p,t)=>{var f=t(85715),i=t(93080);v.exports=function(n,l,e,a){a===void 0&&(a=[]),!l&&e>0&&(l=i(n)/e);for(var r=0;r<l;r++){var u=r/l;a.push(f(n,u))}return a}},8392:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){return n===void 0&&(n=new f),n.x=i.width,n.y=i.height,n}},66243:(v,p,t)=>{var f=t(39414);v.exports=function(i,n,l){var e=i.centerX,a=i.centerY;return i.setSize(i.width+2*n,i.height+2*l),f(i,e,a)}},97554:(v,p,t)=>{var f=t(75380),i=t(12402);v.exports=function(n,l,e){return e===void 0&&(e=new f),i(n,l)?(e.x=Math.max(n.x,l.x),e.y=Math.max(n.y,l.y),e.width=Math.min(n.right,l.right)-e.x,e.height=Math.min(n.bottom,l.bottom)-e.y):e.setEmpty(),e}},16178:(v,p,t)=>{var f=t(93080),i=t(47978);v.exports=function(n,l,e,a){if(a===void 0&&(a=[]),!l&&!e)return a;l?e=Math.round(f(n)/l):l=f(n)/e;for(var r=n.x,u=n.y,s=0,o=0;o<e;o++)switch(a.push(new i(r,u)),s){case 0:(r+=l)>=n.right&&(s=1,u+=r-n.right,r=n.right);break;case 1:(u+=l)>=n.bottom&&(s=2,r-=u-n.bottom,u=n.bottom);break;case 2:(r-=l)<=n.left&&(s=3,u-=n.left-r,r=n.left);break;case 3:(u-=l)<=n.top&&(s=0,u=n.top)}return a}},14272:v=>{v.exports=function(p,t){for(var f=p.x,i=p.right,n=p.y,l=p.bottom,e=0;e<t.length;e++)f=Math.min(f,t[e].x),i=Math.max(i,t[e].x),n=Math.min(n,t[e].y),l=Math.max(l,t[e].y);return p.x=f,p.y=n,p.width=i-f,p.height=l-n,p}},76017:v=>{v.exports=function(p,t){var f=Math.min(p.x,t.x),i=Math.max(p.right,t.right);p.x=f,p.width=i-f;var n=Math.min(p.y,t.y),l=Math.max(p.bottom,t.bottom);return p.y=n,p.height=l-n,p}},44082:v=>{v.exports=function(p,t,f){var i=Math.min(p.x,t),n=Math.max(p.right,t);p.x=i,p.width=n-i;var l=Math.min(p.y,f),e=Math.max(p.bottom,f);return p.y=l,p.height=e-l,p}},78367:v=>{v.exports=function(p,t,f){return p.x+=t,p.y+=f,p}},51878:v=>{v.exports=function(p,t){return p.x+=t.x,p.y+=t.y,p}},1415:v=>{v.exports=function(p,t){return p.x<t.right&&p.right>t.x&&p.y<t.bottom&&p.bottom>t.y}},93080:v=>{v.exports=function(p){return 2*(p.width+p.height)}},1352:(v,p,t)=>{var f=t(47978),i=t(23407);v.exports=function(n,l,e){e===void 0&&(e=new f),l=i(l);var a=Math.sin(l),r=Math.cos(l),u=r>0?n.width/2:n.width/-2,s=a>0?n.height/2:n.height/-2;return Math.abs(u*a)<Math.abs(s*r)?s=u*a/r:u=s*r/a,e.x=u+n.centerX,e.y=s+n.centerY,e}},61852:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){return n===void 0&&(n=new f),n.x=i.x+Math.random()*i.width,n.y=i.y+Math.random()*i.height,n}},32058:(v,p,t)=>{var f=t(27019),i=t(44909),n=t(47978);v.exports=function(l,e,a){if(a===void 0&&(a=new n),i(l,e))switch(f(0,3)){case 0:a.x=l.x+Math.random()*(e.right-l.x),a.y=l.y+Math.random()*(e.top-l.y);break;case 1:a.x=e.x+Math.random()*(l.right-e.x),a.y=e.bottom+Math.random()*(l.bottom-e.bottom);break;case 2:a.x=l.x+Math.random()*(e.x-l.x),a.y=e.y+Math.random()*(l.bottom-e.y);break;case 3:a.x=e.right+Math.random()*(l.right-e.right),a.y=l.y+Math.random()*(e.bottom-l.y)}return a}},75380:(v,p,t)=>{var f=t(69186),i=t(26813),n=t(85715),l=t(53292),e=t(30097),a=t(97501),r=t(61852),u=new f({initialize:function(s,o,h,c){s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),c===void 0&&(c=0),this.type=e.RECTANGLE,this.x=s,this.y=o,this.width=h,this.height=c},contains:function(s,o){return i(this,s,o)},getPoint:function(s,o){return n(this,s,o)},getPoints:function(s,o,h){return l(this,s,o,h)},getRandomPoint:function(s){return r(this,s)},setTo:function(s,o,h,c){return this.x=s,this.y=o,this.width=h,this.height=c,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(s,o){return o===void 0&&(o=s),this.x=s,this.y=o,this},setSize:function(s,o){return o===void 0&&(o=s),this.width=s,this.height=o,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(s){return s===void 0&&(s=new a),s.setTo(this.x,this.y,this.right,this.y),s},getLineB:function(s){return s===void 0&&(s=new a),s.setTo(this.right,this.y,this.right,this.bottom),s},getLineC:function(s){return s===void 0&&(s=new a),s.setTo(this.right,this.bottom,this.x,this.bottom),s},getLineD:function(s){return s===void 0&&(s=new a),s.setTo(this.x,this.bottom,this.x,this.y),s},left:{get:function(){return this.x},set:function(s){s>=this.right?this.width=0:this.width=this.right-s,this.x=s}},right:{get:function(){return this.x+this.width},set:function(s){s<=this.x?this.width=0:this.width=s-this.x}},top:{get:function(){return this.y},set:function(s){s>=this.bottom?this.height=0:this.height=this.bottom-s,this.y=s}},bottom:{get:function(){return this.y+this.height},set:function(s){s<=this.y?this.height=0:this.height=s-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(s){this.x=s-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(s){this.y=s-this.height/2}}});v.exports=u},54156:v=>{v.exports=function(p,t){return p.width===t.width&&p.height===t.height}},8569:v=>{v.exports=function(p,t,f){return f===void 0&&(f=t),p.width*=t,p.height*=f,p}},20822:(v,p,t)=>{var f=t(75380);v.exports=function(i,n,l){l===void 0&&(l=new f);var e=Math.min(i.x,n.x),a=Math.min(i.y,n.y),r=Math.max(i.right,n.right)-e,u=Math.max(i.bottom,n.bottom)-a;return l.setTo(e,a,r,u)}},43550:(v,p,t)=>{var f=t(75380);f.Area=t(89258),f.Ceil=t(99158),f.CeilAll=t(39023),f.CenterOn=t(39414),f.Clone=t(68392),f.Contains=t(26813),f.ContainsPoint=t(83613),f.ContainsRect=t(44909),f.CopyFrom=t(90997),f.Decompose=t(53998),f.Equals=t(97139),f.FitInside=t(18965),f.FitOutside=t(41290),f.Floor=t(45880),f.FloorAll=t(46665),f.FromPoints=t(79803),f.FromXY=t(68096),f.GetAspectRatio=t(28169),f.GetCenter=t(99095),f.GetPoint=t(85715),f.GetPoints=t(53292),f.GetSize=t(8392),f.Inflate=t(66243),f.Intersection=t(97554),f.MarchingAnts=t(16178),f.MergePoints=t(14272),f.MergeRect=t(76017),f.MergeXY=t(44082),f.Offset=t(78367),f.OffsetPoint=t(51878),f.Overlaps=t(1415),f.Perimeter=t(93080),f.PerimeterPoint=t(1352),f.Random=t(61852),f.RandomOutside=t(32058),f.SameDimensions=t(54156),f.Scale=t(8569),f.Union=t(20822),v.exports=f},49227:v=>{v.exports=function(p){var t=p.x1,f=p.y1,i=p.x2,n=p.y2,l=p.x3,e=p.y3;return Math.abs(((l-t)*(n-f)-(i-t)*(e-f))/2)}},24456:(v,p,t)=>{var f=t(82671);v.exports=function(i,n,l){var e=l*(Math.sqrt(3)/2);return new f(i,n,i+l/2,n+e,i-l/2,n+e)}},66364:(v,p,t)=>{var f=t(64634),i=t(82671);v.exports=function(n,l,e,a,r){l===void 0&&(l=null),e===void 0&&(e=1),a===void 0&&(a=1),r===void 0&&(r=[]);for(var u,s,o,h,c,d,g,m,y,w=f(n,l),x=0;x<w.length;x+=3)u=w[x],s=w[x+1],o=w[x+2],h=n[2*u]*e,c=n[2*u+1]*a,d=n[2*s]*e,g=n[2*s+1]*a,m=n[2*o]*e,y=n[2*o+1]*a,r.push(new i(h,c,d,g,m,y));return r}},98702:(v,p,t)=>{var f=t(82671);v.exports=function(i,n,l,e){return e===void 0&&(e=l),new f(i,n,i,n-e,i+l,n)}},14625:(v,p,t)=>{var f=t(53472),i=t(14870);v.exports=function(n,l,e,a){a===void 0&&(a=f);var r=a(n),u=l-r.x,s=e-r.y;return i(n,u,s)}},53472:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){return n===void 0&&(n=new f),n.x=(i.x1+i.x2+i.x3)/3,n.y=(i.y1+i.y2+i.y3)/3,n}},41976:(v,p,t)=>{var f=t(17321);function i(n,l,e,a){return n*a-l*e}v.exports=function(n,l){l===void 0&&(l=new f);var e=n.x3,a=n.y3,r=n.x1-e,u=n.y1-a,s=n.x2-e,o=n.y2-a,h=2*i(r,u,s,o),c=i(u,r*r+u*u,o,s*s+o*o),d=i(r,r*r+u*u,s,s*s+o*o);return l.x=e-c/h,l.y=a+d/h,l}},57371:(v,p,t)=>{var f=t(38459);v.exports=function(i,n){n===void 0&&(n=new f);var l,e,a=i.x1,r=i.y1,u=i.x2,s=i.y2,o=i.x3,h=i.y3,c=u-a,d=s-r,g=o-a,m=h-r,y=c*(a+u)+d*(r+s),w=g*(a+o)+m*(r+h),x=2*(c*(h-s)-d*(o-u));if(Math.abs(x)<1e-6){var T=Math.min(a,u,o),E=Math.min(r,s,h);l=.5*(Math.max(a,u,o)-T),e=.5*(Math.max(r,s,h)-E),n.x=T+l,n.y=E+e,n.radius=Math.sqrt(l*l+e*e)}else n.x=(m*y-d*w)/x,n.y=(c*w-g*y)/x,l=n.x-a,e=n.y-r,n.radius=Math.sqrt(l*l+e*e);return n}},74131:(v,p,t)=>{var f=t(82671);v.exports=function(i){return new f(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)}},90547:v=>{v.exports=function(p,t,f){var i=p.x3-p.x1,n=p.y3-p.y1,l=p.x2-p.x1,e=p.y2-p.y1,a=t-p.x1,r=f-p.y1,u=i*i+n*n,s=i*l+n*e,o=i*a+n*r,h=l*l+e*e,c=l*a+e*r,d=u*h-s*s,g=d===0?0:1/d,m=(h*o-s*c)*g,y=(u*c-s*o)*g;return m>=0&&y>=0&&m+y<1}},60509:v=>{v.exports=function(p,t,f,i){f===void 0&&(f=!1),i===void 0&&(i=[]);for(var n,l,e,a,r,u,s=p.x3-p.x1,o=p.y3-p.y1,h=p.x2-p.x1,c=p.y2-p.y1,d=s*s+o*o,g=s*h+o*c,m=h*h+c*c,y=d*m-g*g,w=y===0?0:1/y,x=p.x1,T=p.y1,E=0;E<t.length&&(l=(d*(u=h*(e=t[E].x-x)+c*(a=t[E].y-T))-g*(r=s*e+o*a))*w,!((n=(m*r-g*u)*w)>=0&&l>=0&&n+l<1&&(i.push({x:t[E].x,y:t[E].y}),f)));E++);return i}},40861:(v,p,t)=>{var f=t(90547);v.exports=function(i,n){return f(i,n.x,n.y)}},70442:v=>{v.exports=function(p,t){return t.setTo(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)}},48300:v=>{v.exports=function(p,t){return t===void 0&&(t=[]),t.push({x:p.x1,y:p.y1}),t.push({x:p.x2,y:p.y2}),t.push({x:p.x3,y:p.y3}),t}},12390:v=>{v.exports=function(p,t){return p.x1===t.x1&&p.y1===t.y1&&p.x2===t.x2&&p.y2===t.y2&&p.x3===t.x3&&p.y3===t.y3}},93488:(v,p,t)=>{var f=t(47978),i=t(47064);v.exports=function(n,l,e){e===void 0&&(e=new f);var a=n.getLineA(),r=n.getLineB(),u=n.getLineC();if(l<=0||l>=1)return e.x=a.x1,e.y=a.y1,e;var s=i(a),o=i(r),h=i(u),c=(s+o+h)*l,d=0;return c<s?(d=c/s,e.x=a.x1+(a.x2-a.x1)*d,e.y=a.y1+(a.y2-a.y1)*d):c>s+o?(d=(c-=s+o)/h,e.x=u.x1+(u.x2-u.x1)*d,e.y=u.y1+(u.y2-u.y1)*d):(d=(c-=s)/o,e.x=r.x1+(r.x2-r.x1)*d,e.y=r.y1+(r.y2-r.y1)*d),e}},10471:(v,p,t)=>{var f=t(47064),i=t(47978);v.exports=function(n,l,e,a){a===void 0&&(a=[]);var r=n.getLineA(),u=n.getLineB(),s=n.getLineC(),o=f(r),h=f(u),c=f(s),d=o+h+c;!l&&e>0&&(l=d/e);for(var g=0;g<l;g++){var m=d*(g/l),y=0,w=new i;m<o?(y=m/o,w.x=r.x1+(r.x2-r.x1)*y,w.y=r.y1+(r.y2-r.y1)*y):m>o+h?(y=(m-=o+h)/c,w.x=s.x1+(s.x2-s.x1)*y,w.y=s.y1+(s.y2-s.y1)*y):(y=(m-=o)/h,w.x=u.x1+(u.x2-u.x1)*y,w.y=u.y1+(u.y2-u.y1)*y),a.push(w)}return a}},10096:(v,p,t)=>{var f=t(47978);function i(n,l,e,a){var r=n-e,u=l-a,s=r*r+u*u;return Math.sqrt(s)}v.exports=function(n,l){l===void 0&&(l=new f);var e=n.x1,a=n.y1,r=n.x2,u=n.y2,s=n.x3,o=n.y3,h=i(s,o,r,u),c=i(e,a,s,o),d=i(r,u,e,a),g=h+c+d;return l.x=(e*h+r*c+s*d)/g,l.y=(a*h+u*c+o*d)/g,l}},14870:v=>{v.exports=function(p,t,f){return p.x1+=t,p.y1+=f,p.x2+=t,p.y2+=f,p.x3+=t,p.y3+=f,p}},60600:(v,p,t)=>{var f=t(47064);v.exports=function(i){var n=i.getLineA(),l=i.getLineB(),e=i.getLineC();return f(n)+f(l)+f(e)}},86407:(v,p,t)=>{var f=t(47978);v.exports=function(i,n){n===void 0&&(n=new f);var l=i.x2-i.x1,e=i.y2-i.y1,a=i.x3-i.x1,r=i.y3-i.y1,u=Math.random(),s=Math.random();return u+s>=1&&(u=1-u,s=1-s),n.x=i.x1+(l*u+a*s),n.y=i.y1+(e*u+r*s),n}},79708:(v,p,t)=>{var f=t(20729),i=t(10096);v.exports=function(n,l){var e=i(n);return f(n,e.x,e.y,l)}},31929:(v,p,t)=>{var f=t(20729);v.exports=function(i,n,l){return f(i,n.x,n.y,l)}},20729:v=>{v.exports=function(p,t,f,i){var n=Math.cos(i),l=Math.sin(i),e=p.x1-t,a=p.y1-f;return p.x1=e*n-a*l+t,p.y1=e*l+a*n+f,e=p.x2-t,a=p.y2-f,p.x2=e*n-a*l+t,p.y2=e*l+a*n+f,e=p.x3-t,a=p.y3-f,p.x3=e*n-a*l+t,p.y3=e*l+a*n+f,p}},82671:(v,p,t)=>{var f=t(69186),i=t(90547),n=t(93488),l=t(10471),e=t(30097),a=t(97501),r=t(86407),u=new f({initialize:function(s,o,h,c,d,g){s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=0),this.type=e.TRIANGLE,this.x1=s,this.y1=o,this.x2=h,this.y2=c,this.x3=d,this.y3=g},contains:function(s,o){return i(this,s,o)},getPoint:function(s,o){return n(this,s,o)},getPoints:function(s,o,h){return l(this,s,o,h)},getRandomPoint:function(s){return r(this,s)},setTo:function(s,o,h,c,d,g){return s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=0),g===void 0&&(g=0),this.x1=s,this.y1=o,this.x2=h,this.y2=c,this.x3=d,this.y3=g,this},getLineA:function(s){return s===void 0&&(s=new a),s.setTo(this.x1,this.y1,this.x2,this.y2),s},getLineB:function(s){return s===void 0&&(s=new a),s.setTo(this.x2,this.y2,this.x3,this.y3),s},getLineC:function(s){return s===void 0&&(s=new a),s.setTo(this.x3,this.y3,this.x1,this.y1),s},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(s){var o;o=this.x1<=this.x2&&this.x1<=this.x3?this.x1-s:this.x2<=this.x1&&this.x2<=this.x3?this.x2-s:this.x3-s,this.x1-=o,this.x2-=o,this.x3-=o}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(s){var o;o=this.x1>=this.x2&&this.x1>=this.x3?this.x1-s:this.x2>=this.x1&&this.x2>=this.x3?this.x2-s:this.x3-s,this.x1-=o,this.x2-=o,this.x3-=o}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(s){var o;o=this.y1<=this.y2&&this.y1<=this.y3?this.y1-s:this.y2<=this.y1&&this.y2<=this.y3?this.y2-s:this.y3-s,this.y1-=o,this.y2-=o,this.y3-=o}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(s){var o;o=this.y1>=this.y2&&this.y1>=this.y3?this.y1-s:this.y2>=this.y1&&this.y2>=this.y3?this.y2-s:this.y3-s,this.y1-=o,this.y2-=o,this.y3-=o}}});v.exports=u},9379:(v,p,t)=>{var f=t(82671);f.Area=t(49227),f.BuildEquilateral=t(24456),f.BuildFromPolygon=t(66364),f.BuildRight=t(98702),f.CenterOn=t(14625),f.Centroid=t(53472),f.CircumCenter=t(41976),f.CircumCircle=t(57371),f.Clone=t(74131),f.Contains=t(90547),f.ContainsArray=t(60509),f.ContainsPoint=t(40861),f.CopyFrom=t(70442),f.Decompose=t(48300),f.Equals=t(12390),f.GetPoint=t(93488),f.GetPoints=t(10471),f.InCenter=t(10096),f.Perimeter=t(60600),f.Offset=t(14870),f.Random=t(86407),f.Rotate=t(79708),f.RotateAroundPoint=t(31929),f.RotateAroundXY=t(20729),v.exports=f},51814:v=>{v.exports=function(p,t,f){return{gameObject:p,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:t,hitAreaCallback:f,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},31354:v=>{v.exports=function(p,t){return function(f,i,n,l){var e=p.getPixelAlpha(i,n,l.texture.key,l.frame.name);return e&&e>=t}}},79976:(v,p,t)=>{var f=t(69186),i=t(24293),n=t(26729),l=t(65210),e=t(24496),a=t(8397),r=t(35749),u=t(86042),s=t(32426),o=t(9329),h=t(37423),c=new f({initialize:function(d,g){this.game=d,this.scaleManager,this.canvas,this.config=g,this.enabled=!0,this.events=new n,this.isOver=!0,this.defaultCursor="",this.keyboard=g.inputKeyboard?new a(this):null,this.mouse=g.inputMouse?new r(this):null,this.touch=g.inputTouch?new s(this):null,this.pointers=[],this.pointersTotal=g.inputActivePointers,g.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var m=0;m<=this.pointersTotal;m++){var y=new u(this,m);y.smoothFactor=g.inputSmoothFactor,this.pointers.push(y)}this.mousePointer=g.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new o,this._tempMatrix2=new o,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],d.events.once(e.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(l.MANAGER_BOOT),this.game.events.on(e.PRE_RENDER,this.preRender,this),this.game.events.once(e.DESTROY,this.destroy,this)},setCanvasOver:function(d){this.isOver=!0,this.events.emit(l.GAME_OVER,d)},setCanvasOut:function(d){this.isOver=!1,this.events.emit(l.GAME_OUT,d)},preRender:function(){var d=this.game.loop.now,g=this.game.loop.delta,m=this.game.scene.getScenes(!0,!0);this.time=d,this.events.emit(l.MANAGER_UPDATE);for(var y=0;y<m.length;y++){var w=m[y];if(w.sys.input&&w.sys.input.updatePoll(d,g)&&this.globalTopOnly)return}},setDefaultCursor:function(d){this.defaultCursor=d,this.canvas.style.cursor!==d&&(this.canvas.style.cursor=d)},setCursor:function(d){d.cursor&&(this.canvas.style.cursor=d.cursor)},resetCursor:function(d){d.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(d){d===void 0&&(d=1);var g=[];this.pointersTotal+d>10&&(d=10-this.pointersTotal);for(var m=0;m<d;m++){var y=this.pointers.length,w=new u(this,y);w.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(w),this.pointersTotal++,g.push(w)}return g},updateInputPlugins:function(d,g){var m=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var y=0;y<m.length;y++){var w=m[y];if(w.sys.input&&(w.sys.input.update(d,g)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(d){for(var g=this.pointers,m=[],y=0;y<d.changedTouches.length;y++)for(var w=d.changedTouches[y],x=1;x<this.pointersTotal;x++){var T=g[x];if(!T.active){T.touchstart(w,d),this.activePointer=T,m.push(T);break}}this.updateInputPlugins(i.TOUCH_START,m)},onTouchMove:function(d){for(var g=this.pointers,m=[],y=0;y<d.changedTouches.length;y++)for(var w=d.changedTouches[y],x=1;x<this.pointersTotal;x++){var T=g[x];if(T.active&&T.identifier===w.identifier){T.touchmove(w,d),this.activePointer=T,m.push(T);break}}this.updateInputPlugins(i.TOUCH_MOVE,m)},onTouchEnd:function(d){for(var g=this.pointers,m=[],y=0;y<d.changedTouches.length;y++)for(var w=d.changedTouches[y],x=1;x<this.pointersTotal;x++){var T=g[x];if(T.active&&T.identifier===w.identifier){T.touchend(w,d),m.push(T);break}}this.updateInputPlugins(i.TOUCH_END,m)},onTouchCancel:function(d){for(var g=this.pointers,m=[],y=0;y<d.changedTouches.length;y++)for(var w=d.changedTouches[y],x=1;x<this.pointersTotal;x++){var T=g[x];if(T.active&&T.identifier===w.identifier){T.touchcancel(w,d),m.push(T);break}}this.updateInputPlugins(i.TOUCH_CANCEL,m)},onMouseDown:function(d){var g=this.mousePointer;g.down(d),g.updateMotion(),this.activePointer=g,this.updateInputPlugins(i.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(d){var g=this.mousePointer;g.move(d),g.updateMotion(),this.activePointer=g,this.updateInputPlugins(i.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(d){var g=this.mousePointer;g.up(d),g.updateMotion(),this.activePointer=g,this.updateInputPlugins(i.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(d){var g=this.mousePointer;g.wheel(d),this.activePointer=g,this.updateInputPlugins(i.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(d){var g=this.mouse.locked;this.mousePointer.locked=g,this.events.emit(l.POINTERLOCK_CHANGE,d,g)},inputCandidate:function(d,g){var m=d.input;if(!m||!m.enabled||!m.alwaysEnabled&&!d.willRender(g))return!1;var y=!0,w=d.parentContainer;if(w)do{if(!w.willRender(g)){y=!1;break}w=w.parentContainer}while(w);return y},hitTest:function(d,g,m,y){y===void 0&&(y=this._tempHitTest);var w=this._tempPoint,x=m.scrollX,T=m.scrollY;y.length=0;var E=d.x,S=d.y;m.getWorldPoint(E,S,w),d.worldX=w.x,d.worldY=w.y;for(var C={x:0,y:0},A=this._tempMatrix,M=this._tempMatrix2,b=0;b<g.length;b++){var _=g[b];if(this.inputCandidate(_,m)){var P=w.x+x*_.scrollFactorX-x,L=w.y+T*_.scrollFactorY-T;_.parentContainer?(_.getWorldTransformMatrix(A,M),A.applyInverse(P,L,C)):h(P,L,_.x,_.y,_.rotation,_.scaleX,_.scaleY,C),this.pointWithinHitArea(_,C.x,C.y)&&y.push(_)}}return y},pointWithinHitArea:function(d,g,m){g+=d.displayOriginX,m+=d.displayOriginY;var y=d.input;return!(!y||!y.hitAreaCallback(y.hitArea,g,m,d)||(y.localX=g,y.localY=m,0))},pointWithinInteractiveObject:function(d,g,m){return!!d.hitArea&&(g+=d.gameObject.displayOriginX,m+=d.gameObject.displayOriginY,d.localX=g,d.localY=m,d.hitAreaCallback(d.hitArea,g,m,d))},transformPointer:function(d,g,m,y){var w=d.position,x=d.prevPosition;x.x=w.x,x.y=w.y;var T=this.scaleManager.transformX(g),E=this.scaleManager.transformY(m),S=d.smoothFactor;y&&S!==0?(w.x=T*S+x.x*(1-S),w.y=E*S+x.y*(1-S)):(w.x=T,w.y=E)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(e.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var d=0;d<this.pointers.length;d++)this.pointers[d].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});v.exports=c},65917:(v,p,t)=>{var f=t(38459),i=t(57133),n=t(69186),l=t(24293),e=t(51814),a=t(31354),r=t(76914),u=t(81385),s=t(87016),o=t(65210),h=t(26729),c=t(25738),d=t(30097),g=t(29815),m=t(53013),y=t(46236),w=t(75380),x=t(26813),T=t(12063),E=t(82671),S=t(90547),C=new n({Extends:h,initialize:function(A){h.call(this),this.scene=A,this.systems=A.sys,this.settings=A.sys.settings,this.manager=A.sys.game.input,this.pluginEvents=new h,this.enabled=!0,this.displayList,this.cameras,g.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var M={cancelled:!1};this._eventContainer={stopPropagation:function(){M.cancelled=!0}},this._eventData=M,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,A.sys.events.once(T.BOOT,this.boot,this),A.sys.events.on(T.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(T.DESTROY,this.destroy,this),this.pluginEvents.emit(o.BOOT)},start:function(){var A=this.systems.events;A.on(T.TRANSITION_START,this.transitionIn,this),A.on(T.TRANSITION_OUT,this.transitionOut,this),A.on(T.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(T.PRE_UPDATE,this.preUpdate,this),A.once(T.SHUTDOWN,this.shutdown,this),this.manager.events.on(o.GAME_OUT,this.onGameOut,this),this.manager.events.on(o.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(o.START)},onGameOver:function(A){this.isActive()&&this.emit(o.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(o.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(o.PRE_UPDATE);var A=this._pendingRemoval,M=this._pendingInsertion,b=A.length,_=M.length;if(b!==0||_!==0){for(var P=this._list,L=0;L<b;L++){var F=A[L],D=P.indexOf(F);D>-1&&(P.splice(D,1),this.clear(F,!0))}A.length=0,this._pendingRemoval.length=0,this._list=P.concat(M.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,M){if(!this.isActive())return!1;if(this.pluginEvents.emit(o.UPDATE,A,M),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var b,_=this.manager,P=_.pointers,L=_.pointersTotal;for(b=0;b<L;b++)P[b].updateMotion();if(this._list.length===0)return!1;var F=this.pollRate;if(F===-1)return!1;if(F>0){if(this._pollTimer-=M,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var D=!1;for(b=0;b<L;b++){var k=0,R=P[b];this._tempZones=[],this._temp=this.hitTestPointer(R),this.sortGameObjects(this._temp,R),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),k+=this.processOverOutEvents(R),this.getDragState(R)===2&&this.processDragThresholdEvent(R,A),k>0&&(D=!0)}return D},update:function(A,M){if(!this.isActive())return!1;for(var b=M.length,_=!1,P=0;P<b;P++){var L=0,F=M[P];switch(this._tempZones=[],this._temp=this.hitTestPointer(F),this.sortGameObjects(this._temp,F),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case l.MOUSE_DOWN:L+=this.processDragDownEvent(F),L+=this.processDownEvents(F),L+=this.processOverOutEvents(F);break;case l.MOUSE_UP:L+=this.processDragUpEvent(F),L+=this.processUpEvents(F),L+=this.processOverOutEvents(F);break;case l.TOUCH_START:L+=this.processDragDownEvent(F),L+=this.processDownEvents(F),L+=this.processOverEvents(F);break;case l.TOUCH_END:case l.TOUCH_CANCEL:L+=this.processDragUpEvent(F),L+=this.processUpEvents(F),L+=this.processOutEvents(F);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:L+=this.processDragMoveEvent(F),L+=this.processMoveEvents(F),L+=this.processOverOutEvents(F);break;case l.MOUSE_WHEEL:L+=this.processWheelEvent(F)}L>0&&(_=!0)}return this._updatedThisFrame=!0,_},clear:function(A,M){M===void 0&&(M=!1);var b=A.input;if(b){M||this.queueForRemoval(A),b.gameObject=void 0,b.target=void 0,b.hitArea=void 0,b.hitAreaCallback=void 0,b.callbackContext=void 0,A.input=null;var _=this._draggable.indexOf(A);return _>-1&&this._draggable.splice(_,1),(_=this._drag[0].indexOf(A))>-1&&this._drag[0].splice(_,1),(_=this._over[0].indexOf(A))>-1&&(this._over[0].splice(_,1),this.manager.resetCursor(b)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,M,b,_){return _===void 0&&(_=!1),A.input?A.input.enabled=!0:this.setHitArea(A,M,b),A.input&&_&&!A.input.dropZone&&(A.input.dropZone=_),this},hitTestPointer:function(A){for(var M=this.cameras.getCamerasBelowPointer(A),b=0;b<M.length;b++){for(var _=M[b],P=this.manager.hitTest(A,this._list,_),L=0;L<P.length;L++){var F=P[L];F.input.dropZone&&this._tempZones.push(F)}if(P.length>0)return A.camera=_,P}return A.camera=M[0],[]},processDownEvents:function(A){var M=0,b=this._temp,_=this._eventData,P=this._eventContainer;_.cancelled=!1;for(var L=!1,F=0;F<b.length;F++){var D=b[F];if(D.input){if(M++,D.emit(o.GAMEOBJECT_POINTER_DOWN,A,D.input.localX,D.input.localY,P),_.cancelled||!D.input){L=!0;break}if(this.emit(o.GAMEOBJECT_DOWN,A,D,P),_.cancelled||!D.input){L=!0;break}}}return!L&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(o.POINTER_DOWN,A,b):this.emit(o.POINTER_DOWN_OUTSIDE,A)),M},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,M){this._dragState[A.id]=M},processDragThresholdEvent:function(A,M){var b=!1,_=this.dragTimeThreshold,P=this.dragDistanceThreshold;if((P>0&&r(A.x,A.y,A.downX,A.downY)>=P||_>0&&M>=A.downTime+_)&&(b=!0),b)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(this.getDragState(A)!==3)return 0;for(var M=this._drag[A.id],b=0;b<M.length;b++){var _=M[b],P=_.input;P.dragState=2,P.dragStartX=_.x,P.dragStartY=_.y,P.dragStartXGlobal=A.worldX,P.dragStartYGlobal=A.worldY,P.dragX=P.dragStartXGlobal-P.dragStartX,P.dragY=P.dragStartYGlobal-P.dragStartY,_.emit(o.GAMEOBJECT_DRAG_START,A,P.dragX,P.dragY),this.emit(o.DRAG_START,A,_)}return this.setDragState(A,4),M.length},processDragDownEvent:function(A){var M=this._temp;if(this._draggable.length===0||M.length===0||!A.primaryDown||this.getDragState(A)!==0)return 0;this.setDragState(A,1);for(var b=[],_=0;_<M.length;_++){var P=M[_];P.input.draggable&&P.input.dragState===0&&b.push(P)}return b.length===0?(this.setDragState(A,0),0):(b.length>1&&(this.sortGameObjects(b,A),this.topOnly&&b.splice(1)),this._drag[A.id]=b,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(this.getDragState(A)===2&&this.processDragThresholdEvent(A,this.manager.game.loop.now),this.getDragState(A)!==4)return 0;for(var M=this._tempZones,b=this._drag[A.id],_=0;_<b.length;_++){var P,L,F=b[_],D=F.input,k=D.target;if(k){var R=M.indexOf(k);R===0?(F.emit(o.GAMEOBJECT_DRAG_OVER,A,k),this.emit(o.DRAG_OVER,A,F,k)):R>0?(F.emit(o.GAMEOBJECT_DRAG_LEAVE,A,k),this.emit(o.DRAG_LEAVE,A,F,k),D.target=M[0],k=D.target,F.emit(o.GAMEOBJECT_DRAG_ENTER,A,k),this.emit(o.DRAG_ENTER,A,F,k)):(F.emit(o.GAMEOBJECT_DRAG_LEAVE,A,k),this.emit(o.DRAG_LEAVE,A,F,k),M[0]?(D.target=M[0],k=D.target,F.emit(o.GAMEOBJECT_DRAG_ENTER,A,k),this.emit(o.DRAG_ENTER,A,F,k)):D.target=null)}else!k&&M[0]&&(D.target=M[0],k=D.target,F.emit(o.GAMEOBJECT_DRAG_ENTER,A,k),this.emit(o.DRAG_ENTER,A,F,k));if(F.parentContainer){var O=A.worldX-D.dragStartXGlobal,B=A.worldY-D.dragStartYGlobal,U=F.getParentRotation(),I=O*Math.cos(U)+B*Math.sin(U),Y=B*Math.cos(U)-O*Math.sin(U);I*=1/F.parentContainer.scaleX,Y*=1/F.parentContainer.scaleY,P=I+D.dragStartX,L=Y+D.dragStartY}else P=A.worldX-D.dragX,L=A.worldY-D.dragY;F.emit(o.GAMEOBJECT_DRAG,A,P,L),this.emit(o.DRAG,A,F,P,L)}return b.length},processDragUpEvent:function(A){for(var M=this._drag[A.id],b=0;b<M.length;b++){var _=M[b],P=_.input;if(P&&P.dragState===2){P.dragState=0,P.dragX=P.localX-_.displayOriginX,P.dragY=P.localY-_.displayOriginY;var L=!1,F=P.target;F&&(_.emit(o.GAMEOBJECT_DROP,A,F),this.emit(o.DROP,A,_,F),P.target=null,L=!0),_.input&&(_.emit(o.GAMEOBJECT_DRAG_END,A,P.dragX,P.dragY,L),this.emit(o.DRAG_END,A,_,L))}}return this.setDragState(A,0),M.splice(0),0},processMoveEvents:function(A){var M=0,b=this._temp,_=this._eventData,P=this._eventContainer;_.cancelled=!1;for(var L=!1,F=0;F<b.length;F++){var D=b[F];if(D.input){if(M++,D.emit(o.GAMEOBJECT_POINTER_MOVE,A,D.input.localX,D.input.localY,P),_.cancelled||!D.input){L=!0;break}if(this.emit(o.GAMEOBJECT_MOVE,A,D,P),_.cancelled||!D.input){L=!0;break}if(this.topOnly)break}}return L||this.emit(o.POINTER_MOVE,A,b),M},processWheelEvent:function(A){var M=0,b=this._temp,_=this._eventData,P=this._eventContainer;_.cancelled=!1;for(var L=!1,F=A.deltaX,D=A.deltaY,k=A.deltaZ,R=0;R<b.length;R++){var O=b[R];if(O.input){if(M++,O.emit(o.GAMEOBJECT_POINTER_WHEEL,A,F,D,k,P),_.cancelled||!O.input){L=!0;break}if(this.emit(o.GAMEOBJECT_WHEEL,A,O,F,D,k,P),_.cancelled||!O.input){L=!0;break}}}return L||this.emit(o.POINTER_WHEEL,A,b,F,D,k),M},processOverEvents:function(A){var M=this._temp,b=0,_=M.length,P=[];if(_>0){var L=this.manager,F=this._eventData,D=this._eventContainer;F.cancelled=!1;for(var k=!1,R=0;R<_;R++){var O=M[R];if(O.input){if(P.push(O),L.setCursor(O.input),O.emit(o.GAMEOBJECT_POINTER_OVER,A,O.input.localX,O.input.localY,D),b++,F.cancelled||!O.input){k=!0;break}if(this.emit(o.GAMEOBJECT_OVER,A,O,D),F.cancelled||!O.input){k=!0;break}}}k||this.emit(o.POINTER_OVER,A,P)}return this._over[A.id]=P,b},processOutEvents:function(A){var M=this._over[A.id],b=0,_=M.length;if(_>0){var P=this.manager,L=this._eventData,F=this._eventContainer;L.cancelled=!1;var D=!1;this.sortGameObjects(M,A);for(var k=0;k<_;k++){var R=M[k];if((R=M[k]).input){if(P.resetCursor(R.input),R.emit(o.GAMEOBJECT_POINTER_OUT,A,F),b++,L.cancelled||!R.input){D=!0;break}if(this.emit(o.GAMEOBJECT_OUT,A,R,F),L.cancelled||!R.input){D=!0;break}D||this.emit(o.POINTER_OUT,A,M)}}this._over[A.id]=[]}return b},processOverOutEvents:function(A){var M,b,_=this._temp,P=[],L=[],F=[],D=this._over[A.id],k=this._drag[A.id],R=this.manager;for(M=0;M<D.length;M++)b=D[M],_.indexOf(b)===-1&&k.indexOf(b)===-1?P.push(b):F.push(b);for(M=0;M<_.length;M++)b=_[M],D.indexOf(b)===-1&&L.push(b);var O=P.length,B=0,U=this._eventData,I=this._eventContainer;U.cancelled=!1;var Y=!1;if(O>0){for(this.sortGameObjects(P,A),M=0;M<O;M++)if((b=P[M]).input){if(R.resetCursor(b.input),b.emit(o.GAMEOBJECT_POINTER_OUT,A,I),B++,U.cancelled||!b.input){Y=!0;break}if(this.emit(o.GAMEOBJECT_OUT,A,b,I),U.cancelled||!b.input){Y=!0;break}}Y||this.emit(o.POINTER_OUT,A,P)}if(O=L.length,U.cancelled=!1,Y=!1,O>0){for(this.sortGameObjects(L,A),M=0;M<O;M++)if((b=L[M]).input){if(R.setCursor(b.input),b.emit(o.GAMEOBJECT_POINTER_OVER,A,b.input.localX,b.input.localY,I),B++,U.cancelled||!b.input){Y=!0;break}if(this.emit(o.GAMEOBJECT_OVER,A,b,I),U.cancelled||!b.input){Y=!0;break}}Y||this.emit(o.POINTER_OVER,A,L)}return D=F.concat(L),this._over[A.id]=this.sortGameObjects(D,A),B},processUpEvents:function(A){var M=this._temp,b=this._eventData,_=this._eventContainer;b.cancelled=!1;for(var P=!1,L=0;L<M.length;L++){var F=M[L];if(F.input){if(F.emit(o.GAMEOBJECT_POINTER_UP,A,F.input.localX,F.input.localY,_),b.cancelled||!F.input){P=!0;break}if(this.emit(o.GAMEOBJECT_UP,A,F,_),b.cancelled||!F.input){P=!0;break}}}return!P&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(o.POINTER_UP,A,M):this.emit(o.POINTER_UP_OUTSIDE,A)),M.length},queueForInsertion:function(A){return this._pendingInsertion.indexOf(A)===-1&&this._list.indexOf(A)===-1&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,M){M===void 0&&(M=!0),Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var _=A[b];_.input.draggable=M;var P=this._draggable.indexOf(_);M&&P===-1?this._draggable.push(_):!M&&P>-1&&this._draggable.splice(P,1)}return this},makePixelPerfect:function(A){A===void 0&&(A=1);var M=this.systems.textures;return a(M,A)},setHitArea:function(A,M,b){if(M===void 0)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var _=!1,P=!1,L=!1,F=!1,D=!1,k=!0;if(m(M)){var R=M;M=c(R,"hitArea",null),b=c(R,"hitAreaCallback",null),_=c(R,"draggable",!1),P=c(R,"dropZone",!1),L=c(R,"cursor",!1),F=c(R,"useHandCursor",!1),D=c(R,"pixelPerfect",!1);var O=c(R,"alphaTolerance",1);D&&(M={},b=this.makePixelPerfect(O)),M&&b||(this.setHitAreaFromTexture(A),k=!1)}else typeof M!="function"||b||(b=M,M={});for(var B=0;B<A.length;B++){var U=A[B];if(D&&U.type==="Container")console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var I=U.input?U.input:e(U,M,b);I.customHitArea=k,I.dropZone=P,I.cursor=F?"pointer":L,U.input=I,_&&this.setDraggable(U),this.queueForInsertion(U)}}return this},setHitAreaCircle:function(A,M,b,_,P){P===void 0&&(P=i);var L=new f(M,b,_);return this.setHitArea(A,L,P)},setHitAreaEllipse:function(A,M,b,_,P,L){L===void 0&&(L=s);var F=new u(M,b,_,P);return this.setHitArea(A,F,L)},setHitAreaFromTexture:function(A,M){M===void 0&&(M=x),Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var _=A[b],P=_.frame,L=0,F=0;_.width?(L=_.width,F=_.height):P&&(L=P.realWidth,F=P.realHeight),_.type!=="Container"||L!==0&&F!==0?L!==0&&F!==0&&(_.input=e(_,new w(0,0,L,F),M),this.queueForInsertion(_)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(A,M,b,_,P,L){L===void 0&&(L=x);var F=new w(M,b,_,P);return this.setHitArea(A,F,L)},setHitAreaTriangle:function(A,M,b,_,P,L,F,D){D===void 0&&(D=S);var k=new E(M,b,_,P,L,F);return this.setHitArea(A,k,D)},enableDebug:function(A,M){M===void 0&&(M=65280);var b=A.input;if(!b||!b.hitArea)return this;var _=b.hitArea,P=_.type,L=b.hitAreaDebug,F=this.systems.add,D=this.systems.updateList;L&&(D.remove(L),L.destroy(),L=null);var k=0,R=0;switch(P){case d.CIRCLE:L=F.arc(0,0,_.radius),k=_.x-_.radius,R=_.y-_.radius;break;case d.ELLIPSE:L=F.ellipse(0,0,_.width,_.height),k=_.x-_.width/2,R=_.y-_.height/2;break;case d.LINE:L=F.line(0,0,_.x1,_.y1,_.x2,_.y2);break;case d.POLYGON:L=F.polygon(0,0,_.points);break;case d.RECTANGLE:L=F.rectangle(0,0,_.width,_.height),k=_.x,R=_.y;break;case d.TRIANGLE:L=F.triangle(0,0,_.x1,_.y1,_.x2,_.y2,_.x3,_.y3)}return L&&(L.isFilled=!1,L.preUpdate=function(){L.setStrokeStyle(1/A.scale,M),L.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var O=A.x,B=A.y,U=A.rotation,I=A.scaleX,Y=A.scaleY;if(A.parentContainer){var N=A.getWorldTransformMatrix();O=N.tx,B=N.ty,U=N.rotation,I=N.scaleX,Y=N.scaleY}L.setRotation(U),L.setScale(I,Y),L.setPosition(O+k,B+R),L.setScrollFactor(A.scrollFactorX,A.scrollFactorY),L.setDepth(A.depth)},D.add(L),b.hitAreaDebug=L),this},removeDebug:function(A){var M=A.input;if(M&&M.hitAreaDebug){var b=M.hitAreaDebug;this.systems.updateList.remove(b),b.destroy(),M.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,M){if(A.length<2)return A;var b=M.camera.renderList;return A.sort(function(_,P){return b.indexOf(P)-b.indexOf(_)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,M){if(A.parentContainer||M.parentContainer){if(A.parentContainer===M.parentContainer)return M.parentContainer.getIndex(M)-A.parentContainer.getIndex(A);if(A.parentContainer===M)return-1;if(M.parentContainer===A)return 1;for(var b=A.getIndexList(),_=M.getIndexList(),P=Math.min(b.length,_.length),L=0;L<P;L++){var F=b[L],D=_[L];if(F!==D)return D-F}return _.length-b.length}return this.displayList.getIndex(M)-this.displayList.getIndex(A)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(o.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var A=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var M=this.manager;M.canvas.style.cursor=M.defaultCursor;var b=this.systems.events;b.off(T.TRANSITION_START,this.transitionIn,this),b.off(T.TRANSITION_OUT,this.transitionOut,this),b.off(T.TRANSITION_COMPLETE,this.transitionComplete,this),b.off(T.PRE_UPDATE,this.preUpdate,this),M.events.off(o.GAME_OUT,this.onGameOut,this),M.events.off(o.GAME_OVER,this.onGameOver,this),b.off(T.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(o.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(T.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",C,"input"),v.exports=C},29815:(v,p,t)=>{var f=t(76076),i={},n={register:function(l,e,a,r,u){i[l]={plugin:e,mapping:a,settingsKey:r,configKey:u}},getPlugin:function(l){return i[l]},install:function(l){var e=l.scene.sys,a=e.settings.input,r=e.game.config;for(var u in i){var s=i[u].plugin,o=i[u].mapping,h=i[u].settingsKey,c=i[u].configKey;f(a,h,r[c])&&(l[o]=new s(l))}},remove:function(l){i.hasOwnProperty(l)&&delete i[l]}};v.exports=n},86042:(v,p,t)=>{var f=t(53517),i=t(69186),n=t(76914),l=t(97026),e=t(38153),a=t(17321),r=t(89771),u=new i({initialize:function(s,o){this.manager=s,this.id=o,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new a,this.prevPosition=new a,this.midPoint=new a(-1,-1),this.velocity=new a,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=o===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(s){var o=s.getWorldPoint(this.x,this.y);return this.worldX=o.x,this.worldY=o.y,this},positionToCamera:function(s,o){return s.getWorldPoint(this.x,this.y,o)},updateMotion:function(){var s=this.position.x,o=this.position.y,h=this.midPoint.x,c=this.midPoint.y;if(s!==h||o!==c){var d=e(this.motionFactor,h,s),g=e(this.motionFactor,c,o);l(d,s,.1)&&(d=s),l(g,o,.1)&&(g=o),this.midPoint.set(d,g);var m=s-d,y=o-g;this.velocity.set(m,y),this.angle=f(d,g,s,o),this.distance=Math.sqrt(m*m+y*y)}},up:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=s.timeStamp,this.wasTouch=!1)},down:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),r.macOS&&s.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=s.timeStamp),this.wasTouch=!1},move:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.locked&&(this.movementX=s.movementX||s.mozMovementX||s.webkitMovementX||0,this.movementY=s.movementY||s.mozMovementY||s.webkitMovementY||0),this.moveTime=s.timeStamp,this.wasTouch=!1},wheel:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.deltaX=s.deltaX,this.deltaY=s.deltaY,this.deltaZ=s.deltaZ,this.wasTouch=!1},touchstart:function(s,o){s.pointerId&&(this.pointerId=s.pointerId),this.identifier=s.identifier,this.target=s.target,this.active=!0,this.buttons=1,this.event=o,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=o.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(s,o){this.event=o,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.moveTime=o.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(s,o){this.buttons=0,this.event=o,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=o.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(s,o){this.buttons=0,this.event=o,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=o.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?f(this.downX,this.downY,this.x,this.y):f(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(s,o){s===void 0&&(s=10),o===void 0&&(o=[]);for(var h=this.prevPosition.x,c=this.prevPosition.y,d=this.position.x,g=this.position.y,m=0;m<s;m++){var y=1/s*m;o[m]={x:e(y,h,d),y:e(y,c,g)}}return o},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(s){this.position.x=s}},y:{get:function(){return this.position.y},set:function(s){this.position.y=s}},time:{get:function(){return this.event?this.event.timeStamp:0}}});v.exports=u},24293:v=>{v.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},31860:v=>{v.exports="boot"},25026:v=>{v.exports="destroy"},53677:v=>{v.exports="dragend"},38611:v=>{v.exports="dragenter"},10937:v=>{v.exports="drag"},79546:v=>{v.exports="dragleave"},78268:v=>{v.exports="dragover"},98451:v=>{v.exports="dragstart"},74955:v=>{v.exports="drop"},43730:v=>{v.exports="gameobjectdown"},79577:v=>{v.exports="dragend"},60943:v=>{v.exports="dragenter"},3955:v=>{v.exports="drag"},82207:v=>{v.exports="dragleave"},79243:v=>{v.exports="dragover"},73062:v=>{v.exports="dragstart"},44269:v=>{v.exports="drop"},31905:v=>{v.exports="gameobjectmove"},13979:v=>{v.exports="gameobjectout"},18446:v=>{v.exports="gameobjectover"},83718:v=>{v.exports="pointerdown"},91330:v=>{v.exports="pointermove"},51807:v=>{v.exports="pointerout"},60192:v=>{v.exports="pointerover"},90845:v=>{v.exports="pointerup"},12742:v=>{v.exports="wheel"},29959:v=>{v.exports="gameobjectup"},72916:v=>{v.exports="gameobjectwheel"},660:v=>{v.exports="gameout"},74501:v=>{v.exports="gameover"},9095:v=>{v.exports="boot"},58700:v=>{v.exports="process"},71290:v=>{v.exports="update"},83412:v=>{v.exports="pointerlockchange"},33509:v=>{v.exports="pointerdown"},56082:v=>{v.exports="pointerdownoutside"},76889:v=>{v.exports="pointermove"},52606:v=>{v.exports="pointerout"},84136:v=>{v.exports="pointerover"},88399:v=>{v.exports="pointerup"},72621:v=>{v.exports="pointerupoutside"},20495:v=>{v.exports="wheel"},34445:v=>{v.exports="preupdate"},6858:v=>{v.exports="shutdown"},11600:v=>{v.exports="start"},58569:v=>{v.exports="update"},65210:(v,p,t)=>{v.exports={BOOT:t(31860),DESTROY:t(25026),DRAG_END:t(53677),DRAG_ENTER:t(38611),DRAG:t(10937),DRAG_LEAVE:t(79546),DRAG_OVER:t(78268),DRAG_START:t(98451),DROP:t(74955),GAME_OUT:t(660),GAME_OVER:t(74501),GAMEOBJECT_DOWN:t(43730),GAMEOBJECT_DRAG_END:t(79577),GAMEOBJECT_DRAG_ENTER:t(60943),GAMEOBJECT_DRAG:t(3955),GAMEOBJECT_DRAG_LEAVE:t(82207),GAMEOBJECT_DRAG_OVER:t(79243),GAMEOBJECT_DRAG_START:t(73062),GAMEOBJECT_DROP:t(44269),GAMEOBJECT_MOVE:t(31905),GAMEOBJECT_OUT:t(13979),GAMEOBJECT_OVER:t(18446),GAMEOBJECT_POINTER_DOWN:t(83718),GAMEOBJECT_POINTER_MOVE:t(91330),GAMEOBJECT_POINTER_OUT:t(51807),GAMEOBJECT_POINTER_OVER:t(60192),GAMEOBJECT_POINTER_UP:t(90845),GAMEOBJECT_POINTER_WHEEL:t(12742),GAMEOBJECT_UP:t(29959),GAMEOBJECT_WHEEL:t(72916),MANAGER_BOOT:t(9095),MANAGER_PROCESS:t(58700),MANAGER_UPDATE:t(71290),POINTER_DOWN:t(33509),POINTER_DOWN_OUTSIDE:t(56082),POINTER_MOVE:t(76889),POINTER_OUT:t(52606),POINTER_OVER:t(84136),POINTER_UP:t(88399),POINTER_UP_OUTSIDE:t(72621),POINTER_WHEEL:t(20495),POINTERLOCK_CHANGE:t(83412),PRE_UPDATE:t(34445),SHUTDOWN:t(6858),START:t(11600),UPDATE:t(58569)}},72243:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n){this.pad=i,this.events=i.events,this.index=n,this.value=0,this.threshold=.1},update:function(i){this.value=i},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});v.exports=f},24884:(v,p,t)=>{var f=t(69186),i=t(44152),n=new f({initialize:function(l,e){this.pad=l,this.events=l.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(l){this.value=l;var e=this.pad,a=this.index;l>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(i.BUTTON_DOWN,e,this,l),this.pad.emit(i.GAMEPAD_BUTTON_DOWN,a,l,this)):this.pressed&&(this.pressed=!1,this.events.emit(i.BUTTON_UP,e,this,l),this.pad.emit(i.GAMEPAD_BUTTON_UP,a,l,this))},destroy:function(){this.pad=null,this.events=null}});v.exports=n},20306:(v,p,t)=>{var f=t(72243),i=t(24884),n=t(69186),l=t(26729),e=t(17321),a=new n({Extends:l,initialize:function(r,u){l.call(this),this.manager=r,this.pad=u,this.id=u.id,this.index=u.index;for(var s=[],o=0;o<u.buttons.length;o++)s.push(new i(this,o));this.buttons=s;var h=[];for(o=0;o<u.axes.length;o++)h.push(new f(this,o));this.axes=h,this.vibration=u.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=s[14]?s[14]:c,this._LCRight=s[15]?s[15]:c,this._LCTop=s[12]?s[12]:c,this._LCBottom=s[13]?s[13]:c,this._RCLeft=s[2]?s[2]:c,this._RCRight=s[1]?s[1]:c,this._RCTop=s[3]?s[3]:c,this._RCBottom=s[0]?s[0]:c,this._FBLeftTop=s[4]?s[4]:c,this._FBLeftBottom=s[6]?s[6]:c,this._FBRightTop=s[5]?s[5]:c,this._FBRightBottom=s[7]?s[7]:c;var d={value:0};this._HAxisLeft=h[0]?h[0]:d,this._VAxisLeft=h[1]?h[1]:d,this._HAxisRight=h[2]?h[2]:d,this._VAxisRight=h[3]?h[3]:d,this.leftStick=new e,this.rightStick=new e,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(r){return this.axes[r].getValue()},setAxisThreshold:function(r){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=r},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(r){return this.buttons[r].value},isButtonDown:function(r){return this.buttons[r].pressed},update:function(r){if(!(r.timestamp<this._created)){var u,s=this.buttons,o=r.buttons,h=s.length;for(u=0;u<h;u++)s[u].update(o[u].value);var c=this.axes,d=r.axes;for(h=c.length,u=0;u<h;u++)c[u].update(d[u]);h>=2&&(this.leftStick.set(c[0].getValue(),c[1].getValue()),h>=4&&this.rightStick.set(c[2].getValue(),c[3].getValue()))}},destroy:function(){var r;for(this.removeAllListeners(),this.manager=null,this.pad=null,r=0;r<this.buttons.length;r++)this.buttons[r].destroy();for(r=0;r<this.axes.length;r++)this.axes[r].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});v.exports=a},26269:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(44152),l=t(20306),e=t(76076),a=t(29815),r=t(65210),u=new f({Extends:i,initialize:function(s){i.call(this),this.scene=s.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=s,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,s.pluginEvents.once(r.BOOT,this.boot,this),s.pluginEvents.on(r.START,this.start,this)},boot:function(){var s=this.scene.sys.game,o=this.settings.input,h=s.config;this.enabled=e(o,"gamepad",h.inputGamepad)&&s.device.input.gamepads,this.target=e(o,"gamepad.target",h.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var s=this,o=this.target,h=function(c){!c.defaultPrevented&&s.isActive()&&(s.refreshPads(),s.queue.push(c))};this.onGamepadHandler=h,o.addEventListener("gamepadconnected",h,!1),o.addEventListener("gamepaddisconnected",h,!1),this.sceneInputPlugin.pluginEvents.on(r.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(r.UPDATE,this.update);for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].removeAllListeners()},disconnectAll:function(){for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].pad.connected=!1},refreshPads:function(){var s=navigator.getGamepads();if(s)for(var o=this.gamepads,h=0;h<s.length;h++){var c=s[h];if(c){var d=c.id,g=c.index,m=o[g];if(m)m.id!==d?(m.destroy(),o[g]=new l(this,c)):m.update(c);else{var y=new l(this,c);o[g]=y,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=y):this._pad3=y:this._pad2=y:this._pad1=y}}}else this.disconnectAll()},getAll:function(){for(var s=[],o=this.gamepads,h=0;h<o.length;h++)o[h]&&s.push(o[h]);return s},getPad:function(s){for(var o=this.gamepads,h=0;h<o.length;h++)if(o[h]&&o[h].index===s)return o[h]},update:function(){if(this.enabled){this.refreshPads();var s=this.queue.length;if(s!==0)for(var o=this.queue.splice(0,s),h=0;h<s;h++){var c=o[h],d=this.getPad(c.gamepad.index);c.type==="gamepadconnected"?this.emit(n.CONNECTED,d,c):c.type==="gamepaddisconnected"&&this.emit(n.DISCONNECTED,d,c)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var s=0;s<this.gamepads.length;s++)this.gamepads[s]&&this.gamepads[s].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});a.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),v.exports=u},46491:v=>{v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},54217:v=>{v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},32841:v=>{v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},63069:(v,p,t)=>{v.exports={DUALSHOCK_4:t(54217),SNES_USB:t(46491),XBOX_360:t(32841)}},83354:v=>{v.exports="down"},86957:v=>{v.exports="up"},85772:v=>{v.exports="connected"},43956:v=>{v.exports="disconnected"},85626:v=>{v.exports="down"},47644:v=>{v.exports="up"},44152:(v,p,t)=>{v.exports={BUTTON_DOWN:t(83354),BUTTON_UP:t(86957),CONNECTED:t(85772),DISCONNECTED:t(43956),GAMEPAD_BUTTON_DOWN:t(85626),GAMEPAD_BUTTON_UP:t(47644)}},26428:(v,p,t)=>{v.exports={Axis:t(72243),Button:t(24884),Events:t(44152),Gamepad:t(20306),GamepadPlugin:t(26269),Configs:t(63069)}},74353:(v,p,t)=>{var f=t(24293),i=t(72646),n={CreatePixelPerfectHandler:t(31354),CreateInteractiveObject:t(51814),Events:t(65210),Gamepad:t(26428),InputManager:t(79976),InputPlugin:t(65917),InputPluginCache:t(29815),Keyboard:t(586),Mouse:t(19845),Pointer:t(86042),Touch:t(34954)};n=i(!1,n,f),v.exports=n},8397:(v,p,t)=>{var f=t(63083),i=t(69186),n=t(24496),l=t(65210),e=t(29413),a=t(45733),r=new i({initialize:function(u){this.manager=u,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=a,this.onKeyUp=a,u.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(o){if(!o.defaultPrevented&&u.enabled&&u.manager){u.queue.push(o),u.manager.events.emit(l.MANAGER_PROCESS);var h=o.altKey||o.ctrlKey||o.shiftKey||o.metaKey;u.preventDefault&&!h&&u.captures.indexOf(o.keyCode)>-1&&o.preventDefault()}},this.onKeyUp=function(o){if(!o.defaultPrevented&&u.enabled&&u.manager){u.queue.push(o),u.manager.events.emit(l.MANAGER_PROCESS);var h=o.altKey||o.ctrlKey||o.shiftKey||o.metaKey;u.preventDefault&&!h&&u.captures.indexOf(o.keyCode)>-1&&o.preventDefault()}};var s=this.target;s&&(s.addEventListener("keydown",this.onKeyDown,!1),s.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var s=this.captures,o=0;o<u.length;o++){var h=u[o];typeof h=="string"&&(h=e[h.trim().toUpperCase()]),s.indexOf(h)===-1&&s.push(h)}this.preventDefault=s.length>0},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var s=this.captures,o=0;o<u.length;o++){var h=u[o];typeof h=="string"&&(h=e[h.toUpperCase()]),f(s,h)}this.preventDefault=s.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});v.exports=r},84836:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(88199),l=t(24496),e=t(76076),a=t(65210),r=t(29815),u=t(44265),s=t(29413),o=t(6914),h=t(17868),c=t(12063),d=t(99e3),g=new f({Extends:i,initialize:function(m){i.call(this),this.game=m.systems.game,this.scene=m.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=m,this.manager=m.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,m.pluginEvents.once(a.BOOT,this.boot,this),m.pluginEvents.on(a.START,this.start,this)},boot:function(){var m=this.settings.input;this.enabled=e(m,"keyboard",!0);var y=e(m,"keyboard.capture",null);y&&this.addCaptures(y),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(a.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(c.PAUSE,this.resetKeys,this),this.scene.sys.events.on(c.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(m){return this.manager.addCapture(m),this},removeCapture:function(m){return this.manager.removeCapture(m),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:s.UP,down:s.DOWN,left:s.LEFT,right:s.RIGHT,space:s.SPACE,shift:s.SHIFT})},addKeys:function(m,y,w){y===void 0&&(y=!0),w===void 0&&(w=!1);var x={};if(typeof m=="string"){m=m.split(",");for(var T=0;T<m.length;T++){var E=m[T].trim();E&&(x[E]=this.addKey(E,y,w))}}else for(var S in m)x[S]=this.addKey(m[S],y,w);return x},addKey:function(m,y,w){y===void 0&&(y=!0),w===void 0&&(w=!1);var x=this.keys;if(m instanceof u){var T=x.indexOf(m);return T>-1?x[T]=m:x[m.keyCode]=m,y&&this.addCapture(m.keyCode),m.setEmitOnRepeat(w),m}return typeof m=="string"&&(m=s[m.toUpperCase()]),x[m]||(x[m]=new u(this,m),y&&this.addCapture(m),x[m].setEmitOnRepeat(w)),x[m]},removeKey:function(m,y){y===void 0&&(y=!1);var w,x=this.keys;if(m instanceof u){var T=x.indexOf(m);T>-1&&(w=this.keys[T],this.keys[T]=void 0)}else typeof m=="string"&&(m=s[m.toUpperCase()]);return x[m]&&(w=x[m],x[m]=void 0),w&&(w.plugin=null,y&&w.destroy()),this},removeAllKeys:function(m){for(var y=this.keys,w=0;w<y.length;w++){var x=y[w];x&&(y[w]=void 0,m&&x.destroy())}return this},createCombo:function(m,y){return new o(this,m,y)},checkDown:function(m,y){if(y===void 0&&(y=0),this.enabled&&m.isDown){var w=d(this.time-m.timeDown,y);if(w>m._tick)return m._tick=w,!0}return!1},update:function(){var m=this.manager.queue,y=m.length;if(this.isActive()&&y!==0)for(var w=this.keys,x=0;x<y;x++){var T=m[x],E=T.keyCode,S=w[E],C=!1;T.cancelled===void 0&&(T.cancelled=0,T.stopImmediatePropagation=function(){T.cancelled=1},T.stopPropagation=function(){T.cancelled=-1}),T.cancelled!==-1&&(E===this.prevCode&&T.timeStamp===this.prevTime&&T.type===this.prevType||(this.prevCode=E,this.prevTime=T.timeStamp,this.prevType=T.type,T.type==="keydown"?(S&&(C=S.isDown,S.onDown(T)),T.cancelled||S&&C||(h[E]&&this.emit(n.KEY_DOWN+h[E],T),T.cancelled||this.emit(n.ANY_KEY_DOWN,T))):(S&&S.onUp(T),T.cancelled||(h[E]&&this.emit(n.KEY_UP+h[E],T),T.cancelled||this.emit(n.ANY_KEY_UP,T))),T.cancelled===1&&(T.cancelled=0)))}},resetKeys:function(){for(var m=this.keys,y=0;y<m.length;y++)m[y]&&m[y].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(a.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(c.PAUSE,this.resetKeys,this),this.scene.sys.events.off(c.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var m=this.keys,y=0;y<m.length;y++)m[y]&&m[y].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});r.register("KeyboardPlugin",g,"keyboard","keyboard","inputKeyboard"),v.exports=g},19475:v=>{v.exports=function(p,t){return t.timeLastMatched=p.timeStamp,t.index++,t.index===t.size||(t.current=t.keyCodes[t.index],!1)}},6914:(v,p,t)=>{var f=t(69186),i=t(88199),n=t(25738),l=t(67845),e=t(69441),a=new f({initialize:function(r,u,s){if(s===void 0&&(s={}),u.length<2)return!1;this.manager=r,this.enabled=!0,this.keyCodes=[];for(var o=0;o<u.length;o++){var h=u[o];typeof h=="string"?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):typeof h=="number"?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=n(s,"resetOnWrongKey",!0),this.maxKeyDelay=n(s,"maxKeyDelay",0),this.resetOnMatch=n(s,"resetOnMatch",!1),this.deleteOnMatch=n(s,"deleteOnMatch",!1);var c=this;this.onKeyDown=function(d){!c.matched&&c.enabled&&l(d,c)&&(c.manager.emit(i.COMBO_MATCH,c,d),c.resetOnMatch?e(c):c.deleteOnMatch&&c.destroy())},this.manager.on(i.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(i.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});v.exports=a},67845:(v,p,t)=>{var f=t(19475);v.exports=function(i,n){if(n.matched)return!0;var l=!1,e=!1;if(i.keyCode===n.current)if(n.index>0&&n.maxKeyDelay>0){var a=n.timeLastMatched+n.maxKeyDelay;i.timeStamp<=a&&(e=!0,l=f(i,n))}else e=!0,l=f(i,n);return!e&&n.resetOnWrongKey&&(n.index=0,n.current=n.keyCodes[0]),l&&(n.timeLastMatched=i.timeStamp,n.matched=!0,n.timeMatched=i.timeStamp),l}},69441:v=>{v.exports=function(p){return p.current=p.keyCodes[0],p.index=0,p.timeLastMatched=0,p.matched=!1,p.timeMatched=0,p}},21754:v=>{v.exports="keydown"},63023:v=>{v.exports="keyup"},60248:v=>{v.exports="keycombomatch"},52033:v=>{v.exports="down"},42675:v=>{v.exports="keydown-"},53422:v=>{v.exports="keyup-"},3064:v=>{v.exports="up"},88199:(v,p,t)=>{v.exports={ANY_KEY_DOWN:t(21754),ANY_KEY_UP:t(63023),COMBO_MATCH:t(60248),DOWN:t(52033),KEY_DOWN:t(42675),KEY_UP:t(53422),UP:t(3064)}},586:(v,p,t)=>{v.exports={Events:t(88199),KeyboardManager:t(8397),KeyboardPlugin:t(84836),Key:t(44265),KeyCodes:t(29413),KeyCombo:t(6914),AdvanceKeyCombo:t(19475),ProcessKeyCombo:t(67845),ResetKeyCombo:t(69441),JustDown:t(41808),JustUp:t(49117),DownDuration:t(52701),UpDuration:t(97177)}},52701:v=>{v.exports=function(p,t){t===void 0&&(t=50);var f=p.plugin.game.loop.time-p.timeDown;return p.isDown&&f<t}},41808:v=>{v.exports=function(p){return!!p._justDown&&(p._justDown=!1,!0)}},49117:v=>{v.exports=function(p){return!!p._justUp&&(p._justUp=!1,!0)}},44265:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(88199),l=new f({Extends:i,initialize:function(e,a){i.call(this),this.plugin=e,this.keyCode=a,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(e){return this.emitOnRepeat=e,this},onDown:function(e){this.originalEvent=e,this.enabled&&(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.location=e.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,e):(this.isDown=!0,this.isUp=!1,this.timeDown=e.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,e)))},onUp:function(e){this.originalEvent=e,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=e.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,e))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});v.exports=l},29413:v=>{v.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},17868:(v,p,t)=>{var f=t(29413),i={};for(var n in f)i[f[n]]=n;v.exports=i},97177:v=>{v.exports=function(p,t){t===void 0&&(t=50);var f=p.plugin.game.loop.time-p.timeUp;return p.isUp&&f<t}},35749:(v,p,t)=>{var f=t(69186),i=t(61052),n=t(65210),l=t(45733),e=new f({initialize:function(a){this.manager=a,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,a.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputMouse,this.target=a.inputMouseEventTarget,this.passive=a.inputMousePassive,this.preventDefaultDown=a.inputMousePreventDefaultDown,this.preventDefaultUp=a.inputMousePreventDefaultUp,this.preventDefaultMove=a.inputMousePreventDefaultMove,this.preventDefaultWheel=a.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},requestPointerLock:function(){if(i.pointerLock){var a=this.target;a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock,a.requestPointerLock()}},releasePointerLock:function(){i.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var a=this.target;if(a){var r=this,u=this.manager,s=u.canvas,o=window&&window.focus&&u.game.config.autoFocus;this.onMouseMove=function(c){!c.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseMove(c),r.preventDefaultMove&&c.preventDefault())},this.onMouseDown=function(c){o&&window.focus(),!c.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseDown(c),r.preventDefaultDown&&c.target===s&&c.preventDefault())},this.onMouseDownWindow=function(c){!c.defaultPrevented&&r.enabled&&u&&u.enabled&&c.target!==s&&u.onMouseDown(c)},this.onMouseUp=function(c){!c.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseUp(c),r.preventDefaultUp&&c.target===s&&c.preventDefault())},this.onMouseUpWindow=function(c){!c.defaultPrevented&&r.enabled&&u&&u.enabled&&c.target!==s&&u.onMouseUp(c)},this.onMouseOver=function(c){!c.defaultPrevented&&r.enabled&&u&&u.enabled&&u.setCanvasOver(c)},this.onMouseOut=function(c){!c.defaultPrevented&&r.enabled&&u&&u.enabled&&u.setCanvasOut(c)},this.onMouseWheel=function(c){!c.defaultPrevented&&r.enabled&&u&&u.enabled&&u.onMouseWheel(c),r.preventDefaultWheel&&c.target===s&&c.preventDefault()};var h={passive:!0};if(a.addEventListener("mousemove",this.onMouseMove),a.addEventListener("mousedown",this.onMouseDown),a.addEventListener("mouseup",this.onMouseUp),a.addEventListener("mouseover",this.onMouseOver,h),a.addEventListener("mouseout",this.onMouseOut,h),this.preventDefaultWheel?a.addEventListener("wheel",this.onMouseWheel,{passive:!1}):a.addEventListener("wheel",this.onMouseWheel,h),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,h),window.top.addEventListener("mouseup",this.onMouseUpWindow,h)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,h),window.addEventListener("mouseup",this.onMouseUpWindow,h),this.isTop=!1}i.pointerLock&&(this.pointerLockChange=function(c){var d=r.target;r.locked=document.pointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d,u.onPointerLockChange(c)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("mousemove",this.onMouseMove),a.removeEventListener("mousedown",this.onMouseDown),a.removeEventListener("mouseup",this.onMouseUp),a.removeEventListener("mouseover",this.onMouseOver),a.removeEventListener("mouseout",this.onMouseOut),window&&((a=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),a.removeEventListener("mouseup",this.onMouseUpWindow)),i.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});v.exports=e},19845:(v,p,t)=>{v.exports={MouseManager:t(35749)}},32426:(v,p,t)=>{var f=t(69186),i=t(65210),n=t(45733),l=new f({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.onTouchOver=n,this.onTouchOut=n,e.events.once(i.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch,this.target=e.inputTouchEventTarget,this.capture=e.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},startListeners:function(){var e=this,a=this.manager.canvas,r=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(h){r&&window.focus(),!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchStart(h),e.capture&&h.cancelable&&h.target===a&&h.preventDefault())},this.onTouchStartWindow=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&h.target!==a&&e.manager.onTouchStart(h)},this.onTouchMove=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchMove(h),e.capture&&h.cancelable&&h.preventDefault())},this.onTouchEnd=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchEnd(h),e.capture&&h.cancelable&&h.target===a&&h.preventDefault())},this.onTouchEndWindow=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&h.target!==a&&e.manager.onTouchEnd(h)},this.onTouchCancel=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchCancel(h),e.capture&&h.preventDefault())},this.onTouchCancelWindow=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.onTouchCancel(h)},this.onTouchOver=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOver(h)},this.onTouchOut=function(h){!h.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOut(h)};var u=this.target;if(u){var s={passive:!0},o={passive:!1};u.addEventListener("touchstart",this.onTouchStart,this.capture?o:s),u.addEventListener("touchmove",this.onTouchMove,this.capture?o:s),u.addEventListener("touchend",this.onTouchEnd,this.capture?o:s),u.addEventListener("touchcancel",this.onTouchCancel,this.capture?o:s),u.addEventListener("touchover",this.onTouchOver,this.capture?o:s),u.addEventListener("touchout",this.onTouchOut,this.capture?o:s),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,o),window.addEventListener("touchend",this.onTouchEndWindow,o),window.addEventListener("touchcancel",this.onTouchCancelWindow,o)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchcancel",this.onTouchCancel),e.removeEventListener("touchover",this.onTouchOver),e.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});v.exports=l},34954:(v,p,t)=>{v.exports={TouchManager:t(32426)}},44231:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(40),l=t(25738),e=t(15966),a=t(32710),r=t(82825),u=t(64567),s=new f({initialize:function(o,h){this.loader=o,this.cache=l(h,"cache",!1),this.type=l(h,"type",!1),this.key=l(h,"key",!1);var c=this.key;if(o.prefix&&o.prefix!==""&&(this.key=o.prefix+c),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var d=l(h,"url");d===void 0?d=o.path+c+"."+l(h,"extension",""):typeof d!="string"||d.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(d=o.path+d),this.url=d,this.src="",this.xhrSettings=u(l(h,"responseType",void 0)),l(h,"xhrSettings",!1)&&(this.xhrSettings=a(this.xhrSettings,l(h,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?i.FILE_POPULATED:i.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(h,"config",{}),this.multiFile,this.linkFile},setLink:function(o){this.linkFile=o,o.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===i.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=i.FILE_LOADING,this.src=e(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=r(this,this.loader.xhr))},onLoad:function(o,h){var c=o.responseURL&&(o.responseURL.indexOf("file://")===0||o.responseURL.indexOf("capacitor://")===0)&&h.target.status===0,d=!(h.target&&h.target.status!==200)||c;o.readyState===4&&o.status>=400&&o.status<=599&&(d=!1),this.state=i.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,d)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(o){o.lengthComputable&&(this.bytesLoaded=o.loaded,this.bytesTotal=o.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=i.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=i.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=i.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(o){o===void 0&&(o=this.data);var h=this.key,c=this.type;this.loader.emit(n.FILE_COMPLETE,h,c,o),this.loader.emit(n.FILE_KEY_COMPLETE+c+"-"+h,h,c,o),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});s.createObjectURL=function(o,h,c){if(typeof URL=="function")o.src=URL.createObjectURL(h);else{var d=new FileReader;d.onload=function(){o.removeAttribute("crossOrigin"),o.src="data:"+(h.type||c)+";base64,"+d.result.split(",")[1]},d.onerror=o.onerror,d.readAsDataURL(h)}},s.revokeObjectURL=function(o){typeof URL=="function"&&URL.revokeObjectURL(o.src)},v.exports=s},25028:v=>{var p={},t={install:function(f){for(var i in p)f[i]=p[i]},register:function(f,i){p[f]=i},destroy:function(){p={}}};v.exports=t},15966:v=>{v.exports=function(p,t){return!!p.url&&(p.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?p.url:t+p.url)}},90894:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(96609),l=t(26729),e=t(40),a=t(25028),r=t(25738),u=t(46236),s=t(12063),o=t(64567),h=new f({Extends:l,initialize:function(c){l.call(this);var d=c.sys.game.config,g=c.sys.settings.loader;this.scene=c,this.systems=c.sys,this.cacheManager=c.sys.cache,this.textureManager=c.sys.textures,this.sceneManager=c.sys.game.scene,a.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(r(g,"baseURL",d.loaderBaseURL)),this.setPath(r(g,"path",d.loaderPath)),this.setPrefix(r(g,"prefix",d.loaderPrefix)),this.maxParallelDownloads=r(g,"maxParallelDownloads",d.loaderMaxParallelDownloads),this.xhr=o(r(g,"responseType",d.loaderResponseType),r(g,"async",d.loaderAsync),r(g,"user",d.loaderUser),r(g,"password",d.loaderPassword),r(g,"timeout",d.loaderTimeout),r(g,"withCredentials",d.loaderWithCredentials)),this.crossOrigin=r(g,"crossOrigin",d.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=i.LOADER_IDLE,this.multiKeyIndex=0,c.sys.events.once(s.BOOT,this.boot,this),c.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},setBaseURL:function(c){return c===void 0&&(c=""),c!==""&&c.substr(-1)!=="/"&&(c=c.concat("/")),this.baseURL=c,this},setPath:function(c){return c===void 0&&(c=""),c!==""&&c.substr(-1)!=="/"&&(c=c.concat("/")),this.path=c,this},setPrefix:function(c){return c===void 0&&(c=""),this.prefix=c,this},setCORS:function(c){return this.crossOrigin=c,this},addFile:function(c){Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var g=c[d];this.keyExists(g)||(this.list.set(g),this.emit(e.ADD,g.key,g.type,this,g),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(c){var d=c.hasCacheConflict();return d||this.list.iterate(function(g){if(g.type===c.type&&g.key===c.key)return d=!0,!1}),!d&&this.isLoading()&&(this.inflight.iterate(function(g){if(g.type===c.type&&g.key===c.key)return d=!0,!1}),this.queue.iterate(function(g){if(g.type===c.type&&g.key===c.key)return d=!0,!1})),d},addPack:function(c,d){d&&c.hasOwnProperty(d)&&(c={packKey:c[d]});var g=0,m=this.baseURL,y=this.path,w=this.prefix;for(var x in c)if(Object.prototype.hasOwnProperty.call(c,x)){var T=c[x],E=r(T,"baseURL",m),S=r(T,"path",y),C=r(T,"prefix",w),A=r(T,"files",null),M=r(T,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(E),this.setPath(S),this.setPrefix(C);for(var b=0;b<A.length;b++){var _=A[b],P=_.hasOwnProperty("type")?_.type:M;this[P]&&(this[P](_),g++)}}}return this.setBaseURL(m),this.setPath(y),this.setPrefix(w),g>0},isLoading:function(){return this.state===i.LOADER_LOADING||this.state===i.LOADER_PROCESSING},isReady:function(){return this.state===i.LOADER_IDLE||this.state===i.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(e.START,this),this.list.size===0?this.loadComplete():(this.state=i.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(s.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(e.PROGRESS,this.progress)},update:function(){this.state===i.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(c){if((c.state===i.FILE_POPULATED||c.state===i.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(c),this.list.delete(c),c.crossOrigin||(c.crossOrigin=this.crossOrigin),c.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(c,d){this.inflight&&(this.inflight.delete(c),this.updateProgress(),d?(this.totalComplete++,this.queue.set(c),this.emit(e.FILE_LOAD,c),c.onProcess()):(this.totalFailed++,this._deleteQueue.set(c),this.emit(e.FILE_LOAD_ERROR,c),this.fileProcessComplete(c)))},fileProcessComplete:function(c){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(c.state===i.FILE_ERRORED?c.multiFile&&c.multiFile.onFileFailed(c):c.state===i.FILE_COMPLETE&&(c.multiFile?c.multiFile.isReadyToProcess()&&c.multiFile.addToCache():c.addToCache()),this.queue.delete(c),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(e.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=i.LOADER_COMPLETE,this.systems.events.off(s.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(e.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(c){this._deleteQueue.set(c)},saveJSON:function(c,d){return this.save(JSON.stringify(c),d)},save:function(c,d,g){d===void 0&&(d="file.json"),g===void 0&&(g="application/json");var m=new Blob([c],{type:g}),y=URL.createObjectURL(m),w=document.createElement("a");return w.download=d,w.textContent="Download "+d,w.href=y,w.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var c=this.systems.game.config,d=this.systems.settings.loader;this.setBaseURL(r(d,"baseURL",c.loaderBaseURL)),this.setPath(r(d,"path",c.loaderPath)),this.setPrefix(r(d,"prefix",c.loaderPrefix)),this.state=i.LOADER_IDLE},shutdown:function(){this.reset(),this.state=i.LOADER_SHUTDOWN,this.systems.events.off(s.UPDATE,this.update,this),this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=i.LOADER_DESTROYED,this.systems.events.off(s.UPDATE,this.update,this),this.systems.events.off(s.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",h,"load"),v.exports=h},32710:(v,p,t)=>{var f=t(72646),i=t(64567);v.exports=function(n,l){var e=n===void 0?i():f({},n);if(l)for(var a in l)l[a]!==void 0&&(e[a]=l[a]);return e}},60697:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n,l,e){var a=[];e.forEach(function(u){u&&a.push(u)}),this.loader=i,this.type=n,this.key=l,this.multiKeyIndex=i.multiKeyIndex++,this.files=a,this.complete=!1,this.pending=a.length,this.failed=0,this.config={},this.baseURL=i.baseURL,this.path=i.path,this.prefix=i.prefix;for(var r=0;r<a.length;r++)a[r].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(i){return this.files.push(i),i.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(i){this.files.indexOf(i)!==-1&&this.pending--},onFileFailed:function(i){this.files.indexOf(i)!==-1&&this.failed++}});v.exports=f},82825:(v,p,t)=>{var f=t(32710);v.exports=function(i,n){var l=f(n,i.xhrSettings),e=new XMLHttpRequest;if(e.open("GET",i.src,l.async,l.user,l.password),e.responseType=i.xhrSettings.responseType,e.timeout=l.timeout,l.headers)for(var a in l.headers)e.setRequestHeader(a,l.headers[a]);return l.header&&l.headerValue&&e.setRequestHeader(l.header,l.headerValue),l.requestedWith&&e.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&e.overrideMimeType(l.overrideMimeType),l.withCredentials&&(e.withCredentials=!0),e.onload=i.onLoad.bind(i,e),e.onerror=i.onError.bind(i,e),e.onprogress=i.onProgress.bind(i),e.send(),e}},64567:v=>{v.exports=function(p,t,f,i,n,l){return p===void 0&&(p=""),t===void 0&&(t=!0),f===void 0&&(f=""),i===void 0&&(i=""),n===void 0&&(n=0),l===void 0&&(l=!1),{responseType:p,async:t,user:f,password:i,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:l}}},60351:v=>{v.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},84349:v=>{v.exports="addfile"},15530:v=>{v.exports="complete"},2855:v=>{v.exports="filecomplete"},51215:v=>{v.exports="filecomplete-"},79508:v=>{v.exports="loaderror"},72255:v=>{v.exports="load"},9606:v=>{v.exports="fileprogress"},66239:v=>{v.exports="postprocess"},11411:v=>{v.exports="progress"},92329:v=>{v.exports="start"},40:(v,p,t)=>{v.exports={ADD:t(84349),COMPLETE:t(15530),FILE_COMPLETE:t(2855),FILE_KEY_COMPLETE:t(51215),FILE_LOAD_ERROR:t(79508),FILE_LOAD:t(72255),FILE_PROGRESS:t(9606),POST_PROCESS:t(66239),PROGRESS:t(11411),START:t(92329)}},32108:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(85665),l=t(40),e=new f({Extends:n,initialize:function(a,r,u,s,o){n.call(this,a,r,u,s,o),this.type="animationJSON"},onProcess:function(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});i.register("animation",function(a,r,u,s){if(Array.isArray(a))for(var o=0;o<a.length;o++)this.addFile(new e(this,a[o]));else this.addFile(new e(this,a,r,s,u));return this}),v.exports=e},61117:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(46198),e=t(53013),a=t(85665),r=t(60697),u=new f({Extends:r,initialize:function(s,o,h,c,d,g){var m,y;if(e(o)){var w=o;o=n(w,"key"),m=new l(s,{key:o,url:n(w,"textureURL"),extension:n(w,"textureExtension","png"),normalMap:n(w,"normalMap"),xhrSettings:n(w,"textureXhrSettings")}),y=new a(s,{key:o,url:n(w,"atlasURL"),extension:n(w,"atlasExtension","json"),xhrSettings:n(w,"atlasXhrSettings")})}else m=new l(s,o,h,d),y=new a(s,o,c,g);m.linkFile?r.call(this,s,"atlasjson",o,[m,y,m.linkFile]):r.call(this,s,"atlasjson",o,[m,y])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],o=this.files[1],h=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,o.data,h),o.addToCache(),this.complete=!0}}});i.register("aseprite",function(s,o,h,c,d){var g;if(Array.isArray(s))for(var m=0;m<s.length;m++)g=new u(this,s[m]),this.addFile(g.files);else g=new u(this,s,o,h,c,d),this.addFile(g.files);return this}),v.exports=u},62896:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(46198),e=t(53013),a=t(85665),r=t(60697),u=new f({Extends:r,initialize:function(s,o,h,c,d,g){var m,y;if(e(o)){var w=o;o=n(w,"key"),m=new l(s,{key:o,url:n(w,"textureURL"),extension:n(w,"textureExtension","png"),normalMap:n(w,"normalMap"),xhrSettings:n(w,"textureXhrSettings")}),y=new a(s,{key:o,url:n(w,"atlasURL"),extension:n(w,"atlasExtension","json"),xhrSettings:n(w,"atlasXhrSettings")})}else m=new l(s,o,h,d),y=new a(s,o,c,g);m.linkFile?r.call(this,s,"atlasjson",o,[m,y,m.linkFile]):r.call(this,s,"atlasjson",o,[m,y])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],o=this.files[1],h=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,o.data,h),o.pendingDestroy(),this.complete=!0}}});i.register("atlas",function(s,o,h,c,d){var g;if(Array.isArray(s))for(var m=0;m<s.length;m++)g=new u(this,s[m]),this.addFile(g.files);else g=new u(this,s,o,h,c,d),this.addFile(g.files);return this}),v.exports=u},61242:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(46198),e=t(53013),a=t(60697),r=t(22992),u=new f({Extends:a,initialize:function(s,o,h,c,d,g){var m,y;if(e(o)){var w=o;o=n(w,"key"),m=new l(s,{key:o,url:n(w,"textureURL"),extension:n(w,"textureExtension","png"),normalMap:n(w,"normalMap"),xhrSettings:n(w,"textureXhrSettings")}),y=new r(s,{key:o,url:n(w,"atlasURL"),extension:n(w,"atlasExtension","xml"),xhrSettings:n(w,"atlasXhrSettings")})}else m=new l(s,o,h,d),y=new r(s,o,c,g);m.linkFile?a.call(this,s,"atlasxml",o,[m,y,m.linkFile]):a.call(this,s,"atlasxml",o,[m,y])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],o=this.files[1],h=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(s.key,s.data,o.data,h),o.pendingDestroy(),this.complete=!0}}});i.register("atlasXML",function(s,o,h,c,d){var g;if(Array.isArray(s))for(var m=0;m<s.length;m++)g=new u(this,s[m]),this.addFile(g.files);else g=new u(this,s,o,h,c,d),this.addFile(g.files);return this}),v.exports=u},70384:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(79805),r=t(53013),u=new f({Extends:n,initialize:function(s,o,h,c,d){if(r(o)){var g=o;o=e(g,"key"),c=e(g,"xhrSettings"),d=e(g,"context",d)}var m={type:"audio",cache:s.cacheManager.audio,extension:h.type,responseType:"arraybuffer",key:o,url:h.url,xhrSettings:c,config:{context:d}};n.call(this,s,m)},onProcess:function(){this.state=i.FILE_PROCESSING;var s=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(o){s.data=o,s.onProcessComplete()},function(o){console.error("Error decoding audio: "+s.key+" - ",o?o.message:null),s.onProcessError()}),this.config.context=null}});u.create=function(s,o,h,c,d){var g=s.systems.game,m=g.config.audio,y=g.device.audio;r(o)&&(h=e(o,"url",[]),c=e(o,"config",{}));var w=u.getAudioURL(g,h);return w?y.webAudio&&!m.disableWebAudio?new u(s,o,w,d,g.sound.context):new a(s,o,w,c):null},u.getAudioURL=function(s,o){Array.isArray(o)||(o=[o]);for(var h=0;h<o.length;h++){var c=e(o[h],"url",o[h]);if(c.indexOf("blob:")===0||c.indexOf("data:")===0)return{url:c,type:""};var d=c.match(/\.([a-zA-Z0-9]+)($|\?)/);if(d=e(o[h],"type",d?d[1]:"").toLowerCase(),s.device.audio[d])return{url:c,type:d}}return null},l.register("audio",function(s,o,h,c){var d,g=this.systems.game,m=g.config.audio,y=g.device.audio;if(m.noAudio||!y.webAudio&&!y.audioData)return this;if(Array.isArray(s))for(var w=0;w<s.length;w++)(d=u.create(this,s[w]))&&this.addFile(d);else(d=u.create(this,s,o,h,c))&&this.addFile(d);return this}),v.exports=u},55154:(v,p,t)=>{var f=t(70384),i=t(69186),n=t(25028),l=t(25738),e=t(53013),a=t(85665),r=t(60697),u=new i({Extends:r,initialize:function(s,o,h,c,d,g,m){if(e(o)){var y=o;o=l(y,"key"),h=l(y,"jsonURL"),c=l(y,"audioURL"),d=l(y,"audioConfig"),g=l(y,"audioXhrSettings"),m=l(y,"jsonXhrSettings")}var w;if(c){var x=f.create(s,o,c,d,g);x&&(w=new a(s,o,h,m),r.call(this,s,"audiosprite",o,[x,w]),this.config.resourceLoad=!1)}else w=new a(s,o,h,m),r.call(this,s,"audiosprite",o,[w]),this.config.resourceLoad=!0,this.config.audioConfig=d,this.config.audioXhrSettings=g},onFileComplete:function(s){if(this.files.indexOf(s)!==-1&&(this.pending--,this.config.resourceLoad&&s.type==="json"&&s.data.hasOwnProperty("resources"))){var o=s.data.resources,h=l(this.config,"audioConfig"),c=l(this.config,"audioXhrSettings"),d=f.create(this.loader,s.key,o,h,c);d&&(this.addToMultiFile(d),this.loader.addFile(d))}},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],o=this.files[1];s.addToCache(),o.addToCache(),this.complete=!0}}});n.register("audioSprite",function(s,o,h,c,d,g){var m,y=this.systems.game,w=y.config.audio,x=y.device.audio;if(w&&w.noAudio||!x.webAudio&&!x.audioData)return this;if(Array.isArray(s))for(var T=0;T<s.length;T++)(m=new u(this,s[T])).files&&this.addFile(m.files);else(m=new u(this,s,o,h,c,d,g)).files&&this.addFile(m.files);return this})},93763:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h,c){var d="bin";if(a(s)){var g=s;s=e(g,"key"),o=e(g,"url"),h=e(g,"xhrSettings"),d=e(g,"extension",d),c=e(g,"dataType",c)}var m={type:"binary",cache:u.cacheManager.binary,extension:d,responseType:"arraybuffer",key:s,url:o,xhrSettings:h,config:{dataType:c}};n.call(this,u,m)},onProcess:function(){this.state=i.FILE_PROCESSING;var u=this.config.dataType;this.data=u?new u(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",function(u,s,o,h){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new r(this,u[c]));else this.addFile(new r(this,u,s,h,o));return this}),v.exports=r},9386:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(46198),e=t(53013),a=t(60697),r=t(95634),u=t(22992),s=new f({Extends:a,initialize:function(o,h,c,d,g,m){var y,w;if(e(h)){var x=h;h=n(x,"key"),y=new l(o,{key:h,url:n(x,"textureURL"),extension:n(x,"textureExtension","png"),normalMap:n(x,"normalMap"),xhrSettings:n(x,"textureXhrSettings")}),w=new u(o,{key:h,url:n(x,"fontDataURL"),extension:n(x,"fontDataExtension","xml"),xhrSettings:n(x,"fontDataXhrSettings")})}else y=new l(o,h,c,g),w=new u(o,h,d,m);y.linkFile?a.call(this,o,"bitmapfont",h,[y,w,y.linkFile]):a.call(this,o,"bitmapfont",h,[y,w])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],h=this.files[1];o.addToCache(),h.pendingDestroy();var c=o.cache.get(o.key),d=r(h.data,o.cache.getFrame(o.key),0,0,c);this.loader.cacheManager.bitmapFont.add(o.key,{data:d,texture:o.key,frame:null}),this.complete=!0}}});i.register("bitmapFont",function(o,h,c,d,g){var m;if(Array.isArray(o))for(var y=0;y<o.length;y++)m=new s(this,o[y]),this.addFile(m.files);else m=new s(this,o,h,c,d,g),this.addFile(m.files);return this}),v.exports=s},71709:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h){var c="css";if(a(s)){var d=s;s=e(d,"key"),o=e(d,"url"),h=e(d,"xhrSettings"),c=e(d,"extension",c)}var g={type:"script",cache:!1,extension:c,responseType:"text",key:s,url:o,xhrSettings:h};n.call(this,u,g)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",function(u,s,o){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.addFile(new r(this,u[h]));else this.addFile(new r(this,u,s,o));return this}),v.exports=r},95069:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=t(45964),u=new f({Extends:n,initialize:function(s,o,h,c,d){var g="glsl";if(a(o)){var m=o;o=e(m,"key"),h=e(m,"url"),c=e(m,"shaderType","fragment"),d=e(m,"xhrSettings"),g=e(m,"extension",g)}else c===void 0&&(c="fragment");var y={type:"glsl",cache:s.cacheManager.shader,extension:g,responseType:"text",key:o,url:h,config:{shaderType:c},xhrSettings:d};n.call(this,s,y)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s=this.data.split(`
`),o=this.extractBlock(s,0);if(o)for(;o;){var h=this.getShaderName(o.header),c=this.getShaderType(o.header),d=this.getShaderUniforms(o.header),g=o.shader;if(this.cache.has(h)){var m=this.cache.get(h);c==="fragment"?m.fragmentSrc=g:m.vertexSrc=g,m.uniforms||(m.uniforms=d)}else c==="fragment"?this.cache.add(h,new r(h,g,"",d)):this.cache.add(h,new r(h,"",g,d));o=this.extractBlock(s,o.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new r(this.key,this.data)):this.cache.add(this.key,new r(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(s){for(var o=0;o<s.length;o++){var h=s[o].trim();if(h.substring(0,5)==="name:")return h.substring(5).trim()}return this.key},getShaderType:function(s){for(var o=0;o<s.length;o++){var h=s[o].trim();if(h.substring(0,5)==="type:")return h.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(s){for(var o={},h=0;h<s.length;h++){var c=s[h].trim();if(c.substring(0,8)==="uniform."){var d=c.indexOf(":");if(d){var g=c.substring(8,d);try{o[g]=JSON.parse(c.substring(d+1))}catch{console.warn("Invalid uniform JSON: "+g)}}}}return o},extractBlock:function(s,o){for(var h=-1,c=-1,d=-1,g=!1,m=!1,y=[],w=[],x=o;x<s.length;x++){var T=s[x].trim();if(T==="---")if(h===-1)h=x,g=!0;else{if(!g){m=!1;break}c=x,g=!1,m=!0}else g?y.push(T):m&&(w.push(T),d=x)}return g||c===-1?null:{header:y,shader:w.join(`
`),offset:d}}});l.register("glsl",function(s,o,h,c){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new u(this,s[d]));else this.addFile(new u(this,s,o,h,c));return this}),v.exports=u},79805:(v,p,t)=>{var f=t(69186),i=t(40),n=t(44231),l=t(25738),e=t(15966),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h){if(a(s)){var c=s;s=l(c,"key"),h=l(c,"config",h)}var d={type:"audio",cache:u.cacheManager.audio,extension:o.type,key:s,url:o.url,config:h};n.call(this,u,d),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var s=this.data[u];s.oncanplaythrough=null,s.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var s=u.target;s.oncanplaythrough=null,s.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(i.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0,this.percentComplete=0;for(var s=0;s<u;s++){var o=new Audio;o.dataset||(o.dataset={}),o.dataset.name=this.key+("0"+s).slice(-2),o.dataset.used="false",this.locked?o.dataset.locked="true":(o.dataset.locked="false",o.preload="auto",o.oncanplaythrough=this.onProgress.bind(this),o.onerror=this.onError.bind(this)),this.data.push(o)}for(s=0;s<this.data.length;s++)(o=this.data[s]).src=e(this,this.loader.baseURL),this.locked||o.load();this.locked&&setTimeout(this.onLoad.bind(this))}});v.exports=r},18579:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h){var c="html";if(a(s)){var d=s;s=e(d,"key"),o=e(d,"url"),h=e(d,"xhrSettings"),c=e(d,"extension",c)}var g={type:"text",cache:u.cacheManager.html,extension:c,responseType:"text",key:s,url:o,xhrSettings:h};n.call(this,u,g)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",function(u,s,o){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.addFile(new r(this,u[h]));else this.addFile(new r(this,u,s,o));return this}),v.exports=r},51852:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h,c,d){h===void 0&&(h=512),c===void 0&&(c=512);var g="html";if(a(s)){var m=s;s=e(m,"key"),o=e(m,"url"),d=e(m,"xhrSettings"),g=e(m,"extension",g),h=e(m,"width",h),c=e(m,"height",c)}var y={type:"html",cache:u.textureManager,extension:g,responseType:"text",key:s,url:o,xhrSettings:d,config:{width:h,height:c}};n.call(this,u,y)},onProcess:function(){this.state=i.FILE_PROCESSING;var u=this.config.width,s=this.config.height,o=[];o.push('<svg width="'+u+'px" height="'+s+'px" viewBox="0 0 '+u+" "+s+'" xmlns="http://www.w3.org/2000/svg">'),o.push('<foreignObject width="100%" height="100%">'),o.push('<body xmlns="http://www.w3.org/1999/xhtml">'),o.push(this.xhrLoader.responseText),o.push("</body>"),o.push("</foreignObject>"),o.push("</svg>");var h=[o.join(`
`)],c=this;try{var d=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch{return c.state=i.FILE_ERRORED,void c.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){n.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(c.data),c.onProcessError()},n.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});l.register("htmlTexture",function(u,s,o,h,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,s,o,h,c));return this}),v.exports=r},46198:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function u(s,o,h,c,d){var g,m="png";if(a(o)){var y=o;o=e(y,"key"),h=e(y,"url"),g=e(y,"normalMap"),c=e(y,"xhrSettings"),m=e(y,"extension",m),d=e(y,"frameConfig")}Array.isArray(h)&&(g=h[1],h=h[0]);var w={type:"image",cache:s.textureManager,extension:m,responseType:"blob",key:o,url:h,xhrSettings:c,config:d};if(n.call(this,s,w),g){var x=new u(s,this.key,g,c,d);x.type="normalMap",this.setLink(x),s.addFile(x)}},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){n.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(u.data),u.onProcessError()},n.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var u,s=this.linkFile;s&&s.state===i.FILE_COMPLETE?(u=this.type==="image"?this.cache.addImage(this.key,this.data,s.data):this.cache.addImage(s.key,s.data,this.data),this.pendingDestroy(u),s.pendingDestroy(u)):s||(u=this.cache.addImage(this.key,this.data),this.pendingDestroy(u))}});l.register("image",function(u,s,o){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.addFile(new r(this,u[h]));else this.addFile(new r(this,u,s,o));return this}),v.exports=r},85665:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(76076),r=t(53013),u=new f({Extends:n,initialize:function(s,o,h,c,d){var g="json";if(r(o)){var m=o;o=e(m,"key"),h=e(m,"url"),c=e(m,"xhrSettings"),g=e(m,"extension",g),d=e(m,"dataKey",d)}var y={type:"json",cache:s.cacheManager.json,extension:g,responseType:"text",key:o,url:h,xhrSettings:c,config:d};n.call(this,s,y),r(h)&&(this.data=d?a(h,d):h,this.state=i.FILE_POPULATED)},onProcess:function(){if(this.state!==i.FILE_POPULATED){this.state=i.FILE_PROCESSING;try{var s=JSON.parse(this.xhrLoader.responseText)}catch(h){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),h}var o=this.config;this.data=typeof o=="string"?a(s,o,s):s}this.onProcessComplete()}});l.register("json",function(s,o,h,c){if(Array.isArray(s))for(var d=0;d<s.length;d++)this.addFile(new u(this,s[d]));else this.addFile(new u(this,s,o,c,h));return this}),v.exports=u},97147:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(46198),e=t(53013),a=t(85665),r=t(60697),u=new f({Extends:r,initialize:function(s,o,h,c,d,g,m){if(e(o)){var y=o;o=n(y,"key"),h=n(y,"url",!1)?n(y,"url"):n(y,"atlasURL"),g=n(y,"xhrSettings"),c=n(y,"path"),d=n(y,"baseURL"),m=n(y,"textureXhrSettings")}var w=new a(s,o,h,g);r.call(this,s,"multiatlas",o,[w]),this.config.path=c,this.config.baseURL=d,this.config.textureXhrSettings=m},onFileComplete:function(s){if(this.files.indexOf(s)!==-1&&(this.pending--,s.type==="json"&&s.data.hasOwnProperty("textures"))){var o=s.data.textures,h=this.config,c=this.loader,d=c.baseURL,g=c.path,m=c.prefix,y=n(h,"baseURL",this.baseURL),w=n(h,"path",this.path),x=n(h,"prefix",this.prefix),T=n(h,"textureXhrSettings");c.setBaseURL(y),c.setPath(w),c.setPrefix(x);for(var E=0;E<o.length;E++){var S=o[E].image,C="MA"+this.multiKeyIndex+"_"+S,A=new l(c,C,S,T);if(this.addToMultiFile(A),c.addFile(A),o[E].normalMap){var M=new l(c,C,o[E].normalMap,T);M.type="normalMap",A.setLink(M),this.addToMultiFile(M),c.addFile(M)}}c.setBaseURL(d),c.setPath(g),c.setPrefix(m)}},addToCache:function(){if(this.isReadyToProcess()){for(var s=this.files[0],o=[],h=[],c=[],d=1;d<this.files.length;d++){var g=this.files[d];if(g.type!=="normalMap")for(var m=g.key.indexOf("_"),y=g.key.substr(m+1),w=g.data,x=0;x<s.data.textures.length;x++){var T=s.data.textures[x];if(T.image===y){h.push(w),o.push(T),g.linkFile&&c.push(g.linkFile.data);break}}}for(c.length===0&&(c=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,h,o,c),this.complete=!0,d=0;d<this.files.length;d++)this.files[d].pendingDestroy()}}});i.register("multiatlas",function(s,o,h,c,d){var g;if(Array.isArray(s))for(var m=0;m<s.length;m++)g=new u(this,s[m]),this.addFile(g.files);else g=new u(this,s,o,h,c,d),this.addFile(g.files);return this}),v.exports=u},92233:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(53013),e=t(60697),a=t(12328),r=new f({Extends:e,initialize:function(u,s,o,h){var c="js",d=[];if(l(s)){var g=s;s=n(g,"key"),o=n(g,"url"),h=n(g,"xhrSettings"),c=n(g,"extension",c)}Array.isArray(o)||(o=[o]);for(var m=0;m<o.length;m++){var y=new a(u,{key:s+"_"+m.toString(),url:o[m],extension:c,xhrSettings:h});y.onProcess=function(){this.onProcessComplete()},d.push(y)}e.call(this,u,"scripts",s,d)},addToCache:function(){if(this.isReadyToProcess()){for(var u=0;u<this.files.length;u++){var s=this.files[u];s.data=document.createElement("script"),s.data.language="javascript",s.data.type="text/javascript",s.data.defer=!1,s.data.text=s.xhrLoader.responseText,document.head.appendChild(s.data)}this.complete=!0}}});i.register("scripts",function(u,s,o){var h;if(Array.isArray(u))for(var c=0;c<u.length;c++)h=new r(this,u[c]),this.addFile(h.files);else h=new r(this,u,s,o),this.addFile(h.files);return this}),v.exports=r},45849:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(53013),e=t(60697),a=t(11669),r=t(91252),u=t(20368),s=new f({Extends:e,initialize:function(o,h,c,d,g,m){var y,w,x=o.cacheManager.obj;if(l(h)){var T=h;h=n(T,"key"),y=new u(o,{key:h,type:"obj",cache:x,url:n(T,"url"),extension:n(T,"extension","obj"),xhrSettings:n(T,"xhrSettings"),config:{flipUV:n(T,"flipUV",g)}}),(d=n(T,"matURL"))&&(w=new u(o,{key:h,type:"mat",cache:x,url:d,extension:n(T,"matExtension","mat"),xhrSettings:n(T,"xhrSettings")}))}else y=new u(o,{key:h,url:c,type:"obj",cache:x,extension:"obj",xhrSettings:m,config:{flipUV:g}}),d&&(w=new u(o,{key:h,url:d,type:"mat",cache:x,extension:"mat",xhrSettings:m}));e.call(this,o,"obj",h,[y,w])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],h=this.files[1],c=a(o.data,o.config.flipUV);h&&(c.materials=r(h.data)),o.cache.add(o.key,c),this.complete=!0}}});i.register("obj",function(o,h,c,d,g){var m;if(Array.isArray(o))for(var y=0;y<o.length;y++)m=new s(this,o[y]),this.addFile(m.files);else m=new s(this,o,h,c,d,g),this.addFile(m.files);return this}),v.exports=s},65263:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(25028),l=t(85665),e=new f({Extends:l,initialize:function(a,r,u,s,o){l.call(this,a,r,u,s,o),this.type="packfile"},onProcess:function(){this.state!==i.FILE_POPULATED&&(this.state=i.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(a,r,u,s){if(Array.isArray(a))for(var o=0;o<a.length;o++)this.addFile(new e(this,a[o]));else this.addFile(new e(this,a,r,s,u));return this}),v.exports=e},76147:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h,c,d){var g="js";if(a(s)){var m=s;s=e(m,"key"),o=e(m,"url"),d=e(m,"xhrSettings"),g=e(m,"extension",g),h=e(m,"start"),c=e(m,"mapping")}var y={type:"plugin",cache:!1,extension:g,responseType:"text",key:s,url:o,xhrSettings:d,config:{start:h,mapping:c}};n.call(this,u,y),typeof o=="function"&&(this.data=o,this.state=i.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,s=this.config,o=e(s,"start",!1),h=e(s,"mapping",null);if(this.state===i.FILE_POPULATED)u.install(this.key,this.data,o,h);else{this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var c=u.install(this.key,window[this.key],o,h);(o||h)&&(this.loader.systems[h]=c,this.loader.scene[h]=c)}this.onProcessComplete()}});l.register("plugin",function(u,s,o,h,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,s,o,h,c));return this}),v.exports=r},38443:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h,c){var d="svg";if(a(s)){var g=s;s=e(g,"key"),o=e(g,"url"),h=e(g,"svgConfig",{}),c=e(g,"xhrSettings"),d=e(g,"extension",d)}var m={type:"svg",cache:u.textureManager,extension:d,responseType:"text",key:s,url:o,xhrSettings:c,config:{width:e(h,"width"),height:e(h,"height"),scale:e(h,"scale")}};n.call(this,u,m)},onProcess:function(){this.state=i.FILE_PROCESSING;var u=this.xhrLoader.responseText,s=[u],o=this.config.width,h=this.config.height,c=this.config.scale;t:if(o&&h||c){var d=new DOMParser().parseFromString(u,"text/xml").getElementsByTagName("svg")[0],g=d.hasAttribute("viewBox"),m=parseFloat(d.getAttribute("width")),y=parseFloat(d.getAttribute("height"));if(!g&&m&&y)d.setAttribute("viewBox","0  0 "+m+" "+y);else if(g&&!m&&!y){var w=d.getAttribute("viewBox").split(/\s+|,/);m=w[2],y=w[3]}if(c){if(!m||!y)break t;o=m*c,h=y*c}d.setAttribute("width",o.toString()+"px"),d.setAttribute("height",h.toString()+"px"),s=[new XMLSerializer().serializeToString(d)]}try{var x=new window.Blob(s,{type:"image/svg+xml;charset=utf-8"})}catch{return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var T=this,E=!1;this.data.onload=function(){E||n.revokeObjectURL(T.data),T.onProcessComplete()},this.data.onerror=function(){E?T.onProcessError():(E=!0,n.revokeObjectURL(T.data),T.data.src="data:image/svg+xml,"+encodeURIComponent(s.join("")))},n.createObjectURL(this.data,x,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});l.register("svg",function(u,s,o,h){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new r(this,u[c]));else this.addFile(new r(this,u,s,o,h));return this}),v.exports=r},79633:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h){var c="js";if(a(s)){var d=s;s=e(d,"key"),o=e(d,"url"),h=e(d,"xhrSettings"),c=e(d,"extension",c)}var g={type:"text",extension:c,responseType:"text",key:s,url:o,xhrSettings:h};n.call(this,u,g)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),s=eval;this.loader.sceneManager.add(this.key,s(u)),this.complete=!0}});l.register("sceneFile",function(u,s,o){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.addFile(new r(this,u[h]));else this.addFile(new r(this,u,s,o));return this}),v.exports=r},83926:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h,c,d){var g="js";if(a(s)){var m=s;s=e(m,"key"),o=e(m,"url"),d=e(m,"xhrSettings"),g=e(m,"extension",g),h=e(m,"systemKey"),c=e(m,"sceneKey")}var y={type:"scenePlugin",cache:!1,extension:g,responseType:"text",key:s,url:o,xhrSettings:d,config:{systemKey:h,sceneKey:c}};n.call(this,u,y),typeof o=="function"&&(this.data=o,this.state=i.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,s=this.config,o=this.key,h=e(s,"systemKey",o),c=e(s,"sceneKey",o);this.state===i.FILE_POPULATED?u.installScenePlugin(h,this.data,c,this.loader.scene,!0):(this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),u.installScenePlugin(h,window[this.key],c,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",function(u,s,o,h,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,s,o,h,c));return this}),v.exports=r},12328:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h){var c="js";if(a(s)){var d=s;s=e(d,"key"),o=e(d,"url"),h=e(d,"xhrSettings"),c=e(d,"extension",c)}var g={type:"script",cache:!1,extension:c,responseType:"text",key:s,url:o,xhrSettings:h};n.call(this,u,g)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",function(u,s,o){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.addFile(new r(this,u[h]));else this.addFile(new r(this,u,s,o));return this}),v.exports=r},67250:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(46198),l=new f({Extends:n,initialize:function(e,a,r,u,s){n.call(this,e,a,r,s,u),this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});i.register("spritesheet",function(e,a,r,u){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,a,r,u));return this}),v.exports=l},20368:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=new f({Extends:n,initialize:function(u,s,o,h){var c="text",d="txt",g=u.cacheManager.text;if(a(s)){var m=s;s=e(m,"key"),o=e(m,"url"),h=e(m,"xhrSettings"),d=e(m,"extension",d),c=e(m,"type",c),g=e(m,"cache",g)}var y={type:c,cache:g,extension:d,responseType:"text",key:s,url:o,xhrSettings:h};n.call(this,u,y)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",function(u,s,o){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.addFile(new r(this,u[h]));else this.addFile(new r(this,u,s,o));return this}),v.exports=r},88794:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=t(53012),u=new f({Extends:n,initialize:function(s,o,h,c){var d="csv";if(a(o)){var g=o;o=e(g,"key"),h=e(g,"url"),c=e(g,"xhrSettings"),d=e(g,"extension",d)}var m={type:"tilemapCSV",cache:s.cacheManager.tilemap,extension:d,responseType:"text",key:o,url:h,xhrSettings:c};n.call(this,s,m),this.tilemapFormat=r.CSV},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,s),this.pendingDestroy(s)}});l.register("tilemapCSV",function(s,o,h){if(Array.isArray(s))for(var c=0;c<s.length;c++)this.addFile(new u(this,s[c]));else this.addFile(new u(this,s,o,h));return this}),v.exports=u},84116:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(85665),l=t(53012),e=new f({Extends:n,initialize:function(a,r,u,s){n.call(this,a,r,u,s),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var a={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,a),this.pendingDestroy(a)}});i.register("tilemapImpact",function(a,r,u){if(Array.isArray(a))for(var s=0;s<a.length;s++)this.addFile(new e(this,a[s]));else this.addFile(new e(this,a,r,u));return this}),v.exports=e},82666:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(85665),l=t(53012),e=new f({Extends:n,initialize:function(a,r,u,s){n.call(this,a,r,u,s),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var a={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,a),this.pendingDestroy(a)}});i.register("tilemapTiledJSON",function(a,r,u){if(Array.isArray(a))for(var s=0;s<a.length;s++)this.addFile(new e(this,a[s]));else this.addFile(new e(this,a,r,u));return this}),v.exports=e},77579:(v,p,t)=>{var f=t(69186),i=t(25028),n=t(25738),l=t(46198),e=t(53013),a=t(60697),r=t(20368),u=new f({Extends:a,initialize:function(s,o,h,c,d,g){var m,y;if(e(o)){var w=o;o=n(w,"key"),m=new l(s,{key:o,url:n(w,"textureURL"),extension:n(w,"textureExtension","png"),normalMap:n(w,"normalMap"),xhrSettings:n(w,"textureXhrSettings")}),y=new r(s,{key:o,url:n(w,"atlasURL"),extension:n(w,"atlasExtension","txt"),xhrSettings:n(w,"atlasXhrSettings")})}else m=new l(s,o,h,d),y=new r(s,o,c,g);m.linkFile?a.call(this,s,"unityatlas",o,[m,y,m.linkFile]):a.call(this,s,"unityatlas",o,[m,y])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],o=this.files[1],h=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(s.key,s.data,o.data,h),o.pendingDestroy(),this.complete=!0}}});i.register("unityAtlas",function(s,o,h,c,d){var g;if(Array.isArray(s))for(var m=0;m<s.length;m++)g=new u(this,s[m]),this.addFile(g.files);else g=new u(this,s,o,h,c,d),this.addFile(g.files);return this}),v.exports=u},8548:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(15966),a=t(25738),r=t(53013),u=new f({Extends:n,initialize:function(s,o,h,c,d,g,m){c===void 0&&(c="loadeddata"),d===void 0&&(d=!1),g===void 0&&(g=!1),c!=="loadeddata"&&c!=="canplay"&&c!=="canplaythrough"&&(c="loadeddata");var y={type:"video",cache:s.cacheManager.video,extension:h.type,responseType:"blob",key:o,url:h.url,xhrSettings:m,config:{loadEvent:c,asBlob:d,noAudio:g}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),n.call(this,s,y)},onProcess:function(){if(this.state=i.FILE_PROCESSING,this.config.asBlob){var s=this.createVideoElement();this.data=s;var o=this;this.data.onloadeddata=function(){o.onProcessComplete()},this.data.onerror=function(){n.revokeObjectURL(o.data),o.onProcessError()},n.createObjectURL(s,this.xhrLoader.response,""),s.load()}else this.onProcessComplete()},createVideoElement:function(){var s=document.createElement("video");return s.controls=!1,s.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),s},onVideoLoadHandler:function(s){var o=s.target;o.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),o.removeEventListener("error",this.onErrorCallback,!0),this.data=o,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(s){var o=s.target;o&&(o.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),o.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var s=this.config.loadEvent;if(this.config.asBlob)n.prototype.load.call(this);else{this.percentComplete=0;var o=this.createVideoElement();o.addEventListener(s,this.onLoadCallback,!0),o.addEventListener("error",this.onErrorCallback,!0),o.src=e(this,this.loader.baseURL),o.load()}}});u.create=function(s,o,h,c,d,g,m){var y=s.systems.game;r(o)&&(h=a(o,"url",[]),c=a(o,"loadEvent","loadeddata"),d=a(o,"asBlob",!1),g=a(o,"noAudio",!1),m=a(o,"xhrSettings"),o=a(o,"key"));var w=u.getVideoURL(y,h);if(w)return new u(s,o,w,c,d,g,m)},u.getVideoURL=function(s,o){Array.isArray(o)||(o=[o]);for(var h=0;h<o.length;h++){var c,d=a(o[h],"url",o[h]);if(d.indexOf("blob:")===0)return{url:d,type:""};if(c=d.indexOf("data:")===0?d.split(",")[0].match(/\/(.*?);/):d.match(/\.([a-zA-Z0-9]+)($|\?)/),c=a(o[h],"type",c?c[1]:"").toLowerCase(),s.device.video[c])return{url:d,type:c}}return null},l.register("video",function(s,o,h,c,d,g){var m;if(Array.isArray(s))for(var y=0;y<s.length;y++)(m=u.create(this,s[y]))&&this.addFile(m);else(m=u.create(this,s,o,h,c,d,g))&&this.addFile(m);return this}),v.exports=u},22992:(v,p,t)=>{var f=t(69186),i=t(60351),n=t(44231),l=t(25028),e=t(25738),a=t(53013),r=t(3726),u=new f({Extends:n,initialize:function(s,o,h,c){var d="xml";if(a(o)){var g=o;o=e(g,"key"),h=e(g,"url"),c=e(g,"xhrSettings"),d=e(g,"extension",d)}var m={type:"xml",cache:s.cacheManager.xml,extension:d,responseType:"text",key:o,url:h,xhrSettings:c};n.call(this,s,m)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=r(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});l.register("xml",function(s,o,h){if(Array.isArray(s))for(var c=0;c<s.length;c++)this.addFile(new u(this,s[c]));else this.addFile(new u(this,s,o,h));return this}),v.exports=u},67377:(v,p,t)=>{v.exports={AnimationJSONFile:t(32108),AsepriteFile:t(61117),AtlasJSONFile:t(62896),AtlasXMLFile:t(61242),AudioFile:t(70384),AudioSpriteFile:t(55154),BinaryFile:t(93763),BitmapFontFile:t(9386),CSSFile:t(71709),GLSLFile:t(95069),HTML5AudioFile:t(79805),HTMLFile:t(18579),HTMLTextureFile:t(51852),ImageFile:t(46198),JSONFile:t(85665),MultiAtlasFile:t(97147),MultiScriptFile:t(92233),OBJFile:t(45849),PackFile:t(65263),PluginFile:t(76147),SceneFile:t(79633),ScenePluginFile:t(83926),ScriptFile:t(12328),SpriteSheetFile:t(67250),SVGFile:t(38443),TextFile:t(20368),TilemapCSVFile:t(88794),TilemapImpactFile:t(84116),TilemapJSONFile:t(82666),UnityAtlasFile:t(77579),VideoFile:t(8548),XMLFile:t(22992)}},74266:(v,p,t)=>{var f=t(60351),i=t(72646),n={Events:t(40),FileTypes:t(67377),File:t(44231),FileTypesManager:t(25028),GetURL:t(15966),LoaderPlugin:t(90894),MergeXHRSettings:t(32710),MultiFile:t(60697),XHRLoader:t(82825),XHRSettings:t(64567)};n=i(!1,n,f),v.exports=n},57635:v=>{v.exports=function(p){for(var t=0,f=0;f<p.length;f++)t+=+p[f];return t/p.length}},14230:(v,p,t)=>{var f=t(20280);v.exports=function(i,n){return f(i)/f(n)/f(i-n)}},27019:v=>{v.exports=function(p,t){return Math.floor(Math.random()*(t-p+1)+p)}},51929:v=>{v.exports=function(p,t,f,i,n){var l=.5*(i-t),e=.5*(n-f),a=p*p;return(2*f-2*i+l+e)*(p*a)+(-3*f+3*i-2*l-e)*a+l*p+f}},23993:v=>{v.exports=function(p,t,f){t===void 0&&(t=0),f===void 0&&(f=10);var i=Math.pow(f,-t);return Math.ceil(p*i)/i}},2543:v=>{v.exports=function(p,t,f){return Math.max(t,Math.min(f,p))}},23407:(v,p,t)=>{var f=t(80925);v.exports=function(i){return i*f.DEG_TO_RAD}},34320:v=>{v.exports=function(p,t){return Math.abs(p-t)}},41426:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(54259),l=t(45733),e=new n,a=new i({initialize:function r(u,s,o,h){u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=r.DefaultOrder),this._x=u,this._y=s,this._z=o,this._order=h,this.onChangeCallback=l},x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback(this)}},set:function(r,u,s,o){return o===void 0&&(o=this._order),this._x=r,this._y=u,this._z=s,this._order=o,this.onChangeCallback(this),this},copy:function(r){return this.set(r.x,r.y,r.z,r.order)},setFromQuaternion:function(r,u,s){return u===void 0&&(u=this._order),s===void 0&&(s=!1),e.fromQuat(r),this.setFromRotationMatrix(e,u,s)},setFromRotationMatrix:function(r,u,s){u===void 0&&(u=this._order),s===void 0&&(s=!1);var o=r.val,h=o[0],c=o[4],d=o[8],g=o[1],m=o[5],y=o[9],w=o[2],x=o[6],T=o[10],E=0,S=0,C=0,A=.99999;switch(u){case"XYZ":S=Math.asin(f(d,-1,1)),Math.abs(d)<A?(E=Math.atan2(-y,T),C=Math.atan2(-c,h)):E=Math.atan2(x,m);break;case"YXZ":E=Math.asin(-f(y,-1,1)),Math.abs(y)<A?(S=Math.atan2(d,T),C=Math.atan2(g,m)):S=Math.atan2(-w,h);break;case"ZXY":E=Math.asin(f(x,-1,1)),Math.abs(x)<A?(S=Math.atan2(-w,T),C=Math.atan2(-c,m)):C=Math.atan2(g,h);break;case"ZYX":S=Math.asin(-f(w,-1,1)),Math.abs(w)<A?(E=Math.atan2(x,T),C=Math.atan2(g,h)):C=Math.atan2(-c,m);break;case"YZX":C=Math.asin(f(g,-1,1)),Math.abs(g)<A?(E=Math.atan2(-y,m),S=Math.atan2(-w,h)):S=Math.atan2(d,T);break;case"XZY":C=Math.asin(-f(c,-1,1)),Math.abs(c)<A?(E=Math.atan2(x,m),S=Math.atan2(d,h)):E=Math.atan2(-y,T)}return this._x=E,this._y=S,this._z=C,this._order=u,s&&this.onChangeCallback(this),this}});a.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],a.DefaultOrder="XYZ",v.exports=a},20280:v=>{v.exports=function(p){if(p===0)return 1;for(var t=p;--p;)t*=p;return t}},62193:v=>{v.exports=function(p,t){return Math.random()*(t-p)+p}},32223:v=>{v.exports=function(p,t,f){t===void 0&&(t=0),f===void 0&&(f=10);var i=Math.pow(f,-t);return Math.floor(p*i)/i}},53023:(v,p,t)=>{var f=t(2543);v.exports=function(i,n,l){return(l-n)*(i=f(i,0,1))+n}},41907:v=>{v.exports=function(p,t){return p/t/1e3}},45799:v=>{v.exports=function(p){return p==parseFloat(p)?!(p%2):void 0}},16660:v=>{v.exports=function(p){return p===parseFloat(p)?!(p%2):void 0}},3821:v=>{v.exports=function(p,t,f){return(t-p)*f+p}},30230:(v,p,t)=>{var f=new(t(69186))({initialize:function(i){this.val=new Float32Array(9),i?this.copy(i):this.identity()},clone:function(){return new f(this)},set:function(i){return this.copy(i)},copy:function(i){var n=this.val,l=i.val;return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],this},fromMat4:function(i){var n=i.val,l=this.val;return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[4],l[4]=n[5],l[5]=n[6],l[6]=n[8],l[7]=n[9],l[8]=n[10],this},fromArray:function(i){var n=this.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this},identity:function(){var i=this.val;return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=1,i[5]=0,i[6]=0,i[7]=0,i[8]=1,this},transpose:function(){var i=this.val,n=i[1],l=i[2],e=i[5];return i[1]=i[3],i[2]=i[6],i[3]=n,i[5]=i[7],i[6]=l,i[7]=e,this},invert:function(){var i=this.val,n=i[0],l=i[1],e=i[2],a=i[3],r=i[4],u=i[5],s=i[6],o=i[7],h=i[8],c=h*r-u*o,d=-h*a+u*s,g=o*a-r*s,m=n*c+l*d+e*g;return m?(m=1/m,i[0]=c*m,i[1]=(-h*l+e*o)*m,i[2]=(u*l-e*r)*m,i[3]=d*m,i[4]=(h*n-e*s)*m,i[5]=(-u*n+e*a)*m,i[6]=g*m,i[7]=(-o*n+l*s)*m,i[8]=(r*n-l*a)*m,this):null},adjoint:function(){var i=this.val,n=i[0],l=i[1],e=i[2],a=i[3],r=i[4],u=i[5],s=i[6],o=i[7],h=i[8];return i[0]=r*h-u*o,i[1]=e*o-l*h,i[2]=l*u-e*r,i[3]=u*s-a*h,i[4]=n*h-e*s,i[5]=e*a-n*u,i[6]=a*o-r*s,i[7]=l*s-n*o,i[8]=n*r-l*a,this},determinant:function(){var i=this.val,n=i[0],l=i[1],e=i[2],a=i[3],r=i[4],u=i[5],s=i[6],o=i[7],h=i[8];return n*(h*r-u*o)+l*(-h*a+u*s)+e*(o*a-r*s)},multiply:function(i){var n=this.val,l=n[0],e=n[1],a=n[2],r=n[3],u=n[4],s=n[5],o=n[6],h=n[7],c=n[8],d=i.val,g=d[0],m=d[1],y=d[2],w=d[3],x=d[4],T=d[5],E=d[6],S=d[7],C=d[8];return n[0]=g*l+m*r+y*o,n[1]=g*e+m*u+y*h,n[2]=g*a+m*s+y*c,n[3]=w*l+x*r+T*o,n[4]=w*e+x*u+T*h,n[5]=w*a+x*s+T*c,n[6]=E*l+S*r+C*o,n[7]=E*e+S*u+C*h,n[8]=E*a+S*s+C*c,this},translate:function(i){var n=this.val,l=i.x,e=i.y;return n[6]=l*n[0]+e*n[3]+n[6],n[7]=l*n[1]+e*n[4]+n[7],n[8]=l*n[2]+e*n[5]+n[8],this},rotate:function(i){var n=this.val,l=n[0],e=n[1],a=n[2],r=n[3],u=n[4],s=n[5],o=Math.sin(i),h=Math.cos(i);return n[0]=h*l+o*r,n[1]=h*e+o*u,n[2]=h*a+o*s,n[3]=h*r-o*l,n[4]=h*u-o*e,n[5]=h*s-o*a,this},scale:function(i){var n=this.val,l=i.x,e=i.y;return n[0]=l*n[0],n[1]=l*n[1],n[2]=l*n[2],n[3]=e*n[3],n[4]=e*n[4],n[5]=e*n[5],this},fromQuat:function(i){var n=i.x,l=i.y,e=i.z,a=i.w,r=n+n,u=l+l,s=e+e,o=n*r,h=n*u,c=n*s,d=l*u,g=l*s,m=e*s,y=a*r,w=a*u,x=a*s,T=this.val;return T[0]=1-(d+m),T[3]=h+x,T[6]=c-w,T[1]=h-x,T[4]=1-(o+m),T[7]=g+y,T[2]=c+w,T[5]=g-y,T[8]=1-(o+d),this},normalFromMat4:function(i){var n=i.val,l=this.val,e=n[0],a=n[1],r=n[2],u=n[3],s=n[4],o=n[5],h=n[6],c=n[7],d=n[8],g=n[9],m=n[10],y=n[11],w=n[12],x=n[13],T=n[14],E=n[15],S=e*o-a*s,C=e*h-r*s,A=e*c-u*s,M=a*h-r*o,b=a*c-u*o,_=r*c-u*h,P=d*x-g*w,L=d*T-m*w,F=d*E-y*w,D=g*T-m*x,k=g*E-y*x,R=m*E-y*T,O=S*R-C*k+A*D+M*F-b*L+_*P;return O?(O=1/O,l[0]=(o*R-h*k+c*D)*O,l[1]=(h*F-s*R-c*L)*O,l[2]=(s*k-o*F+c*P)*O,l[3]=(r*k-a*R-u*D)*O,l[4]=(e*R-r*F+u*L)*O,l[5]=(a*F-e*k-u*P)*O,l[6]=(x*_-T*b+E*M)*O,l[7]=(T*A-w*_-E*C)*O,l[8]=(w*b-x*A+E*S)*O,this):null}});v.exports=f},54259:(v,p,t)=>{var f=t(69186),i=t(33736),n=1e-6,l=new f({initialize:function(o){this.val=new Float32Array(16),o?this.copy(o):this.identity()},clone:function(){return new l(this)},set:function(o){return this.copy(o)},setValues:function(o,h,c,d,g,m,y,w,x,T,E,S,C,A,M,b){var _=this.val;return _[0]=o,_[1]=h,_[2]=c,_[3]=d,_[4]=g,_[5]=m,_[6]=y,_[7]=w,_[8]=x,_[9]=T,_[10]=E,_[11]=S,_[12]=C,_[13]=A,_[14]=M,_[15]=b,this},copy:function(o){var h=o.val;return this.setValues(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])},fromArray:function(o){return this.setValues(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(o,h,c){var d=e.fromQuat(c).val,g=h.x,m=h.y,y=h.z;return this.setValues(d[0]*g,d[1]*g,d[2]*g,0,d[4]*m,d[5]*m,d[6]*m,0,d[8]*y,d[9]*y,d[10]*y,0,o.x,o.y,o.z,1)},xyz:function(o,h,c){this.identity();var d=this.val;return d[12]=o,d[13]=h,d[14]=c,this},scaling:function(o,h,c){this.zero();var d=this.val;return d[0]=o,d[5]=h,d[10]=c,d[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var o=this.val,h=o[1],c=o[2],d=o[3],g=o[6],m=o[7],y=o[11];return o[1]=o[4],o[2]=o[8],o[3]=o[12],o[4]=h,o[6]=o[9],o[7]=o[13],o[8]=c,o[9]=g,o[11]=o[14],o[12]=d,o[13]=m,o[14]=y,this},getInverse:function(o){return this.copy(o),this.invert()},invert:function(){var o=this.val,h=o[0],c=o[1],d=o[2],g=o[3],m=o[4],y=o[5],w=o[6],x=o[7],T=o[8],E=o[9],S=o[10],C=o[11],A=o[12],M=o[13],b=o[14],_=o[15],P=h*y-c*m,L=h*w-d*m,F=h*x-g*m,D=c*w-d*y,k=c*x-g*y,R=d*x-g*w,O=T*M-E*A,B=T*b-S*A,U=T*_-C*A,I=E*b-S*M,Y=E*_-C*M,N=S*_-C*b,X=P*N-L*Y+F*I+D*U-k*B+R*O;return X?(X=1/X,this.setValues((y*N-w*Y+x*I)*X,(d*Y-c*N-g*I)*X,(M*R-b*k+_*D)*X,(S*k-E*R-C*D)*X,(w*U-m*N-x*B)*X,(h*N-d*U+g*B)*X,(b*F-A*R-_*L)*X,(T*R-S*F+C*L)*X,(m*Y-y*U+x*O)*X,(c*U-h*Y-g*O)*X,(A*k-M*F+_*P)*X,(E*F-T*k-C*P)*X,(y*B-m*I-w*O)*X,(h*I-c*B+d*O)*X,(M*L-A*D-b*P)*X,(T*D-E*L+S*P)*X)):this},adjoint:function(){var o=this.val,h=o[0],c=o[1],d=o[2],g=o[3],m=o[4],y=o[5],w=o[6],x=o[7],T=o[8],E=o[9],S=o[10],C=o[11],A=o[12],M=o[13],b=o[14],_=o[15];return this.setValues(y*(S*_-C*b)-E*(w*_-x*b)+M*(w*C-x*S),-(c*(S*_-C*b)-E*(d*_-g*b)+M*(d*C-g*S)),c*(w*_-x*b)-y*(d*_-g*b)+M*(d*x-g*w),-(c*(w*C-x*S)-y*(d*C-g*S)+E*(d*x-g*w)),-(m*(S*_-C*b)-T*(w*_-x*b)+A*(w*C-x*S)),h*(S*_-C*b)-T*(d*_-g*b)+A*(d*C-g*S),-(h*(w*_-x*b)-m*(d*_-g*b)+A*(d*x-g*w)),h*(w*C-x*S)-m*(d*C-g*S)+T*(d*x-g*w),m*(E*_-C*M)-T*(y*_-x*M)+A*(y*C-x*E),-(h*(E*_-C*M)-T*(c*_-g*M)+A*(c*C-g*E)),h*(y*_-x*M)-m*(c*_-g*M)+A*(c*x-g*y),-(h*(y*C-x*E)-m*(c*C-g*E)+T*(c*x-g*y)),-(m*(E*b-S*M)-T*(y*b-w*M)+A*(y*S-w*E)),h*(E*b-S*M)-T*(c*b-d*M)+A*(c*S-d*E),-(h*(y*b-w*M)-m*(c*b-d*M)+A*(c*w-d*y)),h*(y*S-w*E)-m*(c*S-d*E)+T*(c*w-d*y))},determinant:function(){var o=this.val,h=o[0],c=o[1],d=o[2],g=o[3],m=o[4],y=o[5],w=o[6],x=o[7],T=o[8],E=o[9],S=o[10],C=o[11],A=o[12],M=o[13],b=o[14],_=o[15];return(h*y-c*m)*(S*_-C*b)-(h*w-d*m)*(E*_-C*M)+(h*x-g*m)*(E*b-S*M)+(c*w-d*y)*(T*_-C*A)-(c*x-g*y)*(T*b-S*A)+(d*x-g*w)*(T*M-E*A)},multiply:function(o){var h=this.val,c=h[0],d=h[1],g=h[2],m=h[3],y=h[4],w=h[5],x=h[6],T=h[7],E=h[8],S=h[9],C=h[10],A=h[11],M=h[12],b=h[13],_=h[14],P=h[15],L=o.val,F=L[0],D=L[1],k=L[2],R=L[3];return h[0]=F*c+D*y+k*E+R*M,h[1]=F*d+D*w+k*S+R*b,h[2]=F*g+D*x+k*C+R*_,h[3]=F*m+D*T+k*A+R*P,F=L[4],D=L[5],k=L[6],R=L[7],h[4]=F*c+D*y+k*E+R*M,h[5]=F*d+D*w+k*S+R*b,h[6]=F*g+D*x+k*C+R*_,h[7]=F*m+D*T+k*A+R*P,F=L[8],D=L[9],k=L[10],R=L[11],h[8]=F*c+D*y+k*E+R*M,h[9]=F*d+D*w+k*S+R*b,h[10]=F*g+D*x+k*C+R*_,h[11]=F*m+D*T+k*A+R*P,F=L[12],D=L[13],k=L[14],R=L[15],h[12]=F*c+D*y+k*E+R*M,h[13]=F*d+D*w+k*S+R*b,h[14]=F*g+D*x+k*C+R*_,h[15]=F*m+D*T+k*A+R*P,this},multiplyLocal:function(o){var h=this.val,c=o.val;return this.setValues(h[0]*c[0]+h[1]*c[4]+h[2]*c[8]+h[3]*c[12],h[0]*c[1]+h[1]*c[5]+h[2]*c[9]+h[3]*c[13],h[0]*c[2]+h[1]*c[6]+h[2]*c[10]+h[3]*c[14],h[0]*c[3]+h[1]*c[7]+h[2]*c[11]+h[3]*c[15],h[4]*c[0]+h[5]*c[4]+h[6]*c[8]+h[7]*c[12],h[4]*c[1]+h[5]*c[5]+h[6]*c[9]+h[7]*c[13],h[4]*c[2]+h[5]*c[6]+h[6]*c[10]+h[7]*c[14],h[4]*c[3]+h[5]*c[7]+h[6]*c[11]+h[7]*c[15],h[8]*c[0]+h[9]*c[4]+h[10]*c[8]+h[11]*c[12],h[8]*c[1]+h[9]*c[5]+h[10]*c[9]+h[11]*c[13],h[8]*c[2]+h[9]*c[6]+h[10]*c[10]+h[11]*c[14],h[8]*c[3]+h[9]*c[7]+h[10]*c[11]+h[11]*c[15],h[12]*c[0]+h[13]*c[4]+h[14]*c[8]+h[15]*c[12],h[12]*c[1]+h[13]*c[5]+h[14]*c[9]+h[15]*c[13],h[12]*c[2]+h[13]*c[6]+h[14]*c[10]+h[15]*c[14],h[12]*c[3]+h[13]*c[7]+h[14]*c[11]+h[15]*c[15])},premultiply:function(o){return this.multiplyMatrices(o,this)},multiplyMatrices:function(o,h){var c=o.val,d=h.val,g=c[0],m=c[4],y=c[8],w=c[12],x=c[1],T=c[5],E=c[9],S=c[13],C=c[2],A=c[6],M=c[10],b=c[14],_=c[3],P=c[7],L=c[11],F=c[15],D=d[0],k=d[4],R=d[8],O=d[12],B=d[1],U=d[5],I=d[9],Y=d[13],N=d[2],X=d[6],z=d[10],V=d[14],G=d[3],W=d[7],H=d[11],j=d[15];return this.setValues(g*D+m*B+y*N+w*G,x*D+T*B+E*N+S*G,C*D+A*B+M*N+b*G,_*D+P*B+L*N+F*G,g*k+m*U+y*X+w*W,x*k+T*U+E*X+S*W,C*k+A*U+M*X+b*W,_*k+P*U+L*X+F*W,g*R+m*I+y*z+w*H,x*R+T*I+E*z+S*H,C*R+A*I+M*z+b*H,_*R+P*I+L*z+F*H,g*O+m*Y+y*V+w*j,x*O+T*Y+E*V+S*j,C*O+A*Y+M*V+b*j,_*O+P*Y+L*V+F*j)},translate:function(o){return this.translateXYZ(o.x,o.y,o.z)},translateXYZ:function(o,h,c){var d=this.val;return d[12]=d[0]*o+d[4]*h+d[8]*c+d[12],d[13]=d[1]*o+d[5]*h+d[9]*c+d[13],d[14]=d[2]*o+d[6]*h+d[10]*c+d[14],d[15]=d[3]*o+d[7]*h+d[11]*c+d[15],this},scale:function(o){return this.scaleXYZ(o.x,o.y,o.z)},scaleXYZ:function(o,h,c){var d=this.val;return d[0]=d[0]*o,d[1]=d[1]*o,d[2]=d[2]*o,d[3]=d[3]*o,d[4]=d[4]*h,d[5]=d[5]*h,d[6]=d[6]*h,d[7]=d[7]*h,d[8]=d[8]*c,d[9]=d[9]*c,d[10]=d[10]*c,d[11]=d[11]*c,this},makeRotationAxis:function(o,h){var c=Math.cos(h),d=Math.sin(h),g=1-c,m=o.x,y=o.y,w=o.z,x=g*m,T=g*y;return this.setValues(x*m+c,x*y-d*w,x*w+d*y,0,x*y+d*w,T*y+c,T*w-d*m,0,x*w-d*y,T*w+d*m,g*w*w+c,0,0,0,0,1)},rotate:function(o,h){var c=this.val,d=h.x,g=h.y,m=h.z,y=Math.sqrt(d*d+g*g+m*m);if(Math.abs(y)<n)return this;d*=y=1/y,g*=y,m*=y;var w=Math.sin(o),x=Math.cos(o),T=1-x,E=c[0],S=c[1],C=c[2],A=c[3],M=c[4],b=c[5],_=c[6],P=c[7],L=c[8],F=c[9],D=c[10],k=c[11],R=c[12],O=c[13],B=c[14],U=c[15],I=d*d*T+x,Y=g*d*T+m*w,N=m*d*T-g*w,X=d*g*T-m*w,z=g*g*T+x,V=m*g*T+d*w,G=d*m*T+g*w,W=g*m*T-d*w,H=m*m*T+x;return this.setValues(E*I+M*Y+L*N,S*I+b*Y+F*N,C*I+_*Y+D*N,A*I+P*Y+k*N,E*X+M*z+L*V,S*X+b*z+F*V,C*X+_*z+D*V,A*X+P*z+k*V,E*G+M*W+L*H,S*G+b*W+F*H,C*G+_*W+D*H,A*G+P*W+k*H,R,O,B,U)},rotateX:function(o){var h=this.val,c=Math.sin(o),d=Math.cos(o),g=h[4],m=h[5],y=h[6],w=h[7],x=h[8],T=h[9],E=h[10],S=h[11];return h[4]=g*d+x*c,h[5]=m*d+T*c,h[6]=y*d+E*c,h[7]=w*d+S*c,h[8]=x*d-g*c,h[9]=T*d-m*c,h[10]=E*d-y*c,h[11]=S*d-w*c,this},rotateY:function(o){var h=this.val,c=Math.sin(o),d=Math.cos(o),g=h[0],m=h[1],y=h[2],w=h[3],x=h[8],T=h[9],E=h[10],S=h[11];return h[0]=g*d-x*c,h[1]=m*d-T*c,h[2]=y*d-E*c,h[3]=w*d-S*c,h[8]=g*c+x*d,h[9]=m*c+T*d,h[10]=y*c+E*d,h[11]=w*c+S*d,this},rotateZ:function(o){var h=this.val,c=Math.sin(o),d=Math.cos(o),g=h[0],m=h[1],y=h[2],w=h[3],x=h[4],T=h[5],E=h[6],S=h[7];return h[0]=g*d+x*c,h[1]=m*d+T*c,h[2]=y*d+E*c,h[3]=w*d+S*c,h[4]=x*d-g*c,h[5]=T*d-m*c,h[6]=E*d-y*c,h[7]=S*d-w*c,this},fromRotationTranslation:function(o,h){var c=o.x,d=o.y,g=o.z,m=o.w,y=c+c,w=d+d,x=g+g,T=c*y,E=c*w,S=c*x,C=d*w,A=d*x,M=g*x,b=m*y,_=m*w,P=m*x;return this.setValues(1-(C+M),E+P,S-_,0,E-P,1-(T+M),A+b,0,S+_,A-b,1-(T+C),0,h.x,h.y,h.z,1)},fromQuat:function(o){var h=o.x,c=o.y,d=o.z,g=o.w,m=h+h,y=c+c,w=d+d,x=h*m,T=h*y,E=h*w,S=c*y,C=c*w,A=d*w,M=g*m,b=g*y,_=g*w;return this.setValues(1-(S+A),T+_,E-b,0,T-_,1-(x+A),C+M,0,E+b,C-M,1-(x+S),0,0,0,0,1)},frustum:function(o,h,c,d,g,m){var y=1/(h-o),w=1/(d-c),x=1/(g-m);return this.setValues(2*g*y,0,0,0,0,2*g*w,0,0,(h+o)*y,(d+c)*w,(m+g)*x,-1,0,0,m*g*2*x,0)},perspective:function(o,h,c,d){var g=1/Math.tan(o/2),m=1/(c-d);return this.setValues(g/h,0,0,0,0,g,0,0,0,0,(d+c)*m,-1,0,0,2*d*c*m,0)},perspectiveLH:function(o,h,c,d){return this.setValues(2*c/o,0,0,0,0,2*c/h,0,0,0,0,-d/(c-d),1,0,0,c*d/(c-d),0)},ortho:function(o,h,c,d,g,m){var y=o-h,w=c-d,x=g-m;return y=y===0?y:1/y,w=w===0?w:1/w,x=x===0?x:1/x,this.setValues(-2*y,0,0,0,0,-2*w,0,0,0,0,2*x,0,(o+h)*y,(d+c)*w,(m+g)*x,1)},lookAtRH:function(o,h,c){var d=this.val;return s.subVectors(o,h),s.getLengthSquared()===0&&(s.z=1),s.normalize(),r.crossVectors(c,s),r.getLengthSquared()===0&&(Math.abs(c.z)===1?s.x+=1e-4:s.z+=1e-4,s.normalize(),r.crossVectors(c,s)),r.normalize(),u.crossVectors(s,r),d[0]=r.x,d[1]=r.y,d[2]=r.z,d[4]=u.x,d[5]=u.y,d[6]=u.z,d[8]=s.x,d[9]=s.y,d[10]=s.z,this},lookAt:function(o,h,c){var d=o.x,g=o.y,m=o.z,y=c.x,w=c.y,x=c.z,T=h.x,E=h.y,S=h.z;if(Math.abs(d-T)<n&&Math.abs(g-E)<n&&Math.abs(m-S)<n)return this.identity();var C=d-T,A=g-E,M=m-S,b=1/Math.sqrt(C*C+A*A+M*M),_=w*(M*=b)-x*(A*=b),P=x*(C*=b)-y*M,L=y*A-w*C;(b=Math.sqrt(_*_+P*P+L*L))?(_*=b=1/b,P*=b,L*=b):(_=0,P=0,L=0);var F=A*L-M*P,D=M*_-C*L,k=C*P-A*_;return(b=Math.sqrt(F*F+D*D+k*k))?(F*=b=1/b,D*=b,k*=b):(F=0,D=0,k=0),this.setValues(_,F,C,0,P,D,A,0,L,k,M,0,-(_*d+P*g+L*m),-(F*d+D*g+k*m),-(C*d+A*g+M*m),1)},yawPitchRoll:function(o,h,c){this.zero(),e.zero(),a.zero();var d=this.val,g=e.val,m=a.val,y=Math.sin(c),w=Math.cos(c);return d[10]=1,d[15]=1,d[0]=w,d[1]=y,d[4]=-y,d[5]=w,y=Math.sin(h),w=Math.cos(h),g[0]=1,g[15]=1,g[5]=w,g[10]=w,g[9]=-y,g[6]=y,y=Math.sin(o),w=Math.cos(o),m[5]=1,m[15]=1,m[0]=w,m[2]=-y,m[8]=y,m[10]=w,this.multiplyLocal(e),this.multiplyLocal(a),this},setWorldMatrix:function(o,h,c,d,g){return this.yawPitchRoll(o.y,o.x,o.z),e.scaling(c.x,c.y,c.z),a.xyz(h.x,h.y,h.z),this.multiplyLocal(e),this.multiplyLocal(a),d&&this.multiplyLocal(d),g&&this.multiplyLocal(g),this},multiplyToMat4:function(o,h){var c=this.val,d=o.val,g=c[0],m=c[1],y=c[2],w=c[3],x=c[4],T=c[5],E=c[6],S=c[7],C=c[8],A=c[9],M=c[10],b=c[11],_=c[12],P=c[13],L=c[14],F=c[15],D=d[0],k=d[1],R=d[2],O=d[3],B=d[4],U=d[5],I=d[6],Y=d[7],N=d[8],X=d[9],z=d[10],V=d[11],G=d[12],W=d[13],H=d[14],j=d[15];return h.setValues(D*g+k*x+R*C+O*_,k*m+k*T+R*A+O*P,R*y+k*E+R*M+O*L,O*w+k*S+R*b+O*F,B*g+U*x+I*C+Y*_,B*m+U*T+I*A+Y*P,B*y+U*E+I*M+Y*L,B*w+U*S+I*b+Y*F,N*g+X*x+z*C+V*_,N*m+X*T+z*A+V*P,N*y+X*E+z*M+V*L,N*w+X*S+z*b+V*F,G*g+W*x+H*C+j*_,G*m+W*T+H*A+j*P,G*y+W*E+H*M+j*L,G*w+W*S+H*b+j*F)},fromRotationXYTranslation:function(o,h,c){var d=h.x,g=h.y,m=h.z,y=Math.sin(o.x),w=Math.cos(o.x),x=Math.sin(o.y),T=Math.cos(o.y),E=d,S=g,C=m,A=-y,M=0-A*x,b=0-w*x,_=A*T,P=w*T;return c||(E=T*d+x*m,S=M*d+w*g+_*m,C=b*d+y*g+P*m),this.setValues(T,M,b,0,0,w,y,0,x,_,P,0,E,S,C,1)},getMaxScaleOnAxis:function(){var o=this.val,h=o[0]*o[0]+o[1]*o[1]+o[2]*o[2],c=o[4]*o[4]+o[5]*o[5]+o[6]*o[6],d=o[8]*o[8]+o[9]*o[9]+o[10]*o[10];return Math.sqrt(Math.max(h,c,d))}}),e=new l,a=new l,r=new i,u=new i,s=new i;v.exports=l},65617:v=>{v.exports=function(p,t,f){return Math.min(p+t,f)}},89036:v=>{v.exports=function(p){var t=p.length;if(t===0)return 0;p.sort(function(i,n){return i-n});var f=Math.floor(t/2);return t%2==0?(p[f]+p[f-1])/2:p[f]}},96448:v=>{v.exports=function(p,t,f){return Math.max(p-t,f)}},82356:v=>{v.exports=function(p,t,f,i){f===void 0&&(f=t+1);var n=(p-t)/(f-t);return n>1?i!==void 0?(n=(i-p)/(i-f))<0&&(n=0):n=1:n<0&&(n=0),n}},63060:(v,p,t)=>{var f=t(69186),i=t(30230),n=t(45733),l=t(33736),e=1e-6,a=new Int8Array([1,2,0]),r=new Float32Array([0,0,0]),u=new l(1,0,0),s=new l(0,1,0),o=new l,h=new i,c=new f({initialize:function(d,g,m,y){this.onChangeCallback=n,this.set(d,g,m,y)},x:{get:function(){return this._x},set:function(d){this._x=d,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(d){this._y=d,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(d){this._z=d,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(d){this._w=d,this.onChangeCallback(this)}},copy:function(d){return this.set(d)},set:function(d,g,m,y,w){return w===void 0&&(w=!0),typeof d=="object"?(this._x=d.x||0,this._y=d.y||0,this._z=d.z||0,this._w=d.w||0):(this._x=d||0,this._y=g||0,this._z=m||0,this._w=y||0),w&&this.onChangeCallback(this),this},add:function(d){return this._x+=d.x,this._y+=d.y,this._z+=d.z,this._w+=d.w,this.onChangeCallback(this),this},subtract:function(d){return this._x-=d.x,this._y-=d.y,this._z-=d.z,this._w-=d.w,this.onChangeCallback(this),this},scale:function(d){return this._x*=d,this._y*=d,this._z*=d,this._w*=d,this.onChangeCallback(this),this},length:function(){var d=this.x,g=this.y,m=this.z,y=this.w;return Math.sqrt(d*d+g*g+m*m+y*y)},lengthSq:function(){var d=this.x,g=this.y,m=this.z,y=this.w;return d*d+g*g+m*m+y*y},normalize:function(){var d=this.x,g=this.y,m=this.z,y=this.w,w=d*d+g*g+m*m+y*y;return w>0&&(w=1/Math.sqrt(w),this._x=d*w,this._y=g*w,this._z=m*w,this._w=y*w),this.onChangeCallback(this),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lerp:function(d,g){g===void 0&&(g=0);var m=this.x,y=this.y,w=this.z,x=this.w;return this.set(m+g*(d.x-m),y+g*(d.y-y),w+g*(d.z-w),x+g*(d.w-x))},rotationTo:function(d,g){var m=d.x*g.x+d.y*g.y+d.z*g.z;return m<-.999999?(o.copy(u).cross(d).length()<e&&o.copy(s).cross(d),o.normalize(),this.setAxisAngle(o,Math.PI)):m>.999999?this.set(0,0,0,1):(o.copy(d).cross(g),this._x=o.x,this._y=o.y,this._z=o.z,this._w=1+m,this.normalize())},setAxes:function(d,g,m){var y=h.val;return y[0]=g.x,y[3]=g.y,y[6]=g.z,y[1]=m.x,y[4]=m.y,y[7]=m.z,y[2]=-d.x,y[5]=-d.y,y[8]=-d.z,this.fromMat3(h).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(d,g){g*=.5;var m=Math.sin(g);return this.set(m*d.x,m*d.y,m*d.z,Math.cos(g))},multiply:function(d){var g=this.x,m=this.y,y=this.z,w=this.w,x=d.x,T=d.y,E=d.z,S=d.w;return this.set(g*S+w*x+m*E-y*T,m*S+w*T+y*x-g*E,y*S+w*E+g*T-m*x,w*S-g*x-m*T-y*E)},slerp:function(d,g){var m=this.x,y=this.y,w=this.z,x=this.w,T=d.x,E=d.y,S=d.z,C=d.w,A=m*T+y*E+w*S+x*C;A<0&&(A=-A,T=-T,E=-E,S=-S,C=-C);var M=1-g,b=g;if(1-A>e){var _=Math.acos(A),P=Math.sin(_);M=Math.sin((1-g)*_)/P,b=Math.sin(g*_)/P}return this.set(M*m+b*T,M*y+b*E,M*w+b*S,M*x+b*C)},invert:function(){var d=this.x,g=this.y,m=this.z,y=this.w,w=d*d+g*g+m*m+y*y,x=w?1/w:0;return this.set(-d*x,-g*x,-m*x,y*x)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(d){d*=.5;var g=this.x,m=this.y,y=this.z,w=this.w,x=Math.sin(d),T=Math.cos(d);return this.set(g*T+w*x,m*T+y*x,y*T-m*x,w*T-g*x)},rotateY:function(d){d*=.5;var g=this.x,m=this.y,y=this.z,w=this.w,x=Math.sin(d),T=Math.cos(d);return this.set(g*T-y*x,m*T+w*x,y*T+g*x,w*T-m*x)},rotateZ:function(d){d*=.5;var g=this.x,m=this.y,y=this.z,w=this.w,x=Math.sin(d),T=Math.cos(d);return this.set(g*T+m*x,m*T-g*x,y*T+w*x,w*T-y*x)},calculateW:function(){var d=this.x,g=this.y,m=this.z;return this.w=-Math.sqrt(1-d*d-g*g-m*m),this},setFromEuler:function(d,g){var m=d.x/2,y=d.y/2,w=d.z/2,x=Math.cos(m),T=Math.cos(y),E=Math.cos(w),S=Math.sin(m),C=Math.sin(y),A=Math.sin(w);switch(d.order){case"XYZ":this.set(S*T*E+x*C*A,x*C*E-S*T*A,x*T*A+S*C*E,x*T*E-S*C*A,g);break;case"YXZ":this.set(S*T*E+x*C*A,x*C*E-S*T*A,x*T*A-S*C*E,x*T*E+S*C*A,g);break;case"ZXY":this.set(S*T*E-x*C*A,x*C*E+S*T*A,x*T*A+S*C*E,x*T*E-S*C*A,g);break;case"ZYX":this.set(S*T*E-x*C*A,x*C*E+S*T*A,x*T*A-S*C*E,x*T*E+S*C*A,g);break;case"YZX":this.set(S*T*E+x*C*A,x*C*E+S*T*A,x*T*A-S*C*E,x*T*E-S*C*A,g);break;case"XZY":this.set(S*T*E-x*C*A,x*C*E-S*T*A,x*T*A+S*C*E,x*T*E+S*C*A,g)}return this},setFromRotationMatrix:function(d){var g,m=d.val,y=m[0],w=m[4],x=m[8],T=m[1],E=m[5],S=m[9],C=m[2],A=m[6],M=m[10],b=y+E+M;return b>0?(g=.5/Math.sqrt(b+1),this.set((A-S)*g,(x-C)*g,(T-w)*g,.25/g)):y>E&&y>M?(g=2*Math.sqrt(1+y-E-M),this.set(.25*g,(w+T)/g,(x+C)/g,(A-S)/g)):E>M?(g=2*Math.sqrt(1+E-y-M),this.set((w+T)/g,.25*g,(S+A)/g,(x-C)/g)):(g=2*Math.sqrt(1+M-y-E),this.set((x+C)/g,(S+A)/g,.25*g,(T-w)/g)),this},fromMat3:function(d){var g,m=d.val,y=m[0]+m[4]+m[8];if(y>0)g=Math.sqrt(y+1),this.w=.5*g,g=.5/g,this._x=(m[7]-m[5])*g,this._y=(m[2]-m[6])*g,this._z=(m[3]-m[1])*g;else{var w=0;m[4]>m[0]&&(w=1),m[8]>m[3*w+w]&&(w=2);var x=a[w],T=a[x];g=Math.sqrt(m[3*w+w]-m[3*x+x]-m[3*T+T]+1),r[w]=.5*g,g=.5/g,r[x]=(m[3*x+w]+m[3*w+x])*g,r[T]=(m[3*T+w]+m[3*w+T])*g,this._x=r[0],this._y=r[1],this._z=r[2],this._w=(m[3*T+x]-m[3*x+T])*g}return this.onChangeCallback(this),this}});v.exports=c},33642:(v,p,t)=>{var f=t(80925);v.exports=function(i){return i*f.RAD_TO_DEG}},7192:v=>{v.exports=function(p,t){t===void 0&&(t=1);var f=2*Math.random()*Math.PI;return p.x=Math.cos(f)*t,p.y=Math.sin(f)*t,p}},43815:v=>{v.exports=function(p,t){t===void 0&&(t=1);var f=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*t;return p.x=Math.cos(f)*n,p.y=Math.sin(f)*n,p.z=i*t,p}},6969:v=>{v.exports=function(p,t){return t===void 0&&(t=1),p.x=(2*Math.random()-1)*t,p.y=(2*Math.random()-1)*t,p.z=(2*Math.random()-1)*t,p.w=(2*Math.random()-1)*t,p}},11747:v=>{v.exports=function(p,t){var f=p.x,i=p.y;return p.x=f*Math.cos(t)-i*Math.sin(t),p.y=f*Math.sin(t)+i*Math.cos(t),p}},45707:v=>{v.exports=function(p,t,f,i){var n=Math.cos(i),l=Math.sin(i),e=p.x-t,a=p.y-f;return p.x=e*n-a*l+t,p.y=e*l+a*n+f,p}},79749:v=>{v.exports=function(p,t,f,i,n){var l=i+Math.atan2(p.y-f,p.x-t);return p.x=t+n*Math.cos(l),p.y=f+n*Math.sin(l),p}},20065:v=>{v.exports=function(p,t,f,i,n){return p.x=t+n*Math.cos(i),p.y=f+n*Math.sin(i),p}},26578:(v,p,t)=>{var f=t(33736),i=t(54259),n=t(63060),l=new i,e=new n,a=new f;v.exports=function(r,u,s){return e.setAxisAngle(u,s),l.fromRotationTranslation(e,a.set(0,0,0)),r.transformMat4(l)}},40496:v=>{v.exports=function(p){return p>0?Math.ceil(p):Math.floor(p)}},35789:v=>{v.exports=function(p,t,f){t===void 0&&(t=0),f===void 0&&(f=10);var i=Math.pow(f,-t);return Math.round(p*i)/i}},57955:v=>{v.exports=function(p,t,f,i){t===void 0&&(t=1),f===void 0&&(f=1),i===void 0&&(i=1),i*=Math.PI/p;for(var n=[],l=[],e=0;e<p;e++)t+=(f-=t*i)*i,n[e]=f,l[e]=t;return{sin:l,cos:n,length:p}}},89989:v=>{v.exports=function(p,t,f){return p<=t?0:p>=f?1:(p=(p-t)/(f-t))*p*(3-2*p)}},29817:v=>{v.exports=function(p,t,f){return(p=Math.max(0,Math.min(1,(p-t)/(f-t))))*p*p*(p*(6*p-15)+10)}},76384:(v,p,t)=>{var f=t(17321);v.exports=function(i,n,l,e){e===void 0&&(e=new f);var a=0,r=0;return i>0&&i<=n*l&&(a=i>n-1?i-(r=Math.floor(i/n))*n:i),e.set(a,r)}},37423:(v,p,t)=>{var f=t(17321);v.exports=function(i,n,l,e,a,r,u,s){s===void 0&&(s=new f);var o=Math.sin(a),h=Math.cos(a),c=h*r,d=o*r,g=-o*u,m=h*u,y=1/(c*m+g*-d);return s.x=m*y*i+-g*y*n+(e*g-l*m)*y,s.y=c*y*n+-d*y*i+(-e*c+l*d)*y,s}},17321:(v,p,t)=>{var f=t(69186),i=t(97026),n=new f({initialize:function(l,e){this.x=0,this.y=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0):(e===void 0&&(e=l),this.x=l||0,this.y=e||0)},clone:function(){return new n(this.x,this.y)},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},setFromObject:function(l){return this.x=l.x||0,this.y=l.y||0,this},set:function(l,e){return e===void 0&&(e=l),this.x=l,this.y=e,this},setTo:function(l,e){return this.set(l,e)},setToPolar:function(l,e){return e==null&&(e=1),this.x=Math.cos(l)*e,this.y=Math.sin(l)*e,this},equals:function(l){return this.x===l.x&&this.y===l.y},fuzzyEquals:function(l,e){return i(this.x,l.x,e)&&i(this.y,l.y,e)},angle:function(){var l=Math.atan2(this.y,this.x);return l<0&&(l+=2*Math.PI),l},setAngle:function(l){return this.setToPolar(l,this.length())},add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l):(this.x=0,this.y=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(l){var e=l.x-this.x,a=l.y-this.y;return Math.sqrt(e*e+a*a)},distanceSq:function(l){var e=l.x-this.x,a=l.y-this.y;return e*e+a*a},length:function(){var l=this.x,e=this.y;return Math.sqrt(l*l+e*e)},setLength:function(l){return this.normalize().scale(l)},lengthSq:function(){var l=this.x,e=this.y;return l*l+e*e},normalize:function(){var l=this.x,e=this.y,a=l*l+e*e;return a>0&&(a=1/Math.sqrt(a),this.x=l*a,this.y=e*a),this},normalizeRightHand:function(){var l=this.x;return this.x=-1*this.y,this.y=l,this},normalizeLeftHand:function(){var l=this.x;return this.x=this.y,this.y=-1*l,this},dot:function(l){return this.x*l.x+this.y*l.y},cross:function(l){return this.x*l.y-this.y*l.x},lerp:function(l,e){e===void 0&&(e=0);var a=this.x,r=this.y;return this.x=a+e*(l.x-a),this.y=r+e*(l.y-r),this},transformMat3:function(l){var e=this.x,a=this.y,r=l.val;return this.x=r[0]*e+r[3]*a+r[6],this.y=r[1]*e+r[4]*a+r[7],this},transformMat4:function(l){var e=this.x,a=this.y,r=l.val;return this.x=r[0]*e+r[4]*a+r[12],this.y=r[1]*e+r[5]*a+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(l){var e=this.length();return e&&e>l&&this.scale(l/e),this},reflect:function(l){return l=l.clone().normalize(),this.subtract(l.scale(2*this.dot(l)))},mirror:function(l){return this.reflect(l).negate()},rotate:function(l){var e=Math.cos(l),a=Math.sin(l);return this.set(e*this.x-a*this.y,a*this.x+e*this.y)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),v.exports=n},33736:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n,l){this.x=0,this.y=0,this.z=0,typeof i=="object"?(this.x=i.x||0,this.y=i.y||0,this.z=i.z||0):(this.x=i||0,this.y=n||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this},max:function(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this},clone:function(){return new f(this.x,this.y,this.z)},addVectors:function(i,n){return this.x=i.x+n.x,this.y=i.y+n.y,this.z=i.z+n.z,this},crossVectors:function(i,n){var l=i.x,e=i.y,a=i.z,r=n.x,u=n.y,s=n.z;return this.x=e*s-a*u,this.y=a*r-l*s,this.z=l*u-e*r,this},equals:function(i){return this.x===i.x&&this.y===i.y&&this.z===i.z},copy:function(i){return this.x=i.x,this.y=i.y,this.z=i.z||0,this},set:function(i,n,l){return typeof i=="object"?(this.x=i.x||0,this.y=i.y||0,this.z=i.z||0):(this.x=i||0,this.y=n||0,this.z=l||0),this},setFromMatrixPosition:function(i){return this.fromArray(i.val,12)},setFromMatrixColumn:function(i,n){return this.fromArray(i.val,4*n)},fromArray:function(i,n){return n===void 0&&(n=0),this.x=i[n],this.y=i[n+1],this.z=i[n+2],this},add:function(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z||0,this},addScalar:function(i){return this.x+=i,this.y+=i,this.z+=i,this},addScale:function(i,n){return this.x+=i.x*n,this.y+=i.y*n,this.z+=i.z*n||0,this},subtract:function(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z||0,this},multiply:function(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z||1,this},scale:function(i){return isFinite(i)?(this.x*=i,this.y*=i,this.z*=i):(this.x=0,this.y=0,this.z=0),this},divide:function(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(i){var n=i.x-this.x,l=i.y-this.y,e=i.z-this.z||0;return Math.sqrt(n*n+l*l+e*e)},distanceSq:function(i){var n=i.x-this.x,l=i.y-this.y,e=i.z-this.z||0;return n*n+l*l+e*e},length:function(){var i=this.x,n=this.y,l=this.z;return Math.sqrt(i*i+n*n+l*l)},lengthSq:function(){var i=this.x,n=this.y,l=this.z;return i*i+n*n+l*l},normalize:function(){var i=this.x,n=this.y,l=this.z,e=i*i+n*n+l*l;return e>0&&(e=1/Math.sqrt(e),this.x=i*e,this.y=n*e,this.z=l*e),this},dot:function(i){return this.x*i.x+this.y*i.y+this.z*i.z},cross:function(i){var n=this.x,l=this.y,e=this.z,a=i.x,r=i.y,u=i.z;return this.x=l*u-e*r,this.y=e*a-n*u,this.z=n*r-l*a,this},lerp:function(i,n){n===void 0&&(n=0);var l=this.x,e=this.y,a=this.z;return this.x=l+n*(i.x-l),this.y=e+n*(i.y-e),this.z=a+n*(i.z-a),this},applyMatrix3:function(i){var n=this.x,l=this.y,e=this.z,a=i.val;return this.x=a[0]*n+a[3]*l+a[6]*e,this.y=a[1]*n+a[4]*l+a[7]*e,this.z=a[2]*n+a[5]*l+a[8]*e,this},applyMatrix4:function(i){var n=this.x,l=this.y,e=this.z,a=i.val,r=1/(a[3]*n+a[7]*l+a[11]*e+a[15]);return this.x=(a[0]*n+a[4]*l+a[8]*e+a[12])*r,this.y=(a[1]*n+a[5]*l+a[9]*e+a[13])*r,this.z=(a[2]*n+a[6]*l+a[10]*e+a[14])*r,this},transformMat3:function(i){var n=this.x,l=this.y,e=this.z,a=i.val;return this.x=n*a[0]+l*a[3]+e*a[6],this.y=n*a[1]+l*a[4]+e*a[7],this.z=n*a[2]+l*a[5]+e*a[8],this},transformMat4:function(i){var n=this.x,l=this.y,e=this.z,a=i.val;return this.x=a[0]*n+a[4]*l+a[8]*e+a[12],this.y=a[1]*n+a[5]*l+a[9]*e+a[13],this.z=a[2]*n+a[6]*l+a[10]*e+a[14],this},transformCoordinates:function(i){var n=this.x,l=this.y,e=this.z,a=i.val,r=n*a[0]+l*a[4]+e*a[8]+a[12],u=n*a[1]+l*a[5]+e*a[9]+a[13],s=n*a[2]+l*a[6]+e*a[10]+a[14],o=n*a[3]+l*a[7]+e*a[11]+a[15];return this.x=r/o,this.y=u/o,this.z=s/o,this},transformQuat:function(i){var n=this.x,l=this.y,e=this.z,a=i.x,r=i.y,u=i.z,s=i.w,o=s*n+r*e-u*l,h=s*l+u*n-a*e,c=s*e+a*l-r*n,d=-a*n-r*l-u*e;return this.x=o*s+d*-a+h*-u-c*-r,this.y=h*s+d*-r+c*-a-o*-u,this.z=c*s+d*-u+o*-r-h*-a,this},project:function(i){var n=this.x,l=this.y,e=this.z,a=i.val,r=a[0],u=a[1],s=a[2],o=a[3],h=a[4],c=a[5],d=a[6],g=a[7],m=a[8],y=a[9],w=a[10],x=a[11],T=a[12],E=a[13],S=a[14],C=1/(n*o+l*g+e*x+a[15]);return this.x=(n*r+l*h+e*m+T)*C,this.y=(n*u+l*c+e*y+E)*C,this.z=(n*s+l*d+e*w+S)*C,this},projectViewMatrix:function(i,n){return this.applyMatrix4(i).applyMatrix4(n)},unprojectViewMatrix:function(i,n){return this.applyMatrix4(i).applyMatrix4(n)},unproject:function(i,n){var l=i.x,e=i.y,a=i.z,r=i.w,u=this.x-l,s=r-this.y-1-e,o=this.z;return this.x=2*u/a-1,this.y=2*s/r-1,this.z=2*o-1,this.project(n)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});f.ZERO=new f,f.RIGHT=new f(1,0,0),f.LEFT=new f(-1,0,0),f.UP=new f(0,-1,0),f.DOWN=new f(0,1,0),f.FORWARD=new f(0,0,1),f.BACK=new f(0,0,-1),f.ONE=new f(1,1,1),v.exports=f},37254:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n,l,e){this.x=0,this.y=0,this.z=0,this.w=0,typeof i=="object"?(this.x=i.x||0,this.y=i.y||0,this.z=i.z||0,this.w=i.w||0):(this.x=i||0,this.y=n||0,this.z=l||0,this.w=e||0)},clone:function(){return new f(this.x,this.y,this.z,this.w)},copy:function(i){return this.x=i.x,this.y=i.y,this.z=i.z||0,this.w=i.w||0,this},equals:function(i){return this.x===i.x&&this.y===i.y&&this.z===i.z&&this.w===i.w},set:function(i,n,l,e){return typeof i=="object"?(this.x=i.x||0,this.y=i.y||0,this.z=i.z||0,this.w=i.w||0):(this.x=i||0,this.y=n||0,this.z=l||0,this.w=e||0),this},add:function(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z||0,this.w+=i.w||0,this},subtract:function(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z||0,this.w-=i.w||0,this},scale:function(i){return this.x*=i,this.y*=i,this.z*=i,this.w*=i,this},length:function(){var i=this.x,n=this.y,l=this.z,e=this.w;return Math.sqrt(i*i+n*n+l*l+e*e)},lengthSq:function(){var i=this.x,n=this.y,l=this.z,e=this.w;return i*i+n*n+l*l+e*e},normalize:function(){var i=this.x,n=this.y,l=this.z,e=this.w,a=i*i+n*n+l*l+e*e;return a>0&&(a=1/Math.sqrt(a),this.x=i*a,this.y=n*a,this.z=l*a,this.w=e*a),this},dot:function(i){return this.x*i.x+this.y*i.y+this.z*i.z+this.w*i.w},lerp:function(i,n){n===void 0&&(n=0);var l=this.x,e=this.y,a=this.z,r=this.w;return this.x=l+n*(i.x-l),this.y=e+n*(i.y-e),this.z=a+n*(i.z-a),this.w=r+n*(i.w-r),this},multiply:function(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z||1,this.w*=i.w||1,this},divide:function(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z||1,this.w/=i.w||1,this},distance:function(i){var n=i.x-this.x,l=i.y-this.y,e=i.z-this.z||0,a=i.w-this.w||0;return Math.sqrt(n*n+l*l+e*e+a*a)},distanceSq:function(i){var n=i.x-this.x,l=i.y-this.y,e=i.z-this.z||0,a=i.w-this.w||0;return n*n+l*l+e*e+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(i){var n=this.x,l=this.y,e=this.z,a=this.w,r=i.val;return this.x=r[0]*n+r[4]*l+r[8]*e+r[12]*a,this.y=r[1]*n+r[5]*l+r[9]*e+r[13]*a,this.z=r[2]*n+r[6]*l+r[10]*e+r[14]*a,this.w=r[3]*n+r[7]*l+r[11]*e+r[15]*a,this},transformQuat:function(i){var n=this.x,l=this.y,e=this.z,a=i.x,r=i.y,u=i.z,s=i.w,o=s*n+r*e-u*l,h=s*l+u*n-a*e,c=s*e+a*l-r*n,d=-a*n-r*l-u*e;return this.x=o*s+d*-a+h*-u-c*-r,this.y=h*s+d*-r+c*-a-o*-u,this.z=c*s+d*-u+o*-r-h*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});f.prototype.sub=f.prototype.subtract,f.prototype.mul=f.prototype.multiply,f.prototype.div=f.prototype.divide,f.prototype.dist=f.prototype.distance,f.prototype.distSq=f.prototype.distanceSq,f.prototype.len=f.prototype.length,f.prototype.lenSq=f.prototype.lengthSq,v.exports=f},47924:v=>{v.exports=function(p,t,f){return Math.abs(p-t)<=f}},6704:v=>{v.exports=function(p,t,f){var i=f-t;return t+((p-t)%i+i)%i}},53517:v=>{v.exports=function(p,t,f,i){return Math.atan2(i-t,f-p)}},57999:v=>{v.exports=function(p,t){return Math.atan2(t.y-p.y,t.x-p.x)}},91994:v=>{v.exports=function(p,t){return Math.atan2(t.x-p.x,t.y-p.y)}},55967:v=>{v.exports=function(p,t,f,i){return Math.atan2(f-p,i-t)}},42014:(v,p,t)=>{var f=t(80925);v.exports=function(i){return i>Math.PI&&(i-=f.PI2),Math.abs(((i+f.TAU)%f.PI2-f.PI2)%f.PI2)}},75262:v=>{v.exports=function(p){return(p%=2*Math.PI)>=0?p:p+2*Math.PI}},49594:(v,p,t)=>{var f=t(62193);v.exports=function(){return f(-Math.PI,Math.PI)}},1983:(v,p,t)=>{var f=t(62193);v.exports=function(){return f(-180,180)}},79739:(v,p,t)=>{var f=t(75262);v.exports=function(i){return f(i+Math.PI)}},69586:(v,p,t)=>{var f=t(80925);v.exports=function(i,n,l){return l===void 0&&(l=.05),i===n||(Math.abs(n-i)<=l||Math.abs(n-i)>=f.PI2-l?i=n:(Math.abs(n-i)>Math.PI&&(n<i?n+=f.PI2:n-=f.PI2),n>i?i+=l:n<i&&(i-=l))),i}},68843:v=>{v.exports=function(p,t){var f=t-p;return f===0?0:f-360*Math.floor((f- -180)/360)}},12784:(v,p,t)=>{var f=t(6704);v.exports=function(i){return f(i,-Math.PI,Math.PI)}},7011:(v,p,t)=>{var f=t(6704);v.exports=function(i){return f(i,-180,180)}},72608:(v,p,t)=>{v.exports={Between:t(53517),BetweenPoints:t(57999),BetweenPointsY:t(91994),BetweenY:t(55967),CounterClockwise:t(42014),Normalize:t(75262),Random:t(49594),RandomDegrees:t(1983),Reverse:t(79739),RotateTo:t(69586),ShortestBetween:t(68843),Wrap:t(12784),WrapDegrees:t(7011)}},80925:v=>{var p={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};v.exports=p},76914:v=>{v.exports=function(p,t,f,i){var n=p-f,l=t-i;return Math.sqrt(n*n+l*l)}},21274:v=>{v.exports=function(p,t){var f=p.x-t.x,i=p.y-t.y;return Math.sqrt(f*f+i*i)}},30852:v=>{v.exports=function(p,t){var f=p.x-t.x,i=p.y-t.y;return f*f+i*i}},49312:v=>{v.exports=function(p,t,f,i){return Math.max(Math.abs(p-f),Math.abs(t-i))}},21923:v=>{v.exports=function(p,t,f,i,n){return n===void 0&&(n=2),Math.sqrt(Math.pow(f-p,n)+Math.pow(i-t,n))}},77183:v=>{v.exports=function(p,t,f,i){return Math.abs(p-f)+Math.abs(t-i)}},53747:v=>{v.exports=function(p,t,f,i){var n=p-f,l=t-i;return n*n+l*l}},29760:(v,p,t)=>{v.exports={Between:t(76914),BetweenPoints:t(21274),BetweenPointsSquared:t(30852),Chebyshev:t(49312),Power:t(21923),Snake:t(77183),Squared:t(53747)}},45044:(v,p,t)=>{var f=t(18978),i=t(47232),n=t(57916),l=t(61189),e=t(43121),a=t(85653),r=t(49336),u=t(79696),s=t(1082),o=t(12073),h=t(7884),c=t(46113);v.exports={Power0:r,Power1:u.Out,Power2:l.Out,Power3:s.Out,Power4:o.Out,Linear:r,Quad:u.Out,Cubic:l.Out,Quart:s.Out,Quint:o.Out,Sine:h.Out,Expo:a.Out,Circ:n.Out,Elastic:e.Out,Back:f.Out,Bounce:i.Out,Stepped:c,"Quad.easeIn":u.In,"Cubic.easeIn":l.In,"Quart.easeIn":s.In,"Quint.easeIn":o.In,"Sine.easeIn":h.In,"Expo.easeIn":a.In,"Circ.easeIn":n.In,"Elastic.easeIn":e.In,"Back.easeIn":f.In,"Bounce.easeIn":i.In,"Quad.easeOut":u.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":s.Out,"Quint.easeOut":o.Out,"Sine.easeOut":h.Out,"Expo.easeOut":a.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":e.Out,"Back.easeOut":f.Out,"Bounce.easeOut":i.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":s.InOut,"Quint.easeInOut":o.InOut,"Sine.easeInOut":h.InOut,"Expo.easeInOut":a.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":e.InOut,"Back.easeInOut":f.InOut,"Bounce.easeInOut":i.InOut}},55512:v=>{v.exports=function(p,t){return t===void 0&&(t=1.70158),p*p*((t+1)*p-t)}},21341:v=>{v.exports=function(p,t){t===void 0&&(t=1.70158);var f=1.525*t;return(p*=2)<1?p*p*((f+1)*p-f)*.5:.5*((p-=2)*p*((f+1)*p+f)+2)}},5376:v=>{v.exports=function(p,t){return t===void 0&&(t=1.70158),--p*p*((t+1)*p+t)+1}},18978:(v,p,t)=>{v.exports={In:t(55512),Out:t(5376),InOut:t(21341)}},33033:v=>{v.exports=function(p){return(p=1-p)<.36363636363636365?1-7.5625*p*p:p<.7272727272727273?1-(7.5625*(p-=.5454545454545454)*p+.75):p<.9090909090909091?1-(7.5625*(p-=.8181818181818182)*p+.9375):1-(7.5625*(p-=.9545454545454546)*p+.984375)}},72311:v=>{v.exports=function(p){var t=!1;return p<.5?(p=1-2*p,t=!0):p=2*p-1,p<.36363636363636365?p*=7.5625*p:p=p<.7272727272727273?7.5625*(p-=.5454545454545454)*p+.75:p<.9090909090909091?7.5625*(p-=.8181818181818182)*p+.9375:7.5625*(p-=.9545454545454546)*p+.984375,t?.5*(1-p):.5*p+.5}},35394:v=>{v.exports=function(p){return p<.36363636363636365?7.5625*p*p:p<.7272727272727273?7.5625*(p-=.5454545454545454)*p+.75:p<.9090909090909091?7.5625*(p-=.8181818181818182)*p+.9375:7.5625*(p-=.9545454545454546)*p+.984375}},47232:(v,p,t)=>{v.exports={In:t(33033),Out:t(35394),InOut:t(72311)}},81324:v=>{v.exports=function(p){return 1-Math.sqrt(1-p*p)}},16284:v=>{v.exports=function(p){return(p*=2)<1?-.5*(Math.sqrt(1-p*p)-1):.5*(Math.sqrt(1-(p-=2)*p)+1)}},95348:v=>{v.exports=function(p){return Math.sqrt(1- --p*p)}},57916:(v,p,t)=>{v.exports={In:t(81324),Out:t(95348),InOut:t(16284)}},35573:v=>{v.exports=function(p){return p*p*p}},10947:v=>{v.exports=function(p){return(p*=2)<1?.5*p*p*p:.5*((p-=2)*p*p+2)}},4086:v=>{v.exports=function(p){return--p*p*p+1}},61189:(v,p,t)=>{v.exports={In:t(35573),Out:t(4086),InOut:t(10947)}},55198:v=>{v.exports=function(p,t,f){if(t===void 0&&(t=.1),f===void 0&&(f=.1),p===0)return 0;if(p===1)return 1;var i=f/4;return t<1?t=1:i=f*Math.asin(1/t)/(2*Math.PI),-t*Math.pow(2,10*(p-=1))*Math.sin((p-i)*(2*Math.PI)/f)}},41014:v=>{v.exports=function(p,t,f){if(t===void 0&&(t=.1),f===void 0&&(f=.1),p===0)return 0;if(p===1)return 1;var i=f/4;return t<1?t=1:i=f*Math.asin(1/t)/(2*Math.PI),(p*=2)<1?t*Math.pow(2,10*(p-=1))*Math.sin((p-i)*(2*Math.PI)/f)*-.5:t*Math.pow(2,-10*(p-=1))*Math.sin((p-i)*(2*Math.PI)/f)*.5+1}},70967:v=>{v.exports=function(p,t,f){if(t===void 0&&(t=.1),f===void 0&&(f=.1),p===0)return 0;if(p===1)return 1;var i=f/4;return t<1?t=1:i=f*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*p)*Math.sin((p-i)*(2*Math.PI)/f)+1}},43121:(v,p,t)=>{v.exports={In:t(55198),Out:t(70967),InOut:t(41014)}},39705:v=>{v.exports=function(p){return Math.pow(2,10*(p-1))-.001}},26854:v=>{v.exports=function(p){return(p*=2)<1?.5*Math.pow(2,10*(p-1)):.5*(2-Math.pow(2,-10*(p-1)))}},13202:v=>{v.exports=function(p){return 1-Math.pow(2,-10*p)}},85653:(v,p,t)=>{v.exports={In:t(39705),Out:t(13202),InOut:t(26854)}},80208:(v,p,t)=>{v.exports={Back:t(18978),Bounce:t(47232),Circular:t(57916),Cubic:t(61189),Elastic:t(43121),Expo:t(85653),Linear:t(49336),Quadratic:t(79696),Quartic:t(1082),Quintic:t(12073),Sine:t(7884),Stepped:t(46113)}},67823:v=>{v.exports=function(p){return p}},49336:(v,p,t)=>{v.exports=t(67823)},10111:v=>{v.exports=function(p){return p*p}},17596:v=>{v.exports=function(p){return(p*=2)<1?.5*p*p:-.5*(--p*(p-2)-1)}},39467:v=>{v.exports=function(p){return p*(2-p)}},79696:(v,p,t)=>{v.exports={In:t(10111),Out:t(39467),InOut:t(17596)}},16880:v=>{v.exports=function(p){return p*p*p*p}},45827:v=>{v.exports=function(p){return(p*=2)<1?.5*p*p*p*p:-.5*((p-=2)*p*p*p-2)}},7953:v=>{v.exports=function(p){return 1- --p*p*p*p}},1082:(v,p,t)=>{v.exports={In:t(16880),Out:t(7953),InOut:t(45827)}},76389:v=>{v.exports=function(p){return p*p*p*p*p}},1828:v=>{v.exports=function(p){return(p*=2)<1?.5*p*p*p*p*p:.5*((p-=2)*p*p*p*p+2)}},21840:v=>{v.exports=function(p){return--p*p*p*p*p+1}},12073:(v,p,t)=>{v.exports={In:t(76389),Out:t(21840),InOut:t(1828)}},20771:v=>{v.exports=function(p){return p===0?0:p===1?1:1-Math.cos(p*Math.PI/2)}},84600:v=>{v.exports=function(p){return p===0?0:p===1?1:.5*(1-Math.cos(Math.PI*p))}},34819:v=>{v.exports=function(p){return p===0?0:p===1?1:Math.sin(p*Math.PI/2)}},7884:(v,p,t)=>{v.exports={In:t(20771),Out:t(34819),InOut:t(84600)}},25273:v=>{v.exports=function(p,t){return t===void 0&&(t=1),p<=0?0:p>=1?1:1/t*(1+(t*p|0))}},46113:(v,p,t)=>{v.exports=t(25273)},74285:v=>{v.exports=function(p,t){return t===void 0&&(t=1e-4),Math.ceil(p-t)}},97026:v=>{v.exports=function(p,t,f){return f===void 0&&(f=1e-4),Math.abs(p-t)<f}},49885:v=>{v.exports=function(p,t){return t===void 0&&(t=1e-4),Math.floor(p+t)}},35622:v=>{v.exports=function(p,t,f){return f===void 0&&(f=1e-4),p>t-f}},93195:v=>{v.exports=function(p,t,f){return f===void 0&&(f=1e-4),p<t+f}},54189:(v,p,t)=>{v.exports={Ceil:t(74285),Equal:t(97026),Floor:t(49885),GreaterThan:t(35622),LessThan:t(93195)}},68533:(v,p,t)=>{var f=t(80925),i=t(72646),n={Angle:t(72608),Distance:t(29760),Easing:t(80208),Fuzzy:t(54189),Interpolation:t(49005),Pow2:t(41657),Snap:t(46987),RandomDataGenerator:t(21283),Average:t(57635),Bernstein:t(14230),Between:t(27019),CatmullRom:t(51929),CeilTo:t(23993),Clamp:t(2543),DegToRad:t(23407),Difference:t(34320),Euler:t(41426),Factorial:t(20280),FloatBetween:t(62193),FloorTo:t(32223),FromPercent:t(53023),GetSpeed:t(41907),IsEven:t(45799),IsEvenStrict:t(16660),Linear:t(3821),MaxAdd:t(65617),Median:t(89036),MinSub:t(96448),Percent:t(82356),RadToDeg:t(33642),RandomXY:t(7192),RandomXYZ:t(43815),RandomXYZW:t(6969),Rotate:t(11747),RotateAround:t(45707),RotateAroundDistance:t(79749),RotateTo:t(20065),RoundAwayFromZero:t(40496),RoundTo:t(35789),SinCosTableGenerator:t(57955),SmootherStep:t(29817),SmoothStep:t(89989),ToXY:t(76384),TransformXY:t(37423),Within:t(47924),Wrap:t(6704),Vector2:t(17321),Vector3:t(33736),Vector4:t(37254),Matrix3:t(30230),Matrix4:t(54259),Quaternion:t(63060),RotateVec3:t(26578)};n=i(!1,n,f),v.exports=n},44825:(v,p,t)=>{var f=t(14230);v.exports=function(i,n){for(var l=0,e=i.length-1,a=0;a<=e;a++)l+=Math.pow(1-n,e-a)*Math.pow(n,a)*i[a]*f(e,a);return l}},92106:(v,p,t)=>{var f=t(51929);v.exports=function(i,n){var l=i.length-1,e=l*n,a=Math.floor(e);return i[0]===i[l]?(n<0&&(a=Math.floor(e=l*(1+n))),f(e-a,i[(a-1+l)%l],i[a],i[(a+1)%l],i[(a+2)%l])):n<0?i[0]-(f(-e,i[0],i[0],i[1],i[1])-i[0]):n>1?i[l]-(f(e-l,i[l],i[l],i[l-1],i[l-1])-i[l]):f(e-a,i[a?a-1:0],i[a],i[l<a+1?l:a+1],i[l<a+2?l:a+2])}},70183:v=>{v.exports=function(p,t,f,i,n){return function(l,e){var a=1-l;return a*a*a*e}(p,t)+function(l,e){var a=1-l;return 3*a*a*l*e}(p,f)+function(l,e){return 3*(1-l)*l*l*e}(p,i)+function(l,e){return l*l*l*e}(p,n)}},85683:(v,p,t)=>{var f=t(3821);v.exports=function(i,n){var l=i.length-1,e=l*n,a=Math.floor(e);return n<0?f(i[0],i[1],e):n>1?f(i[l],i[l-1],l-e):f(i[a],i[a+1>l?l:a+1],e-a)}},67372:v=>{v.exports=function(p,t,f,i){return function(n,l){var e=1-n;return e*e*l}(p,t)+function(n,l){return 2*(1-n)*n*l}(p,f)+function(n,l){return n*n*l}(p,i)}},38153:(v,p,t)=>{var f=t(89989);v.exports=function(i,n,l){return n+(l-n)*f(i,0,1)}},33112:(v,p,t)=>{var f=t(29817);v.exports=function(i,n,l){return n+(l-n)*f(i,0,1)}},49005:(v,p,t)=>{v.exports={Bezier:t(44825),CatmullRom:t(92106),CubicBezier:t(70183),Linear:t(85683),QuadraticBezier:t(67372),SmoothStep:t(38153),SmootherStep:t(33112)}},19865:v=>{v.exports=function(p){var t=Math.log(p)/.6931471805599453;return 1<<Math.ceil(t)}},58655:v=>{v.exports=function(p,t){return p>0&&(p&p-1)==0&&t>0&&(t&t-1)==0}},29692:v=>{v.exports=function(p){return p>0&&(p&p-1)==0}},41657:(v,p,t)=>{v.exports={GetNext:t(19865),IsSize:t(58655),IsValue:t(29692)}},21283:(v,p,t)=>{var f=new(t(69186))({initialize:function(i){i===void 0&&(i=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],i&&this.init(i)},rnd:function(){var i=2091639*this.s0+23283064365386963e-26*this.c;return this.c=0|i,this.s0=this.s1,this.s1=this.s2,this.s2=i-this.c,this.s2},hash:function(i){var n,l=this.n;i=i.toString();for(var e=0;e<i.length;e++)n=.02519603282416938*(l+=i.charCodeAt(e)),n-=l=n>>>0,l=(n*=l)>>>0,l+=4294967296*(n-=l);return this.n=l,23283064365386963e-26*(l>>>0)},init:function(i){typeof i=="string"?this.state(i):this.sow(i)},sow:function(i){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,i)for(var n=0;n<i.length&&i[n]!=null;n++){var l=i[n];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(i,n){return Math.floor(this.realInRange(0,n-i+1)+i)},between:function(i,n){return Math.floor(this.realInRange(0,n-i+1)+i)},realInRange:function(i,n){return this.frac()*(n-i)+i},normal:function(){return 1-2*this.frac()},uuid:function(){var i="",n="";for(n=i="";i++<36;n+=~i%5|3*i&4?(15^i?8^this.frac()*(20^i?16:4):4).toString(16):"-");return n},pick:function(i){return i[this.integerInRange(0,i.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(i){return i[~~(Math.pow(this.frac(),2)*(i.length-1)+.5)]},timestamp:function(i,n){return this.realInRange(i||9466848e5,n||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(i){return typeof i=="string"&&i.match(/^!rnd/)&&(i=i.split(","),this.c=parseFloat(i[1]),this.s0=parseFloat(i[2]),this.s1=parseFloat(i[3]),this.s2=parseFloat(i[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(i){for(var n=i.length-1;n>0;n--){var l=Math.floor(this.frac()*(n+1)),e=i[l];i[l]=i[n],i[n]=e}return i}});v.exports=f},12174:v=>{v.exports=function(p,t,f,i){return f===void 0&&(f=0),t===0?p:(p-=f,p=t*Math.ceil(p/t),i?(f+p)/t:f+p)}},99e3:v=>{v.exports=function(p,t,f,i){return f===void 0&&(f=0),t===0?p:(p-=f,p=t*Math.floor(p/t),i?(f+p)/t:f+p)}},4103:v=>{v.exports=function(p,t,f,i){return f===void 0&&(f=0),t===0?p:(p-=f,p=t*Math.round(p/t),i?(f+p)/t:f+p)}},46987:(v,p,t)=>{v.exports={Ceil:t(12174),Floor:t(99e3),To:t(4103)}},38661:(v,p,t)=>{var f=t(69186),i=t(768),n=t(86479),l=new f({Extends:n,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Pushable,i.Size,i.Velocity],initialize:function(e,a,r,u,s){n.call(this,e,a,r,u,s),this.body=null}});v.exports=l},37402:(v,p,t)=>{var f=t(69186),i=t(23407),n=t(76914),l=t(53747),e=t(6394),a=t(25738),r=t(50247),u=t(79552),s=t(8987),o=t(46236),h=t(12063),c=t(17321),d=t(17693),g=new f({initialize:function(m){this.scene=m,this.systems=m.sys,this.config=this.getConfig(),this.world,this.add,m.sys.events.once(h.BOOT,this.boot,this),m.sys.events.on(h.START,this.start,this)},boot:function(){this.world=new d(this.scene,this.config),this.add=new e(this.world),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new d(this.scene,this.config),this.add=new e(this.world));var m=this.systems.events;a(this.config,"customUpdate",!1)||m.on(h.UPDATE,this.world.update,this.world),m.on(h.POST_UPDATE,this.world.postUpdate,this.world),m.once(h.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(h.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(h.UPDATE,this.world.update,this.world)},getConfig:function(){var m=this.systems.game.config.physics,y=this.systems.settings.physics;return r(a(y,"arcade",{}),a(m,"arcade",{}))},overlap:function(m,y,w,x,T){return w===void 0&&(w=null),x===void 0&&(x=null),T===void 0&&(T=w),this.world.collideObjects(m,y,w,x,T,!0)},collide:function(m,y,w,x,T){return w===void 0&&(w=null),x===void 0&&(x=null),T===void 0&&(T=w),this.world.collideObjects(m,y,w,x,T,!1)},collideTiles:function(m,y,w,x,T){return this.world.collideTiles(m,y,w,x,T)},overlapTiles:function(m,y,w,x,T){return this.world.overlapTiles(m,y,w,x,T)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(m,y,w,x,T,E){x===void 0&&(x=60);var S=Math.atan2(w-m.y,y-m.x);return m.body.acceleration.setToPolar(S,x),T!==void 0&&E!==void 0&&m.body.maxVelocity.set(T,E),S},accelerateToObject:function(m,y,w,x,T){return this.accelerateTo(m,y.x,y.y,w,x,T)},closest:function(m,y){y||(y=this.world.bodies.entries);for(var w=Number.MAX_VALUE,x=null,T=m.x,E=m.y,S=y.length,C=0;C<S;C++){var A=y[C],M=A.body||A;if(m!==A&&m!==M&&m!==M.gameObject&&m!==M.center){var b=l(T,E,M.center.x,M.center.y);b<w&&(x=A,w=b)}}return x},furthest:function(m,y){y||(y=this.world.bodies.entries);for(var w=-1,x=null,T=m.x,E=m.y,S=y.length,C=0;C<S;C++){var A=y[C],M=A.body||A;if(m!==A&&m!==M&&m!==M.gameObject&&m!==M.center){var b=l(T,E,M.center.x,M.center.y);b>w&&(x=A,w=b)}}return x},moveTo:function(m,y,w,x,T){x===void 0&&(x=60),T===void 0&&(T=0);var E=Math.atan2(w-m.y,y-m.x);return T>0&&(x=n(m.x,m.y,y,w)/(T/1e3)),m.body.velocity.setToPolar(E,x),E},moveToObject:function(m,y,w,x){return this.moveTo(m,y.x,y.y,w,x)},velocityFromAngle:function(m,y,w){return y===void 0&&(y=60),w===void 0&&(w=new c),w.setToPolar(i(m),y)},velocityFromRotation:function(m,y,w){return y===void 0&&(y=60),w===void 0&&(w=new c),w.setToPolar(m,y)},overlapRect:function(m,y,w,x,T,E){return s(this.world,m,y,w,x,T,E)},overlapCirc:function(m,y,w,x,T){return u(this.world,m,y,w,x,T)},shutdown:function(){if(this.world){var m=this.systems.events;m.off(h.UPDATE,this.world.update,this.world),m.off(h.POST_UPDATE,this.world.postUpdate,this.world),m.off(h.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});o.register("ArcadePhysics",g,"arcadePhysics"),v.exports=g},59327:(v,p,t)=>{var f=t(69186),i=t(768),n=t(38590),l=new f({Extends:n,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Pushable,i.Size,i.Velocity],initialize:function(e,a,r,u,s){n.call(this,e,a,r,u,s),this.body=null}});v.exports=l},58019:(v,p,t)=>{var f=t(69186),i=t(58581),n=t(81518),l=t(33642),e=t(75380),a=t(26813),r=t(17321),u=new f({initialize:function(s,o){var h=o.displayWidth?o.displayWidth:64,c=o.displayHeight?o.displayHeight:64;this.world=s,this.gameObject=o,this.transform={x:o.x,y:o.y,rotation:o.angle,scaleX:o.scaleX,scaleY:o.scaleY,displayOriginX:o.displayOriginX,displayOriginY:o.displayOriginY},this.debugShowBody=s.defaults.debugShowBody,this.debugShowVelocity=s.defaults.debugShowVelocity,this.debugBodyColor=s.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new r,this.position=new r(o.x-o.scaleX*o.displayOriginX,o.y-o.scaleY*o.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=o.angle,this.preRotation=o.angle,this.width=h,this.height=c,this.sourceWidth=h,this.sourceHeight=c,o.frame&&(this.sourceWidth=o.frame.realWidth,this.sourceHeight=o.frame.realHeight),this.halfWidth=Math.abs(h/2),this.halfHeight=Math.abs(c/2),this.center=new r(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new r,this.newVelocity=new r,this.deltaMax=new r,this.acceleration=new r,this.allowDrag=!0,this.drag=new r,this.allowGravity=!0,this.gravity=new r,this.bounce=new r,this.worldBounce=null,this.customBoundsRectangle=s.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new r(1e4,1e4),this.maxSpeed=-1,this.friction=new r(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=i.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=i.DYNAMIC_BODY,this._sx=o.scaleX,this._sy=o.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new e},updateBounds:function(){var s=this.gameObject,o=this.transform;if(s.parentContainer){var h=s.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);o.x=h.tx,o.y=h.ty,o.rotation=l(h.rotation),o.scaleX=h.scaleX,o.scaleY=h.scaleY,o.displayOriginX=s.displayOriginX,o.displayOriginY=s.displayOriginY}else o.x=s.x,o.y=s.y,o.rotation=s.angle,o.scaleX=s.scaleX,o.scaleY=s.scaleY,o.displayOriginX=s.displayOriginX,o.displayOriginY=s.displayOriginY;var c=!1;if(this.syncBounds){var d=s.getBounds(this._bounds);this.width=d.width,this.height=d.height,c=!0}else{var g=Math.abs(o.scaleX),m=Math.abs(o.scaleY);this._sx===g&&this._sy===m||(this.width=this.sourceWidth*g,this.height=this.sourceHeight*m,this._sx=g,this._sy=m,c=!0)}c&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var s=this.transform;this.position.x=s.x+s.scaleX*(this.offset.x-s.displayOriginX),this.position.y=s.y+s.scaleY*(this.offset.y-s.displayOriginY),this.updateCenter()},resetFlags:function(s){s===void 0&&(s=!1);var o=this.wasTouching,h=this.touching,c=this.blocked;s?(o.none=!0,o.up=!1,o.down=!1,o.left=!1,o.right=!1):(o.none=h.none,o.up=h.up,o.down=h.down,o.left=h.left,o.right=h.right),h.none=!0,h.up=!1,h.down=!1,h.left=!1,h.right=!1,c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(s,o){s&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),s&&this.update(o)},update:function(s){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,s);var o=this.velocity.x,h=this.velocity.y;this.newVelocity.set(o*s,h*s),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(h,o),this.speed=Math.sqrt(o*o+h*h),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(n.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var s=this.position.x-this.prevFrame.x,o=this.position.y-this.prevFrame.y;if(this.moves){var h=this.deltaMax.x,c=this.deltaMax.y;h!==0&&s!==0&&(s<0&&s<-h?s=-h:s>0&&s>h&&(s=h)),c!==0&&o!==0&&(o<0&&o<-c?o=-c:o>0&&o>c&&(o=c)),this.gameObject.x+=s,this.gameObject.y+=o}s<0?this.facing=i.FACING_LEFT:s>0&&(this.facing=i.FACING_RIGHT),o<0?this.facing=i.FACING_UP:o>0&&(this.facing=i.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=s,this._ty=o},setBoundsRectangle:function(s){return this.customBoundsRectangle=s||this.world.bounds,this},checkWorldBounds:function(){var s=this.position,o=this.customBoundsRectangle,h=this.world.checkCollision,c=this.worldBounce?-this.worldBounce.x:-this.bounce.x,d=this.worldBounce?-this.worldBounce.y:-this.bounce.y,g=!1;return s.x<o.x&&h.left?(s.x=o.x,this.velocity.x*=c,this.blocked.left=!0,g=!0):this.right>o.right&&h.right&&(s.x=o.right-this.width,this.velocity.x*=c,this.blocked.right=!0,g=!0),s.y<o.y&&h.up?(s.y=o.y,this.velocity.y*=d,this.blocked.up=!0,g=!0):this.bottom>o.bottom&&h.down&&(s.y=o.bottom-this.height,this.velocity.y*=d,this.blocked.down=!0,g=!0),g&&(this.blocked.none=!1,this.updateCenter()),g},setOffset:function(s,o){return o===void 0&&(o=s),this.offset.set(s,o),this},setSize:function(s,o,h){h===void 0&&(h=!0);var c=this.gameObject;if(!s&&c.frame&&(s=c.frame.realWidth),!o&&c.frame&&(o=c.frame.realHeight),this.sourceWidth=s,this.sourceHeight=o,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),h&&c.getCenter){var d=(c.width-s)/2,g=(c.height-o)/2;this.offset.set(d,g)}return this.isCircle=!1,this.radius=0,this},setCircle:function(s,o,h){return o===void 0&&(o=this.offset.x),h===void 0&&(h=this.offset.y),s>0?(this.isCircle=!0,this.radius=s,this.sourceWidth=2*s,this.sourceHeight=2*s,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(o,h),this.updateCenter()):this.isCircle=!1,this},reset:function(s,o){this.stop();var h=this.gameObject;h.setPosition(s,o),h.getTopLeft?h.getTopLeft(this.position):this.position.set(s,o),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=h.angle,this.preRotation=h.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(s){return s.x=this.x,s.y=this.y,s.right=this.right,s.bottom=this.bottom,s},hitTest:function(s,o){return this.isCircle?this.radius>0&&s>=this.left&&s<=this.right&&o>=this.top&&o<=this.bottom&&(this.center.x-s)*(this.center.x-s)+(this.center.y-o)*(this.center.y-o)<=this.radius*this.radius:a(this,s,o)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(s){var o=this.position,h=o.x+this.halfWidth,c=o.y+this.halfHeight;this.debugShowBody&&(s.lineStyle(s.defaultStrokeWidth,this.debugBodyColor),this.isCircle?s.strokeCircle(h,c,this.width/2):(this.checkCollision.up&&s.lineBetween(o.x,o.y,o.x+this.width,o.y),this.checkCollision.right&&s.lineBetween(o.x+this.width,o.y,o.x+this.width,o.y+this.height),this.checkCollision.down&&s.lineBetween(o.x,o.y+this.height,o.x+this.width,o.y+this.height),this.checkCollision.left&&s.lineBetween(o.x,o.y,o.x,o.y+this.height))),this.debugShowVelocity&&(s.lineStyle(s.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),s.lineBetween(h,c,h+this.velocity.x/2,c+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(s,o,h,c){s===void 0&&(s=!0),this.collideWorldBounds=s;var d=o!==void 0,g=h!==void 0;return(d||g)&&(this.worldBounce||(this.worldBounce=new r),d&&(this.worldBounce.x=o),g&&(this.worldBounce.y=h)),c!==void 0&&(this.onWorldBounds=c),this},setVelocity:function(s,o){return this.velocity.set(s,o),s=this.velocity.x,o=this.velocity.y,this.speed=Math.sqrt(s*s+o*o),this},setVelocityX:function(s){this.velocity.x=s;var o=s,h=this.velocity.y;return this.speed=Math.sqrt(o*o+h*h),this},setVelocityY:function(s){this.velocity.y=s;var o=this.velocity.x,h=s;return this.speed=Math.sqrt(o*o+h*h),this},setMaxVelocity:function(s,o){return this.maxVelocity.set(s,o),this},setMaxVelocityX:function(s){return this.maxVelocity.x=s,this},setMaxVelocityY:function(s){return this.maxVelocity.y=s,this},setMaxSpeed:function(s){return this.maxSpeed=s,this},setBounce:function(s,o){return this.bounce.set(s,o),this},setBounceX:function(s){return this.bounce.x=s,this},setBounceY:function(s){return this.bounce.y=s,this},setAcceleration:function(s,o){return this.acceleration.set(s,o),this},setAccelerationX:function(s){return this.acceleration.x=s,this},setAccelerationY:function(s){return this.acceleration.y=s,this},setAllowDrag:function(s){return s===void 0&&(s=!0),this.allowDrag=s,this},setAllowGravity:function(s){return s===void 0&&(s=!0),this.allowGravity=s,this},setAllowRotation:function(s){return s===void 0&&(s=!0),this.allowRotation=s,this},setDrag:function(s,o){return this.drag.set(s,o),this},setDamping:function(s){return this.useDamping=s,this},setDragX:function(s){return this.drag.x=s,this},setDragY:function(s){return this.drag.y=s,this},setGravity:function(s,o){return this.gravity.set(s,o),this},setGravityX:function(s){return this.gravity.x=s,this},setGravityY:function(s){return this.gravity.y=s,this},setFriction:function(s,o){return this.friction.set(s,o),this},setFrictionX:function(s){return this.friction.x=s,this},setFrictionY:function(s){return this.friction.y=s,this},setAngularVelocity:function(s){return this.angularVelocity=s,this},setAngularAcceleration:function(s){return this.angularAcceleration=s,this},setAngularDrag:function(s){return this.angularDrag=s,this},setMass:function(s){return this.mass=s,this},setImmovable:function(s){return s===void 0&&(s=!0),this.immovable=s,this},setEnable:function(s){return s===void 0&&(s=!0),this.enable=s,this},processX:function(s,o,h,c){this.x+=s,this.updateCenter(),o!==null&&(this.velocity.x=o);var d=this.blocked;h&&(d.left=!0),c&&(d.right=!0)},processY:function(s,o,h,c){this.y+=s,this.updateCenter(),o!==null&&(this.velocity.y=o);var d=this.blocked;h&&(d.up=!0),c&&(d.down=!0)},x:{get:function(){return this.position.x},set:function(s){this.position.x=s}},y:{get:function(){return this.position.y},set:function(s){this.position.y=s}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});v.exports=u},95867:(v,p,t)=>{var f=new(t(69186))({initialize:function(i,n,l,e,a,r,u){this.world=i,this.name="",this.active=!0,this.overlapOnly=n,this.object1=l,this.object2=e,this.collideCallback=a,this.processCallback=r,this.callbackContext=u},setName:function(i){return this.name=i,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});v.exports=f},6394:(v,p,t)=>{var f=t(38661),i=t(59327),n=t(69186),l=t(58581),e=t(31188),a=t(36012),r=new n({initialize:function(u){this.world=u,this.scene=u.scene,this.sys=u.scene.sys},collider:function(u,s,o,h,c){return this.world.addCollider(u,s,o,h,c)},overlap:function(u,s,o,h,c){return this.world.addOverlap(u,s,o,h,c)},existing:function(u,s){var o=s?l.STATIC_BODY:l.DYNAMIC_BODY;return this.world.enableBody(u,o),u},staticImage:function(u,s,o,h){var c=new f(this.scene,u,s,o,h);return this.sys.displayList.add(c),this.world.enableBody(c,l.STATIC_BODY),c},image:function(u,s,o,h){var c=new f(this.scene,u,s,o,h);return this.sys.displayList.add(c),this.world.enableBody(c,l.DYNAMIC_BODY),c},staticSprite:function(u,s,o,h){var c=new i(this.scene,u,s,o,h);return this.sys.displayList.add(c),this.sys.updateList.add(c),this.world.enableBody(c,l.STATIC_BODY),c},sprite:function(u,s,o,h){var c=new i(this.scene,u,s,o,h);return this.sys.displayList.add(c),this.sys.updateList.add(c),this.world.enableBody(c,l.DYNAMIC_BODY),c},staticGroup:function(u,s){return this.sys.updateList.add(new a(this.world,this.world.scene,u,s))},group:function(u,s){return this.sys.updateList.add(new e(this.world,this.world.scene,u,s))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});v.exports=r},67559:(v,p,t)=>{var f=t(58581);v.exports=function(i,n,l,e){var a=0,r=i.deltaAbsX()+n.deltaAbsX()+e;return i._dx===0&&n._dx===0?(i.embedded=!0,n.embedded=!0):i._dx>n._dx?(a=i.right-n.x)>r&&!l||i.checkCollision.right===!1||n.checkCollision.left===!1?a=0:(i.touching.none=!1,i.touching.right=!0,n.touching.none=!1,n.touching.left=!0,n.physicsType!==f.STATIC_BODY||l||(i.blocked.none=!1,i.blocked.right=!0),i.physicsType!==f.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.left=!0)):i._dx<n._dx&&(-(a=i.x-n.width-n.x)>r&&!l||i.checkCollision.left===!1||n.checkCollision.right===!1?a=0:(i.touching.none=!1,i.touching.left=!0,n.touching.none=!1,n.touching.right=!0,n.physicsType!==f.STATIC_BODY||l||(i.blocked.none=!1,i.blocked.left=!0),i.physicsType!==f.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.right=!0))),i.overlapX=a,n.overlapX=a,a}},73996:(v,p,t)=>{var f=t(58581);v.exports=function(i,n,l,e){var a=0,r=i.deltaAbsY()+n.deltaAbsY()+e;return i._dy===0&&n._dy===0?(i.embedded=!0,n.embedded=!0):i._dy>n._dy?(a=i.bottom-n.y)>r&&!l||i.checkCollision.down===!1||n.checkCollision.up===!1?a=0:(i.touching.none=!1,i.touching.down=!0,n.touching.none=!1,n.touching.up=!0,n.physicsType!==f.STATIC_BODY||l||(i.blocked.none=!1,i.blocked.down=!0),i.physicsType!==f.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.up=!0)):i._dy<n._dy&&(-(a=i.y-n.bottom)>r&&!l||i.checkCollision.up===!1||n.checkCollision.down===!1?a=0:(i.touching.none=!1,i.touching.up=!0,n.touching.none=!1,n.touching.down=!0,n.physicsType!==f.STATIC_BODY||l||(i.blocked.none=!1,i.blocked.up=!0),i.physicsType!==f.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.down=!0))),i.overlapY=a,n.overlapY=a,a}},31188:(v,p,t)=>{var f=t(59327),i=t(69186),n=t(58581),l=t(25738),e=t(84262),a=t(53013),r=new i({Extends:e,initialize:function(u,s,o,h){if(o||h)if(a(o))h=o,o=null,h.internalCreateCallback=this.createCallbackHandler,h.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(o)&&a(o[0])){h=o[0];var c=this;o.forEach(function(d){d.internalCreateCallback=c.createCallbackHandler,d.internalRemoveCallback=c.removeCallbackHandler}),o=null}else h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=u,h.classType=l(h,"classType",f),this.physicsType=n.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:l(h,"collideWorldBounds",!1),setBoundsRectangle:l(h,"customBoundsRectangle",null),setAccelerationX:l(h,"accelerationX",0),setAccelerationY:l(h,"accelerationY",0),setAllowDrag:l(h,"allowDrag",!0),setAllowGravity:l(h,"allowGravity",!0),setAllowRotation:l(h,"allowRotation",!0),setBounceX:l(h,"bounceX",0),setBounceY:l(h,"bounceY",0),setDragX:l(h,"dragX",0),setDragY:l(h,"dragY",0),setEnable:l(h,"enable",!0),setGravityX:l(h,"gravityX",0),setGravityY:l(h,"gravityY",0),setFrictionX:l(h,"frictionX",0),setFrictionY:l(h,"frictionY",0),setMaxVelocityX:l(h,"maxVelocityX",1e4),setMaxVelocityY:l(h,"maxVelocityY",1e4),setVelocityX:l(h,"velocityX",0),setVelocityY:l(h,"velocityY",0),setAngularVelocity:l(h,"angularVelocity",0),setAngularAcceleration:l(h,"angularAcceleration",0),setAngularDrag:l(h,"angularDrag",0),setMass:l(h,"mass",1),setImmovable:l(h,"immovable",!1)},e.call(this,s,o,h),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,n.DYNAMIC_BODY);var s=u.body;for(var o in this.defaults)s[o](this.defaults[o])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,s,o){o===void 0&&(o=0);for(var h=this.getChildren(),c=0;c<h.length;c++)h[c].body.velocity.set(u+c*o,s+c*o);return this},setVelocityX:function(u,s){s===void 0&&(s=0);for(var o=this.getChildren(),h=0;h<o.length;h++)o[h].body.velocity.x=u+h*s;return this},setVelocityY:function(u,s){s===void 0&&(s=0);for(var o=this.getChildren(),h=0;h<o.length;h++)o[h].body.velocity.y=u+h*s;return this}});v.exports=r},37787:v=>{var p,t,f,i,n,l,e,a,r,u,s,o,h,c,d,g,m,y=function(){return u&&d&&t.blocked.right?(p.processX(-m,e,!1,!0),1):r&&g&&t.blocked.left?(p.processX(m,e,!0),1):h&&g&&p.blocked.right?(t.processX(-m,a,!1,!0),2):o&&d&&p.blocked.left?(t.processX(m,a,!0),2):0},w=function(x){if(f&&i)m*=.5,x===0||x===3?(p.processX(m,n),t.processX(-m,l)):(p.processX(-m,n),t.processX(m,l));else if(f&&!i)x===0||x===3?p.processX(m,e,!0):p.processX(-m,e,!1,!0);else if(!f&&i)x===0||x===3?t.processX(-m,a,!1,!0):t.processX(m,a,!0);else{var T=.5*m;x===0?c?(p.processX(m,0,!0),t.processX(0,null,!1,!0)):h?(p.processX(T,0,!0),t.processX(-T,0,!1,!0)):(p.processX(T,t.velocity.x,!0),t.processX(-T,null,!1,!0)):x===1?s?(p.processX(0,null,!1,!0),t.processX(m,0,!0)):u?(p.processX(-T,0,!1,!0),t.processX(T,0,!0)):(p.processX(-T,null,!1,!0),t.processX(T,p.velocity.x,!0)):x===2?c?(p.processX(-m,0,!1,!0),t.processX(0,null,!0)):o?(p.processX(-T,0,!1,!0),t.processX(T,0,!0)):(p.processX(-T,t.velocity.x,!1,!0),t.processX(T,null,!0)):x===3&&(s?(p.processX(0,null,!0),t.processX(-m,0,!1,!0)):r?(p.processX(T,0,!0),t.processX(-T,0,!1,!0)):(p.processX(T,t.velocity.y,!0),t.processX(-T,null,!1,!0)))}return!0};v.exports={BlockCheck:y,Check:function(){var x=p.velocity.x,T=t.velocity.x,E=Math.sqrt(T*T*t.mass/p.mass)*(T>0?1:-1),S=Math.sqrt(x*x*p.mass/t.mass)*(x>0?1:-1),C=.5*(E+S);return S-=C,n=C+(E-=C)*p.bounce.x,l=C+S*t.bounce.x,r&&g?w(0):o&&d?w(1):u&&d?w(2):!(!h||!g)&&w(3)},Set:function(x,T,E){t=T;var S=(p=x).velocity.x,C=t.velocity.x;return f=p.pushable,r=p._dx<0,u=p._dx>0,s=p._dx===0,d=Math.abs(p.right-t.x)<=Math.abs(t.right-p.x),e=C-S*p.bounce.x,i=t.pushable,o=t._dx<0,h=t._dx>0,c=t._dx===0,g=!d,a=S-C*t.bounce.x,m=Math.abs(E),y()},Run:w,RunImmovableBody1:function(x){x===1?t.velocity.x=0:d?t.processX(m,a,!0):t.processX(-m,a,!1,!0),p.moves&&(t.y+=(p.y-p.prev.y)*p.friction.y,t._dy=t.y-t.prev.y)},RunImmovableBody2:function(x){x===2?p.velocity.x=0:g?p.processX(m,e,!0):p.processX(-m,e,!1,!0),t.moves&&(p.y+=(t.y-t.prev.y)*t.friction.y,p._dy=p.y-p.prev.y)}}},18740:v=>{var p,t,f,i,n,l,e,a,r,u,s,o,h,c,d,g,m,y=function(){return u&&d&&t.blocked.down?(p.processY(-m,e,!1,!0),1):r&&g&&t.blocked.up?(p.processY(m,e,!0),1):h&&g&&p.blocked.down?(t.processY(-m,a,!1,!0),2):o&&d&&p.blocked.up?(t.processY(m,a,!0),2):0},w=function(x){if(f&&i)m*=.5,x===0||x===3?(p.processY(m,n),t.processY(-m,l)):(p.processY(-m,n),t.processY(m,l));else if(f&&!i)x===0||x===3?p.processY(m,e,!0):p.processY(-m,e,!1,!0);else if(!f&&i)x===0||x===3?t.processY(-m,a,!1,!0):t.processY(m,a,!0);else{var T=.5*m;x===0?c?(p.processY(m,0,!0),t.processY(0,null,!1,!0)):h?(p.processY(T,0,!0),t.processY(-T,0,!1,!0)):(p.processY(T,t.velocity.y,!0),t.processY(-T,null,!1,!0)):x===1?s?(p.processY(0,null,!1,!0),t.processY(m,0,!0)):u?(p.processY(-T,0,!1,!0),t.processY(T,0,!0)):(p.processY(-T,null,!1,!0),t.processY(T,p.velocity.y,!0)):x===2?c?(p.processY(-m,0,!1,!0),t.processY(0,null,!0)):o?(p.processY(-T,0,!1,!0),t.processY(T,0,!0)):(p.processY(-T,t.velocity.y,!1,!0),t.processY(T,null,!0)):x===3&&(s?(p.processY(0,null,!0),t.processY(-m,0,!1,!0)):r?(p.processY(T,0,!0),t.processY(-T,0,!1,!0)):(p.processY(T,t.velocity.y,!0),t.processY(-T,null,!1,!0)))}return!0};v.exports={BlockCheck:y,Check:function(){var x=p.velocity.y,T=t.velocity.y,E=Math.sqrt(T*T*t.mass/p.mass)*(T>0?1:-1),S=Math.sqrt(x*x*p.mass/t.mass)*(x>0?1:-1),C=.5*(E+S);return S-=C,n=C+(E-=C)*p.bounce.y,l=C+S*t.bounce.y,r&&g?w(0):o&&d?w(1):u&&d?w(2):!(!h||!g)&&w(3)},Set:function(x,T,E){t=T;var S=(p=x).velocity.y,C=t.velocity.y;return f=p.pushable,r=p._dy<0,u=p._dy>0,s=p._dy===0,d=Math.abs(p.bottom-t.y)<=Math.abs(t.bottom-p.y),e=C-S*p.bounce.y,i=t.pushable,o=t._dy<0,h=t._dy>0,c=t._dy===0,g=!d,a=S-C*t.bounce.y,m=Math.abs(E),y()},Run:w,RunImmovableBody1:function(x){x===1?t.velocity.y=0:d?t.processY(m,a,!0):t.processY(-m,a,!1,!0),p.moves&&(t.x+=(p.x-p.prev.x)*p.friction.x,t._dx=t.x-t.prev.x)},RunImmovableBody2:function(x){x===2?p.velocity.y=0:g?p.processY(m,e,!0):p.processY(-m,e,!1,!0),t.moves&&(p.x+=(t.x-t.prev.x)*t.friction.x,p._dx=p.x-p.prev.x)}}},27099:(v,p,t)=>{var f=t(67559),i=t(37787);v.exports=function(n,l,e,a){var r=f(n,l,e,a),u=n.immovable,s=l.immovable;if(e||r===0||u&&s||n.customSeparateX||l.customSeparateX)return r!==0||n.embedded&&l.embedded;var o=i.Set(n,l,r);return u||s?(u?i.RunImmovableBody1(o):s&&i.RunImmovableBody2(o),!0):o>0||i.Check()}},40472:(v,p,t)=>{var f=t(73996),i=t(18740);v.exports=function(n,l,e,a){var r=f(n,l,e,a),u=n.immovable,s=l.immovable;if(e||r===0||u&&s||n.customSeparateY||l.customSeparateY)return r!==0||n.embedded&&l.embedded;var o=i.Set(n,l,r);return u||s?(u?i.RunImmovableBody1(o):s&&i.RunImmovableBody2(o),!0):o>0||i.Check()}},53651:(v,p,t)=>{var f=t(57133),i=t(69186),n=t(58581),l=t(26813),e=t(17321),a=new i({initialize:function(r,u){var s=u.displayWidth?u.displayWidth:64,o=u.displayHeight?u.displayHeight:64;this.world=r,this.gameObject=u,this.debugShowBody=r.defaults.debugShowStaticBody,this.debugBodyColor=r.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new e,this.position=new e(u.x-s*u.originX,u.y-o*u.originY),this.width=s,this.height=o,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new e(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=e.ZERO,this.allowGravity=!1,this.gravity=e.ZERO,this.bounce=e.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=n.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(r,u){return r&&r!==this.gameObject&&(this.gameObject.body=null,r.body=this,this.gameObject=r),u&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var r=this.gameObject;return r.getTopLeft(this.position),this.width=r.displayWidth,this.height=r.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(r,u){return u===void 0&&(u=r),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(r,u),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(r,u,s){s===void 0&&(s=!0);var o=this.gameObject;if(!r&&o.frame&&(r=o.frame.realWidth),!u&&o.frame&&(u=o.frame.realHeight),this.world.staticTree.remove(this),this.width=r,this.height=u,this.halfWidth=Math.floor(r/2),this.halfHeight=Math.floor(u/2),s&&o.getCenter){var h=o.displayWidth/2,c=o.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(h-this.halfWidth,c-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(r,u,s){return u===void 0&&(u=this.offset.x),s===void 0&&(s=this.offset.y),r>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=r,this.width=2*r,this.height=2*r,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,s),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(r,u){var s=this.gameObject;r===void 0&&(r=s.x),u===void 0&&(u=s.y),this.world.staticTree.remove(this),s.setPosition(r,u),s.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(r){return r.x=this.x,r.y=this.y,r.right=this.right,r.bottom=this.bottom,r},hitTest:function(r,u){return this.isCircle?f(this,r,u):l(this,r,u)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(r){var u=this.position,s=u.x+this.halfWidth,o=u.y+this.halfHeight;this.debugShowBody&&(r.lineStyle(r.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?r.strokeCircle(s,o,this.width/2):r.strokeRect(u.x,u.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(r){return r<=0&&(r=.1),this.mass=r,this},x:{get:function(){return this.position.x},set:function(r){this.world.staticTree.remove(this),this.position.x=r,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(r){this.world.staticTree.remove(this),this.position.y=r,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});v.exports=a},36012:(v,p,t)=>{var f=t(59327),i=t(69186),n=t(58581),l=t(25738),e=t(84262),a=t(53013),r=new i({Extends:e,initialize:function(u,s,o,h){o||h?a(o)?(h=o,o=null,h.internalCreateCallback=this.createCallbackHandler,h.internalRemoveCallback=this.removeCallbackHandler,h.createMultipleCallback=this.createMultipleCallbackHandler,h.classType=l(h,"classType",f)):Array.isArray(o)&&a(o[0])?(h=o,o=null,h.forEach(function(c){c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler,c.createMultipleCallback=this.createMultipleCallbackHandler,c.classType=l(c,"classType",f)})):h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:f},this.world=u,this.physicsType=n.STATIC_BODY,e.call(this,s,o,h),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,n.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,s=0;s<u.length;s++)u[s].body.reset();return this}});v.exports=r},17693:(v,p,t)=>{var f=t(57999),i=t(58019),n=t(2543),l=t(69186),e=t(95867),a=t(58581),r=t(76914),u=t(26729),s=t(81518),o=t(97026),h=t(35622),c=t(93195),d=t(67559),g=t(73996),m=t(79247),y=t(76076),w=t(80925),x=t(48547),T=t(56015),E=t(75380),S=t(16632),C=t(67661),A=t(27099),M=t(40472),b=t(96609),_=t(53651),P=t(30052),L=t(9329),F=t(17321),D=t(6704),k=new l({Extends:u,initialize:function(R,O){u.call(this),this.scene=R,this.bodies=new b,this.staticBodies=new b,this.pendingDestroy=new b,this.colliders=new x,this.gravity=new F(y(O,"gravity.x",0),y(O,"gravity.y",0)),this.bounds=new E(y(O,"x",0),y(O,"y",0),y(O,"width",R.sys.scale.width),y(O,"height",R.sys.scale.height)),this.checkCollision={up:y(O,"checkCollision.up",!0),down:y(O,"checkCollision.down",!0),left:y(O,"checkCollision.left",!0),right:y(O,"checkCollision.right",!0)},this.fps=y(O,"fps",60),this.fixedStep=y(O,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(O,"timeScale",1),this.OVERLAP_BIAS=y(O,"overlapBias",4),this.TILE_BIAS=y(O,"tileBias",16),this.forceX=y(O,"forceX",!1),this.isPaused=y(O,"isPaused",!1),this._total=0,this.drawDebug=y(O,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(O,"debugShowBody",!0),debugShowStaticBody:y(O,"debugShowStaticBody",!0),debugShowVelocity:y(O,"debugShowVelocity",!0),bodyDebugColor:y(O,"debugBodyColor",16711935),staticBodyDebugColor:y(O,"debugStaticBodyColor",255),velocityDebugColor:y(O,"debugVelocityColor",65280)},this.maxEntries=y(O,"maxEntries",16),this.useTree=y(O,"useTree",!0),this.tree=new S(this.maxEntries),this.staticTree=new S(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new L,this._tempMatrix2=new L,this.drawDebug&&this.createDebugGraphic()},enable:function(R,O){O===void 0&&(O=a.DYNAMIC_BODY),Array.isArray(R)||(R=[R]);for(var B=0;B<R.length;B++){var U=R[B];if(U.isParent)for(var I=U.getChildren(),Y=0;Y<I.length;Y++){var N=I[Y];N.isParent?this.enable(N,O):this.enableBody(N,O)}else this.enableBody(U,O)}},enableBody:function(R,O){return O===void 0&&(O=a.DYNAMIC_BODY),R.body||(O===a.DYNAMIC_BODY?R.body=new i(this,R):O===a.STATIC_BODY&&(R.body=new _(this,R))),this.add(R.body),R},add:function(R){return R.physicsType===a.DYNAMIC_BODY?this.bodies.set(R):R.physicsType===a.STATIC_BODY&&(this.staticBodies.set(R),this.staticTree.insert(R)),R.enable=!0,R},disable:function(R){Array.isArray(R)||(R=[R]);for(var O=0;O<R.length;O++){var B=R[O];if(B.isParent)for(var U=B.getChildren(),I=0;I<U.length;I++){var Y=U[I];Y.isParent?this.disable(Y):this.disableBody(Y.body)}else this.disableBody(B.body)}},disableBody:function(R){this.remove(R),R.enable=!1},remove:function(R){R.physicsType===a.DYNAMIC_BODY?(this.tree.remove(R),this.bodies.delete(R)):R.physicsType===a.STATIC_BODY&&(this.staticBodies.delete(R),this.staticTree.remove(R))},createDebugGraphic:function(){var R=this.scene.sys.add.graphics({x:0,y:0});return R.setDepth(Number.MAX_VALUE),this.debugGraphic=R,this.drawDebug=!0,R},setBounds:function(R,O,B,U,I,Y,N,X){return this.bounds.setTo(R,O,B,U),I!==void 0&&this.setBoundsCollision(I,Y,N,X),this},setBoundsCollision:function(R,O,B,U){return R===void 0&&(R=!0),O===void 0&&(O=!0),B===void 0&&(B=!0),U===void 0&&(U=!0),this.checkCollision.left=R,this.checkCollision.right=O,this.checkCollision.up=B,this.checkCollision.down=U,this},pause:function(){return this.isPaused=!0,this.emit(s.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(s.RESUME),this},addCollider:function(R,O,B,U,I){B===void 0&&(B=null),U===void 0&&(U=null),I===void 0&&(I=B);var Y=new e(this,!1,R,O,B,U,I);return this.colliders.add(Y),Y},addOverlap:function(R,O,B,U,I){B===void 0&&(B=null),U===void 0&&(U=null),I===void 0&&(I=B);var Y=new e(this,!0,R,O,B,U,I);return this.colliders.add(Y),Y},removeCollider:function(R){return this.colliders.remove(R),this},setFPS:function(R){return this.fps=R,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(R,O){if(!this.isPaused&&this.bodies.size!==0){var B,U,I=this._frameTime,Y=this._frameTimeMS*this.timeScale;this._elapsed+=O;var N=this.bodies.entries,X=this._elapsed>=Y;for(this.fixedStep||(I=.001*O,X=!0,this._elapsed=0),B=0;B<N.length;B++)(U=N[B]).enable&&U.preUpdate(X,I);if(X){this._elapsed-=Y,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(N));var z=this.colliders.update();for(B=0;B<z.length;B++){var V=z[B];V.active&&V.update()}this.emit(s.WORLD_STEP,I)}for(;this._elapsed>=Y;)this._elapsed-=Y,this.step(I)}},step:function(R){var O,B,U=this.bodies.entries,I=U.length;for(O=0;O<I;O++)(B=U[O]).enable&&B.update(R);this.useTree&&(this.tree.clear(),this.tree.load(U));var Y=this.colliders.update();for(O=0;O<Y.length;O++){var N=Y[O];N.active&&N.update()}this.emit(s.WORLD_STEP,R),this.stepsLastFrame++},postUpdate:function(){var R,O,B=this.bodies.entries,U=B.length,I=this.bodies,Y=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,R=0;R<U;R++)(O=B[R]).enable&&O.postUpdate();if(this.drawDebug){var N=this.debugGraphic;for(N.clear(),R=0;R<U;R++)(O=B[R]).willDrawDebug()&&O.drawDebug(N);for(U=(B=Y.entries).length,R=0;R<U;R++)(O=B[R]).willDrawDebug()&&O.drawDebug(N)}var X=this.pendingDestroy;if(X.size>0){var z=this.tree,V=this.staticTree;for(U=(B=X.entries).length,R=0;R<U;R++)(O=B[R]).physicsType===a.DYNAMIC_BODY?(z.remove(O),I.delete(O)):O.physicsType===a.STATIC_BODY&&(V.remove(O),Y.delete(O)),O.world=void 0,O.gameObject=void 0;X.clear()}},updateMotion:function(R,O){R.allowRotation&&this.computeAngularVelocity(R,O),this.computeVelocity(R,O)},computeAngularVelocity:function(R,O){var B=R.angularVelocity,U=R.angularAcceleration,I=R.angularDrag,Y=R.maxAngular;U?B+=U*O:R.allowDrag&&I&&(h(B-(I*=O),0,.1)?B-=I:c(B+I,0,.1)?B+=I:B=0);var N=(B=n(B,-Y,Y))-R.angularVelocity;R.angularVelocity+=N,R.rotation+=R.angularVelocity*O},computeVelocity:function(R,O){var B=R.velocity.x,U=R.acceleration.x,I=R.drag.x,Y=R.maxVelocity.x,N=R.velocity.y,X=R.acceleration.y,z=R.drag.y,V=R.maxVelocity.y,G=R.speed,W=R.maxSpeed,H=R.allowDrag,j=R.useDamping;R.allowGravity&&(B+=(this.gravity.x+R.gravity.x)*O,N+=(this.gravity.y+R.gravity.y)*O),U?B+=U*O:H&&I&&(j?(B*=I=Math.pow(I,O),G=Math.sqrt(B*B+N*N),o(G,0,.001)&&(B=0)):h(B-(I*=O),0,.01)?B-=I:c(B+I,0,.01)?B+=I:B=0),X?N+=X*O:H&&z&&(j?(N*=z=Math.pow(z,O),G=Math.sqrt(B*B+N*N),o(G,0,.001)&&(N=0)):h(N-(z*=O),0,.01)?N-=z:c(N+z,0,.01)?N+=z:N=0),B=n(B,-Y,Y),N=n(N,-V,V),R.velocity.set(B,N),W>-1&&G>W&&(R.velocity.normalize().scale(W),G=W),R.speed=G},separate:function(R,O,B,U,I,Y){if(!Y&&!R.enable||!O.enable||R.checkCollision.none||O.checkCollision.none||!this.intersects(R,O)||B&&B.call(U,R.gameObject,O.gameObject)===!1)return!1;if(R.isCircle&&O.isCircle)return this.separateCircle(R,O,I);if(R.isCircle!==O.isCircle){var N=R.isCircle?O:R,X=R.isCircle?R:O,z={x:N.x,y:N.y,right:N.right,bottom:N.bottom},V=X.center;if((V.y<z.y||V.y>z.bottom)&&(V.x<z.x||V.x>z.right))return this.separateCircle(R,O,I)}var G=!1,W=!1;I?(G=A(R,O,I,this.OVERLAP_BIAS),W=M(R,O,I,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+R.gravity.y)<Math.abs(this.gravity.x+R.gravity.x)?(G=A(R,O,I,this.OVERLAP_BIAS),this.intersects(R,O)&&(W=M(R,O,I,this.OVERLAP_BIAS))):(W=M(R,O,I,this.OVERLAP_BIAS),this.intersects(R,O)&&(G=A(R,O,I,this.OVERLAP_BIAS)));var H=G||W;return H&&(I?(R.onOverlap||O.onOverlap)&&this.emit(s.OVERLAP,R.gameObject,O.gameObject,R,O):(R.onCollide||O.onCollide)&&this.emit(s.COLLIDE,R.gameObject,O.gameObject,R,O)),H},separateCircle:function(R,O,B,U){d(R,O,!1,U),g(R,O,!1,U);var I=0;if(R.isCircle!==O.isCircle){var Y={x:O.isCircle?R.position.x:O.position.x,y:O.isCircle?R.position.y:O.position.y,right:O.isCircle?R.right:O.right,bottom:O.isCircle?R.bottom:O.bottom},N={x:R.isCircle?R.center.x:O.center.x,y:R.isCircle?R.center.y:O.center.y,radius:R.isCircle?R.halfWidth:O.halfWidth};N.y<Y.y?N.x<Y.x?I=r(N.x,N.y,Y.x,Y.y)-N.radius:N.x>Y.right&&(I=r(N.x,N.y,Y.right,Y.y)-N.radius):N.y>Y.bottom&&(N.x<Y.x?I=r(N.x,N.y,Y.x,Y.bottom)-N.radius:N.x>Y.right&&(I=r(N.x,N.y,Y.right,Y.bottom)-N.radius)),I*=-1}else I=R.halfWidth+O.halfWidth-r(R.center.x,R.center.y,O.center.x,O.center.y);if(R.overlapR=I,O.overlapR=I,B||I===0||R.immovable&&O.immovable||R.customSeparateX||O.customSeparateX)return I!==0&&(R.onOverlap||O.onOverlap)&&this.emit(s.OVERLAP,R.gameObject,O.gameObject,R,O),I!==0;var X=R.center.x-O.center.x,z=R.center.y-O.center.y,V=Math.sqrt(Math.pow(X,2)+Math.pow(z,2)),G=(O.center.x-R.center.x)/V||0,W=(O.center.y-R.center.y)/V||0,H=2*(R.velocity.x*G+R.velocity.y*W-O.velocity.x*G-O.velocity.y*W)/(R.mass+O.mass);(R.immovable||O.immovable)&&(H*=2),R.immovable||(R.velocity.x=R.velocity.x-H/R.mass*G,R.velocity.y=R.velocity.y-H/R.mass*W),O.immovable||(O.velocity.x=O.velocity.x+H/O.mass*G,O.velocity.y=O.velocity.y+H/O.mass*W),R.immovable||O.immovable||(I/=2);var j=f(R.center,O.center),q=(I+w.EPSILON)*Math.cos(j),K=(I+w.EPSILON)*Math.sin(j);return R.immovable||(R.x-=q,R.y-=K,R.updateCenter()),O.immovable||(O.x+=q,O.y+=K,O.updateCenter()),R.velocity.x*=R.bounce.x,R.velocity.y*=R.bounce.y,O.velocity.x*=O.bounce.x,O.velocity.y*=O.bounce.y,(R.onCollide||O.onCollide)&&this.emit(s.COLLIDE,R.gameObject,O.gameObject,R,O),!0},intersects:function(R,O){return R!==O&&(R.isCircle||O.isCircle?R.isCircle?O.isCircle?r(R.center.x,R.center.y,O.center.x,O.center.y)<=R.halfWidth+O.halfWidth:this.circleBodyIntersects(R,O):this.circleBodyIntersects(O,R):!(R.right<=O.position.x||R.bottom<=O.position.y||R.position.x>=O.right||R.position.y>=O.bottom))},circleBodyIntersects:function(R,O){var B=n(R.center.x,O.left,O.right),U=n(R.center.y,O.top,O.bottom);return(R.center.x-B)*(R.center.x-B)+(R.center.y-U)*(R.center.y-U)<=R.halfWidth*R.halfWidth},overlap:function(R,O,B,U,I){return B===void 0&&(B=null),U===void 0&&(U=null),I===void 0&&(I=B),this.collideObjects(R,O,B,U,I,!0)},collide:function(R,O,B,U,I){return B===void 0&&(B=null),U===void 0&&(U=null),I===void 0&&(I=B),this.collideObjects(R,O,B,U,I,!1)},collideObjects:function(R,O,B,U,I,Y){var N,X;R.isParent&&R.physicsType===void 0&&(R=R.children.entries),O&&O.isParent&&O.physicsType===void 0&&(O=O.children.entries);var z=Array.isArray(R),V=Array.isArray(O);if(this._total=0,z||V)if(!z&&V)for(N=0;N<O.length;N++)this.collideHandler(R,O[N],B,U,I,Y);else if(z&&!V)if(O)for(N=0;N<R.length;N++)this.collideHandler(R[N],O,B,U,I,Y);else for(N=0;N<R.length;N++){var G=R[N];for(X=N+1;X<R.length;X++)N!==X&&this.collideHandler(G,R[X],B,U,I,Y)}else for(N=0;N<R.length;N++)for(X=0;X<O.length;X++)this.collideHandler(R[N],O[X],B,U,I,Y);else this.collideHandler(R,O,B,U,I,Y);return this._total>0},collideHandler:function(R,O,B,U,I,Y){if(O===void 0&&R.isParent)return this.collideGroupVsGroup(R,R,B,U,I,Y);if(!R||!O)return!1;if(R.body){if(O.body)return this.collideSpriteVsSprite(R,O,B,U,I,Y);if(O.isParent)return this.collideSpriteVsGroup(R,O,B,U,I,Y);if(O.isTilemap)return this.collideSpriteVsTilemapLayer(R,O,B,U,I,Y)}else if(R.isParent){if(O.body)return this.collideSpriteVsGroup(O,R,B,U,I,Y);if(O.isParent)return this.collideGroupVsGroup(R,O,B,U,I,Y);if(O.isTilemap)return this.collideGroupVsTilemapLayer(R,O,B,U,I,Y)}else if(R.isTilemap){if(O.body)return this.collideSpriteVsTilemapLayer(O,R,B,U,I,Y);if(O.isParent)return this.collideGroupVsTilemapLayer(O,R,B,U,I,Y)}},collideSpriteVsSprite:function(R,O,B,U,I,Y){return!(!R.body||!O.body||(this.separate(R.body,O.body,U,I,Y)&&(B&&B.call(I,R,O),this._total++),0))},collideSpriteVsGroup:function(R,O,B,U,I,Y){var N,X,z,V=R.body;if(O.length!==0&&V&&V.enable&&!V.checkCollision.none)if(this.useTree||O.physicsType===a.STATIC_BODY){var G=this.treeMinMax;G.minX=V.left,G.minY=V.top,G.maxX=V.right,G.maxY=V.bottom;var W=O.physicsType===a.DYNAMIC_BODY?this.tree.search(G):this.staticTree.search(G);for(X=W.length,N=0;N<X;N++)V!==(z=W[N])&&z.enable&&!z.checkCollision.none&&O.contains(z.gameObject)&&this.separate(V,z,U,I,Y,!0)&&(B&&B.call(I,V.gameObject,z.gameObject),this._total++)}else{var H=O.getChildren(),j=O.children.entries.indexOf(R);for(X=H.length,N=0;N<X;N++)(z=H[N].body)&&N!==j&&z.enable&&this.separate(V,z,U,I,Y)&&(B&&B.call(I,V.gameObject,z.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(R,O,B,U,I,Y){var N=R.getChildren();if(N.length===0)return!1;for(var X=!1,z=0;z<N.length;z++)N[z].body&&this.collideSpriteVsTilemapLayer(N[z],O,B,U,I,Y)&&(X=!0);return X},collideTiles:function(R,O,B,U,I){return!(!R.body.enable||O.length===0)&&this.collideSpriteVsTilesHandler(R,O,B,U,I,!1,!1)},overlapTiles:function(R,O,B,U,I){return!(!R.body.enable||O.length===0)&&this.collideSpriteVsTilesHandler(R,O,B,U,I,!0,!1)},collideSpriteVsTilemapLayer:function(R,O,B,U,I,Y){var N=R.body;if(!N.enable||N.checkCollision.none)return!1;var X=N.position.x,z=N.position.y,V=N.width,G=N.height,W=O.layer;if(W.tileWidth>W.baseTileWidth){var H=(W.tileWidth-W.baseTileWidth)*O.scaleX;X-=H,V+=H}W.tileHeight>W.baseTileHeight&&(G+=(W.tileHeight-W.baseTileHeight)*O.scaleY);var j=m(X,z,V,G,null,O.scene.cameras.main,O.layer);return j.length!==0&&this.collideSpriteVsTilesHandler(R,j,B,U,I,Y,!0)},collideSpriteVsTilesHandler:function(R,O,B,U,I,Y,N){for(var X,z,V=R.body,G={left:0,right:0,top:0,bottom:0},W=!1,H=0;H<O.length;H++){var j=(z=(X=O[H]).tilemapLayer).tileToWorldXY(X.x,X.y);G.left=j.x,G.top=j.y,X.baseHeight!==X.height&&(G.top-=(X.height-X.baseHeight)*z.scaleY),G.right=G.left+X.width*z.scaleX,G.bottom=G.top+X.height*z.scaleY,P(G,V)&&(!U||U.call(I,R,X))&&T(X,R)&&(Y||C(H,V,X,G,z,this.TILE_BIAS,N))&&(this._total++,W=!0,B&&B.call(I,R,X),Y&&V.onOverlap?this.emit(s.TILE_OVERLAP,R,X,V):V.onCollide&&this.emit(s.TILE_COLLIDE,R,X,V))}return W},collideGroupVsGroup:function(R,O,B,U,I,Y){if(R.length!==0&&O.length!==0)for(var N=R.getChildren(),X=0;X<N.length;X++)this.collideSpriteVsGroup(N[X],O,B,U,I,Y)},wrap:function(R,O){R.body?this.wrapObject(R,O):R.getChildren?this.wrapArray(R.getChildren(),O):Array.isArray(R)?this.wrapArray(R,O):this.wrapObject(R,O)},wrapArray:function(R,O){for(var B=0;B<R.length;B++)this.wrapObject(R[B],O)},wrapObject:function(R,O){O===void 0&&(O=0),R.x=D(R.x,this.bounds.left-O,this.bounds.right+O),R.y=D(R.y,this.bounds.top-O,this.bounds.bottom+O)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});v.exports=k},1424:v=>{v.exports={setAcceleration:function(p,t){return this.body.acceleration.set(p,t),this},setAccelerationX:function(p){return this.body.acceleration.x=p,this},setAccelerationY:function(p){return this.body.acceleration.y=p,this}}},2091:v=>{v.exports={setAngularVelocity:function(p){return this.body.angularVelocity=p,this},setAngularAcceleration:function(p){return this.body.angularAcceleration=p,this},setAngularDrag:function(p){return this.body.angularDrag=p,this}}},32851:v=>{v.exports={setBounce:function(p,t){return this.body.bounce.set(p,t),this},setBounceX:function(p){return this.body.bounce.x=p,this},setBounceY:function(p){return this.body.bounce.y=p,this},setCollideWorldBounds:function(p,t,f){return this.body.setCollideWorldBounds(p,t,f),this}}},23980:v=>{v.exports={setDebug:function(p,t,f){return this.debugShowBody=p,this.debugShowVelocity=t,this.debugBodyColor=f,this},setDebugBodyColor:function(p){return this.body.debugBodyColor=p,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(p){this.body.debugShowBody=p}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(p){this.body.debugShowVelocity=p}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(p){this.body.debugBodyColor=p}}}},25824:v=>{v.exports={setDrag:function(p,t){return this.body.drag.set(p,t),this},setDragX:function(p){return this.body.drag.x=p,this},setDragY:function(p){return this.body.drag.y=p,this},setDamping:function(p){return this.body.useDamping=p,this}}},2298:v=>{v.exports={enableBody:function(p,t,f,i,n){return p&&this.body.reset(t,f),i&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(p,t){return p===void 0&&(p=!1),t===void 0&&(t=!1),this.body.stop(),this.body.enable=!1,p&&(this.body.gameObject.active=!1),t&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},87417:v=>{v.exports={setFriction:function(p,t){return this.body.friction.set(p,t),this},setFrictionX:function(p){return this.body.friction.x=p,this},setFrictionY:function(p){return this.body.friction.y=p,this}}},66386:v=>{v.exports={setGravity:function(p,t){return this.body.gravity.set(p,t),this},setGravityX:function(p){return this.body.gravity.x=p,this},setGravityY:function(p){return this.body.gravity.y=p,this}}},68859:v=>{v.exports={setImmovable:function(p){return p===void 0&&(p=!0),this.body.immovable=p,this}}},60274:v=>{v.exports={setMass:function(p){return this.body.mass=p,this}}},79552:(v,p,t)=>{var f=t(8987),i=t(38459),n=t(19357),l=t(10882);v.exports=function(e,a,r,u,s,o){var h=f(e,a-u,r-u,2*u,2*u,s,o);if(h.length===0)return h;for(var c=new i(a,r,u),d=new i,g=[],m=0;m<h.length;m++){var y=h[m];y.isCircle?(d.setTo(y.center.x,y.center.y,y.halfWidth),n(c,d)&&g.push(y)):l(c,y)&&g.push(y)}return g}},8987:v=>{v.exports=function(p,t,f,i,n,l,e){l===void 0&&(l=!0),e===void 0&&(e=!1);var a=[],r=[],u=p.treeMinMax;if(u.minX=t,u.minY=f,u.maxX=t+i,u.maxY=f+n,e&&(r=p.staticTree.search(u)),l&&p.useTree)a=p.tree.search(u);else if(l){var s=p.bodies,o={position:{x:t,y:f},left:t,top:f,right:t+i,bottom:f+n,isCircle:!1},h=p.intersects;s.iterate(function(c){h(c,o)&&a.push(c)})}return r.concat(a)}},65562:v=>{v.exports={setPushable:function(p){return p===void 0&&(p=!0),this.body.pushable=p,this}}},85072:v=>{v.exports={setOffset:function(p,t){return this.body.setOffset(p,t),this},setSize:function(p,t,f){return this.body.setSize(p,t,f),this},setBodySize:function(p,t,f){return this.body.setSize(p,t,f),this},setCircle:function(p,t,f){return this.body.setCircle(p,t,f),this}}},98425:v=>{v.exports={setVelocity:function(p,t){return this.body.setVelocity(p,t),this},setVelocityX:function(p){return this.body.setVelocityX(p),this},setVelocityY:function(p){return this.body.setVelocityY(p),this},setMaxVelocity:function(p,t){return this.body.maxVelocity.set(p,t),this}}},768:(v,p,t)=>{v.exports={Acceleration:t(1424),Angular:t(2091),Bounce:t(32851),Debug:t(23980),Drag:t(25824),Enable:t(2298),Friction:t(87417),Gravity:t(66386),Immovable:t(68859),Mass:t(60274),OverlapCirc:t(79552),OverlapRect:t(8987),Pushable:t(65562),Size:t(85072),Velocity:t(98425)}},58581:v=>{v.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},95854:v=>{v.exports="collide"},77517:v=>{v.exports="overlap"},10102:v=>{v.exports="pause"},79047:v=>{v.exports="resume"},6106:v=>{v.exports="tilecollide"},57292:v=>{v.exports="tileoverlap"},35877:v=>{v.exports="worldbounds"},69910:v=>{v.exports="worldstep"},81518:(v,p,t)=>{v.exports={COLLIDE:t(95854),OVERLAP:t(77517),PAUSE:t(10102),RESUME:t(79047),TILE_COLLIDE:t(6106),TILE_OVERLAP:t(57292),WORLD_BOUNDS:t(35877),WORLD_STEP:t(69910)}},77216:(v,p,t)=>{var f=t(58581),i=t(72646),n={ArcadePhysics:t(37402),Body:t(58019),Collider:t(95867),Components:t(768),Events:t(81518),Factory:t(6394),GetOverlapX:t(67559),GetOverlapY:t(73996),SeparateX:t(27099),SeparateY:t(40472),Group:t(31188),Image:t(38661),Sprite:t(59327),StaticBody:t(53651),StaticGroup:t(36012),Tilemap:t(46399),World:t(17693)};n=i(!1,n,f),v.exports=n},56015:v=>{v.exports=function(p,t){return p.collisionCallback?!p.collisionCallback.call(p.collisionCallbackContext,t,p):!p.layer.callbacks[p.index]||!p.layer.callbacks[p.index].callback.call(p.layer.callbacks[p.index].callbackContext,t,p)}},64165:v=>{v.exports=function(p,t){t<0?(p.blocked.none=!1,p.blocked.left=!0):t>0&&(p.blocked.none=!1,p.blocked.right=!0),p.position.x-=t,p.bounce.x===0?p.velocity.x=0:p.velocity.x=-p.velocity.x*p.bounce.x}},82236:v=>{v.exports=function(p,t){t<0?(p.blocked.none=!1,p.blocked.up=!0):t>0&&(p.blocked.none=!1,p.blocked.down=!0),p.position.y-=t,p.bounce.y===0?p.velocity.y=0:p.velocity.y=-p.velocity.y*p.bounce.y}},67661:(v,p,t)=>{var f=t(30882),i=t(52049),n=t(30052);v.exports=function(l,e,a,r,u,s,o){var h=r.left,c=r.top,d=r.right,g=r.bottom,m=a.faceLeft||a.faceRight,y=a.faceTop||a.faceBottom;if(o||(m=!0,y=!0),!m&&!y)return!1;var w=0,x=0,T=0,E=1;if(e.deltaAbsX()>e.deltaAbsY()?T=-1:e.deltaAbsX()<e.deltaAbsY()&&(E=-1),e.deltaX()!==0&&e.deltaY()!==0&&m&&y&&(T=Math.min(Math.abs(e.position.x-d),Math.abs(e.right-h)),E=Math.min(Math.abs(e.position.y-g),Math.abs(e.bottom-c))),T<E){if(m&&(w=f(e,a,h,d,s,o))!==0&&!n(r,e))return!0;y&&(x=i(e,a,c,g,s,o))}else{if(y&&(x=i(e,a,c,g,s,o))!==0&&!n(r,e))return!0;m&&(w=f(e,a,h,d,s,o))}return w!==0||x!==0}},30882:(v,p,t)=>{var f=t(64165);v.exports=function(i,n,l,e,a,r){var u=0,s=n.faceLeft,o=n.faceRight,h=n.collideLeft,c=n.collideRight;return r||(s=!0,o=!0,h=!0,c=!0),i.deltaX()<0&&c&&i.checkCollision.left?o&&i.x<e&&(u=i.x-e)<-a&&(u=0):i.deltaX()>0&&h&&i.checkCollision.right&&s&&i.right>l&&(u=i.right-l)>a&&(u=0),u!==0&&(i.customSeparateX?i.overlapX=u:f(i,u)),u}},52049:(v,p,t)=>{var f=t(82236);v.exports=function(i,n,l,e,a,r){var u=0,s=n.faceTop,o=n.faceBottom,h=n.collideUp,c=n.collideDown;return r||(s=!0,o=!0,h=!0,c=!0),i.deltaY()<0&&c&&i.checkCollision.up?o&&i.y<e&&(u=i.y-e)<-a&&(u=0):i.deltaY()>0&&h&&i.checkCollision.down&&s&&i.bottom>l&&(u=i.bottom-l)>a&&(u=0),u!==0&&(i.customSeparateY?i.overlapY=u:f(i,u)),u}},30052:v=>{v.exports=function(p,t){return!(t.right<=p.left||t.bottom<=p.top||t.position.x>=p.right||t.position.y>=p.bottom)}},46399:(v,p,t)=>{var f={ProcessTileCallbacks:t(56015),ProcessTileSeparationX:t(64165),ProcessTileSeparationY:t(82236),SeparateTile:t(67661),TileCheckX:t(30882),TileCheckY:t(52049),TileIntersectsBody:t(30052)};v.exports=f},15277:(v,p,t)=>{var f=new(t(69186))({initialize:function(i){this.pluginManager=i,this.game=i.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});v.exports=f},32122:v=>{var p={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};p.Global.push("facebook"),v.exports=p},46236:v=>{var p={},t={},f={register:function(i,n,l,e){e===void 0&&(e=!1),p[i]={plugin:n,mapping:l,custom:e}},registerCustom:function(i,n,l,e){t[i]={plugin:n,mapping:l,data:e}},hasCore:function(i){return p.hasOwnProperty(i)},hasCustom:function(i){return t.hasOwnProperty(i)},getCore:function(i){return p[i]},getCustom:function(i){return t[i]},getCustomClass:function(i){return t.hasOwnProperty(i)?t[i].plugin:null},remove:function(i){p.hasOwnProperty(i)&&delete p[i]},removeCustom:function(i){t.hasOwnProperty(i)&&delete t[i]},destroyCorePlugins:function(){for(var i in p)p.hasOwnProperty(i)&&delete p[i]},destroyCustomPlugins:function(){for(var i in t)t.hasOwnProperty(i)&&delete t[i]}};v.exports=f},87037:(v,p,t)=>{var f=t(69186),i=t(24496),n=t(26729),l=t(25028),e=t(78757),a=t(66642),r=t(25738),u=t(46236),s=t(63083),o=new f({Extends:n,initialize:function(h){n.call(this),this.game=h,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],h.isBooted?this.boot():h.events.once(i.BOOT,this.boot,this)},boot:function(){var h,c,d,g,m,y,w,x=this.game.config,T=x.installGlobalPlugins;for(T=T.concat(this._pendingGlobal),h=0;h<T.length;h++)c=T[h],d=r(c,"key",null),g=r(c,"plugin",null),m=r(c,"start",!1),y=r(c,"mapping",null),w=r(c,"data",null),d&&(g?this.install(d,g,m,y,w):console.warn("Missing `plugin` for key: "+d));for(T=(T=x.installScenePlugins).concat(this._pendingScene),h=0;h<T.length;h++)c=T[h],d=r(c,"key",null),g=r(c,"plugin",null),y=r(c,"mapping",null),d&&(g?this.installScenePlugin(d,g,y):console.warn("Missing `plugin` for key: "+d));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(i.DESTROY,this.destroy,this)},addToScene:function(h,c,d){var g,m,y,w=this.game,x=h.scene,T=h.settings.map,E=h.settings.isBooted;for(g=0;g<c.length;g++)w[m=c[g]]?(h[m]=w[m],T.hasOwnProperty(m)&&(x[T[m]]=h[m])):m==="game"&&T.hasOwnProperty(m)&&(x[T[m]]=w);for(var S=0;S<d.length;S++)for(y=d[S],g=0;g<y.length;g++)if(m=y[g],u.hasCore(m)){var C=u.getCore(m),A=C.mapping,M=new C.plugin(x,this,A);h[A]=M,C.custom?x[A]=M:T.hasOwnProperty(A)&&(x[T[A]]=M),E&&M.boot()}for(y=this.plugins,g=0;g<y.length;g++){var b=y[g];b.mapping&&(x[b.mapping]=b.plugin)}},getDefaultScenePlugins:function(){var h=this.game.config.defaultPlugins;return h.concat(this.scenePlugins)},installScenePlugin:function(h,c,d,g,m){if(m===void 0&&(m=!1),typeof c=="function"){if(u.hasCore(h)){if(!m&&u.hasCore(h))return void console.warn("Scene Plugin key in use: "+h)}else u.register(h,c,d,!0),this.scenePlugins.push(h);if(g){var y=new c(g,this,h);g.sys[h]=y,d&&d!==""&&(g[d]=y),y.boot()}}else console.warn("Invalid Scene Plugin: "+h)},install:function(h,c,d,g,m){if(d===void 0&&(d=!1),g===void 0&&(g=null),m===void 0&&(m=null),typeof c!="function")return console.warn("Invalid Plugin: "+h),null;if(u.hasCustom(h))return console.warn("Plugin key in use: "+h),null;if(g!==null&&(d=!0),this.game.isBooted){if(u.registerCustom(h,c,g,m),d)return this.start(h)}else this._pendingGlobal.push({key:h,plugin:c,start:d,mapping:g,data:m});return null},getIndex:function(h){for(var c=this.plugins,d=0;d<c.length;d++)if(c[d].key===h)return d;return-1},getEntry:function(h){var c=this.getIndex(h);if(c!==-1)return this.plugins[c]},isActive:function(h){var c=this.getEntry(h);return c&&c.active},start:function(h,c){c===void 0&&(c=h);var d=this.getEntry(c);return d&&!d.active?(d.active=!0,d.plugin.start()):d||(d=this.createEntry(h,c)),d?d.plugin:null},createEntry:function(h,c){var d=u.getCustom(h);if(d){var g=new d.plugin(this);d={key:c,plugin:g,active:!0,mapping:d.mapping,data:d.data},this.plugins.push(d),g.init(d.data),g.start()}return d},stop:function(h){var c=this.getEntry(h);return c&&c.active&&(c.active=!1,c.plugin.stop()),this},get:function(h,c){c===void 0&&(c=!0);var d=this.getEntry(h);if(d)return d.plugin;var g=this.getClass(h);return g&&c?(d=this.createEntry(h,h))?d.plugin:null:g||null},getClass:function(h){return u.getCustomClass(h)},removeGlobalPlugin:function(h){var c=this.getEntry(h);c&&s(this.plugins,c),u.removeCustom(h)},removeScenePlugin:function(h){s(this.scenePlugins,h),u.remove(h)},registerGameObject:function(h,c,d){return c&&a.register(h,c),d&&e.register(h,d),this},removeGameObject:function(h,c,d){return c===void 0&&(c=!0),d===void 0&&(d=!0),c&&a.remove(h),d&&e.remove(h),this},registerFileType:function(h,c,d){l.register(h,c),d&&d.sys.load&&(d.sys.load[h]=c)},destroy:function(){for(var h=0;h<this.plugins.length;h++)this.plugins[h].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});v.exports=o},76719:(v,p,t)=>{var f=t(15277),i=t(69186),n=t(12063),l=new i({Extends:f,initialize:function(e,a,r){f.call(this,a),this.scene=e,this.systems=e.sys,this.pluginKey=r,e.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});v.exports=l},25753:(v,p,t)=>{v.exports={BasePlugin:t(15277),DefaultPlugins:t(32122),PluginCache:t(46236),PluginManager:t(87037),ScenePlugin:t(76719)}},5305:()=>{Array.prototype.forEach||(Array.prototype.forEach=function(v){if(this==null)throw new TypeError;var p=Object(this),t=p.length>>>0;if(typeof v!="function")throw new TypeError;for(var f=arguments.length>=2?arguments[1]:void 0,i=0;i<t;i++)i in p&&v.call(f,p[i],i,p)})},51238:()=>{Array.isArray||(Array.isArray=function(v){return Object.prototype.toString.call(v)==="[object Array]"})},91124:()=>{(function(){function v(p){p&&(p.setTargetAtTime||(p.setTargetAtTime=p.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var p=this.internal_createGain();return v(p.gain),p},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(p){var t=p?this.internal_createDelay(p):this.internal_createDelay();return v(t.delayTime),t},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var p=this.internal_createBufferSource();return p.start?(p.internal_start=p.start,p.start=function(t,f,i){i!==void 0?p.internal_start(t||0,f,i):p.internal_start(t||0,f||0)}):p.start=function(t,f,i){f||i?this.noteGrainOn(t||0,f,i):this.noteOn(t||0)},p.stop?(p.internal_stop=p.stop,p.stop=function(t){p.internal_stop(t||0)}):p.stop=function(t){this.noteOff(t||0)},v(p.playbackRate),p},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var p=this.internal_createDynamicsCompressor();return v(p.threshold),v(p.knee),v(p.ratio),v(p.reduction),v(p.attack),v(p.release),p},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var p=this.internal_createBiquadFilter();return v(p.frequency),v(p.detune),v(p.Q),v(p.gain),p},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var p=this.internal_createOscillator();return p.start?(p.internal_start=p.start,p.start=function(t){p.internal_start(t||0)}):p.start=function(t){this.noteOn(t||0)},p.stop?(p.internal_stop=p.stop,p.stop=function(t){p.internal_stop(t||0)}):p.stop=function(t){this.noteOff(t||0)},p.setPeriodicWave||(p.setPeriodicWave=p.setWaveTable),v(p.frequency),v(p.detune),p})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)})()},16765:()=>{Math.trunc||(Math.trunc=function(v){return v<0?Math.ceil(v):Math.floor(v)})},15696:()=>{if(typeof window.Uint32Array!="function"&&typeof window.Uint32Array!="object"){var v=function(p){var t=new Array;window[p]=function(f){if(typeof f=="number"){Array.call(this,f),this.length=f;for(var i=0;i<this.length;i++)this[i]=0}else for(Array.call(this,f.length),this.length=f.length,i=0;i<this.length;i++)this[i]=f[i]},window[p].prototype=t,window[p].constructor=window[p]};v("Float32Array"),v("Uint32Array"),v("Uint16Array"),v("Int16Array"),v("ArrayBuffer")}},62778:()=>{window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},76417:(v,p,t)=>{t(5305),t(51238),t(91124),t(62778),t(16765),t(9667),t(57937),t(15696)},9667:()=>{(function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return new Date().getTime()},"now"in window.performance==0){var v=Date.now();performance.timing&&performance.timing.navigationStart&&(v=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-v}}})()},57937:()=>{for(var v=Date.now(),p=["ms","moz","webkit","o"],t=0;t<p.length&&!window.requestAnimationFrame;t++)window.requestAnimationFrame=window[p[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[p[t]+"CancelAnimationFrame"]||window[p[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(f){if(typeof f!="function")throw new TypeError(f+"is not a function");var i=Date.now(),n=16+v-i;return n<0&&(n=0),v=i,setTimeout(function(){v=Date.now(),f(performance.now())},n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(f){clearTimeout(f)})},87626:v=>{v.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29718:v=>{v.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},65125:(v,p,t)=>{var f=t(26088),i=t(25492),n=t(69186),l=t(11318),e=t(26729),a=t(37710),r=t(67833),u=t(48958),s=t(61632),o=t(9329),h=new n({Extends:e,initialize:function(c){e.call(this);var d=c.config;this.config={clearBeforeRender:d.clearBeforeRender,backgroundColor:d.backgroundColor,antialias:d.antialias,roundPixels:d.roundPixels},this.game=c,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=c.canvas;var g={alpha:c.config.transparent,desynchronized:c.config.desynchronized};this.gameContext=d.context?d.context:this.gameCanvas.getContext("2d",g),this.currentContext=this.gameContext,this.antialias=c.config.antialias,this.blendModes=r(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new o,this._tempMatrix2=new o,this._tempMatrix3=new o,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(s.READY,this.boot,this)},boot:function(){var c=this.game,d=c.scale.baseSize;this.width=d.width,this.height=d.height,this.isBooted=!0,c.scale.on(u.RESIZE,this.onResize,this),this.resize(d.width,d.height)},onResize:function(c,d){d.width===this.width&&d.height===this.height||this.resize(d.width,d.height)},resize:function(c,d){this.width=c,this.height=d,this.emit(a.RESIZE,c,d)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(c){return this.currentContext.globalCompositeOperation=c,this},setContext:function(c){return this.currentContext=c||this.gameContext,this},setAlpha:function(c){return this.currentContext.globalAlpha=c,this},preRender:function(){var c=this.gameContext,d=this.config,g=this.width,m=this.height;c.globalAlpha=1,c.globalCompositeOperation="source-over",c.setTransform(1,0,0,1,0,0),d.clearBeforeRender&&(c.clearRect(0,0,g,m),d.transparent||(c.fillStyle=d.backgroundColor.rgba,c.fillRect(0,0,g,m))),c.save(),this.drawCount=0,this.emit(a.PRE_RENDER)},render:function(c,d,g){var m=d.length;this.emit(a.RENDER,c,g);var y=g.x,w=g.y,x=g.width,T=g.height,E=g.renderToTexture?g.context:c.sys.context;E.save(),this.game.scene.customViewports&&(E.beginPath(),E.rect(y,w,x,T),E.clip()),this.currentContext=E;var S=g.mask;S&&S.preRenderCanvas(this,null,g._maskCamera),g.transparent||(E.fillStyle=g.backgroundColor.rgba,E.fillRect(y,w,x,T)),E.globalAlpha=g.alpha,E.globalCompositeOperation="source-over",this.drawCount+=m,g.renderToTexture&&g.emit(f.PRE_RENDER,g),g.matrix.copyToContext(E);for(var C=0;C<m;C++){var A=d[C];A.mask&&A.mask.preRenderCanvas(this,A,g),A.renderCanvas(this,A,g),A.mask&&A.mask.postRenderCanvas(this,A,g)}E.setTransform(1,0,0,1,0,0),E.globalCompositeOperation="source-over",E.globalAlpha=1,g.flashEffect.postRenderCanvas(E),g.fadeEffect.postRenderCanvas(E),g.dirty=!1,S&&S.postRenderCanvas(this),E.restore(),g.renderToTexture&&(g.emit(f.POST_RENDER,g),g.renderToGame&&c.sys.context.drawImage(g.canvas,y,w))},postRender:function(){this.gameContext.restore(),this.emit(a.POST_RENDER);var c=this.snapshotState;c.callback&&(i(this.gameCanvas,c),c.callback=null)},snapshotCanvas:function(c,d,g,m,y,w,x,T,E){g===void 0&&(g=!1),this.snapshotArea(m,y,w,x,d,T,E);var S=this.snapshotState;return S.getPixel=g,i(this.canvas,S),S.callback=null,this},snapshot:function(c,d,g){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,c,d,g)},snapshotArea:function(c,d,g,m,y,w,x){var T=this.snapshotState;return T.callback=y,T.type=w,T.encoder=x,T.getPixel=!1,T.x=c,T.y=d,T.width=Math.min(g,this.gameCanvas.width),T.height=Math.min(m,this.gameCanvas.height),this},snapshotPixel:function(c,d,g){return this.snapshotArea(c,d,1,1,g),this.snapshotState.getPixel=!0,this},batchSprite:function(c,d,g,m){var y=g.alpha*c.alpha;if(y!==0){var w=this.currentContext,x=this._tempMatrix1,T=this._tempMatrix2,E=d.canvasData,S=E.x,C=E.y,A=d.cutWidth,M=d.cutHeight,b=d.customPivot,_=d.source.resolution,P=c.displayOriginX,L=c.displayOriginY,F=-P+d.x,D=-L+d.y;if(c.isCropped){var k=c._crop;k.flipX===c.flipX&&k.flipY===c.flipY||d.updateCropUVs(k,c.flipX,c.flipY),A=k.cw,M=k.ch,S=k.cx,C=k.cy,F=-P+k.x,D=-L+k.y,c.flipX&&(F>=0?F=-(F+A):F<0&&(F=Math.abs(F)-A)),c.flipY&&(D>=0?D=-(D+M):D<0&&(D=Math.abs(D)-M))}var R=1,O=1;c.flipX&&(b||(F+=-d.realWidth+2*P),R=-1),c.flipY&&(b||(D+=-d.realHeight+2*L),O=-1),T.applyITRS(c.x,c.y,c.rotation,c.scaleX*R,c.scaleY*O),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*c.scrollFactorX,-g.scrollY*c.scrollFactorY),T.e=c.x,T.f=c.y):(T.e-=g.scrollX*c.scrollFactorX,T.f-=g.scrollY*c.scrollFactorY),x.multiply(T),w.save(),x.setToContext(w),w.globalCompositeOperation=this.blendModes[c.blendMode],w.globalAlpha=y,w.imageSmoothingEnabled=!(!this.antialias||d.source.scaleMode),c.mask&&c.mask.preRenderCanvas(this,c,g),w.drawImage(d.source.image,S,C,A,M,F,D,A/_,M/_),c.mask&&c.mask.postRenderCanvas(this,c,g),w.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});v.exports=h},67833:(v,p,t)=>{var f=t(87626),i=t(23404);v.exports=function(){var n=[],l=i.supportNewBlendModes,e="source-over";return n[f.NORMAL]=e,n[f.ADD]="lighter",n[f.MULTIPLY]=l?"multiply":e,n[f.SCREEN]=l?"screen":e,n[f.OVERLAY]=l?"overlay":e,n[f.DARKEN]=l?"darken":e,n[f.LIGHTEN]=l?"lighten":e,n[f.COLOR_DODGE]=l?"color-dodge":e,n[f.COLOR_BURN]=l?"color-burn":e,n[f.HARD_LIGHT]=l?"hard-light":e,n[f.SOFT_LIGHT]=l?"soft-light":e,n[f.DIFFERENCE]=l?"difference":e,n[f.EXCLUSION]=l?"exclusion":e,n[f.HUE]=l?"hue":e,n[f.SATURATION]=l?"saturation":e,n[f.COLOR]=l?"color":e,n[f.LUMINOSITY]=l?"luminosity":e,n[f.ERASE]="destination-out",n[f.SOURCE_IN]="source-in",n[f.SOURCE_OUT]="source-out",n[f.SOURCE_ATOP]="source-atop",n[f.DESTINATION_OVER]="destination-over",n[f.DESTINATION_IN]="destination-in",n[f.DESTINATION_OUT]="destination-out",n[f.DESTINATION_ATOP]="destination-atop",n[f.LIGHTER]="lighter",n[f.COPY]="copy",n[f.XOR]="xor",n}},14437:(v,p,t)=>{var f=t(3142);v.exports=function(i,n,l,e,a){var r=e.alpha*l.alpha;if(r<=0)return!1;var u=f(l,e,a).calc;return n.globalCompositeOperation=i.blendModes[l.blendMode],n.globalAlpha=r,n.save(),u.setToContext(n),n.imageSmoothingEnabled=!(!i.antialias||l.frame&&l.frame.source.scaleMode),!0}},90581:v=>{v.exports="postrender"},1944:v=>{v.exports="prerender"},2567:v=>{v.exports="render"},45864:v=>{v.exports="resize"},37710:(v,p,t)=>{v.exports={POST_RENDER:t(90581),PRE_RENDER:t(1944),RENDER:t(2567),RESIZE:t(45864)}},25492:(v,p,t)=>{var f=t(55579),i=t(13499),n=t(25738);v.exports=function(l,e){var a=n(e,"callback"),r=n(e,"type","image/png"),u=n(e,"encoder",.92),s=Math.abs(Math.round(n(e,"x",0))),o=Math.abs(Math.round(n(e,"y",0))),h=n(e,"width",l.width),c=n(e,"height",l.height);if(n(e,"getPixel",!1)){var d=l.getContext("2d").getImageData(s,o,1,1).data;a.call(null,new i(d[0],d[1],d[2],d[3]/255))}else if(s!==0||o!==0||h!==l.width||c!==l.height){var g=f.createWebGL(this,h,c);g.getContext("2d").drawImage(l,s,o,h,c,0,0,h,c);var m=new Image;m.onerror=function(){a.call(null),f.remove(g)},m.onload=function(){a.call(null,m),f.remove(g)},m.src=g.toDataURL(r,u)}else{var y=new Image;y.onerror=function(){a.call(null)},y.onload=function(){a.call(null,y)},y.src=l.toDataURL(r,u)}}},75913:(v,p,t)=>{var f=t(55579),i=t(13499),n=t(25738);v.exports=function(l,e){var a=l.getContext("experimental-webgl"),r=n(e,"callback"),u=n(e,"type","image/png"),s=n(e,"encoder",.92),o=n(e,"x",0),h=n(e,"y",0),c=n(e,"getPixel",!1),d=n(e,"isFramebuffer",!1),g=d?n(e,"bufferWidth",1):a.drawingBufferWidth,m=d?n(e,"bufferHeight",1):a.drawingBufferHeight;if(c){var y=new Uint8Array(4),w=d?h:m-h;a.readPixels(o,w,1,1,a.RGBA,a.UNSIGNED_BYTE,y),r.call(null,new i(y[0],y[1],y[2],y[3]/255))}else{var x=n(e,"width",g),T=n(e,"height",m),E=new Uint8Array(x*T*4);a.readPixels(o,m-h-T,x,T,a.RGBA,a.UNSIGNED_BYTE,E);for(var S=f.createWebGL(this,x,T),C=S.getContext("2d"),A=C.getImageData(0,0,x,T),M=A.data,b=0;b<T;b++)for(var _=0;_<x;_++){var P=4*((T-b-1)*x+_),L=4*(b*x+_);M[L+0]=E[P+0],M[L+1]=E[P+1],M[L+2]=E[P+2],M[L+3]=E[P+3]}C.putImageData(A,0,0);var F=new Image;F.onerror=function(){r.call(null),f.remove(S)},F.onload=function(){r.call(null,F),f.remove(S)},F.src=S.toDataURL(u,s)}}},37107:(v,p,t)=>{var f=t(69186),i=t(46098),n=t(21342),l=t(18923),e=t(48623),a=t(63174),r=t(14869),u=t(26159),s=t(67239),o=t(57434),h=t(21898),c=new f({initialize:function(d){this.game=d.game,this.renderer=d,this.classes=new n([[i.UTILITY_PIPELINE,h],[i.MULTI_PIPELINE,r],[i.BITMAPMASK_PIPELINE,l],[i.SINGLE_PIPELINE,o],[i.ROPE_PIPELINE,s],[i.LIGHT_PIPELINE,a],[i.POINTLIGHT_PIPELINE,u],[i.GRAPHICS_PIPELINE,e]]),this.postPipelineClasses=new n,this.pipelines=new n,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(d){var g,m,y=this,w=this.game;if(this.classes.each(function(T,E){g=y.add(T,new E({game:w})),T===i.UTILITY_PIPELINE&&(y.UTILITY_PIPELINE=g,y.fullFrame1=g.fullFrame1,y.fullFrame2=g.fullFrame2,y.halfFrame1=g.halfFrame1,y.halfFrame2=g.halfFrame2)}),this.MULTI_PIPELINE=this.get(i.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(i.BITMAPMASK_PIPELINE),d)for(m in d){var x=d[m];(g=new x(w)).isPostFX?this.postPipelineClasses.set(m,x):this.has(m)||(this.classes.set(m,x),this.add(m,g))}},add:function(d,g){if(!g.isPostFX){var m=this.pipelines,y=this.renderer;return m.has(d)?console.warn("Pipeline exists: "+d):(g.name=d,g.manager=this,m.set(d,g)),g.hasBooted||g.boot(),y.width!==0&&y.height!==0&&g.resize(y.width,y.height),g}console.warn(d+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(d,g){this.postPipelineClasses.has(d)||this.postPipelineClasses.set(d,g)},flush:function(){this.current&&this.current.flush()},has:function(d){var g=this.pipelines;return typeof d=="string"?g.has(d):!!g.contains(d)},get:function(d){var g=this.pipelines;return typeof d=="string"?g.get(d):g.contains(d)?d:void 0},getPostPipeline:function(d,g){var m,y=this.postPipelineClasses;if(typeof d=="string"?m=y.get(d):typeof d=="function"?y.contains(d)&&(m=d):typeof d=="object"&&(m=y.get(d.name)),m){var w=new m(this.game);return g&&(w.gameObject=g),w}},remove:function(d,g,m){g===void 0&&(g=!0),m===void 0&&(m=!0),this.pipelines.delete(d),g&&this.classes.delete(d),m&&this.postPipelineClasses.delete(d)},set:function(d,g,m){if(!d.isPostFX)return this.isCurrent(d,m)||(this.flush(),this.current&&this.current.unbind(),this.current=d,d.bind(m)),d.updateProjectionMatrix(),d.onBind(g),d},preBatch:function(d){if(d.hasPostPipeline){this.flush();for(var g=d.postPipelines,m=g.length-1;m>=0;m--){var y=g[m];y.active&&y.preBatch(d)}}},postBatch:function(d){if(d.hasPostPipeline){this.flush();for(var g=d.postPipelines,m=0;m<g.length;m++){var y=g[m];y.active&&y.postBatch(d)}}},preBatchCamera:function(d){if(d.hasPostPipeline){this.flush();for(var g=d.postPipelines,m=g.length-1;m>=0;m--){var y=g[m];y.active&&y.preBatch(d)}}},postBatchCamera:function(d){if(d.hasPostPipeline){this.flush();for(var g=d.postPipelines,m=0;m<g.length;m++){var y=g[m];y.active&&y.postBatch(d)}}},isCurrent:function(d,g){var m=this.renderer,y=this.current;return y&&!g&&(g=y.currentShader),!(y!==d||g.program!==m.currentProgram)},copyFrame:function(d,g,m,y,w){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(d,g,m,y,w),this},copyToGame:function(d){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(d),this},drawFrame:function(d,g,m,y){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(d,g,m,y),this},blendFrames:function(d,g,m,y,w){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(d,g,m,y,w),this},blendFramesAdditive:function(d,g,m,y,w){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(d,g,m,y,w),this},clearFrame:function(d,g){return this.UTILITY_PIPELINE.clearFrame(d,g),this},blitFrame:function(d,g,m,y,w,x){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(d,g,m,y,w,x),this},copyFrameRect:function(d,g,m,y,w,x,T,E){return this.UTILITY_PIPELINE.copyFrameRect(d,g,m,y,w,x,T,E),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(d){return this.UTILITY_PIPELINE.bind(d)},rebind:function(d){d===void 0&&this.previous&&(d=this.previous);var g=this.renderer,m=g.gl;m.disable(m.DEPTH_TEST),m.disable(m.CULL_FACE),g.hasActiveStencilMask()?m.clear(m.DEPTH_BUFFER_BIT):(m.disable(m.STENCIL_TEST),m.clear(m.DEPTH_BUFFER_BIT|m.STENCIL_BUFFER_BIT)),m.viewport(0,0,g.width,g.height),g.currentProgram=null,g.setBlendMode(0,!0);var y=this.pipelines.entries;for(var w in y)y[w].glReset=!0;d&&(this.current=d,d.rebind()),g.resetTextures()},clear:function(){var d=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,d.currentProgram=null,d.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});v.exports=c},50666:(v,p,t)=>{var f=t(69186),i=t(37710),n=new f({initialize:function(l,e,a,r,u,s,o){r===void 0&&(r=1),u===void 0&&(u=0),s===void 0&&(s=!0),o===void 0&&(o=!1),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=r,this.minFilter=u,this.autoClear=s,this.autoResize=!1,this.resize(e,a),o&&this.setAutoResize(!0)},setAutoResize:function(l){return l&&!this.autoResize?(this.renderer.on(i.RESIZE,this.resize,this),this.autoResize=!0):!l&&this.autoResize&&(this.renderer.off(i.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(l,e){var a=l*this.scale,r=e*this.scale;if(a!==this.width||r!==this.height){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),l*=this.scale,e*=this.scale,(l=Math.round(l))<=0&&(l=1),(e=Math.round(e))<=0&&(e=1),this.texture=u.createTextureFromSource(null,l,e,this.minFilter),this.framebuffer=u.createFramebuffer(l,e,this.texture,!1),this.width=l,this.height=e}return this},bind:function(l,e,a){if(l===void 0&&(l=!1),l&&this.renderer.flush(),e&&a&&this.resize(e,a),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),l&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var l=this.renderer.gl;l.viewport(0,0,this.width,this.height),l.disable(l.SCISSOR_TEST)},clear:function(){var l=this.renderer,e=l.gl;l.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),l.popFramebuffer(),l.resetScissor()},unbind:function(l){l===void 0&&(l=!1);var e=this.renderer;return l&&e.flush(),e.popFramebuffer()},destroy:function(){var l=this.renderer;l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),l.off(i.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});v.exports=n},64564:v=>{function p(t){for(var f="",i=0;i<t;++i)i>0&&(f+=`
else `),i<t-1&&(f+="if(test == "+i+".0){}");return f}v.exports={getTintFromFloats:function(t,f,i,n){return((255&(255*n|0))<<24|(255&(255*t|0))<<16|(255&(255*f|0))<<8|255&(255*i|0))>>>0},getTintAppendFloatAlpha:function(t,f){return((255&(255*f|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,f){return((255&(255*f|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,f){f&&f!==-1||(f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var i=t.createShader(t.FRAGMENT_SHADER),n=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var l=n.replace(/%forloop%/gi,p(f));if(t.shaderSource(i,l),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;f=f/2|0}return f},parseFragmentShaderMaxTextures:function(t,f){if(!t)return"";for(var i="",n=0;n<f;n++)n>0&&(i+=`
	else `),n<f-1&&(i+="if (outTexId < "+n+".5)"),i+=`
	{`,i+=`
		texture = texture2D(uMainSampler[`+n+"], outTexCoord);",i+=`
	}`;return(t=t.replace(/%count%/gi,f.toString())).replace(/%forloop%/gi,i)}}},89262:(v,p,t)=>{var f=t(69186),i=t(12229),n=t(26729),l=t(42789),e=t(25738),a=t(54259),r=t(37710),u=t(50666),s=t(64564),o=t(86384),h=new f({Extends:n,initialize:function(c){n.call(this);var d=c.game,g=d.renderer,m=g.gl;this.name=e(c,"name","WebGLPipeline"),this.game=d,this.renderer=g,this.manager,this.gl=m,this.view=d.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=e(c,"topology",m.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=e(c,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=c,this.glReset=!1},boot:function(){var c,d=this.gl,g=this.config,m=this.renderer;this.isPostFX||(this.projectionMatrix=new a().identity());var y=this.renderTargets,w=e(g,"renderTarget",!1);typeof w=="boolean"&&w&&(w=1);var x=m.width,T=m.height;if(typeof w=="number")for(c=0;c<w;c++)y.push(new u(m,x,T,1,0,!0));else if(Array.isArray(w))for(c=0;c<w.length;c++){var E=e(w[c],"scale",1),S=e(w[c],"minFilter",0),C=e(w[c],"autoClear",1);y.push(new u(m,x,T,E,S,C))}y.length&&(this.currentRenderTarget=y[0]),this.setShadersFromConfig(g);var A=this.shaders,M=0;for(c=0;c<A.length;c++)A[c].vertexSize>M&&(M=A[c].vertexSize);var b=e(g,"batchSize",m.config.batchSize);this.vertexCapacity=6*b;var _=new ArrayBuffer(this.vertexCapacity*M);this.vertexData=_,this.bytes=new Uint8Array(_),this.vertexViewF32=new Float32Array(_),this.vertexViewU32=new Uint32Array(_);var P=e(g,"vertices",null);for(P?(this.vertexViewF32.set(P),this.vertexBuffer=m.createVertexBuffer(_,d.STATIC_DRAW)):this.vertexBuffer=m.createVertexBuffer(_.byteLength,d.DYNAMIC_DRAW),this.setVertexBuffer(),c=A.length-1;c>=0;c--)A[c].rebind();this.hasBooted=!0,m.on(r.RESIZE,this.resize,this),m.on(r.PRE_RENDER,this.onPreRender,this),m.on(r.RENDER,this.onRender,this),m.on(r.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(c,d){var g=this.renderer;return c===this.currentShader&&g.currentProgram===this.currentShader.program||(this.flush(),g.resetTextures(),this.setVertexBuffer()&&!d&&(d=!0),c.bind(d,!1),this.currentShader=c),this},getShaderByName:function(c){for(var d=this.shaders,g=0;g<d.length;g++)if(d[g].name===c)return d[g]},setShadersFromConfig:function(c){var d,g=this.shaders,m=this.renderer;for(d=0;d<g.length;d++)g[d].destroy();var y="vertShader",w="fragShader",x="attributes",T=e(c,y,null),E=s.parseFragmentShaderMaxTextures(e(c,w,null),m.maxTextures),S=e(c,x,null),C=e(c,"shaders",[]),A=C.length;if(A===0)T&&E&&(this.shaders=[new o(this,"default",T,E,i(S))]);else{var M=[];for(d=0;d<A;d++){var b=C[d],_=e(b,"name","default"),P=e(b,y,T),L=s.parseFragmentShaderMaxTextures(e(b,w,E),m.maxTextures),F=e(b,x,S);P&&L&&M.push(new o(this,_,P,L,i(F)))}this.shaders=M}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(c,d){return d===void 0&&(d=c.frame),this.currentUnit=this.renderer.setTextureSource(d.source),this.currentUnit},shouldFlush:function(c){return c===void 0&&(c=0),this.vertexCount+c>this.vertexCapacity},resize:function(c,d){c===this.width&&d===this.height||this.flush(),this.width=c,this.height=d;for(var g=this.renderTargets,m=0;m<g.length;m++)g[m].resize(c,d);return this.setProjectionMatrix(c,d),this.emit(l.RESIZE,c,d,this),this.onResize(c,d),this},setProjectionMatrix:function(c,d){var g=this.projectionMatrix;if(!g)return this;this.projectionWidth=c,this.projectionHeight=d,g.ortho(0,c,d,0,-1e3,1e3);for(var m=this.shaders,y="uProjectionMatrix",w=0;w<m.length;w++){var x=m[w];x.hasUniform(y)&&(x.resetUniform(y),x.setMatrix4fv(y,!1,g.val,x))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var c=this.renderer.projectionWidth,d=this.renderer.projectionHeight;this.projectionWidth===c&&this.projectionHeight===d||this.setProjectionMatrix(c,d)}},bind:function(c){if(c===void 0&&(c=this.currentShader),this.glReset)return this.rebind(c);var d=this.setVertexBuffer();return c.bind(d),this.currentShader=c,this.emit(l.BIND,this,c),this.onActive(c),this},rebind:function(c){this.setVertexBuffer();for(var d=this.shaders,g=d.length-1;g>=0;g--){var m=d[g].rebind();c&&m!==c||(this.currentShader=m)}return this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var c=this.gl,d=this.vertexBuffer;return c.getParameter(c.ARRAY_BUFFER_BINDING)!==d&&(c.bindBuffer(c.ARRAY_BUFFER,d),!0)},preBatch:function(c){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(c),this},postBatch:function(c){return this.onDraw(this.currentRenderTarget),this.onPostBatch(c),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(c){if(c===void 0&&(c=!1),this.vertexCount>0){this.emit(l.BEFORE_FLUSH,this,c),this.onBeforeFlush(c);var d=this.gl,g=this.vertexCount,m=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),g===this.vertexCapacity?d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.DYNAMIC_DRAW):d.bufferSubData(d.ARRAY_BUFFER,0,this.bytes.subarray(0,g*m)),d.drawArrays(this.topology,0,g)),this.vertexCount=0,this.emit(l.AFTER_FLUSH,this,c),this.onAfterFlush(c)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(c,d,g,m,y,w,x){var T=this.vertexViewF32,E=this.vertexViewU32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++S]=c,T[++S]=d,T[++S]=g,T[++S]=m,T[++S]=y,T[++S]=w,E[++S]=x,this.vertexCount++},batchQuad:function(c,d,g,m,y,w,x,T,E,S,C,A,M,b,_,P,L,F,D,k){k===void 0&&(k=this.currentUnit);var R=!1;return this.shouldFlush(6)&&(this.flush(),R=!0,k=this.setTexture2D(D)),this.batchVert(d,g,S,C,k,F,b),this.batchVert(m,y,S,M,k,F,P),this.batchVert(w,x,A,M,k,F,L),this.batchVert(d,g,S,C,k,F,b),this.batchVert(w,x,A,M,k,F,L),this.batchVert(T,E,A,C,k,F,_),this.onBatch(c),R},batchTri:function(c,d,g,m,y,w,x,T,E,S,C,A,M,b,_,P,L){L===void 0&&(L=this.currentUnit);var F=!1;return this.shouldFlush(3)&&(this.flush(),F=!0,L=this.setTexture2D(P)),this.batchVert(d,g,T,E,L,_,A),this.batchVert(m,y,T,C,L,_,M),this.batchVert(w,x,S,C,L,_,b),this.onBatch(c),F},drawFillRect:function(c,d,g,m,y,w,x,T){x===void 0&&(x=this.renderer.whiteTexture.glTexture),T===void 0&&(T=!0),c=Math.floor(c),d=Math.floor(d);var E=Math.floor(c+g),S=Math.floor(d+m),C=this.setTexture2D(x),A=s.getTintAppendFloatAlphaAndSwap(y,w),M=0,b=1;T&&(M=1,b=0),this.batchQuad(null,c,d,c,S,E,S,E,d,0,M,1,b,A,A,A,A,0,x,C)},setTexture2D:function(c){return c===void 0&&(c=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(c),this.currentUnit},bindTexture:function(c,d){d===void 0&&(d=0);var g=this.gl;return g.activeTexture(g.TEXTURE0+d),g.bindTexture(g.TEXTURE_2D,c),this},bindRenderTarget:function(c,d){return this.bindTexture(c.texture,d)},setTime:function(c){return this.set1f(c,this.game.loop.getDuration()),this},set1f:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set1f(c,d),this},set2f:function(c,d,g,m){return m===void 0&&(m=this.currentShader),m.set2f(c,d,g),this},set3f:function(c,d,g,m,y){return y===void 0&&(y=this.currentShader),y.set3f(c,d,g,m),this},set4f:function(c,d,g,m,y,w){return w===void 0&&(w=this.currentShader),w.set4f(c,d,g,m,y),this},set1fv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set1fv(c,d),this},set2fv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set2fv(c,d),this},set3fv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set3fv(c,d),this},set4fv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set4fv(c,d),this},set1iv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set1iv(c,d),this},set2iv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set2iv(c,d),this},set3iv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set3iv(c,d),this},set4iv:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set4iv(c,d),this},set1i:function(c,d,g){return g===void 0&&(g=this.currentShader),g.set1i(c,d),this},set2i:function(c,d,g,m){return m===void 0&&(m=this.currentShader),m.set2i(c,d,g),this},set3i:function(c,d,g,m,y){return y===void 0&&(y=this.currentShader),y.set3i(c,d,g,m),this},set4i:function(c,d,g,m,y,w){return w===void 0&&(w=this.currentShader),w.set4i(c,d,g,m,y),this},setMatrix2fv:function(c,d,g,m){return m===void 0&&(m=this.currentShader),m.setMatrix2fv(c,d,g),this},setMatrix3fv:function(c,d,g,m){return m===void 0&&(m=this.currentShader),m.setMatrix3fv(c,d,g),this},setMatrix4fv:function(c,d,g,m){return m===void 0&&(m=this.currentShader),m.setMatrix4fv(c,d,g),this},destroy:function(){var c;this.emit(l.DESTROY,this);var d=this.shaders;for(c=0;c<d.length;c++)d[c].destroy();var g=this.renderTargets;for(c=0;c<g.length;c++)g[c].destroy();this.gl.deleteBuffer(this.vertexBuffer);var m=this.renderer;return m.off(r.RESIZE,this.resize,this),m.off(r.PRE_RENDER,this.onPreRender,this),m.off(r.RENDER,this.onRender,this),m.off(r.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});v.exports=h},58410:(v,p,t)=>{var f=t(63083),i=t(26088),n=t(69186),l=t(11318),e=t(26729),a=t(37710),r=t(24496),u=t(58655),s=t(54259),o=t(45733),h=t(37107),c=t(50666),d=t(48958),g=t(61632),m=t(64564),y=t(75913),w=new n({Extends:e,initialize:function(x){e.call(this);var T=x.config,E={alpha:T.transparent,desynchronized:T.desynchronized,depth:!1,antialias:T.antialiasGL,premultipliedAlpha:T.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:T.failIfMajorPerformanceCaveat,powerPreference:T.powerPreference,preserveDrawingBuffer:T.preserveDrawingBuffer};this.config={clearBeforeRender:T.clearBeforeRender,antialias:T.antialias,backgroundColor:T.backgroundColor,contextCreation:E,roundPixels:T.roundPixels,maxTextures:T.maxTextures,maxTextureSize:T.maxTextureSize,batchSize:T.batchSize,maxLights:T.maxLights,mipmapFilter:T.mipmapFilter},this.game=x,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=x.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=o,this.contextRestoredHandler=o,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(x){var T,E=this.game,S=this.canvas,C=x.backgroundColor;if(!(T=E.config.context?E.config.context:S.getContext("webgl",x.contextCreation)||S.getContext("experimental-webgl",x.contextCreation))||T.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=T;var A=this;this.contextLostHandler=function(B){A.contextLost=!0,A.game.events.emit(r.CONTEXT_LOST,A),B.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(r.CONTEXT_RESTORED,A)},S.addEventListener("webglcontextlost",this.contextLostHandler,!1),S.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),E.context=T;for(var M=0;M<=27;M++)this.blendModes.push({func:[T.ONE,T.ONE_MINUS_SRC_ALPHA],equation:T.FUNC_ADD});this.blendModes[1].func=[T.ONE,T.DST_ALPHA],this.blendModes[2].func=[T.DST_COLOR,T.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[T.ONE,T.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[T.ZERO,T.ONE_MINUS_SRC_ALPHA],equation:T.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=T.BYTE,this.glFormats[1]=T.SHORT,this.glFormats[2]=T.UNSIGNED_BYTE,this.glFormats[3]=T.UNSIGNED_SHORT,this.glFormats[4]=T.FLOAT,this.glFuncMap={mat2:{func:T.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:T.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:T.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:T.uniform1f,length:1},"1fv":{func:T.uniform1fv,length:1},"1i":{func:T.uniform1i,length:1},"1iv":{func:T.uniform1iv,length:1},"2f":{func:T.uniform2f,length:2},"2fv":{func:T.uniform2fv,length:1},"2i":{func:T.uniform2i,length:2},"2iv":{func:T.uniform2iv,length:1},"3f":{func:T.uniform3f,length:3},"3fv":{func:T.uniform3fv,length:1},"3i":{func:T.uniform3i,length:3},"3iv":{func:T.uniform3iv,length:1},"4f":{func:T.uniform4f,length:4},"4fv":{func:T.uniform4fv,length:1},"4i":{func:T.uniform4i,length:4},"4iv":{func:T.uniform4iv,length:1}};var b=T.getSupportedExtensions();x.maxTextures&&x.maxTextures!==-1||(x.maxTextures=T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS)),x.maxTextureSize||(x.maxTextureSize=T.getParameter(T.MAX_TEXTURE_SIZE));var _="WEBGL_compressed_texture_",P="WEBKIT_"+_;this.compression.ETC1=T.getExtension(_+"etc1")||T.getExtension(P+"etc1"),this.compression.PVRTC=T.getExtension(_+"pvrtc")||T.getExtension(P+"pvrtc"),this.compression.S3TC=T.getExtension(_+"s3tc")||T.getExtension(P+"s3tc"),this.supportedExtensions=b;var L="ANGLE_instanced_arrays";this.instancedArraysExtension=b.indexOf(L)>-1?T.getExtension(L):null;var F="OES_vertex_array_object";this.vaoExtension=b.indexOf(F)>-1?T.getExtension(F):null,T.disable(T.DEPTH_TEST),T.disable(T.CULL_FACE),T.enable(T.BLEND),T.clearColor(C.redGL,C.greenGL,C.blueGL,C.alphaGL),this.mipmapFilter=T[x.mipmapFilter],this.maxTextures=m.checkShaderMax(T,x.maxTextures),this.textureIndexes=[];var D=this.tempTextures;if(Array.isArray(D))for(var k=0;M<this.maxTextures;k++)T.deleteTexture(D[k]);else D=new Array(this.maxTextures);for(var R=0;R<this.maxTextures;R++){var O=T.createTexture();T.activeTexture(T.TEXTURE0+R),T.bindTexture(T.TEXTURE_2D,O),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),D[R]=O,this.textureIndexes.push(R)}return this.tempTextures=D,this.currentActiveTexture=1,this.startActiveTexture++,T.activeTexture(T.TEXTURE1),this.pipelines=new h(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=new s().identity(),E.textures.once(g.READY,this.boot,this),this},boot:function(){var x=this.game,T=this.pipelines,E=x.scale.baseSize;this.width=E.width,this.height=E.height,this.isBooted=!0,this.renderTarget=new c(this,this.width,this.height,1,0,!0,!0),T.boot(x.config.pipeline),this.blankTexture=x.textures.getFrame("__DEFAULT"),this.whiteTexture=x.textures.getFrame("__WHITE");var S=this.gl;S.bindFramebuffer(S.FRAMEBUFFER,null),S.enable(S.SCISSOR_TEST),x.scale.on(d.RESIZE,this.onResize,this),this.resize(E.width,E.height)},onResize:function(x,T){T.width===this.width&&T.height===this.height||this.resize(T.width,T.height)},beginCapture:function(x,T){x===void 0&&(x=this.width),T===void 0&&(T=this.height),this.renderTarget.bind(!0,x,T),this.setProjectionMatrix(x,T),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(x,T){var E=this.gl;return this.width=x,this.height=T,this.setProjectionMatrix(x,T),E.viewport(0,0,x,T),this.drawingBufferHeight=E.drawingBufferHeight,E.scissor(0,E.drawingBufferHeight-T,x,T),this.defaultScissor[2]=x,this.defaultScissor[3]=T,this.emit(a.RESIZE,x,T),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(x,T){return x===this.projectionWidth&&T===this.projectionHeight||(this.projectionWidth=x,this.projectionHeight=T,this.projectionMatrix.ortho(0,x,T,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(x){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(x)},getExtension:function(x){return this.hasExtension(x)?(x in this.extensions||(this.extensions[x]=this.gl.getExtension(x)),this.extensions[x]):null},flush:function(){this.pipelines.flush()},pushScissor:function(x,T,E,S,C){C===void 0&&(C=this.drawingBufferHeight);var A=[x,T,E,S];return this.scissorStack.push(A),this.setScissor(x,T,E,S,C),this.currentScissor=A,A},setScissor:function(x,T,E,S,C){C===void 0&&(C=this.drawingBufferHeight);var A=this.gl,M=this.currentScissor,b=E>0&&S>0;if(M&&b){var _=M[0],P=M[1],L=M[2],F=M[3];b=_!==x||P!==T||L!==E||F!==S}b&&(this.flush(),A.scissor(x,C-T-S,E,S))},resetScissor:function(){var x=this.gl;x.enable(x.SCISSOR_TEST);var T=this.currentScissor;if(T){var E=T[0],S=T[1],C=T[2],A=T[3];C>0&&A>0&&x.scissor(E,this.drawingBufferHeight-S-A,C,A)}},popScissor:function(){var x=this.scissorStack;x.pop();var T=x[x.length-1];T&&this.setScissor(T[0],T[1],T[2],T[3]),this.currentScissor=T},hasActiveStencilMask:function(){var x=this.currentMask.mask,T=this.currentCameraMask.mask;return x&&x.isStencil||T&&T.isStencil},resetViewport:function(){var x=this.gl;x.viewport(0,0,this.width,this.height),this.drawingBufferHeight=x.drawingBufferHeight},setBlendMode:function(x,T){T===void 0&&(T=!1);var E=this.gl,S=this.blendModes[x];return!!(T||x!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==x)&&(this.flush(),E.enable(E.BLEND),E.blendEquation(S.equation),S.func.length>2?E.blendFuncSeparate(S.func[0],S.func[1],S.func[2],S.func[3]):E.blendFunc(S.func[0],S.func[1]),this.currentBlendMode=x,!0)},addBlendMode:function(x,T){return this.blendModes.push({func:x,equation:T})-1},updateBlendMode:function(x,T,E){return this.blendModes[x]&&(this.blendModes[x].func=T,E&&(this.blendModes[x].equation=E)),this},removeBlendMode:function(x){return x>17&&this.blendModes[x]&&this.blendModes.splice(x,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(x){if(this.pipelines.forceZero())return this.setTextureZero(x.glTexture,!0),0;var T=this.gl,E=this.currentActiveTexture;return x.glIndexCounter<this.startActiveTexture&&(x.glIndexCounter=this.startActiveTexture,E<this.maxTextures?(x.glIndex=E,T.activeTexture(T.TEXTURE0+E),T.bindTexture(T.TEXTURE_2D,x.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,x.glIndexCounter=this.startActiveTexture,x.glIndex=1,T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,x.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,x.glIndex},isNewNormalMap:function(x,T){return this.textureZero!==x||this.normalTexture!==T},setTextureZero:function(x,T){if(this.textureZero!==x){T&&this.flush();var E=this.gl;E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,x),this.textureZero=x}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(x){if(this.normalTexture!==x){var T=this.gl;T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,x),this.normalTexture=x,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var x=this.gl,T=this.tempTextures,E=0;E<T.length;E++)x.activeTexture(x.TEXTURE0+E),x.bindTexture(x.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(x){if(x===void 0&&(x=!1),!this.isTextureClean){this.flush();var T=this.gl,E=this.tempTextures;if(x){for(var S=0;S<E.length;S++)T.activeTexture(T.TEXTURE0+S),T.bindTexture(T.TEXTURE_2D,E[S]);T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,E[1]),this.isTextureClean=!0}else T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,E[0]),T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,E[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(x){if(this.pipelines.forceZero())return this.setTextureZero(x,!0),0;var T=this.gl,E=this.currentActiveTexture;return x.glIndexCounter<this.startActiveTexture&&(x.glIndexCounter=this.startActiveTexture,E<this.maxTextures?(x.glIndex=E,T.activeTexture(T.TEXTURE0+E),T.bindTexture(T.TEXTURE_2D,x),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,x.glIndexCounter=this.startActiveTexture,x.glIndex=1,T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,x),this.currentActiveTexture=2)),this.isTextureClean=!1,x.glIndex},pushFramebuffer:function(x,T,E,S){return x===this.currentFramebuffer?this:(this.fboStack.push(x),this.setFramebuffer(x,T,E,S))},setFramebuffer:function(x,T,E,S){if(T===void 0&&(T=!1),E===void 0&&(E=!1),S===void 0&&(S=!0),x===this.currentFramebuffer)return this;var C=this.gl,A=this.width,M=this.height;return x&&x.renderTexture&&S?(A=x.renderTexture.width,M=x.renderTexture.height):this.flush(),C.bindFramebuffer(C.FRAMEBUFFER,x),S&&C.viewport(0,0,A,M),T&&(x?(this.drawingBufferHeight=M,this.pushScissor(0,0,A,M)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=x,E&&this.resetTextures(),this},popFramebuffer:function(x,T,E){x===void 0&&(x=!1),T===void 0&&(T=!1),E===void 0&&(E=!0);var S=this.fboStack;S.pop();var C=S[S.length-1];return C||(C=null),this.setFramebuffer(C,x,T,E),C},setProgram:function(x){return x!==this.currentProgram&&(this.flush(),this.gl.useProgram(x),this.currentProgram=x,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(x,T,E,S){var C=this.gl,A=C.NEAREST,M=C.NEAREST,b=C.CLAMP_TO_EDGE;T=x?x.width:T,E=x?x.height:E;var _=u(T,E);return _&&(b=C.REPEAT),S===l.ScaleModes.LINEAR&&this.config.antialias&&(A=_?this.mipmapFilter:C.LINEAR,M=C.LINEAR),x||typeof T!="number"||typeof E!="number"?this.createTexture2D(0,A,M,b,b,C.RGBA,x):this.createTexture2D(0,A,M,b,b,C.RGBA,null,T,E)},createTexture2D:function(x,T,E,S,C,A,M,b,_,P,L,F){P=P==null||P,L===void 0&&(L=!1),F===void 0&&(F=!1);var D=this.gl,k=D.createTexture();D.activeTexture(D.TEXTURE0);var R=D.getParameter(D.TEXTURE_BINDING_2D);return D.bindTexture(D.TEXTURE_2D,k),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,T),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,E),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,C),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,S),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P),D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,F),M==null?D.texImage2D(D.TEXTURE_2D,x,A,b,_,0,A,D.UNSIGNED_BYTE,null):(L||(b=M.width,_=M.height),D.texImage2D(D.TEXTURE_2D,x,A,A,D.UNSIGNED_BYTE,M)),u(b,_)&&D.generateMipmap(D.TEXTURE_2D),R&&D.bindTexture(D.TEXTURE_2D,R),k.isAlphaPremultiplied=P,k.isRenderTexture=!1,k.width=b,k.height=_,k.glIndex=0,k.glIndexCounter=-1,k},createFramebuffer:function(x,T,E,S){var C,A=this.gl,M=A.createFramebuffer();if(this.setFramebuffer(M),S){var b=A.createRenderbuffer();A.bindRenderbuffer(A.RENDERBUFFER,b),A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,x,T),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,b)}if(E.isRenderTexture=!0,E.isAlphaPremultiplied=!1,A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,E,0),(C=A.checkFramebufferStatus(A.FRAMEBUFFER))!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[C]);return M.renderTexture=E,this.setFramebuffer(null),this.resetTextures(),M},createProgram:function(x,T){var E=this.gl,S=E.createProgram(),C=E.createShader(E.VERTEX_SHADER),A=E.createShader(E.FRAGMENT_SHADER);if(E.shaderSource(C,x),E.shaderSource(A,T),E.compileShader(C),E.compileShader(A),!E.getShaderParameter(C,E.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+E.getShaderInfoLog(C));if(!E.getShaderParameter(A,E.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+E.getShaderInfoLog(A));if(E.attachShader(S,C),E.attachShader(S,A),E.linkProgram(S),!E.getProgramParameter(S,E.LINK_STATUS))throw new Error(`Link Program failed:
`+E.getProgramInfoLog(S));return E.useProgram(S),S},createVertexBuffer:function(x,T){var E=this.gl,S=E.createBuffer();return E.bindBuffer(E.ARRAY_BUFFER,S),E.bufferData(E.ARRAY_BUFFER,x,T),E.bindBuffer(E.ARRAY_BUFFER,null),S},createIndexBuffer:function(x,T){var E=this.gl,S=E.createBuffer();return E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,S),E.bufferData(E.ELEMENT_ARRAY_BUFFER,x,T),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,null),S},deleteTexture:function(x,T){return T&&this.resetTextures(!0),x&&this.gl.deleteTexture(x),this},deleteFramebuffer:function(x){return x&&(this.gl.deleteFramebuffer(x),f(this.fboStack,x),this.currentFramebuffer===x&&(this.currentFramebuffer=null)),this},deleteProgram:function(x){return x&&this.gl.deleteProgram(x),this},deleteBuffer:function(x){return this.gl.deleteBuffer(x),this},preRenderCamera:function(x){var T=x.x,E=x.y,S=x.width,C=x.height,A=x.backgroundColor;x.emit(i.PRE_RENDER,x),this.pipelines.preBatchCamera(x),this.pushScissor(T,E,S,C),x.mask&&(this.currentCameraMask.mask=x.mask,this.currentCameraMask.camera=x._maskCamera,x.mask.preRenderWebGL(this,x,x._maskCamera)),A.alphaGL>0&&this.pipelines.setMulti().drawFillRect(T,E,S,C,m.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)},getCurrentStencilMask:function(){var x=null,T=this.maskStack,E=this.currentCameraMask;return T.length>0?x=T[T.length-1]:E.mask&&E.mask.isStencil&&(x=E),x},postRenderCamera:function(x){var T=x.flashEffect,E=x.fadeEffect;if(T.isRunning||E.isRunning||E.isComplete){var S=this.pipelines.setMulti();T.postRenderWebGL(S,m.getTintFromFloats),E.postRenderWebGL(S,m.getTintFromFloats)}x.dirty=!1,this.popScissor(),x.mask&&(this.currentCameraMask.mask=null,x.mask.postRenderWebGL(this,x._maskCamera)),this.pipelines.postBatchCamera(x),x.emit(i.POST_RENDER,x)},preRender:function(){if(!this.contextLost){var x=this.gl;if(x.bindFramebuffer(x.FRAMEBUFFER,null),this.config.clearBeforeRender){var T=this.config.backgroundColor;x.clearColor(T.redGL,T.greenGL,T.blueGL,T.alphaGL),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT|x.STENCIL_BUFFER_BIT)}x.enable(x.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&x.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(a.PRE_RENDER)}},render:function(x,T,E){if(!this.contextLost){var S=T.length;if(this.emit(a.RENDER,x,E),this.preRenderCamera(E),S===0)return this.setBlendMode(l.BlendModes.NORMAL),void this.postRenderCamera(E);this.currentType="";for(var C=this.currentMask,A=0;A<S;A++){this.finalType=A===S-1;var M=T[A],b=M.mask;(C=this.currentMask).mask&&C.mask!==b&&C.mask.postRenderWebGL(this,C.camera),b&&C.mask!==b&&b.preRenderWebGL(this,M,E),M.blendMode!==this.currentBlendMode&&this.setBlendMode(M.blendMode);var _=M.type;_!==this.currentType&&(this.newType=!0,this.currentType=_),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=T[A+1].type===this.currentType,M.renderWebGL(this,M,E),this.newType=!1}(C=this.currentMask).mask&&C.mask.postRenderWebGL(this,C.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(E)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(a.POST_RENDER);var x=this.snapshotState;x.callback&&(y(this.canvas,x),x.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(x,T,E){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,x,T,E)},snapshotArea:function(x,T,E,S,C,A,M){var b=this.snapshotState;return b.callback=C,b.type=A,b.encoder=M,b.getPixel=!1,b.x=x,b.y=T,b.width=Math.min(E,this.gl.drawingBufferWidth),b.height=Math.min(S,this.gl.drawingBufferHeight),this},snapshotPixel:function(x,T,E){return this.snapshotArea(x,T,1,1,E),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(x,T,E,S,C,A,M,b,_,P,L){C===void 0&&(C=!1),A===void 0&&(A=0),M===void 0&&(M=0),b===void 0&&(b=T),_===void 0&&(_=E);var F=this.currentFramebuffer;this.snapshotArea(A,M,b,_,S,P,L);var D=this.snapshotState;return D.getPixel=C,D.isFramebuffer=!0,D.bufferWidth=T,D.bufferHeight=E,this.setFramebuffer(x),y(this.canvas,D),this.setFramebuffer(F),D.callback=null,D.isFramebuffer=!1,this},canvasToTexture:function(x,T,E,S){return E===void 0&&(E=!1),S===void 0&&(S=!1),T?this.updateCanvasTexture(x,T,S):this.createCanvasTexture(x,E,S)},createCanvasTexture:function(x,T,E){T===void 0&&(T=!1),E===void 0&&(E=!1);var S=this.gl,C=S.NEAREST,A=S.NEAREST,M=x.width,b=x.height,_=S.CLAMP_TO_EDGE,P=u(M,b);return!T&&P&&(_=S.REPEAT),this.config.antialias&&(C=P?this.mipmapFilter:S.LINEAR,A=S.LINEAR),this.createTexture2D(0,C,A,_,_,S.RGBA,x,M,b,!0,!1,E)},updateCanvasTexture:function(x,T,E){E===void 0&&(E=!1);var S=this.gl,C=x.width,A=x.height;if(C>0&&A>0){S.activeTexture(S.TEXTURE0);var M=S.getParameter(S.TEXTURE_BINDING_2D);S.bindTexture(S.TEXTURE_2D,T),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,E),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,x),T.width=C,T.height=A,M&&S.bindTexture(S.TEXTURE_2D,M)}return T},createVideoTexture:function(x,T,E){T===void 0&&(T=!1),E===void 0&&(E=!1);var S=this.gl,C=S.NEAREST,A=S.NEAREST,M=x.videoWidth,b=x.videoHeight,_=S.CLAMP_TO_EDGE,P=u(M,b);return!T&&P&&(_=S.REPEAT),this.config.antialias&&(C=P?this.mipmapFilter:S.LINEAR,A=S.LINEAR),this.createTexture2D(0,C,A,_,_,S.RGBA,x,M,b,!0,!0,E)},updateVideoTexture:function(x,T,E){E===void 0&&(E=!1);var S=this.gl,C=x.videoWidth,A=x.videoHeight;if(C>0&&A>0){S.activeTexture(S.TEXTURE0);var M=S.getParameter(S.TEXTURE_BINDING_2D);S.bindTexture(S.TEXTURE_2D,T),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,E),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,x),T.width=C,T.height=A,M&&S.bindTexture(S.TEXTURE_2D,M)}return T},setTextureFilter:function(x,T){var E=this.gl,S=[E.LINEAR,E.NEAREST][T];E.activeTexture(E.TEXTURE0);var C=E.getParameter(E.TEXTURE_BINDING_2D);return E.bindTexture(E.TEXTURE_2D,x),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,S),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,S),C&&E.bindTexture(E.TEXTURE_2D,C),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var x=this.gl,T=this.tempTextures,E=0;E<T.length;E++)x.deleteTexture(T[E]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});v.exports=w},86384:(v,p,t)=>{var f=t(69186),i=t(25738),n=t(51303),l=new f({initialize:function(e,a,r,u,s){this.pipeline=e,this.name=a,this.renderer=e.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(r,u),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(s),this.createUniforms()},createAttributes:function(e){var a=0,r=0,u=[];this.vertexComponentCount=0;for(var s=0;s<e.length;s++){var o=e[s],h=o.name,c=i(o,"size",1),d=i(o,"type",n.FLOAT),g=d.enum,m=d.size,y=!!o.normalized;u.push({name:h,size:c,type:g,normalized:y,offset:r,enabled:!1,location:-1}),m===4?a+=c:a++,r+=c*m}this.vertexSize=r,this.vertexComponentCount=a,this.attributes=u},bind:function(e,a){return e===void 0&&(e=!1),a===void 0&&(a=!1),a&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var a=this.gl,r=this.vertexSize,u=this.attributes,s=this.program,o=0;o<u.length;o++){var h=u[o],c=h.size,d=h.type,g=h.offset,m=h.enabled,y=h.location,w=!!h.normalized;if(e){var x=a.getAttribLocation(s,h.name);x>=0?(a.enableVertexAttribArray(x),a.vertexAttribPointer(x,c,d,w,r,g),h.enabled=!0,h.location=x):x!==-1&&a.disableVertexAttribArray(x)}else m?a.vertexAttribPointer(y,c,d,w,r,g):!m&&y>-1&&(a.disableVertexAttribArray(y),h.location=-1)}return this},createUniforms:function(){var e,a,r,u=this.gl,s=this.program,o=this.uniforms,h=u.getProgramParameter(s,u.ACTIVE_UNIFORMS);for(e=0;e<h;e++){var c=u.getActiveUniform(s,e);if(c){a=c.name,(r=u.getUniformLocation(s,a))!==null&&(o[a]={name:a,location:r,value1:null,value2:null,value3:null,value4:null});var d=a.indexOf("[");d>0&&(a=a.substr(0,d),o.hasOwnProperty(a)||(r=u.getUniformLocation(s,a))!==null&&(o[a]={name:a,location:r,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var a=this.uniforms[e];return a&&(a.value1=null,a.value2=null,a.value3=null,a.value4=null),this},setUniform1:function(e,a,r,u){var s=this.uniforms[a];return s?((u||s.value1!==r)&&(s.value1=r,this.renderer.setProgram(this.program),e.call(this.gl,s.location,r),this.pipeline.currentShader=this),this):this},setUniform2:function(e,a,r,u,s){var o=this.uniforms[a];return o?((s||o.value1!==r||o.value2!==u)&&(o.value1=r,o.value2=u,this.renderer.setProgram(this.program),e.call(this.gl,o.location,r,u),this.pipeline.currentShader=this),this):this},setUniform3:function(e,a,r,u,s,o){var h=this.uniforms[a];return h?((o||h.value1!==r||h.value2!==u||h.value3!==s)&&(h.value1=r,h.value2=u,h.value3=s,this.renderer.setProgram(this.program),e.call(this.gl,h.location,r,u,s),this.pipeline.currentShader=this),this):this},setUniform4:function(e,a,r,u,s,o,h){var c=this.uniforms[a];return c?((h||c.value1!==r||c.value2!==u||c.value3!==s||c.value4!==o)&&(c.value1=r,c.value2=u,c.value3=s,c.value4=o,this.renderer.setProgram(this.program),e.call(this.gl,c.location,r,u,s,o),this.pipeline.currentShader=this),this):this},set1f:function(e,a){return this.setUniform1(this.gl.uniform1f,e,a)},set2f:function(e,a,r){return this.setUniform2(this.gl.uniform2f,e,a,r)},set3f:function(e,a,r,u){return this.setUniform3(this.gl.uniform3f,e,a,r,u)},set4f:function(e,a,r,u,s){return this.setUniform4(this.gl.uniform4f,e,a,r,u,s)},set1fv:function(e,a){return this.setUniform1(this.gl.uniform1fv,e,a,!0)},set2fv:function(e,a){return this.setUniform1(this.gl.uniform2fv,e,a,!0)},set3fv:function(e,a){return this.setUniform1(this.gl.uniform3fv,e,a,!0)},set4fv:function(e,a){return this.setUniform1(this.gl.uniform4fv,e,a,!0)},set1iv:function(e,a){return this.setUniform1(this.gl.uniform1iv,e,a,!0)},set2iv:function(e,a){return this.setUniform1(this.gl.uniform2iv,e,a,!0)},set3iv:function(e,a){return this.setUniform1(this.gl.uniform3iv,e,a,!0)},set4iv:function(e,a){return this.setUniform1(this.gl.uniform4iv,e,a,!0)},set1i:function(e,a){return this.setUniform1(this.gl.uniform1i,e,a)},set2i:function(e,a,r){return this.setUniform2(this.gl.uniform2i,e,a,r)},set3i:function(e,a,r,u){return this.setUniform3(this.gl.uniform3i,e,a,r,u)},set4i:function(e,a,r,u,s){return this.setUniform4(this.gl.uniform4i,e,a,r,u,s)},setMatrix2fv:function(e,a,r){return this.setUniform2(this.gl.uniformMatrix2fv,e,a,r,!0)},setMatrix3fv:function(e,a,r){return this.setUniform2(this.gl.uniformMatrix3fv,e,a,r,!0)},setMatrix4fv:function(e,a,r){return this.setUniform2(this.gl.uniformMatrix4fv,e,a,r,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});v.exports=l},51303:v=>{v.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},94621:(v,p,t)=>{var f=t(51303),i=t(72646),n={PipelineManager:t(37107),Pipelines:t(86678),RenderTarget:t(50666),Utils:t(64564),WebGLPipeline:t(89262),WebGLRenderer:t(58410),WebGLShader:t(86384)};n=i(!1,n,f),v.exports=n},18923:(v,p,t)=>{var f=t(69186),i=t(25738),n=t(91160),l=t(29874),e=t(51303),a=t(89262),r=new f({Extends:a,initialize:function(u){u.fragShader=i(u,"fragShader",n),u.vertShader=i(u,"vertShader",l),u.batchSize=i(u,"batchSize",1),u.vertices=i(u,"vertices",[-1,1,-1,-7,7,1]),u.attributes=i(u,"attributes",[{name:"inPosition",size:2,type:e.FLOAT}]),a.call(this,u)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(u,s){a.prototype.resize.call(this,u,s),this.set2f("uResolution",u,s)},beginMask:function(u,s,o){var h=this.gl;if(u.bitmapMask&&h){var c=this.renderer;c.flush(),c.pushFramebuffer(u.mainFramebuffer),h.disable(h.STENCIL_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),c.currentCameraMask.mask!==u&&(c.currentMask.mask=u,c.currentMask.camera=o)}},endMask:function(u,s){var o=this.gl,h=this.renderer,c=u.bitmapMask;if(c&&o){h.flush(),h.pushFramebuffer(u.maskFramebuffer),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),h.setBlendMode(0,!0),c.renderWebGL(h,c,s),h.flush(),h.popFramebuffer(),h.popFramebuffer();var d=h.getCurrentStencilMask();d?(o.enable(o.STENCIL_TEST),d.mask.applyStencil(h,d.camera,!0)):h.currentMask.mask=null,h.pipelines.set(this),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,u.maskTexture),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,u.mainTexture),this.set1i("uInvertMaskAlpha",u.invertAlpha),o.drawArrays(this.topology,0,3),h.resetTextures()}}});v.exports=r},48623:(v,p,t)=>{var f=t(69186),i=t(64634),n=t(25738),l=t(79268),e=t(16575),a=t(9329),r=t(51303),u=t(89262),s=new f({Extends:u,initialize:function(o){o.fragShader=n(o,"fragShader",l),o.vertShader=n(o,"vertShader",e),o.attributes=n(o,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),u.call(this,o),this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(o,h,c,d,g,m){this.renderer.pipelines.set(this);var y=this.calcMatrix;m&&m.multiply(g,y);var w=o+c,x=h+d,T=y.getX(o,h),E=y.getY(o,h),S=y.getX(o,x),C=y.getY(o,x),A=y.getX(w,x),M=y.getY(w,x),b=y.getX(w,h),_=y.getY(w,h),P=this.fillTint;this.batchQuad(T,E,S,C,A,M,b,_,P.TL,P.TR,P.BL,P.BR)},batchFillTriangle:function(o,h,c,d,g,m,y,w){this.renderer.pipelines.set(this);var x=this.calcMatrix;w&&w.multiply(y,x);var T=x.getX(o,h),E=x.getY(o,h),S=x.getX(c,d),C=x.getY(c,d),A=x.getX(g,m),M=x.getY(g,m),b=this.fillTint;this.batchTri(T,E,S,C,A,M,b.TL,b.TR,b.BL)},batchStrokeTriangle:function(o,h,c,d,g,m,y,w,x){var T=this.tempTriangle;T[0].x=o,T[0].y=h,T[0].width=y,T[1].x=c,T[1].y=d,T[1].width=y,T[2].x=g,T[2].y=m,T[2].width=y,T[3].x=o,T[3].y=h,T[3].width=y,this.batchStrokePath(T,y,!1,w,x)},batchFillPath:function(o,h,c){this.renderer.pipelines.set(this);var d=this.calcMatrix;c&&c.multiply(h,d);for(var g,m,y=o.length,w=this.polygonCache,x=this.fillTint.TL,T=this.fillTint.TR,E=this.fillTint.BL,S=0;S<y;++S)m=o[S],w.push(m.x,m.y);y=(g=i(w)).length;for(var C=0;C<y;C+=3){var A=2*g[C+0],M=2*g[C+1],b=2*g[C+2],_=w[A+0],P=w[A+1],L=w[M+0],F=w[M+1],D=w[b+0],k=w[b+1],R=d.getX(_,P),O=d.getY(_,P),B=d.getX(L,F),U=d.getY(L,F),I=d.getX(D,k),Y=d.getY(D,k);this.batchTri(R,O,B,U,I,Y,x,T,E)}w.length=0},batchStrokePath:function(o,h,c,d,g){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var m=o.length-1,y=0;y<m;y++){var w=o[y],x=o[y+1];this.batchLine(w.x,w.y,x.x,x.y,w.width/2,x.width/2,h,y,!c&&y===m-1,d,g)}},batchLine:function(o,h,c,d,g,m,y,w,x,T,E){this.renderer.pipelines.set(this);var S=this.calcMatrix;E&&E.multiply(T,S);var C=c-o,A=d-h,M=Math.sqrt(C*C+A*A),b=g*(d-h)/M,_=g*(o-c)/M,P=m*(d-h)/M,L=m*(o-c)/M,F=c-P,D=d-L,k=o-b,R=h-_,O=c+P,B=d+L,U=o+b,I=h+_,Y=S.getX(F,D),N=S.getY(F,D),X=S.getX(k,R),z=S.getY(k,R),V=S.getX(O,B),G=S.getY(O,B),W=S.getX(U,I),H=S.getY(U,I),j=this.strokeTint,q=j.TL,K=j.TR,it=j.BL,et=j.BR;if(this.batchQuad(W,H,X,z,Y,N,V,G,q,K,it,et),!(y<=2)){var J=this.prevQuad,Z=this.firstQuad;w>0&&J[4]?this.batchQuad(W,H,X,z,J[0],J[1],J[2],J[3],q,K,it,et):(Z[0]=W,Z[1]=H,Z[2]=X,Z[3]=z,Z[4]=1),x&&Z[4]?this.batchQuad(Y,N,V,G,Z[0],Z[1],Z[2],Z[3],q,K,it,et):(J[0]=Y,J[1]=N,J[2]=V,J[3]=G,J[4]=1)}},batchVert:function(o,h,c){var d=this.vertexViewF32,g=this.vertexViewU32,m=this.vertexCount*this.currentShader.vertexComponentCount-1;d[++m]=o,d[++m]=h,g[++m]=c,this.vertexCount++},batchQuad:function(o,h,c,d,g,m,y,w,x,T,E,S){var C=!1;return this.shouldFlush(6)&&(this.flush(),C=!0),this.batchVert(o,h,x),this.batchVert(c,d,E),this.batchVert(g,m,S),this.batchVert(o,h,x),this.batchVert(g,m,S),this.batchVert(y,w,T),C},batchTri:function(o,h,c,d,g,m,y,w,x){var T=!1;return this.shouldFlush(3)&&(this.flush(),T=!0),this.batchVert(o,h,y),this.batchVert(c,d,w),this.batchVert(g,m,x),T},destroy:function(){return u.prototype.destroy.call(this),this.polygonCache=null,this}});v.exports=s},63174:(v,p,t)=>{var f=t(69186),i=t(25738),n=t(80376),l=t(14869),e=t(17321),a=t(89262),r=10,u=new e,s=new f({Extends:l,initialize:function(o){r=o.game.renderer.config.maxLights;for(var h=i(o,"fragShader",n),c=[],d=1;d<=r;d++)c.push({name:"lights"+d,fragShader:h.replace("%LIGHT_COUNT%",d.toString())});o.shaders=c,l.call(this,o),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){a.prototype.boot.call(this);var o=this.gl,h=o.createTexture();o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,h),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:h};for(var c=0;c<this.shaders.length;c++)this["lightShader"+(c+1)]=this.shaders[c]},onRender:function(o,h){var c=o.sys.lights;if(this.lightsActive=!1,c&&c.active){var d=c.getLights(h),g=d.length;if(g!==0){var m;this.lightsActive=!0,this.setShader(this["lightShader"+g],!0);var y=this.renderer.height,w=h.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",h.x,h.y,h.rotation,h.zoom),this.set3f("uAmbientLightColor",c.ambientColor.r,c.ambientColor.g,c.ambientColor.b),m=0;m<g;m++){var x=d[m].light,T=x.color,E="uLights["+m+"].";w.transformPoint(x.x,x.y,u),this.set2f(E+"position",u.x-h.scrollX*x.scrollFactorX*h.zoom,y-(u.y-h.scrollY*x.scrollFactorY*h.zoom)),this.set3f(E+"color",T.r,T.g,T.b),this.set1f(E+"intensity",x.intensity),this.set1f(E+"radius",x.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(o){if(o!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var h=this.inverseRotationMatrix;if(o){var c=-o,d=Math.cos(c),g=Math.sin(c);h[1]=g,h[3]=-g,h[0]=h[4]=d}else h[0]=h[4]=1,h[1]=h[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,h),this.currentNormalMapRotation=o}},setTexture2D:function(o,h){var c=this.renderer;o===void 0&&(o=c.tempTextures[0]);var d=this.getNormalMap(h);c.isNewNormalMap(o,d)&&(this.flush(),c.setTextureZero(o),c.setNormalMap(d));var g=h?h.rotation:0;return this.setNormalMapRotation(g),this.currentUnit=0,0},setGameObject:function(o,h){h===void 0&&(h=o.frame);var c=this.renderer,d=h.glTexture,g=this.getNormalMap(o);return c.isNewNormalMap()&&(this.flush(),c.setTextureZero(d),c.setNormalMap(g)),this.setNormalMapRotation(o.rotation),this.currentUnit=0,0},getNormalMap:function(o){var h;return o?o.displayTexture?h=o.displayTexture.dataSource[o.displayFrame.sourceIndex]:o.texture?h=o.texture.dataSource[o.frame.sourceIndex]:o.tileset&&(h=Array.isArray(o.tileset)?o.tileset[0].image.dataSource[0]:o.tileset.image.dataSource[0]):h=this.defaultNormalMap,h||(h=this.defaultNormalMap),h.glTexture},batchSprite:function(o,h,c){this.lightsActive&&l.prototype.batchSprite.call(this,o,h,c)},batchTexture:function(o,h,c,d,g,m,y,w,x,T,E,S,C,A,M,b,_,P,L,F,D,k,R,O,B,U,I,Y,N,X,z,V){this.lightsActive&&l.prototype.batchTexture.call(this,o,h,c,d,g,m,y,w,x,T,E,S,C,A,M,b,_,P,L,F,D,k,R,O,B,U,I,Y,N,X,z,V)},batchTextureFrame:function(o,h,c,d,g,m,y){this.lightsActive&&l.prototype.batchTextureFrame.call(this,o,h,c,d,g,m,y)}});s.LIGHT_COUNT=r,v.exports=s},14869:(v,p,t)=>{var f=t(69186),i=t(64634),n=t(25738),l=t(53121),e=t(31952),a=t(9329),r=t(64564),u=t(51303),s=t(89262),o=new f({Extends:s,initialize:function(h){var c=h.game.renderer,d=n(h,"fragShader",l);h.fragShader=r.parseFragmentShaderMaxTextures(d,c.maxTextures),h.vertShader=n(h,"vertShader",e),h.attributes=n(h,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),s.call(this,h),this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){s.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(h,c,d){this.manager.set(this,h);var g=this._tempMatrix1,m=this._tempMatrix2,y=this._tempMatrix3,w=h.frame,x=w.glTexture,T=w.u0,E=w.v0,S=w.u1,C=w.v1,A=w.x,M=w.y,b=w.cutWidth,_=w.cutHeight,P=w.customPivot,L=h.displayOriginX,F=h.displayOriginY,D=-L+A,k=-F+M;if(h.isCropped){var R=h._crop;R.flipX===h.flipX&&R.flipY===h.flipY||w.updateCropUVs(R,h.flipX,h.flipY),T=R.u0,E=R.v0,S=R.u1,C=R.v1,b=R.width,_=R.height,D=-L+(A=R.x),k=-F+(M=R.y)}var O=1,B=1;h.flipX&&(P||(D+=-w.realWidth+2*L),O=-1),(h.flipY||w.source.isGLTexture&&!x.flipY)&&(P||(k+=-w.realHeight+2*F),B=-1),m.applyITRS(h.x,h.y,h.rotation,h.scaleX*O,h.scaleY*B),g.copyFrom(c.matrix),d?(g.multiplyWithOffset(d,-c.scrollX*h.scrollFactorX,-c.scrollY*h.scrollFactorY),m.e=h.x,m.f=h.y):(m.e-=c.scrollX*h.scrollFactorX,m.f-=c.scrollY*h.scrollFactorY),g.multiply(m,y);var U=D+b,I=k+_,Y=c.roundPixels,N=y.getXRound(D,k,Y),X=y.getYRound(D,k,Y),z=y.getXRound(D,I,Y),V=y.getYRound(D,I,Y),G=y.getXRound(U,I,Y),W=y.getYRound(U,I,Y),H=y.getXRound(U,k,Y),j=y.getYRound(U,k,Y),q=r.getTintAppendFloatAlpha,K=c.alpha,it=q(h.tintTopLeft,K*h._alphaTL),et=q(h.tintTopRight,K*h._alphaTR),J=q(h.tintBottomLeft,K*h._alphaBL),Z=q(h.tintBottomRight,K*h._alphaBR);this.shouldFlush(6)&&this.flush();var $=this.setGameObject(h,w);this.manager.preBatch(h),this.batchQuad(h,N,X,z,V,G,W,H,j,T,E,S,C,it,et,J,Z,h.tintFill,x,$),this.manager.postBatch(h)},batchTexture:function(h,c,d,g,m,y,w,x,T,E,S,C,A,M,b,_,P,L,F,D,k,R,O,B,U,I,Y,N,X,z,V,G){this.manager.set(this,h);var W=this._tempMatrix1,H=this._tempMatrix2,j=this._tempMatrix3,q=L/d+Y,K=F/g+N,it=(L+D)/d+Y,et=(F+k)/g+N,J=w,Z=x,$=-_,tt=-P;if(h.isCropped){var Q=h._crop,nt=Q.width,ut=Q.height;J=nt,Z=ut,w=nt,x=ut;var ot=L=Q.x,lt=F=Q.y;C&&(ot=D-Q.x-nt),A&&(lt=k-Q.y-ut),q=ot/d+Y,K=lt/g+N,it=(ot+nt)/d+Y,et=(lt+ut)/g+N,$=-_+L,tt=-P+F}C&&(J*=-1,$+=w),(A^=!V&&c.isRenderTexture?1:0)&&(Z*=-1,tt+=x);var rt=$+J,ht=tt+Z;H.applyITRS(m,y,S,T,E),W.copyFrom(X.matrix),z?(W.multiplyWithOffset(z,-X.scrollX*M,-X.scrollY*b),H.e=m,H.f=y):(H.e-=X.scrollX*M,H.f-=X.scrollY*b),W.multiply(H,j);var st=X.roundPixels,dt=j.getXRound($,tt,st),ft=j.getYRound($,tt,st),pt=j.getXRound($,ht,st),vt=j.getYRound($,ht,st),gt=j.getXRound(rt,ht,st),mt=j.getYRound(rt,ht,st),wt=j.getXRound(rt,tt,st),Et=j.getYRound(rt,tt,st);G===void 0&&(G=this.renderer.setTexture2D(c)),h&&this.manager.preBatch(h),this.batchQuad(h,dt,ft,pt,vt,gt,mt,wt,Et,q,K,it,et,R,O,B,U,I,c,G),h&&this.manager.postBatch(h)},batchTextureFrame:function(h,c,d,g,m,y,w){this.manager.set(this);var x=this._tempMatrix1.copyFrom(y),T=this._tempMatrix2,E=c+h.width,S=d+h.height;w?x.multiply(w,T):T=x;var C=T.getX(c,d),A=T.getY(c,d),M=T.getX(c,S),b=T.getY(c,S),_=T.getX(E,S),P=T.getY(E,S),L=T.getX(E,d),F=T.getY(E,d),D=this.renderer.setTextureSource(h.source);g=r.getTintAppendFloatAlpha(g,m),this.batchQuad(null,C,A,M,b,_,P,L,F,h.u0,h.v0,h.u1,h.v1,g,g,g,g,0,h.glTexture,D)},batchFillRect:function(h,c,d,g,m,y){this.renderer.pipelines.set(this);var w=this.calcMatrix;y&&y.multiply(m,w);var x=h+d,T=c+g,E=w.getX(h,c),S=w.getY(h,c),C=w.getX(h,T),A=w.getY(h,T),M=w.getX(x,T),b=w.getY(x,T),_=w.getX(x,c),P=w.getY(x,c),L=this.fillTint;this.batchQuad(null,E,S,C,A,M,b,_,P,0,0,1,1,L.TL,L.TR,L.BL,L.BR,2)},batchFillTriangle:function(h,c,d,g,m,y,w,x){this.renderer.pipelines.set(this);var T=this.calcMatrix;x&&x.multiply(w,T);var E=T.getX(h,c),S=T.getY(h,c),C=T.getX(d,g),A=T.getY(d,g),M=T.getX(m,y),b=T.getY(m,y),_=this.fillTint;this.batchTri(null,E,S,C,A,M,b,0,0,1,1,_.TL,_.TR,_.BL,2)},batchStrokeTriangle:function(h,c,d,g,m,y,w,x,T){var E=this.tempTriangle;E[0].x=h,E[0].y=c,E[0].width=w,E[1].x=d,E[1].y=g,E[1].width=w,E[2].x=m,E[2].y=y,E[2].width=w,E[3].x=h,E[3].y=c,E[3].width=w,this.batchStrokePath(E,w,!1,x,T)},batchFillPath:function(h,c,d){this.renderer.pipelines.set(this);var g=this.calcMatrix;d&&d.multiply(c,g);for(var m,y,w=h.length,x=this.polygonCache,T=this.fillTint.TL,E=this.fillTint.TR,S=this.fillTint.BL,C=0;C<w;++C)y=h[C],x.push(y.x,y.y);w=(m=i(x)).length;for(var A=0;A<w;A+=3){var M=2*m[A+0],b=2*m[A+1],_=2*m[A+2],P=x[M+0],L=x[M+1],F=x[b+0],D=x[b+1],k=x[_+0],R=x[_+1],O=g.getX(P,L),B=g.getY(P,L),U=g.getX(F,D),I=g.getY(F,D),Y=g.getX(k,R),N=g.getY(k,R);this.batchTri(null,O,B,U,I,Y,N,0,0,1,1,T,E,S,2)}x.length=0},batchStrokePath:function(h,c,d,g,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=h.length-1,w=0;w<y;w++){var x=h[w],T=h[w+1];this.batchLine(x.x,x.y,T.x,T.y,x.width/2,T.width/2,c,w,!d&&w===y-1,g,m)}},batchLine:function(h,c,d,g,m,y,w,x,T,E,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(E,C);var A=d-h,M=g-c,b=Math.sqrt(A*A+M*M),_=m*(g-c)/b,P=m*(h-d)/b,L=y*(g-c)/b,F=y*(h-d)/b,D=d-L,k=g-F,R=h-_,O=c-P,B=d+L,U=g+F,I=h+_,Y=c+P,N=C.getX(D,k),X=C.getY(D,k),z=C.getX(R,O),V=C.getY(R,O),G=C.getX(B,U),W=C.getY(B,U),H=C.getX(I,Y),j=C.getY(I,Y),q=this.strokeTint,K=q.TL,it=q.TR,et=q.BL,J=q.BR;if(this.batchQuad(null,H,j,z,V,N,X,G,W,0,0,1,1,K,it,et,J,2),!(w<=2)){var Z=this.prevQuad,$=this.firstQuad;x>0&&Z[4]?this.batchQuad(null,H,j,z,V,Z[0],Z[1],Z[2],Z[3],0,0,1,1,K,it,et,J,2):($[0]=H,$[1]=j,$[2]=z,$[3]=V,$[4]=1),T&&$[4]?this.batchQuad(null,N,X,G,W,$[0],$[1],$[2],$[3],0,0,1,1,K,it,et,J,2):(Z[0]=N,Z[1]=X,Z[2]=G,Z[3]=W,Z[4]=1)}}});v.exports=o},26159:(v,p,t)=>{var f=t(69186),i=t(25738),n=t(91101),l=t(90117),e=t(89262),a=new f({Extends:e,initialize:function(r){r.vertShader=i(r,"vertShader",l),r.fragShader=i(r,"fragShader",n),r.attributes=i(r,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),e.call(this,r)},onRender:function(r,u){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",u.zoom)},batchPointLight:function(r,u,s,o,h,c,d,g,m,y,w,x){var T=r.color,E=r.intensity,S=r.radius,C=r.attenuation,A=T.r*E,M=T.g*E,b=T.b*E,_=u.alpha*r.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(s,o,w,x,S,C,A,M,b,_),this.batchLightVert(h,c,w,x,S,C,A,M,b,_),this.batchLightVert(d,g,w,x,S,C,A,M,b,_),this.batchLightVert(s,o,w,x,S,C,A,M,b,_),this.batchLightVert(d,g,w,x,S,C,A,M,b,_),this.batchLightVert(m,y,w,x,S,C,A,M,b,_)},batchLightVert:function(r,u,s,o,h,c,d,g,m,y){var w=this.vertexViewF32,x=this.vertexCount*this.currentShader.vertexComponentCount-1;w[++x]=r,w[++x]=u,w[++x]=s,w[++x]=o,w[++x]=h,w[++x]=c,w[++x]=d,w[++x]=g,w[++x]=m,w[++x]=y,this.vertexCount++}});v.exports=a},35989:(v,p,t)=>{var f=t(69186),i=t(40013),n=t(25738),l=t(32603),e=t(42193),a=t(89262),r=new f({Extends:a,initialize:function(u){u.renderTarget=n(u,"renderTarget",1),u.fragShader=n(u,"fragShader",l),u.vertShader=n(u,"vertShader",e),u.attributes=n(u,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),u.batchSize=1,u.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],a.call(this,u),this.isPostFX=!0,this.gameObject,this.colorMatrix=new i,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){a.prototype.boot.call(this);var u=this.manager.UTILITY_PIPELINE;this.fullFrame1=u.fullFrame1,this.fullFrame2=u.fullFrame2,this.halfFrame1=u.halfFrame1,this.halfFrame2=u.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(u){this.bindAndDraw(u)},copyFrame:function(u,s,o,h,c){this.manager.copyFrame(u,s,o,h,c)},copyToGame:function(u){this.manager.copyToGame(u)},drawFrame:function(u,s,o){this.manager.drawFrame(u,s,o,this.colorMatrix)},blendFrames:function(u,s,o,h,c){this.manager.blendFrames(u,s,o,h,c)},blendFramesAdditive:function(u,s,o,h,c){this.manager.blendFramesAdditive(u,s,o,h,c)},clearFrame:function(u,s){this.manager.clearFrame(u,s)},blitFrame:function(u,s,o,h,c,d){this.manager.blitFrame(u,s,o,h,c,d)},copyFrameRect:function(u,s,o,h,c,d,g,m){this.manager.copyFrameRect(u,s,o,h,c,d,g,m)},bindAndDraw:function(u,s,o,h,c){o===void 0&&(o=!0),h===void 0&&(h=!0);var d=this.gl,g=this.renderer;this.bind(c),this.set1i("uMainSampler",0),s?(d.viewport(0,0,s.width,s.height),d.bindFramebuffer(d.FRAMEBUFFER,s.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s.texture,0),o&&(h?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT))):(g.popFramebuffer(!1,!1,!1),g.currentFramebuffer||d.viewport(0,0,g.width,g.height)),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,u.texture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),s?(d.bindTexture(d.TEXTURE_2D,null),d.bindFramebuffer(d.FRAMEBUFFER,null)):g.resetTextures()}});v.exports=r},67239:(v,p,t)=>{var f=t(69186),i=t(25738),n=t(14869),l=new f({Extends:n,initialize:function(e){e.topology=5,e.batchSize=i(e,"batchSize",256),n.call(this,e)}});v.exports=l},57434:(v,p,t)=>{var f=t(69186),i=t(25738),n=t(14869),l=t(77917),e=t(85833),a=t(89262),r=new f({Extends:n,initialize:function(u){u.fragShader=i(u,"fragShader",l),u.vertShader=i(u,"vertShader",e),u.forceZero=!0,n.call(this,u)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0)}});v.exports=r},21898:(v,p,t)=>{var f=t(7870),i=t(87626),n=t(69186),l=t(40013),e=t(86184),a=t(196),r=t(25738),u=t(4934),s=t(42193),o=t(89262),h=new n({Extends:o,initialize:function(c){c.renderTarget=r(c,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),c.vertShader=r(c,"vertShader",s),c.shaders=r(c,"shaders",[{name:"Copy",fragShader:a},{name:"AddBlend",fragShader:f},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:e}]),c.attributes=r(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),c.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],c.batchSize=1,o.call(this,c),this.colorMatrix=new l,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){o.prototype.boot.call(this);var c=this.shaders,d=this.renderTargets;this.copyShader=c[0],this.addShader=c[1],this.linearShader=c[2],this.colorMatrixShader=c[3],this.fullFrame1=d[0],this.fullFrame2=d[1],this.halfFrame1=d[2],this.halfFrame2=d[3]},copyFrame:function(c,d,g,m,y){g===void 0&&(g=1),m===void 0&&(m=!0),y===void 0&&(y=!0);var w=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",g),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,c.texture),d?(w.viewport(0,0,d.width,d.height),w.bindFramebuffer(w.FRAMEBUFFER,d.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,d.texture,0)):w.viewport(0,0,c.width,c.height),m&&(y?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT)),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blitFrame:function(c,d,g,m,y,w){g===void 0&&(g=1),m===void 0&&(m=!0),y===void 0&&(y=!0),w===void 0&&(w=!1);var x=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",g),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,c.texture),c.height>d.height)x.viewport(0,0,c.width,c.height),this.setTargetUVs(c,d);else{var T=d.height-c.height;x.viewport(0,T,c.width,c.height)}if(x.bindFramebuffer(x.FRAMEBUFFER,d.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,d.texture,0),m&&(y?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT)),w){var E=this.renderer.currentBlendMode;this.renderer.setBlendMode(i.ERASE)}x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),w&&this.renderer.setBlendMode(E),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindTexture(x.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(c,d,g,m,y,w,x,T){x===void 0&&(x=!0),T===void 0&&(T=!0);var E=this.gl;E.bindFramebuffer(E.FRAMEBUFFER,c.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,c.texture,0),x&&(T?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,d.texture),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,g,m,y,w),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},copyToGame:function(c){var d=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,c.texture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(c,d,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.colorMatrix);var y=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",m.getData()),this.set1f("uAlpha",m.alpha),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,c.texture),d?(y.viewport(0,0,d.width,d.height),y.bindFramebuffer(y.FRAMEBUFFER,d.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,d.texture,0)):y.viewport(0,0,c.width,c.height),g?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blendFrames:function(c,d,g,m,y,w){m===void 0&&(m=1),y===void 0&&(y=!0),w===void 0&&(w=this.linearShader);var x=this.gl;this.setShader(w),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",m),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,c.texture),x.activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,d.texture),g?(x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,g.texture,0),x.viewport(0,0,g.width,g.height)):x.viewport(0,0,c.width,c.height),y?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindTexture(x.TEXTURE_2D,null)},blendFramesAdditive:function(c,d,g,m,y){this.blendFrames(c,d,g,m,y,this.addShader)},clearFrame:function(c,d){d===void 0&&(d=!0);var g=this.gl;g.viewport(0,0,c.width,c.height),g.bindFramebuffer(g.FRAMEBUFFER,c.framebuffer),d?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT);var m=this.renderer.currentFramebuffer;g.bindFramebuffer(g.FRAMEBUFFER,m)},setUVs:function(c,d,g,m,y,w,x,T){var E=this.vertexViewF32;E[2]=c,E[3]=d,E[6]=g,E[7]=m,E[10]=y,E[11]=w,E[14]=c,E[15]=d,E[18]=y,E[19]=w,E[22]=x,E[23]=T},setTargetUVs:function(c,d){var g=d.height/c.height;g=g>.5?.5-(g-.5):.5-g+.5,this.setUVs(0,g,0,1+g,1,1+g,1,g)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});v.exports=h},46098:v=>{v.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},85137:v=>{v.exports="pipelineafterflush"},92362:v=>{v.exports="pipelinebeforeflush"},13143:v=>{v.exports="pipelinebind"},31156:v=>{v.exports="pipelineboot"},27055:v=>{v.exports="pipelinedestroy"},47686:v=>{v.exports="pipelinerebind"},69139:v=>{v.exports="pipelineresize"},42789:(v,p,t)=>{v.exports={AFTER_FLUSH:t(85137),BEFORE_FLUSH:t(92362),BIND:t(13143),BOOT:t(31156),DESTROY:t(27055),REBIND:t(47686),RESIZE:t(69139)}},86678:(v,p,t)=>{var f=t(46098),i=t(72646),n={BitmapMaskPipeline:t(18923),Events:t(42789),GraphicsPipeline:t(48623),LightPipeline:t(63174),MultiPipeline:t(14869),PointLightPipeline:t(26159),PostFXPipeline:t(35989),RopePipeline:t(67239),SinglePipeline:t(57434),UtilityPipeline:t(21898)};n=i(!1,n,f),v.exports=n},7870:v=>{v.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},91160:v=>{v.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},29874:v=>{v.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},86184:v=>{v.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},196:v=>{v.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},79268:v=>{v.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},16575:v=>{v.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},80376:v=>{v.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},4934:v=>{v.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},53121:v=>{v.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},31952:v=>{v.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},91101:v=>{v.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},90117:v=>{v.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},32603:v=>{v.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},42193:v=>{v.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},77917:v=>{v.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},85833:v=>{v.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},70360:(v,p,t)=>{var f=t(24790),i=t(69186),n=t(26729),l=t(48958),e=t(24496),a=t(57886),r=t(44095),u=t(84846),s=t(45733),o=t(75380),h=t(54762),c=t(99e3),d=t(17321),g=new i({Extends:n,initialize:function(m){n.call(this),this.game=m,this.canvas,this.canvasBounds=new o,this.parent=null,this.parentIsWindow=!1,this.parentSize=new h,this.gameSize=new h,this.baseSize=new h,this.displaySize=new h,this.scaleMode=f.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new d(1,1),this.autoRound=!1,this.autoCenter=f.CENTER.NO_CENTER,this.orientation=f.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:s,windowResize:s,fullScreenChange:s,fullScreenError:s}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(e.BOOT,this.boot,this)},boot:function(){var m=this.game;this.canvas=m.canvas,this.fullscreen=m.device.fullscreen,this.scaleMode!==f.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===f.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),m.events.on(e.PRE_STEP,this.step,this),m.events.once(e.READY,this.refresh,this),m.events.once(e.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(m){this.getParent(m),this.getParentBounds();var y=m.width,w=m.height,x=m.scaleMode,T=m.zoom,E=m.autoRound;if(typeof y=="string"){var S=this.parentSize.width;S===0&&(S=window.innerWidth);var C=parseInt(y,10)/100;y=Math.floor(S*C)}if(typeof w=="string"){var A=this.parentSize.height;A===0&&(A=window.innerHeight);var M=parseInt(w,10)/100;w=Math.floor(A*M)}this.scaleMode=x,this.autoRound=E,this.autoCenter=m.autoCenter,this.resizeInterval=m.resizeInterval,E&&(y=Math.floor(y),w=Math.floor(w)),this.gameSize.setSize(y,w),T===f.ZOOM.MAX_ZOOM&&(T=this.getMaxZoom()),this.zoom=T,T!==1&&(this._resetZoom=!0),this.baseSize.setSize(y,w),E&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),m.minWidth>0&&this.displaySize.setMin(m.minWidth*T,m.minHeight*T),m.maxWidth>0&&this.displaySize.setMax(m.maxWidth*T,m.maxHeight*T),this.displaySize.setSize(y,w),this.orientation=u(y,w)},getParent:function(m){var y=m.parent;if(y!==null){if(this.parent=r(y),this.parentIsWindow=this.parent===document.body,m.expandParent&&m.scaleMode!==f.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),this.parentIsWindow||w.height!==0||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}m.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=r(m.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var m=this.parentSize,y=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(y.height=a(!0));var w=y.width,x=y.height;return(m.width!==w||m.height!==x)&&(m.setSize(w,x),!0)},lockOrientation:function(m){var y=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!y&&y.call(screen,m)},setParentSize:function(m,y){return this.parentSize.setSize(m,y),this.refresh()},setGameSize:function(m,y){var w=this.autoRound;w&&(m=Math.floor(m),y=Math.floor(y));var x=this.width,T=this.height;return this.gameSize.resize(m,y),this.baseSize.resize(m,y),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(m/y),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(x,T)},resize:function(m,y){var w=this.zoom,x=this.autoRound;x&&(m=Math.floor(m),y=Math.floor(y));var T=this.width,E=this.height;this.gameSize.resize(m,y),this.baseSize.resize(m,y),x&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(m*w,y*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var S=this.canvas.style,C=m*w,A=y*w;return x&&(C=Math.floor(C),A=Math.floor(A)),C===m&&A===y||(S.width=C+"px",S.height=A+"px"),this.refresh(T,E)},setZoom:function(m){return this.zoom=m,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(m,y){m===void 0&&(m=this.width),y===void 0&&(y=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var x=this.canvas.style,T=w.style;T.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",T.marginLeft=x.marginLeft,T.marginTop=x.marginTop}return this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,m,y),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var m=u(this.width,this.height);m!==this.orientation&&(this.orientation=m,this.emit(l.ORIENTATION_CHANGE,m))}},updateScale:function(){var m,y,w=this.canvas.style,x=this.gameSize.width,T=this.gameSize.height,E=this.zoom,S=this.autoRound;this.scaleMode===f.SCALE_MODE.NONE?(this.displaySize.setSize(x*E,T*E),m=this.displaySize.width,y=this.displaySize.height,S&&(m=Math.floor(m),y=Math.floor(y)),this._resetZoom&&(w.width=m+"px",w.height=y+"px",this._resetZoom=!1)):this.scaleMode===f.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),m=this.displaySize.width,y=this.displaySize.height,S&&(m=Math.floor(m),y=Math.floor(y)),this.canvas.width=m,this.canvas.height=y):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),m=this.displaySize.width,y=this.displaySize.height,S&&(m=Math.floor(m),y=Math.floor(y)),w.width=m+"px",w.height=y+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var m=c(this.parentSize.width,this.gameSize.width,0,!0),y=c(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(m,y),1)},updateCenter:function(){var m=this.autoCenter;if(m!==f.CENTER.NO_CENTER){var y=this.canvas,w=y.style,x=y.getBoundingClientRect(),T=x.width,E=x.height,S=Math.floor((this.parentSize.width-T)/2),C=Math.floor((this.parentSize.height-E)/2);m===f.CENTER.CENTER_HORIZONTALLY?C=0:m===f.CENTER.CENTER_VERTICALLY&&(S=0),w.marginLeft=S+"px",w.marginTop=C+"px"}},updateBounds:function(){var m=this.canvasBounds,y=this.canvas.getBoundingClientRect();m.x=y.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),m.y=y.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),m.width=y.width,m.height=y.height},transformX:function(m){return(m-this.canvasBounds.left)*this.displayScale.x},transformY:function(m){return(m-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(m){m===void 0&&(m={navigationUI:"hide"});var y=this.fullscreen;if(y.available){if(!y.active){var w=this.getFullscreenTarget();y.keyboard?w[y.request](Element.ALLOW_KEYBOARD_INPUT):w[y.request](m)}}else this.emit(l.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(m){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,m)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var m=document.createElement("div");m.style.margin="0",m.style.padding="0",m.style.width="100%",m.style.height="100%",this.fullscreenTarget=m,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var m=this.fullscreenTarget;if(m&&m.parentNode){var y=m.parentNode;y.insertBefore(this.canvas,m),y.removeChild(m)}}},stopFullscreen:function(){var m=this.fullscreen;if(!m.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;m.active&&document[m.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(m){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(m)},startListeners:function(){var m=this,y=this.listeners;y.orientationChange=function(){m.updateBounds(),m._checkOrientation=!0,m.dirty=!0},y.windowResize=function(){m.updateBounds(),m.dirty=!0},window.addEventListener("orientationchange",y.orientationChange,!1),window.addEventListener("resize",y.windowResize,!1),this.fullscreen.available&&(y.fullScreenChange=function(w){return m.onFullScreenChange(w)},y.fullScreenError=function(w){return m.onFullScreenError(w)},["webkit","moz",""].forEach(function(w){document.addEventListener(w+"fullscreenchange",y.fullScreenChange,!1),document.addEventListener(w+"fullscreenerror",y.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.addEventListener("MSFullscreenError",y.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(m,y){this.parent&&(this._lastCheck+=y,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var m=this.listeners;window.removeEventListener("orientationchange",m.orientationChange,!1),window.removeEventListener("resize",m.windowResize,!1),["webkit","moz",""].forEach(function(y){document.removeEventListener(y+"fullscreenchange",m.fullScreenChange,!1),document.removeEventListener(y+"fullscreenerror",m.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",m.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",m.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===f.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===f.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});v.exports=g},80756:v=>{v.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},90726:v=>{v.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},43620:v=>{v.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},31926:v=>{v.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},24790:(v,p,t)=>{var f={CENTER:t(80756),ORIENTATION:t(90726),SCALE_MODE:t(43620),ZOOM:t(31926)};v.exports=f},25376:v=>{v.exports="enterfullscreen"},11313:v=>{v.exports="fullscreenfailed"},13578:v=>{v.exports="fullscreenunsupported"},48530:v=>{v.exports="leavefullscreen"},76037:v=>{v.exports="orientationchange"},43067:v=>{v.exports="resize"},48958:(v,p,t)=>{v.exports={ENTER_FULLSCREEN:t(25376),FULLSCREEN_FAILED:t(11313),FULLSCREEN_UNSUPPORTED:t(13578),LEAVE_FULLSCREEN:t(48530),ORIENTATION_CHANGE:t(76037),RESIZE:t(43067)}},12102:(v,p,t)=>{var f=t(25738),i=t(10963);v.exports=function(n){var l=n.game.config.defaultPhysicsSystem,e=f(n.settings,"physics",!1);if(l||e){var a=[];if(l&&a.push(i(l+"Physics")),e)for(var r in e)r=i(r.concat("Physics")),a.indexOf(r)===-1&&a.push(r);return a}}},93990:(v,p,t)=>{var f=t(25738);v.exports=function(i){var n=i.plugins.getDefaultScenePlugins(),l=f(i.settings,"plugins",!1);return Array.isArray(l)?l:n||[]}},85417:v=>{var p={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter",facebook:"facebook"};v.exports=p},61116:(v,p,t)=>{var f=t(69186),i=t(72444),n=new f({initialize:function(l){this.sys=new i(this,l),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.facebook,this.scale,this.plugins,this.renderer},update:function(){}});v.exports=n},26236:(v,p,t)=>{var f=t(69186),i=t(7875),n=t(12063),l=t(24496),e=t(76076),a=t(40),r=t(45733),u=t(61116),s=t(72444),o=new f({initialize:function(h,c){if(this.game=h,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,c){Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++)this._pending.push({key:"default",scene:c[d],autoStart:d===0,data:{}})}h.events.once(l.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var h,c,d,g;for(h=0;h<this._pending.length;h++){var m;d=(c=this._pending[h]).key,(g=c.scene)instanceof u?m=this.createSceneFromInstance(d,g):typeof g=="object"?m=this.createSceneFromObject(d,g):typeof g=="function"&&(m=this.createSceneFromFunction(d,g)),d=m.sys.settings.key,this.keys[d]=m,this.scenes.push(m),this._data[d]&&(m.sys.settings.data=this._data[d].data,this._data[d].autoStart&&(c.autoStart=!0)),(c.autoStart||m.sys.settings.active)&&this._start.push(d)}for(this._pending.length=0,this._data={},this.isBooted=!0,h=0;h<this._start.length;h++)c=this._start[h],this.start(c);this._start.length=0}},processQueue:function(){var h=this._pending.length,c=this._queue.length;if(h!==0||c!==0){var d,g;if(h){for(d=0;d<h;d++)g=this._pending[d],this.add(g.key,g.scene,g.autoStart,g.data);for(d=0;d<this._start.length;d++)g=this._start[d],this.start(g);return this._start.length=0,void(this._pending.length=0)}for(d=0;d<this._queue.length;d++)this[(g=this._queue[d]).op](g.keyA,g.keyB);this._queue.length=0}},add:function(h,c,d,g){return d===void 0&&(d=!1),g===void 0&&(g={}),this.isProcessing||!this.isBooted?(this._pending.push({key:h,scene:c,autoStart:d,data:g}),this.isBooted||(this._data[h]={data:g}),null):(h=this.getKey(h,c),c instanceof u?m=this.createSceneFromInstance(h,c):typeof c=="object"?(c.key=h,m=this.createSceneFromObject(h,c)):typeof c=="function"&&(m=this.createSceneFromFunction(h,c)),m.sys.settings.data=g,h=m.sys.settings.key,this.keys[h]=m,this.scenes.push(m),(d||m.sys.settings.active)&&(this._pending.length?this._start.push(h):this.start(h)),m);var m},remove:function(h){if(this.isProcessing)this._queue.push({op:"remove",keyA:h,keyB:null});else{var c=this.getScene(h);if(!c||c.sys.isTransitioning())return this;var d=this.scenes.indexOf(c),g=c.sys.settings.key;d>-1&&(delete this.keys[g],this.scenes.splice(d,1),this._start.indexOf(g)>-1&&(d=this._start.indexOf(g),this._start.splice(d,1)),c.sys.destroy())}return this},bootScene:function(h){var c,d=h.sys,g=d.settings;d.sceneUpdate=r,h.init&&(h.init.call(h,g.data),g.status=i.INIT,g.isTransition&&d.events.emit(n.TRANSITION_INIT,g.transitionFrom,g.transitionDuration)),d.load&&(c=d.load).reset(),c&&h.preload?(h.preload.call(h),c.list.size===0?this.create(h):(g.status=i.LOADING,c.once(a.COMPLETE,this.loadComplete,this),c.start())):this.create(h)},loadComplete:function(h){this.create(h.scene)},payloadComplete:function(h){this.bootScene(h.scene)},update:function(h,c){this.processQueue(),this.isProcessing=!0;for(var d=this.scenes.length-1;d>=0;d--){var g=this.scenes[d].sys;g.settings.status>i.START&&g.settings.status<=i.RUNNING&&g.step(h,c)}},render:function(h){for(var c=0;c<this.scenes.length;c++){var d=this.scenes[c].sys;d.settings.visible&&d.settings.status>=i.LOADING&&d.settings.status<i.SLEEPING&&d.render(h)}this.isProcessing=!1},create:function(h){var c=h.sys,d=c.settings;h.create&&(d.status=i.CREATING,h.create.call(h,d.data),d.status===i.DESTROYED)||(d.isTransition&&c.events.emit(n.TRANSITION_START,d.transitionFrom,d.transitionDuration),h.update&&(c.sceneUpdate=h.update),d.status=i.RUNNING,c.events.emit(n.CREATE,h))},createSceneFromFunction:function(h,c){var d=new c;if(d instanceof u){var g=d.sys.settings.key;if(g!==""&&(h=g),this.keys.hasOwnProperty(h))throw new Error("Cannot add a Scene with duplicate key: "+h);return this.createSceneFromInstance(h,d)}return d.sys=new s(d),d.sys.settings.key=h,d.sys.init(this.game),d},createSceneFromInstance:function(h,c){return c.sys.settings.key===""&&(c.sys.settings.key=h),c.sys.init(this.game),c},createSceneFromObject:function(h,c){var d=new u(c),g=d.sys.settings.key;g!==""?h=g:d.sys.settings.key=h,d.sys.init(this.game);for(var m=["init","preload","create","update","render"],y=0;y<m.length;y++){var w=e(c,m[y],null);w&&(d[m[y]]=w)}if(c.hasOwnProperty("extend")){for(var x in c.extend)if(c.extend.hasOwnProperty(x)){var T=c.extend[x];x==="data"&&d.hasOwnProperty("data")&&typeof T=="object"?d.data.merge(T):x!=="sys"&&(d[x]=T)}}return d},getKey:function(h,c){if(h||(h="default"),typeof c=="function")return h;if(c instanceof u?h=c.sys.settings.key:typeof c=="object"&&c.hasOwnProperty("key")&&(h=c.key),this.keys.hasOwnProperty(h))throw new Error("Cannot add a Scene with duplicate key: "+h);return h},getScenes:function(h,c){h===void 0&&(h=!0),c===void 0&&(c=!1);for(var d=[],g=this.scenes,m=0;m<g.length;m++){var y=g[m];y&&(!h||h&&y.sys.isActive())&&d.push(y)}return c?d.reverse():d},getScene:function(h){if(typeof h=="string"){if(this.keys[h])return this.keys[h]}else for(var c=0;c<this.scenes.length;c++)if(h===this.scenes[c])return h;return null},isActive:function(h){var c=this.getScene(h);return c?c.sys.isActive():null},isPaused:function(h){var c=this.getScene(h);return c?c.sys.isPaused():null},isVisible:function(h){var c=this.getScene(h);return c?c.sys.isVisible():null},isSleeping:function(h){var c=this.getScene(h);return c?c.sys.isSleeping():null},pause:function(h,c){var d=this.getScene(h);return d&&d.sys.pause(c),this},resume:function(h,c){var d=this.getScene(h);return d&&d.sys.resume(c),this},sleep:function(h,c){var d=this.getScene(h);return d&&!d.sys.isTransitioning()&&d.sys.sleep(c),this},wake:function(h,c){var d=this.getScene(h);return d&&d.sys.wake(c),this},run:function(h,c){var d=this.getScene(h);if(!d){for(var g=0;g<this._pending.length;g++)if(this._pending[g].key===h){this.queueOp("start",h,c);break}return this}d.sys.isSleeping()?d.sys.wake(c):d.sys.isPaused()?d.sys.resume(c):this.start(h,c)},start:function(h,c){if(!this.isBooted)return this._data[h]={autoStart:!0,data:c},this;var d=this.getScene(h);if(d){var g,m=d.sys;if(m.isActive()||m.isPaused())m.shutdown(),m.sceneUpdate=r,m.start(c);else if(m.sceneUpdate=r,m.start(c),m.load&&(g=m.load),g&&m.settings.hasOwnProperty("pack")&&(g.reset(),g.addPack({payload:m.settings.pack})))return m.settings.status=i.LOADING,g.once(a.COMPLETE,this.payloadComplete,this),g.start(),this;this.bootScene(d)}return this},stop:function(h,c){var d=this.getScene(h);return d&&!d.sys.isTransitioning()&&d.sys.shutdown(c),this},switch:function(h,c){var d=this.getScene(h),g=this.getScene(c);return d&&g&&d!==g&&(this.sleep(h),this.isSleeping(c)?this.wake(c):this.start(c)),this},getAt:function(h){return this.scenes[h]},getIndex:function(h){var c=this.getScene(h);return this.scenes.indexOf(c)},bringToTop:function(h){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:h,keyB:null});else{var c=this.getIndex(h);if(c!==-1&&c<this.scenes.length){var d=this.getScene(h);this.scenes.splice(c,1),this.scenes.push(d)}}return this},sendToBack:function(h){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:h,keyB:null});else{var c=this.getIndex(h);if(c!==-1&&c>0){var d=this.getScene(h);this.scenes.splice(c,1),this.scenes.unshift(d)}}return this},moveDown:function(h){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:h,keyB:null});else{var c=this.getIndex(h);if(c>0){var d=c-1,g=this.getScene(h),m=this.getAt(d);this.scenes[c]=m,this.scenes[d]=g}}return this},moveUp:function(h){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:h,keyB:null});else{var c=this.getIndex(h);if(c<this.scenes.length-1){var d=c+1,g=this.getScene(h),m=this.getAt(d);this.scenes[c]=m,this.scenes[d]=g}}return this},moveAbove:function(h,c){if(h===c)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:h,keyB:c});else{var d=this.getIndex(h),g=this.getIndex(c);if(d!==-1&&g!==-1){var m=this.getAt(g);this.scenes.splice(g,1),this.scenes.splice(d+1,0,m)}}return this},moveBelow:function(h,c){if(h===c)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:h,keyB:c});else{var d=this.getIndex(h),g=this.getIndex(c);if(d!==-1&&g!==-1){var m=this.getAt(g);this.scenes.splice(g,1),d===0?this.scenes.unshift(m):this.scenes.splice(d,0,m)}}return this},queueOp:function(h,c,d){return this._queue.push({op:h,keyA:c,keyB:d}),this},swapPosition:function(h,c){if(h===c)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:h,keyB:c});else{var d=this.getIndex(h),g=this.getIndex(c);if(d!==g&&d!==-1&&g!==-1){var m=this.getAt(d);this.scenes[d]=this.scenes[g],this.scenes[g]=m}}return this},dump:function(){for(var h=[],c=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],d=0;d<this.scenes.length;d++){var g=this.scenes[d].sys,m=!g.settings.visible||g.settings.status!==i.RUNNING&&g.settings.status!==i.PAUSED?"[-] ":"[*] ";m+=g.settings.key+" ("+c[g.settings.status]+")",h.push(m)}console.log(h.join(`
`))},destroy:function(){for(var h=0;h<this.scenes.length;h++)this.scenes[h].sys.destroy();this.update=r,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});v.exports=o},7656:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(12063),l=t(25738),e=t(46236),a=new i({initialize:function(r){this.scene=r,this.systems=r.sys,this.settings=r.sys.settings,this.key=r.sys.settings.key,this.manager=r.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,r.sys.events.once(n.BOOT,this.boot,this),r.sys.events.on(n.START,this.pluginStart,this)},boot:function(){this.systems.events.once(n.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(n.SHUTDOWN,this.shutdown,this)},start:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",r,u),this},restart:function(r){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,r),this},transition:function(r){r===void 0&&(r={});var u=l(r,"target",!1),s=this.manager.getScene(u);if(!u||!this.checkValidTransition(s))return!1;var o=l(r,"duration",1e3);this._elapsed=0,this._target=s,this._duration=o,this._willSleep=l(r,"sleep",!1),this._willRemove=l(r,"remove",!1);var h=l(r,"onUpdate",null);h&&(this._onUpdate=h,this._onUpdateScope=l(r,"onUpdateScope",this.scene));var c=l(r,"allowInput",!1);this.settings.transitionAllowInput=c;var d=s.sys.settings;return d.isTransition=!0,d.transitionFrom=this.scene,d.transitionDuration=o,d.transitionAllowInput=c,l(r,"moveAbove",!1)?this.manager.moveAbove(this.key,u):l(r,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),s.sys.isSleeping()?s.sys.wake(l(r,"data")):this.manager.start(u,l(r,"data")),this.systems.events.emit(n.TRANSITION_OUT,s,o),this.systems.events.on(n.UPDATE,this.step,this),!0},checkValidTransition:function(r){return!(!r||r.sys.isActive()||r.sys.isTransitioning()||r===this.scene||this.systems.isTransitioning())},step:function(r,u){this._elapsed+=u,this.transitionProgress=f(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var r=this._target.sys,u=this._target.sys.settings;this.systems.events.off(n.UPDATE,this.step,this),r.events.emit(n.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(r,u,s,o){return this.manager.add(r,u,s,o)},launch:function(r,u){return r&&r!==this.key&&this.manager.queueOp("start",r,u),this},run:function(r,u){return r&&r!==this.key&&this.manager.queueOp("run",r,u),this},pause:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("pause",r,u),this},resume:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("resume",r,u),this},sleep:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("sleep",r,u),this},wake:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("wake",r,u),this},switch:function(r){return r!==this.key&&this.manager.queueOp("switch",this.key,r),this},stop:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("stop",r,u),this},setActive:function(r,u,s){u===void 0&&(u=this.key);var o=this.manager.getScene(u);return o&&o.sys.setActive(r,s),this},setVisible:function(r,u){u===void 0&&(u=this.key);var s=this.manager.getScene(u);return s&&s.sys.setVisible(r),this},isSleeping:function(r){return r===void 0&&(r=this.key),this.manager.isSleeping(r)},isActive:function(r){return r===void 0&&(r=this.key),this.manager.isActive(r)},isPaused:function(r){return r===void 0&&(r=this.key),this.manager.isPaused(r)},isVisible:function(r){return r===void 0&&(r=this.key),this.manager.isVisible(r)},swapPosition:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.swapPosition(r,u),this},moveAbove:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.moveAbove(r,u),this},moveBelow:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.moveBelow(r,u),this},remove:function(r){return r===void 0&&(r=this.key),this.manager.remove(r),this},moveUp:function(r){return r===void 0&&(r=this.key),this.manager.moveUp(r),this},moveDown:function(r){return r===void 0&&(r=this.key),this.manager.moveDown(r),this},bringToTop:function(r){return r===void 0&&(r=this.key),this.manager.bringToTop(r),this},sendToBack:function(r){return r===void 0&&(r=this.key),this.manager.sendToBack(r),this},get:function(r){return this.manager.getScene(r)},getIndex:function(r){return r===void 0&&(r=this.key),this.manager.getIndex(r)},shutdown:function(){var r=this.systems.events;r.off(n.SHUTDOWN,this.shutdown,this),r.off(n.POST_UPDATE,this.step,this),r.off(n.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});e.register("ScenePlugin",a,"scenePlugin"),v.exports=a},95985:(v,p,t)=>{var f=t(7875),i=t(76076),n=t(50247),l=t(85417),e={create:function(a){return typeof a=="string"?a={key:a}:a===void 0&&(a={}),{status:f.PENDING,key:i(a,"key",""),active:i(a,"active",!1),visible:i(a,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:i(a,"pack",!1),cameras:i(a,"cameras",null),map:i(a,"map",n(l,i(a,"mapAdd",{}))),physics:i(a,"physics",{}),loader:i(a,"loader",{}),plugins:i(a,"plugins",!1),input:i(a,"input",{})}}};v.exports=e},72444:(v,p,t)=>{var f=t(69186),i=t(7875),n=t(32122),l=t(12063),e=t(12102),a=t(93990),r=t(11318),u=t(45733),s=t(95985),o=new f({initialize:function(h,c){this.scene=h,this.game,this.renderer,this.facebook,this.config=c,this.settings=s.create(c),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(h){this.settings.status=i.INIT,this.sceneUpdate=u,this.game=h,this.renderer=h.renderer,this.canvas=h.canvas,this.context=h.context;var c=h.plugins;this.plugins=c,c.addToScene(this,n.Global,[n.CoreScene,a(this),e(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function(h,c){var d=this.events;d.emit(l.PRE_UPDATE,h,c),d.emit(l.UPDATE,h,c),this.sceneUpdate.call(this.scene,h,c),d.emit(l.POST_UPDATE,h,c)},render:function(h){var c=this.displayList;c.depthSort(),this.events.emit(l.PRE_RENDER,h),this.cameras.render(h,c),this.events.emit(l.RENDER,h)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(h){var c=this.events,d=this.settings;return this.settings.active&&(d.status=i.PAUSED,d.active=!1,c.emit(l.PAUSE,this,h)),this},resume:function(h){var c=this.events,d=this.settings;return this.settings.active||(d.status=i.RUNNING,d.active=!0,c.emit(l.RESUME,this,h)),this},sleep:function(h){var c=this.events,d=this.settings;return d.status=i.SLEEPING,d.active=!1,d.visible=!1,c.emit(l.SLEEP,this,h),this},wake:function(h){var c=this.events,d=this.settings;return d.status=i.RUNNING,d.active=!0,d.visible=!0,c.emit(l.WAKE,this,h),d.isTransition&&c.emit(l.TRANSITION_WAKE,d.transitionFrom,d.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===i.SLEEPING},isActive:function(){return this.settings.status===i.RUNNING},isPaused:function(){return this.settings.status===i.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(h){return this.settings.visible=h,this},setActive:function(h,c){return h?this.resume(c):this.pause(c)},start:function(h){var c=this.events,d=this.settings;h&&(d.data=h),d.status=i.START,d.active=!0,d.visible=!0,c.emit(l.START,this),c.emit(l.READY,this,h)},shutdown:function(h){var c=this.events,d=this.settings;c.off(l.TRANSITION_INIT),c.off(l.TRANSITION_START),c.off(l.TRANSITION_COMPLETE),c.off(l.TRANSITION_OUT),d.status=i.SHUTDOWN,d.active=!1,d.visible=!1,this.renderer===r.WEBGL&&this.renderer.resetTextures(!0),c.emit(l.SHUTDOWN,this,h)},destroy:function(){var h=this.events,c=this.settings;c.status=i.DESTROYED,c.active=!1,c.visible=!1,h.emit(l.DESTROY,this),h.removeAllListeners();for(var d=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<d.length;g++)this[d[g]]=null}});v.exports=o},7875:v=>{v.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},24872:v=>{v.exports="addedtoscene"},95186:v=>{v.exports="boot"},81623:v=>{v.exports="create"},91133:v=>{v.exports="destroy"},91076:v=>{v.exports="pause"},99263:v=>{v.exports="postupdate"},54876:v=>{v.exports="prerender"},63721:v=>{v.exports="preupdate"},32250:v=>{v.exports="ready"},308:v=>{v.exports="removedfromscene"},41001:v=>{v.exports="render"},12948:v=>{v.exports="resume"},90810:v=>{v.exports="shutdown"},58227:v=>{v.exports="sleep"},52308:v=>{v.exports="start"},86743:v=>{v.exports="transitioncomplete"},89163:v=>{v.exports="transitioninit"},58448:v=>{v.exports="transitionout"},63079:v=>{v.exports="transitionstart"},88193:v=>{v.exports="transitionwake"},5346:v=>{v.exports="update"},6810:v=>{v.exports="wake"},12063:(v,p,t)=>{v.exports={ADDED_TO_SCENE:t(24872),BOOT:t(95186),CREATE:t(81623),DESTROY:t(91133),PAUSE:t(91076),POST_UPDATE:t(99263),PRE_RENDER:t(54876),PRE_UPDATE:t(63721),READY:t(32250),REMOVED_FROM_SCENE:t(308),RENDER:t(41001),RESUME:t(12948),SHUTDOWN:t(90810),SLEEP:t(58227),START:t(52308),TRANSITION_COMPLETE:t(86743),TRANSITION_INIT:t(89163),TRANSITION_OUT:t(58448),TRANSITION_START:t(63079),TRANSITION_WAKE:t(88193),UPDATE:t(5346),WAKE:t(6810)}},1459:(v,p,t)=>{var f=t(7875),i=t(72646),n={Events:t(12063),GetPhysicsPlugins:t(12102),GetScenePlugins:t(93990),SceneManager:t(26236),ScenePlugin:t(7656),Settings:t(95985),Systems:t(72444)};n=i(!1,n,f),v.exports=n},93912:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(21577),l=t(72646),e=t(45733),a=new f({Extends:i,initialize:function(r,u,s){i.call(this),this.manager=r,this.key=u,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,s),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(r){return!(!r||!r.name||typeof r.name!="string"||(this.markers[r.name]?(console.error("addMarker "+r.name+" already exists in Sound"),1):(r=l(!0,{name:"",start:0,duration:this.totalDuration-(r.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},r),this.markers[r.name]=r,0)))},updateMarker:function(r){return!(!r||!r.name||typeof r.name!="string"||(this.markers[r.name]?(this.markers[r.name]=l(!0,this.markers[r.name],r),0):(console.warn("Audio Marker: "+r.name+" missing in Sound: "+this.key),1)))},removeMarker:function(r){var u=this.markers[r];return u?(this.markers[r]=null,u):null},play:function(r,u){if(r===void 0&&(r=""),typeof r=="object"&&(u=r,r=""),typeof r!="string")return!1;if(r){if(!this.markers[r])return console.warn("Marker: "+r+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[r],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=l(this.currentConfig,u),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:e,calculateRate:function(){var r=this.currentConfig.detune+this.manager.detune,u=Math.pow(1.0005777895065548,r);this.totalRate=this.currentConfig.rate*this.manager.rate*u},destroy:function(){this.pendingRemove||(this.emit(n.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});v.exports=a},84768:(v,p,t)=>{var f=t(69186),i=t(98409),n=t(26729),l=t(21577),e=t(24496),a=t(45733),r=t(14999),u=t(39161),s=new f({Extends:n,initialize:function(o){n.call(this),this.game=o,this.jsonCache=o.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,o.events.on(e.BLUR,this.onGameBlur,this),o.events.on(e.FOCUS,this.onGameFocus,this),o.events.on(e.PRE_STEP,this.update,this),o.events.once(e.DESTROY,this.destroy,this)},add:a,addAudioSprite:function(o,h){h===void 0&&(h={});var c=this.add(o,h);for(var d in c.spritemap=this.jsonCache.get(o).spritemap,c.spritemap)if(c.spritemap.hasOwnProperty(d)){var g=i(h),m=c.spritemap[d];g.loop=!!m.hasOwnProperty("loop")&&m.loop,c.addMarker({name:d,start:m.start,duration:m.end-m.start,config:g})}return c},get:function(o){return u(this.sounds,"key",o)},getAll:function(o){return r(this.sounds,"key",o)},play:function(o,h){var c=this.add(o);return c.once(l.COMPLETE,c.destroy,c),h?h.name?(c.addMarker(h),c.play(h.name)):c.play(h):c.play()},playAudioSprite:function(o,h,c){var d=this.addAudioSprite(o);return d.once(l.COMPLETE,d.destroy,d),d.play(h,c)},remove:function(o){var h=this.sounds.indexOf(o);return h!==-1&&(o.destroy(),this.sounds.splice(h,1),!0)},removeAll:function(){this.sounds.forEach(function(o){o.destroy()}),this.sounds.length=0},removeByKey:function(o){for(var h=0,c=this.sounds.length-1;c>=0;c--){var d=this.sounds[c];d.key===o&&(d.destroy(),this.sounds.splice(c,1),h++)}return h},pauseAll:function(){this.forEachActiveSound(function(o){o.pause()}),this.emit(l.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(o){o.resume()}),this.emit(l.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(o){o.stop()}),this.emit(l.STOP_ALL,this)},stopByKey:function(o){var h=0;return this.getAll(o).forEach(function(c){c.stop()&&h++}),h},unlock:a,onBlur:a,onFocus:a,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(o,h){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var c=this.sounds.length-1;c>=0;c--)this.sounds[c].pendingRemove&&this.sounds.splice(c,1);this.sounds.forEach(function(d){d.update(o,h)})},destroy:function(){this.game.events.off(e.BLUR,this.onGameBlur,this),this.game.events.off(e.FOCUS,this.onGameFocus,this),this.game.events.off(e.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(o,h){var c=this;this.sounds.forEach(function(d,g){d&&!d.pendingRemove&&o.call(h||c,d,g,c.sounds)})},setRate:function(o){return this.rate=o,this},rate:{get:function(){return this._rate},set:function(o){this._rate=o,this.forEachActiveSound(function(h){h.calculateRate()}),this.emit(l.GLOBAL_RATE,this,o)}},setDetune:function(o){return this.detune=o,this},detune:{get:function(){return this._detune},set:function(o){this._detune=o,this.forEachActiveSound(function(h){h.calculateRate()}),this.emit(l.GLOBAL_DETUNE,this,o)}}});v.exports=s},72875:(v,p,t)=>{var f=t(13273),i=t(35384),n=t(36083),l={create:function(e){var a=e.config.audio,r=e.device.audio;return a.noAudio||!r.webAudio&&!r.audioData?new i(e):r.webAudio&&!a.disableWebAudio?new n(e):new f(e)}};v.exports=l},28200:v=>{v.exports="complete"},41564:v=>{v.exports="decodedall"},43739:v=>{v.exports="decoded"},76021:v=>{v.exports="destroy"},81152:v=>{v.exports="detune"},84990:v=>{v.exports="detune"},38279:v=>{v.exports="mute"},25337:v=>{v.exports="rate"},2326:v=>{v.exports="volume"},20514:v=>{v.exports="looped"},77169:v=>{v.exports="loop"},83681:v=>{v.exports="mute"},84889:v=>{v.exports="pan"},49765:v=>{v.exports="pauseall"},60772:v=>{v.exports="pause"},47900:v=>{v.exports="play"},23589:v=>{v.exports="rate"},92032:v=>{v.exports="resumeall"},72361:v=>{v.exports="resume"},68376:v=>{v.exports="seek"},49792:v=>{v.exports="stopall"},69490:v=>{v.exports="stop"},44157:v=>{v.exports="unlocked"},13271:v=>{v.exports="volume"},21577:(v,p,t)=>{v.exports={COMPLETE:t(28200),DECODED:t(43739),DECODED_ALL:t(41564),DESTROY:t(76021),DETUNE:t(81152),GLOBAL_DETUNE:t(84990),GLOBAL_MUTE:t(38279),GLOBAL_RATE:t(25337),GLOBAL_VOLUME:t(2326),LOOP:t(77169),LOOPED:t(20514),MUTE:t(83681),PAN:t(84889),PAUSE_ALL:t(49765),PAUSE:t(60772),PLAY:t(47900),RATE:t(23589),RESUME_ALL:t(92032),RESUME:t(72361),SEEK:t(68376),STOP_ALL:t(49792),STOP:t(69490),UNLOCKED:t(44157),VOLUME:t(13271)}},8081:(v,p,t)=>{var f=t(93912),i=t(69186),n=t(21577),l=t(2543),e=new i({Extends:f,initialize:function(a,r,u){if(u===void 0&&(u={}),this.tags=a.game.cache.audio.get(r),!this.tags)throw new Error('There is no audio asset with key "'+r+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,f.call(this,a,r,u)},play:function(a,r){return!(this.manager.isLocked(this,"play",[a,r])||!f.prototype.play.call(this,a,r)||!this.pickAndPlayAudioTag()||(this.emit(n.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!f.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!f.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(n.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!f.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var a=this.currentConfig.seek,r=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+a;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),r===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*r,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var a=0;a<this.tags.length;a++){var r=this.tags[a];if(r.dataset.used==="false")return r.dataset.used="true",this.audio=r,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(o){o.key===this.key&&o.audio&&u.push(o)},this),u.sort(function(o,h){return o.loop===h.loop?h.seek/h.duration-o.seek/o.duration:o.loop?1:-1});var s=u[0];return this.audio=s.audio,s.reset(),s.audio=null,s.startTime=0,s.previousTime=0,!0},playCatchPromise:function(){var a=this.audio.play();a&&a.catch(function(r){console.warn(r)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){f.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(a){if(this.isPlaying)if(this.startTime>0)this.startTime<a-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,a-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var r=this.currentMarker?this.currentMarker.start:0,u=r+this.duration,s=this.audio.currentTime;if(this.currentConfig.loop)s>=u-this.manager.loopEndOffset?(this.audio.currentTime=r+Math.max(0,s-u),s=this.audio.currentTime):s<r&&(this.audio.currentTime+=r,s=this.audio.currentTime),s<this.previousTime&&this.emit(n.LOOPED,this);else if(s>=u)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(n.COMPLETE,this);this.previousTime=s}},destroy:function(){f.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){f.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(a){this.currentConfig.mute=a,this.manager.isLocked(this,"mute",a)||(this.updateMute(),this.emit(n.MUTE,this,a))}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.currentConfig.volume},set:function(a){this.currentConfig.volume=a,this.manager.isLocked(this,"volume",a)||(this.updateVolume(),this.emit(n.VOLUME,this,a))}},setVolume:function(a){return this.volume=a,this},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,this.manager.isLocked(this,n.RATE,a)||(this.calculateRate(),this.emit(n.RATE,this,a))}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,this.manager.isLocked(this,n.DETUNE,a)||(this.calculateRate(),this.emit(n.DETUNE,this,a))}},setDetune:function(a){return this.detune=a,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.isLocked(this,"seek",a)||this.startTime>0||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.isPlaying?(this.previousTime=a,this.audio.currentTime=a):this.isPaused&&(this.currentConfig.seek=a),this.emit(n.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,this.manager.isLocked(this,"loop",a)||(this.audio&&(this.audio.loop=a),this.emit(n.LOOP,this,a))}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.currentConfig.pan},set:function(a){this.currentConfig.pan=a,this.emit(n.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});v.exports=e},13273:(v,p,t)=>{var f=t(84768),i=t(69186),n=t(21577),l=t(8081),e=new i({Extends:f,initialize:function(a){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,f.call(this,a)},add:function(a,r){var u=new l(this,a,r);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var a=this;if(this.game.cache.audio.entries.each(function(o,h){for(var c=0;c<h.length;c++)if(h[c].dataset.locked==="true")return a.locked=!0,!1;return!0}),this.locked){var r=!1,u=function(){r=!0},s=function(){if(r)r=!1;else{document.body.removeEventListener("touchmove",u),document.body.removeEventListener("touchend",s);var o=[];if(a.game.cache.audio.entries.each(function(c,d){for(var g=0;g<d.length;g++){var m=d[g];m.dataset.locked==="true"&&o.push(m)}return!0}),o.length!==0){var h=o[o.length-1];h.oncanplaythrough=function(){h.oncanplaythrough=null,o.forEach(function(c){c.dataset.locked="false"}),a.unlocked=!0},o.forEach(function(c){c.load()})}}};this.once(n.UNLOCKED,function(){for(this.forEachActiveSound(function(h){h.currentMarker===null&&h.duration===0&&(h.duration=h.tags[0].duration),h.totalDuration=h.tags[0].duration});this.lockedActionsQueue.length;){var o=this.lockedActionsQueue.shift();o.sound[o.prop].apply?o.sound[o.prop].apply(o.sound,o.value||[]):o.sound[o.prop]=o.value}},this),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",s,!1)}},onBlur:function(){this.forEachActiveSound(function(a){a.isPlaying&&(this.onBlurPausedSounds.push(a),a.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(a){a.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){f.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(a,r,u){return a.tags[0].dataset.locked==="true"&&(this.lockedActionsQueue.push({sound:a,prop:r,value:u}),!0)},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this._mute},set:function(a){this._mute=a,this.forEachActiveSound(function(r){r.updateMute()}),this.emit(n.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this._volume},set:function(a){this._volume=a,this.forEachActiveSound(function(r){r.updateVolume()}),this.emit(n.GLOBAL_VOLUME,this,a)}}});v.exports=e},84146:(v,p,t)=>{v.exports={SoundManagerCreator:t(72875),Events:t(21577),BaseSound:t(93912),BaseSoundManager:t(84768),WebAudioSound:t(34630),WebAudioSoundManager:t(36083),HTML5AudioSound:t(8081),HTML5AudioSoundManager:t(13273),NoAudioSound:t(56925),NoAudioSoundManager:t(35384)}},56925:(v,p,t)=>{var f=t(93912),i=t(69186),n=t(26729),l=t(72646),e=function(){return!1},a=function(){return this},r=new i({Extends:n,initialize:function(u,s,o){o===void 0&&(o={}),n.call(this),this.manager=u,this.key=s,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},o),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:e,updateMarker:e,removeMarker:function(){return null},play:e,pause:e,resume:e,stop:e,destroy:function(){f.prototype.destroy.call(this)},setMute:a,setVolume:a,setRate:a,setDetune:a,setSeek:a,setLoop:a,setPan:a});v.exports=r},35384:(v,p,t)=>{var f=t(84768),i=t(69186),n=t(26729),l=t(56925),e=t(45733),a=new i({Extends:n,initialize:function(r){n.call(this),this.game=r,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(r,u){var s=new l(this,r,u);return this.sounds.push(s),s},addAudioSprite:function(r,u){var s=this.add(r,u);return s.spritemap={},s},play:function(r,u){return!1},playAudioSprite:function(r,u,s){return!1},remove:function(r){return f.prototype.remove.call(this,r)},removeByKey:function(r){return f.prototype.removeByKey.call(this,r)},pauseAll:e,resumeAll:e,stopAll:e,update:e,setRate:e,setDetune:e,setMute:e,setVolume:e,forEachActiveSound:function(r,u){f.prototype.forEachActiveSound.call(this,r,u)},destroy:function(){f.prototype.destroy.call(this)}});v.exports=a},34630:(v,p,t)=>{var f=t(93912),i=t(69186),n=t(21577),l=new i({Extends:f,initialize:function(e,a,r){if(r===void 0&&(r={}),this.audioBuffer=e.game.cache.audio.get(a),!this.audioBuffer)throw new Error('Audio key "'+a+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=e.context.createGain(),this.volumeNode=e.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),e.context.createStereoPanner?(this.pannerNode=e.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(e.destination)):this.volumeNode.connect(e.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,f.call(this,e,a,r)},play:function(e,a){return!!f.prototype.play.call(this,e,a)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!f.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!f.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(n.RESUME,this),0))},stop:function(){return!!f.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0)},createAndStartBufferSource:function(){var e=this.currentConfig.seek,a=this.currentConfig.delay,r=this.manager.context.currentTime+a,u=(this.currentMarker?this.currentMarker.start:0)+e,s=this.duration-e;this.playTime=r-e,this.startTime=r,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,r),Math.max(0,u),Math.max(0,s)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),a=this.currentMarker?this.currentMarker.start:0,r=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,a),Math.max(0,r))},createBufferSource:function(){var e=this,a=this.manager.context.createBufferSource();return a.buffer=this.audioBuffer,a.connect(this.muteNode),a.onended=function(r){r.target===e.source&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},a},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),f.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,f.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){f.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){f.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,a=0;a<this.rateUpdates.length;a++)e+=((a<this.rateUpdates.length-1?this.rateUpdates[a+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[a].time)*this.rateUpdates[a].rate;return e},getLoopTime:function(){for(var e=0,a=0;a<this.rateUpdates.length-1;a++)e+=(this.rateUpdates[a+1].time-this.rateUpdates[a].time)*this.rateUpdates[a].rate;var r=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+r.time+(this.duration-e)/r.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(n.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(n.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(n.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(n.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(n.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(n.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});v.exports=l},36083:(v,p,t)=>{var f=t(39118),i=t(84768),n=t(69186),l=t(21577),e=t(24496),a=t(34630),r=new n({Extends:i,initialize:function(u){this.context=this.createAudioContext(u),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),i.call(this,u),this.locked&&u.isBooted?this.unlock():u.events.once(e.BOOT,this.unlock,this)},createAudioContext:function(u){var s=u.config.audio;return s.context?(s.context.resume(),s.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(u){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=u,this.masterMuteNode=u.createGain(),this.masterVolumeNode=u.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(u.destination),this.destination=this.masterMuteNode,this},add:function(u,s){var o=new a(this,u,s);return this.sounds.push(o),o},decodeAudio:function(u,s){var o;o=Array.isArray(u)?u:[{key:u,data:s}];for(var h=this.game.cache.audio,c=o.length,d=0;d<o.length;d++){var g=o[d],m=g.key,y=g.data;typeof y=="string"&&(y=f(y));var w=function(T,E){h.add(T,E),this.emit(l.DECODED,T),--c==0&&this.emit(l.DECODED_ALL)}.bind(this,m),x=function(T,E){console.error("Error decoding audio: "+T+" - ",E?E.message:""),--c==0&&this.emit(l.DECODED_ALL)}.bind(this,m);this.context.decodeAudioData(y,w,x)}},unlock:function(){var u=this,s=document.body,o=function h(){if(u.context&&s){var c=s.removeEventListener;u.context.resume().then(function(){c("touchstart",h),c("touchend",h),c("click",h),c("keydown",h),u.unlocked=!0},function(){c("touchstart",h),c("touchend",h),c("click",h),c("keydown",h)})}};s&&(s.addEventListener("touchstart",o,!1),s.addEventListener("touchend",o,!1),s.addEventListener("click",o,!1),s.addEventListener("keydown",o,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var u=this.context;u.state!=="suspended"&&u.state!=="interrupted"||this.locked||u.resume()},update:function(u,s){i.prototype.update.call(this,u,s);var o=this.context;o&&o.state==="interrupted"&&o.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var u=this;this.context.close().then(function(){u.context=null})}i.prototype.destroy.call(this)},setMute:function(u){return this.mute=u,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(u){this.masterMuteNode.gain.setValueAtTime(u?0:1,0),this.emit(l.GLOBAL_MUTE,this,u)}},setVolume:function(u){return this.volume=u,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(u){this.masterVolumeNode.gain.setValueAtTime(u,0),this.emit(l.GLOBAL_VOLUME,this,u)}}});v.exports=r},49469:(v,p,t)=>{var f=t(47205),i=t(69186),n=t(45733),l=t(46414),e=new i({initialize:function(a){this.parent=a,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(a,r){return r?f.Add(this.list,a):f.Add(this.list,a,0,this.addCallback,this)},addAt:function(a,r,u){return u?f.AddAt(this.list,a,r):f.AddAt(this.list,a,r,0,this.addCallback,this)},getAt:function(a){return this.list[a]},getIndex:function(a){return this.list.indexOf(a)},sort:function(a,r){return a?(r===void 0&&(r=function(u,s){return u[a]-s[a]}),l(this.list,r),this):this},getByName:function(a){return f.GetFirst(this.list,"name",a)},getRandom:function(a,r){return f.GetRandom(this.list,a,r)},getFirst:function(a,r,u,s){return f.GetFirst(this.list,a,r,u,s)},getAll:function(a,r,u,s){return f.GetAll(this.list,a,r,u,s)},count:function(a,r){return f.CountAllMatching(this.list,a,r)},swap:function(a,r){f.Swap(this.list,a,r)},moveTo:function(a,r){return f.MoveTo(this.list,a,r)},moveAbove:function(a,r){return f.MoveAbove(this.list,a,r)},moveBelow:function(a,r){return f.MoveBelow(this.list,a,r)},remove:function(a,r){return r?f.Remove(this.list,a):f.Remove(this.list,a,this.removeCallback,this)},removeAt:function(a,r){return r?f.RemoveAt(this.list,a):f.RemoveAt(this.list,a,this.removeCallback,this)},removeBetween:function(a,r,u){return u?f.RemoveBetween(this.list,a,r):f.RemoveBetween(this.list,a,r,this.removeCallback,this)},removeAll:function(a){for(var r=this.list.length;r--;)this.remove(this.list[r],a);return this},bringToTop:function(a){return f.BringToTop(this.list,a)},sendToBack:function(a){return f.SendToBack(this.list,a)},moveUp:function(a){return f.MoveUp(this.list,a),a},moveDown:function(a){return f.MoveDown(this.list,a),a},reverse:function(){return this.list.reverse(),this},shuffle:function(){return f.Shuffle(this.list),this},replace:function(a,r){return f.Replace(this.list,a,r)},exists:function(a){return this.list.indexOf(a)>-1},setAll:function(a,r,u,s){return f.SetAll(this.list,a,r,u,s),this},each:function(a,r){for(var u=[null],s=2;s<arguments.length;s++)u.push(arguments[s]);for(s=0;s<this.list.length;s++)u[0]=this.list[s],a.apply(r,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});v.exports=e},21342:(v,p,t)=>{var f=new(t(69186))({initialize:function(i){if(this.entries={},this.size=0,Array.isArray(i))for(var n=0;n<i.length;n++)this.set(i[n][0],i[n][1])},set:function(i,n){return this.has(i)||this.size++,this.entries[i]=n,this},get:function(i){if(this.has(i))return this.entries[i]},getArray:function(){var i=[],n=this.entries;for(var l in n)i.push(n[l]);return i},has:function(i){return this.entries.hasOwnProperty(i)},delete:function(i){return this.has(i)&&(delete this.entries[i],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(i){delete this.entries[i]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var i=[],n=this.entries;for(var l in n)i.push(n[l]);return i},dump:function(){var i=this.entries;for(var n in console.group("Map"),i)console.log(n,i[n]);console.groupEnd()},each:function(i){var n=this.entries;for(var l in n)if(i(l,n[l])===!1)break;return this},contains:function(i){var n=this.entries;for(var l in n)if(n[l]===i)return!0;return!1},merge:function(i,n){n===void 0&&(n=!1);var l=this.entries,e=i.entries;for(var a in e)l.hasOwnProperty(a)&&n?l[a]=e[a]:this.set(a,e[a]);return this}});v.exports=f},48547:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(71311),l=new f({Extends:i,initialize:function(){i.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(e){return this._pending.push(e),this._toProcess++,e},remove:function(e){return this._destroy.push(e),this._toProcess++,e},removeAll:function(){for(var e=this._active,a=this._destroy,r=e.length;r--;)a.push(e[r]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var e,a,r=this._destroy,u=this._active;for(e=0;e<r.length;e++){a=r[e];var s=u.indexOf(a);s!==-1&&(u.splice(s,1),this.emit(n.PROCESS_QUEUE_REMOVE,a))}for(r.length=0,r=this._pending,e=0;e<r.length;e++)a=r[e],(!this.checkQueue||this.checkQueue&&u.indexOf(a)===-1)&&(u.push(a),this.emit(n.PROCESS_QUEUE_ADD,a));return r.length=0,this._toProcess=0,u},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});v.exports=l},16632:(v,p,t)=>{var f=t(48885);function i(m){if(!(this instanceof i))return new i(m);this._maxEntries=Math.max(4,m||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function n(m,y,w){if(!w)return y.indexOf(m);for(var x=0;x<y.length;x++)if(w(m,y[x]))return x;return-1}function l(m,y){e(m,0,m.children.length,y,m)}function e(m,y,w,x,T){T||(T=d(null)),T.minX=1/0,T.minY=1/0,T.maxX=-1/0,T.maxY=-1/0;for(var E,S=y;S<w;S++)E=m.children[S],a(T,m.leaf?x(E):E);return T}function a(m,y){return m.minX=Math.min(m.minX,y.minX),m.minY=Math.min(m.minY,y.minY),m.maxX=Math.max(m.maxX,y.maxX),m.maxY=Math.max(m.maxY,y.maxY),m}function r(m,y){return m.minX-y.minX}function u(m,y){return m.minY-y.minY}function s(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function o(m){return m.maxX-m.minX+(m.maxY-m.minY)}function h(m,y){return m.minX<=y.minX&&m.minY<=y.minY&&y.maxX<=m.maxX&&y.maxY<=m.maxY}function c(m,y){return y.minX<=m.maxX&&y.minY<=m.maxY&&y.maxX>=m.minX&&y.maxY>=m.minY}function d(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(m,y,w,x,T){for(var E,S=[y,w];S.length;)(w=S.pop())-(y=S.pop())<=x||(E=y+Math.ceil((w-y)/x/2)*x,f(m,E,y,w,T),S.push(y,E,E,w))}i.prototype={all:function(){return this._all(this.data,[])},search:function(m){var y=this.data,w=[],x=this.toBBox;if(!c(m,y))return w;for(var T,E,S,C,A=[];y;){for(T=0,E=y.children.length;T<E;T++)S=y.children[T],c(m,C=y.leaf?x(S):S)&&(y.leaf?w.push(S):h(m,C)?this._all(S,w):A.push(S));y=A.pop()}return w},collides:function(m){var y=this.data,w=this.toBBox;if(!c(m,y))return!1;for(var x,T,E,S,C=[];y;){for(x=0,T=y.children.length;x<T;x++)if(E=y.children[x],c(m,S=y.leaf?w(E):E)){if(y.leaf||h(m,S))return!0;C.push(E)}y=C.pop()}return!1},load:function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var y=0,w=m.length;y<w;y++)this.insert(m[y]);return this}var x=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<x.height){var T=this.data;this.data=x,x=T}this._insert(x,this.data.height-x.height-1,!0)}else this.data=x;return this},insert:function(m){return m&&this._insert(m,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(m,y){if(!m)return this;for(var w,x,T,E,S=this.data,C=this.toBBox(m),A=[],M=[];S||A.length;){if(S||(S=A.pop(),x=A[A.length-1],w=M.pop(),E=!0),S.leaf&&(T=n(m,S.children,y))!==-1)return S.children.splice(T,1),A.push(S),this._condense(A),this;E||S.leaf||!h(S,C)?x?(w++,S=x.children[w],E=!1):S=null:(A.push(S),M.push(w),w=0,x=S,S=S.children[0])}return this},toBBox:function(m){return m},compareMinX:r,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(m){return this.data=m,this},_all:function(m,y){for(var w=[];m;)m.leaf?y.push.apply(y,m.children):w.push.apply(w,m.children),m=w.pop();return y},_build:function(m,y,w,x){var T,E=w-y+1,S=this._maxEntries;if(E<=S)return l(T=d(m.slice(y,w+1)),this.toBBox),T;x||(x=Math.ceil(Math.log(E)/Math.log(S)),S=Math.ceil(E/Math.pow(S,x-1))),(T=d([])).leaf=!1,T.height=x;var C,A,M,b,_=Math.ceil(E/S),P=_*Math.ceil(Math.sqrt(S));for(g(m,y,w,P,this.compareMinX),C=y;C<=w;C+=P)for(g(m,C,M=Math.min(C+P-1,w),_,this.compareMinY),A=C;A<=M;A+=_)b=Math.min(A+_-1,M),T.children.push(this._build(m,A,b,x-1));return l(T,this.toBBox),T},_chooseSubtree:function(m,y,w,x){for(var T,E,S,C,A,M,b,_,P,L;x.push(y),!y.leaf&&x.length-1!==w;){for(b=_=1/0,T=0,E=y.children.length;T<E;T++)A=s(S=y.children[T]),P=m,L=S,(M=(Math.max(L.maxX,P.maxX)-Math.min(L.minX,P.minX))*(Math.max(L.maxY,P.maxY)-Math.min(L.minY,P.minY))-A)<_?(_=M,b=A<b?A:b,C=S):M===_&&A<b&&(b=A,C=S);y=C||y.children[0]}return y},_insert:function(m,y,w){var x=this.toBBox,T=w?m:x(m),E=[],S=this._chooseSubtree(T,this.data,y,E);for(S.children.push(m),a(S,T);y>=0&&E[y].children.length>this._maxEntries;)this._split(E,y),y--;this._adjustParentBBoxes(T,E,y)},_split:function(m,y){var w=m[y],x=w.children.length,T=this._minEntries;this._chooseSplitAxis(w,T,x);var E=this._chooseSplitIndex(w,T,x),S=d(w.children.splice(E,w.children.length-E));S.height=w.height,S.leaf=w.leaf,l(w,this.toBBox),l(S,this.toBBox),y?m[y-1].children.push(S):this._splitRoot(w,S)},_splitRoot:function(m,y){this.data=d([m,y]),this.data.height=m.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(m,y,w){var x,T,E,S,C,A,M,b,_,P,L,F,D,k;for(A=M=1/0,x=y;x<=w-y;x++)_=T=e(m,0,x,this.toBBox),P=E=e(m,x,w,this.toBBox),L=Math.max(_.minX,P.minX),F=Math.max(_.minY,P.minY),D=Math.min(_.maxX,P.maxX),k=Math.min(_.maxY,P.maxY),S=Math.max(0,D-L)*Math.max(0,k-F),C=s(T)+s(E),S<A?(A=S,b=x,M=C<M?C:M):S===A&&C<M&&(M=C,b=x);return b},_chooseSplitAxis:function(m,y,w){var x=m.leaf?this.compareMinX:r,T=m.leaf?this.compareMinY:u;this._allDistMargin(m,y,w,x)<this._allDistMargin(m,y,w,T)&&m.children.sort(x)},_allDistMargin:function(m,y,w,x){m.children.sort(x);var T,E,S=this.toBBox,C=e(m,0,y,S),A=e(m,w-y,w,S),M=o(C)+o(A);for(T=y;T<w-y;T++)E=m.children[T],a(C,m.leaf?S(E):E),M+=o(C);for(T=w-y-1;T>=y;T--)E=m.children[T],a(A,m.leaf?S(E):E),M+=o(A);return M},_adjustParentBBoxes:function(m,y,w){for(var x=w;x>=0;x--)a(y[x],m)},_condense:function(m){for(var y,w=m.length-1;w>=0;w--)m[w].children.length===0?w>0?(y=m[w-1].children).splice(y.indexOf(m[w]),1):this.clear():l(m[w],this.toBBox)},compareMinX:function(m,y){return m.left-y.left},compareMinY:function(m,y){return m.top-y.top},toBBox:function(m){return{minX:m.left,minY:m.top,maxX:m.right,maxY:m.bottom}}},v.exports=i},96609:(v,p,t)=>{var f=new(t(69186))({initialize:function(i){if(this.entries=[],Array.isArray(i))for(var n=0;n<i.length;n++)this.set(i[n])},set:function(i){return this.entries.indexOf(i)===-1&&this.entries.push(i),this},get:function(i,n){for(var l=0;l<this.entries.length;l++){var e=this.entries[l];if(e[i]===n)return e}},getArray:function(){return this.entries.slice(0)},delete:function(i){var n=this.entries.indexOf(i);return n>-1&&this.entries.splice(n,1),this},dump:function(){console.group("Set");for(var i=0;i<this.entries.length;i++){var n=this.entries[i];console.log(n)}console.groupEnd()},each:function(i,n){var l,e=this.entries.slice(),a=e.length;if(n)for(l=0;l<a&&i.call(n,e[l],l)!==!1;l++);else for(l=0;l<a&&i(e[l],l)!==!1;l++);return this},iterate:function(i,n){var l,e=this.entries.length;if(n)for(l=0;l<e&&i.call(n,this.entries[l],l)!==!1;l++);else for(l=0;l<e&&i(this.entries[l],l)!==!1;l++);return this},iterateLocal:function(i){var n,l=[];for(n=1;n<arguments.length;n++)l.push(arguments[n]);var e=this.entries.length;for(n=0;n<e;n++){var a=this.entries[n];a[i].apply(a,l)}return this},clear:function(){return this.entries.length=0,this},contains:function(i){return this.entries.indexOf(i)>-1},union:function(i){var n=new f;return i.entries.forEach(function(l){n.set(l)}),this.entries.forEach(function(l){n.set(l)}),n},intersect:function(i){var n=new f;return this.entries.forEach(function(l){i.contains(l)&&n.set(l)}),n},difference:function(i){var n=new f;return this.entries.forEach(function(l){i.contains(l)||n.set(l)}),n},size:{get:function(){return this.entries.length},set:function(i){return i<this.entries.length?this.entries.length=i:this.entries.length}}});v.exports=f},54762:(v,p,t)=>{var f=t(2543),i=t(69186),n=t(99e3),l=t(17321),e=new i({initialize:function(a,r,u,s){a===void 0&&(a=0),r===void 0&&(r=a),u===void 0&&(u=0),s===void 0&&(s=null),this._width=a,this._height=r,this._parent=s,this.aspectMode=u,this.aspectRatio=r===0?1:a/r,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function(a){return a===void 0&&(a=0),this.aspectMode=a,this.setSize(this._width,this._height)},setSnap:function(a,r){return a===void 0&&(a=0),r===void 0&&(r=a),this.snapTo.set(a,r),this.setSize(this._width,this._height)},setParent:function(a){return this._parent=a,this.setSize(this._width,this._height)},setMin:function(a,r){return a===void 0&&(a=0),r===void 0&&(r=a),this.minWidth=f(a,0,this.maxWidth),this.minHeight=f(r,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(a,r){return a===void 0&&(a=Number.MAX_VALUE),r===void 0&&(r=a),this.maxWidth=f(a,this.minWidth,Number.MAX_VALUE),this.maxHeight=f(r,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(a,r){switch(a===void 0&&(a=0),r===void 0&&(r=a),this.aspectMode){case e.NONE:this._width=this.getNewWidth(n(a,this.snapTo.x)),this._height=this.getNewHeight(n(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case e.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(a,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case e.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(r,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case e.FIT:this.constrain(a,r,!0);break;case e.ENVELOP:this.constrain(a,r,!1)}return this},setAspectRatio:function(a){return this.aspectRatio=a,this.setSize(this._width,this._height)},resize:function(a,r){return this._width=this.getNewWidth(n(a,this.snapTo.x)),this._height=this.getNewHeight(n(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(a,r){return r===void 0&&(r=!0),a=f(a,this.minWidth,this.maxWidth),r&&this._parent&&a>this._parent.width&&(a=Math.max(this.minWidth,this._parent.width)),a},getNewHeight:function(a,r){return r===void 0&&(r=!0),a=f(a,this.minHeight,this.maxHeight),r&&this._parent&&a>this._parent.height&&(a=Math.max(this.minHeight,this._parent.height)),a},constrain:function(a,r,u){a===void 0&&(a=0),r===void 0&&(r=a),u===void 0&&(u=!0),a=this.getNewWidth(a),r=this.getNewHeight(r);var s=this.snapTo,o=r===0?1:a/r;return u&&this.aspectRatio>o||!u&&this.aspectRatio<o?(r=(a=n(a,s.x))/this.aspectRatio,s.y>0&&(a=(r=n(r,s.y))*this.aspectRatio)):(u&&this.aspectRatio<o||!u&&this.aspectRatio>o)&&(a=(r=n(r,s.y))*this.aspectRatio,s.x>0&&(r=(a=n(a,s.x))*(1/this.aspectRatio))),this._width=a,this._height=r,this},fitTo:function(a,r){return this.constrain(a,r,!0)},envelop:function(a,r){return this.constrain(a,r,!1)},setWidth:function(a){return this.setSize(a,this._height)},setHeight:function(a){return this.setSize(this._width,a)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(a){a&&a.style&&(a.style.width=this._width+"px",a.style.height=this._height+"px")},copy:function(a){return a.setAspectMode(this.aspectMode),a.aspectRatio=this.aspectRatio,a.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(a){this.setSize(a,this._height)}},height:{get:function(){return this._height},set:function(a){this.setSize(this._width,a)}}});e.NONE=0,e.WIDTH_CONTROLS_HEIGHT=1,e.HEIGHT_CONTROLS_WIDTH=2,e.FIT=3,e.ENVELOP=4,v.exports=e},91236:v=>{v.exports="add"},3016:v=>{v.exports="remove"},71311:(v,p,t)=>{v.exports={PROCESS_QUEUE_ADD:t(91236),PROCESS_QUEUE_REMOVE:t(3016)}},21466:(v,p,t)=>{v.exports={Events:t(71311),List:t(49469),Map:t(21342),ProcessQueue:t(48547),RTree:t(16632),Set:t(96609),Size:t(54762)}},26080:(v,p,t)=>{var f=t(69186),i=t(2543),n=t(13499),l=t(11318),e=t(58655),a=t(84637),r=new f({Extends:a,initialize:function(u,s,o,h,c){a.call(this,u,s,o,h,c),this.add("__BASE",0,0,0,h,c),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=h,this.height=c,this.imageData=this.context.getImageData(0,0,h,c),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function(u,s,o){return this.context.drawImage(o,u,s),this.update()},drawFrame:function(u,s,o,h){o===void 0&&(o=0),h===void 0&&(h=0);var c=this.manager.getFrame(u,s);if(c){var d=c.canvasData,g=c.cutWidth,m=c.cutHeight,y=c.source.resolution;return this.context.drawImage(c.source.image,d.x,d.y,g,m,o,h,g/y,m/y),this.update()}return this},setPixel:function(u,s,o,h,c,d){if(d===void 0&&(d=255),u=Math.abs(Math.floor(u)),s=Math.abs(Math.floor(s)),this.getIndex(u,s)>-1){var g=this.context.getImageData(u,s,1,1);g.data[0]=o,g.data[1]=h,g.data[2]=c,g.data[3]=d,this.context.putImageData(g,u,s)}return this},putData:function(u,s,o,h,c,d,g){return h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=u.width),g===void 0&&(g=u.height),this.context.putImageData(u,s,o,h,c,d,g),this},getData:function(u,s,o,h){return u=i(Math.floor(u),0,this.width-1),s=i(Math.floor(s),0,this.height-1),o=i(o,1,this.width-u),h=i(h,1,this.height-s),this.context.getImageData(u,s,o,h)},getPixel:function(u,s,o){o||(o=new n);var h=this.getIndex(u,s);if(h>-1){var c=this.data,d=c[h+0],g=c[h+1],m=c[h+2],y=c[h+3];o.setTo(d,g,m,y)}return o},getPixels:function(u,s,o,h){u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=this.width),h===void 0&&(h=o),u=Math.abs(Math.round(u)),s=Math.abs(Math.round(s));for(var c=i(u,0,this.width),d=i(u+o,0,this.width),g=i(s,0,this.height),m=i(s+h,0,this.height),y=new n,w=[],x=g;x<m;x++){for(var T=[],E=c;E<d;E++)y=this.getPixel(E,x,y),T.push({x:E,y:x,color:y.color,alpha:y.alphaGL});w.push(T)}return w},getIndex:function(u,s){return u=Math.abs(Math.round(u)),s=Math.abs(Math.round(s)),u<this.width&&s<this.height?4*(u+s*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,s,o,h){return u===void 0&&(u=0),s===void 0&&(s=0),o===void 0&&(o=this.width),h===void 0&&(h=this.height),this.context.clearRect(u,s,o,h),this.update()},setSize:function(u,s){return s===void 0&&(s=u),u===this.width&&s===this.height||(this.canvas.width=u,this.canvas.height=s,this._source.width=u,this._source.height=s,this._source.isPowerOf2=e(u,s),this.frames.__BASE.setSize(u,s,0,0),this.width=u,this.height=s,this.refresh()),this},destroy:function(){a.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});v.exports=r},79175:(v,p,t)=>{var f=t(69186),i=t(2543),n=t(72646),l=new f({initialize:function(e,a,r,u,s,o,h){this.texture=e,this.name=a,this.source=e.source[r],this.sourceIndex=r,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(o,h,u,s)},setSize:function(e,a,r,u){r===void 0&&(r=0),u===void 0&&(u=0),this.cutX=r,this.cutY=u,this.cutWidth=e,this.cutHeight=a,this.width=e,this.height=a,this.halfWidth=Math.floor(.5*e),this.halfHeight=Math.floor(.5*a),this.centerX=Math.floor(e/2),this.centerY=Math.floor(a/2);var s=this.data,o=s.cut;o.x=r,o.y=u,o.w=e,o.h=a,o.r=r+e,o.b=u+a,s.sourceSize.w=e,s.sourceSize.h=a,s.spriteSourceSize.w=e,s.spriteSourceSize.h=a,s.radius=.5*Math.sqrt(e*e+a*a);var h=s.drawImage;return h.x=r,h.y=u,h.width=e,h.height=a,this.updateUVs()},setTrim:function(e,a,r,u,s,o){var h=this.data,c=h.spriteSourceSize;return h.trim=!0,h.sourceSize.w=e,h.sourceSize.h=a,c.x=r,c.y=u,c.w=s,c.h=o,c.r=r+s,c.b=u+o,this.x=r,this.y=u,this.width=s,this.height=o,this.halfWidth=.5*s,this.halfHeight=.5*o,this.centerX=Math.floor(s/2),this.centerY=Math.floor(o/2),this.updateUVs()},setCropUVs:function(e,a,r,u,s,o,h){var c=this.cutX,d=this.cutY,g=this.cutWidth,m=this.cutHeight,y=this.realWidth,w=this.realHeight,x=c+(a=i(a,0,y)),T=d+(r=i(r,0,w)),E=u=i(u,0,y-a),S=s=i(s,0,w-r),C=this.data;if(C.trim){var A=C.spriteSourceSize,M=a+(u=i(u,0,g-a)),b=r+(s=i(s,0,m-r));if(A.r<a||A.b<r||A.x>M||A.y>b)x=0,T=0,E=0,S=0;else{var _=Math.max(A.x,a),P=Math.max(A.y,r),L=Math.min(A.r,M)-_,F=Math.min(A.b,b)-P;E=L,S=F,x=o?c+(g-(_-A.x)-L):c+(_-A.x),T=h?d+(m-(P-A.y)-F):d+(P-A.y),a=_,r=P,u=L,s=F}}else o&&(x=c+(g-a-u)),h&&(T=d+(m-r-s));var D=this.source.width,k=this.source.height;return e.u0=Math.max(0,x/D),e.v0=Math.max(0,T/k),e.u1=Math.min(1,(x+E)/D),e.v1=Math.min(1,(T+S)/k),e.x=a,e.y=r,e.cx=x,e.cy=T,e.cw=E,e.ch=S,e.width=u,e.height=s,e.flipX=o,e.flipY=h,e},updateCropUVs:function(e,a,r){return this.setCropUVs(e,e.x,e.y,e.width,e.height,a,r)},setUVs:function(e,a,r,u,s,o){var h=this.data.drawImage;return h.width=e,h.height=a,this.u0=r,this.v0=u,this.u1=s,this.v1=o,this},updateUVs:function(){var e=this.cutX,a=this.cutY,r=this.cutWidth,u=this.cutHeight,s=this.data.drawImage;s.width=r,s.height=u;var o=this.source.width,h=this.source.height;return this.u0=e/o,this.v0=a/h,this.u1=(e+r)/o,this.v1=(a+u)/h,this},updateUVsInverted:function(){var e=this.source.width,a=this.source.height;return this.u0=(this.cutX+this.cutHeight)/e,this.v0=this.cutY/a,this.u1=this.cutX/e,this.v1=(this.cutY+this.cutWidth)/a,this},clone:function(){var e=new l(this.texture,this.name,this.sourceIndex);return e.cutX=this.cutX,e.cutY=this.cutY,e.cutWidth=this.cutWidth,e.cutHeight=this.cutHeight,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.halfWidth=this.halfWidth,e.halfHeight=this.halfHeight,e.centerX=this.centerX,e.centerY=this.centerY,e.rotated=this.rotated,e.data=n(!0,e.data,this.data),e.updateUVs(),e},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});v.exports=l},84637:(v,p,t)=>{var f=t(11318),i=t(69186),n=t(79175),l=t(10638),e="Texture.frame missing: ",a=new i({initialize:function(r,u,s,o,h){Array.isArray(s)||(s=[s]),this.manager=r,this.key=u,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var c=0;c<s.length;c++)this.source.push(new l(this,s[c],o,h))},add:function(r,u,s,o,h,c){if(this.has(r))return null;var d=new n(this,r,u,s,o,h,c);return this.frames[r]=d,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,d},remove:function(r){return!!this.has(r)&&(this.get(r).destroy(),delete this.frames[r],!0)},has:function(r){return this.frames[r]},get:function(r){r||(r=this.firstFrame);var u=this.frames[r];return u||(console.warn(e+r),u=this.frames[this.firstFrame]),u},getTextureSourceIndex:function(r){for(var u=0;u<this.source.length;u++)if(this.source[u]===r)return u;return-1},getFramesFromTextureSource:function(r,u){u===void 0&&(u=!1);var s=[];for(var o in this.frames)if(o!=="__BASE"||u){var h=this.frames[o];h.sourceIndex===r&&s.push(h)}return s},getFrameNames:function(r){r===void 0&&(r=!1);var u=Object.keys(this.frames);if(!r){var s=u.indexOf("__BASE");s!==-1&&u.splice(s,1)}return u},getSourceImage:function(r){r!=null&&this.frameTotal!==1||(r="__BASE");var u=this.frames[r];return u?u.source.image:(console.warn(e+r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){r!=null&&this.frameTotal!==1||(r="__BASE");var u,s=this.frames[r];return s?u=s.sourceIndex:(console.warn(e+r),u=this.frames.__BASE.sourceIndex),this.dataSource[u].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++){var s=this.source[u];this.dataSource.push(new l(this,r[u],s.width,s.height))}},setFilter:function(r){var u;for(u=0;u<this.source.length;u++)this.source[u].setFilter(r);for(u=0;u<this.dataSource.length;u++)this.dataSource[u].setFilter(r)},destroy:function(){var r;for(r=0;r<this.source.length;r++)this.source[r].destroy();for(r=0;r<this.dataSource.length;r++)this.dataSource[r].destroy();for(var u in this.frames)this.frames[u].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var s=this.manager.game.renderer;s&&s.type===f.WEBGL&&s.resetTextures(!0),this.manager=null}});v.exports=a},64138:(v,p,t)=>{var f=t(55579),i=t(26080),n=t(69186),l=t(13499),e=t(11318),a=t(26729),r=t(61632),u=t(24496),s=t(48819),o=t(76076),h=t(59155),c=t(84637),d=new n({Extends:a,initialize:function(g){a.call(this),this.game=g,this.name="TextureManager",this.list={},this._tempCanvas=f.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,g.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(r.LOAD,this.updatePending,this),this.on(r.ERROR,this.updatePending,this);var g=this.game.config;this.addBase64("__DEFAULT",g.defaultImage),this.addBase64("__MISSING",g.missingImage),this.addBase64("__WHITE",g.whiteImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(r.LOAD),this.off(r.ERROR),this.emit(r.READY))},checkKey:function(g){return!this.exists(g)||(console.error("Texture key already in use: "+g),!1)},remove:function(g){if(typeof g=="string"){if(!this.exists(g))return console.warn("No texture found matching key: "+g),this;g=this.get(g)}return this.list.hasOwnProperty(g.key)&&(g.destroy(),this.emit(r.REMOVE,g.key)),this},removeKey:function(g){return this.list.hasOwnProperty(g)&&delete this.list[g],this},addBase64:function(g,m){if(this.checkKey(g)){var y=this,w=new Image;w.onerror=function(){y.emit(r.ERROR,g)},w.onload=function(){var x=y.create(g,w);h.Image(x,0),y.emit(r.ADD,g,x),y.emit(r.LOAD,g,x)},w.src=m}return this},getBase64:function(g,m,y,w){y===void 0&&(y="image/png"),w===void 0&&(w=.92);var x="",T=this.getFrame(g,m);if(T&&(T.source.isRenderTexture||T.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(T){var E=T.canvasData,S=f.create2D(this,E.width,E.height);S.getContext("2d").drawImage(T.source.image,E.x,E.y,E.width,E.height,0,0,E.width,E.height),x=S.toDataURL(y,w),f.remove(S)}return x},addImage:function(g,m,y){var w=null;return this.checkKey(g)&&(w=this.create(g,m),h.Image(w,0),y&&w.setDataSource(y),this.emit(r.ADD,g,w)),w},addGLTexture:function(g,m,y,w){var x=null;return this.checkKey(g)&&(y===void 0&&(y=m.width),w===void 0&&(w=m.height),(x=this.create(g,m,y,w)).add("__BASE",0,0,0,y,w),this.emit(r.ADD,g,x)),x},addRenderTexture:function(g,m){var y=null;return this.checkKey(g)&&((y=this.create(g,m)).add("__BASE",0,0,0,m.width,m.height),this.emit(r.ADD,g,y)),y},generate:function(g,m){if(this.checkKey(g)){var y=f.create(this,1,1);return m.canvas=y,s(m),this.addCanvas(g,y)}return null},createCanvas:function(g,m,y){if(m===void 0&&(m=256),y===void 0&&(y=256),this.checkKey(g)){var w=f.create(this,m,y,e.CANVAS,!0);return this.addCanvas(g,w)}return null},addCanvas:function(g,m,y){y===void 0&&(y=!1);var w=null;return y?w=new i(this,g,m,m.width,m.height):this.checkKey(g)&&(w=new i(this,g,m,m.width,m.height),this.list[g]=w,this.emit(r.ADD,g,w)),w},addAtlas:function(g,m,y,w){return Array.isArray(y.textures)||Array.isArray(y.frames)?this.addAtlasJSONArray(g,m,y,w):this.addAtlasJSONHash(g,m,y,w)},addAtlasJSONArray:function(g,m,y,w){var x=null;if(this.checkKey(g)){if(x=this.create(g,m),Array.isArray(y))for(var T=y.length===1,E=0;E<x.source.length;E++){var S=T?y[0]:y[E];h.JSONArray(x,E,S)}else h.JSONArray(x,0,y);w&&x.setDataSource(w),this.emit(r.ADD,g,x)}return x},addAtlasJSONHash:function(g,m,y,w){var x=null;if(this.checkKey(g)){if(x=this.create(g,m),Array.isArray(y))for(var T=0;T<y.length;T++)h.JSONHash(x,T,y[T]);else h.JSONHash(x,0,y);w&&x.setDataSource(w),this.emit(r.ADD,g,x)}return x},addAtlasXML:function(g,m,y,w){var x=null;return this.checkKey(g)&&(x=this.create(g,m),h.AtlasXML(x,0,y),w&&x.setDataSource(w),this.emit(r.ADD,g,x)),x},addUnityAtlas:function(g,m,y,w){var x=null;return this.checkKey(g)&&(x=this.create(g,m),h.UnityYAML(x,0,y),w&&x.setDataSource(w),this.emit(r.ADD,g,x)),x},addSpriteSheet:function(g,m,y){var w=null;if(this.checkKey(g)){var x=(w=this.create(g,m)).source[0].width,T=w.source[0].height;h.SpriteSheet(w,0,0,0,x,T,y),this.emit(r.ADD,g,w)}return w},addSpriteSheetFromAtlas:function(g,m){if(!this.checkKey(g))return null;var y=o(m,"atlas",null),w=o(m,"frame",null);if(y&&w){var x=this.get(y).get(w);if(x){var T=this.create(g,x.source.image);return x.trimmed?h.SpriteSheetFromAtlas(T,x,m):h.SpriteSheet(T,0,x.cutX,x.cutY,x.cutWidth,x.cutHeight,m),this.emit(r.ADD,g,T),T}}},create:function(g,m,y,w){var x=null;return this.checkKey(g)&&(x=new c(this,g,m,y,w),this.list[g]=x),x},exists:function(g){return this.list.hasOwnProperty(g)},get:function(g){return g===void 0&&(g="__DEFAULT"),this.list[g]?this.list[g]:g instanceof c?g:this.list.__MISSING},cloneFrame:function(g,m){if(this.list[g])return this.list[g].get(m).clone()},getFrame:function(g,m){if(this.list[g])return this.list[g].get(m)},getTextureKeys:function(){var g=[];for(var m in this.list)m!=="__DEFAULT"&&m!=="__MISSING"&&g.push(m);return g},getPixel:function(g,m,y,w){var x=this.getFrame(y,w);if(x){g-=x.x,m-=x.y;var T=x.data.cut;if(g+=T.x,m+=T.y,g>=T.x&&g<T.r&&m>=T.y&&m<T.b){var E=this._tempContext;E.clearRect(0,0,1,1),E.drawImage(x.source.image,g,m,1,1,0,0,1,1);var S=E.getImageData(0,0,1,1);return new l(S.data[0],S.data[1],S.data[2],S.data[3])}}return null},getPixelAlpha:function(g,m,y,w){var x=this.getFrame(y,w);if(x){g-=x.x,m-=x.y;var T=x.data.cut;if(g+=T.x,m+=T.y,g>=T.x&&g<T.r&&m>=T.y&&m<T.b){var E=this._tempContext;return E.clearRect(0,0,1,1),E.drawImage(x.source.image,g,m,1,1,0,0,1,1),E.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(g,m,y){return this.list[m]&&(g.texture=this.list[m],g.frame=g.texture.get(y)),g},renameTexture:function(g,m){var y=this.get(g);return!(!y||g===m||(y.key=m,this.list[m]=y,delete this.list[g],0))},each:function(g,m){for(var y=[null],w=1;w<arguments.length;w++)y.push(arguments[w]);for(var x in this.list)y[0]=this.list[x],g.apply(m,y)},destroy:function(){for(var g in this.list)this.list[g].destroy();this.list={},this.game=null,f.remove(this._tempCanvas)}});v.exports=d},10638:(v,p,t)=>{var f=t(55579),i=t(69186),n=t(58655),l=t(29718),e=new i({initialize:function(a,r,u,s,o){o===void 0&&(o=!1);var h=a.manager.game;this.renderer=h.renderer,this.texture=a,this.source=r,this.image=r,this.compressionAlgorithm=null,this.resolution=1,this.width=u||r.naturalWidth||r.videoWidth||r.width||0,this.height=s||r.naturalHeight||r.videoHeight||r.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=r instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&r instanceof HTMLVideoElement,this.isRenderTexture=r.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&r instanceof WebGLTexture,this.isPowerOf2=n(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=o,this.init(h)},init:function(a){var r=this.renderer;r&&(r.gl?this.isCanvas?this.glTexture=r.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=r.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=r.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=r.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),a.config.antialias||this.setFilter(1)},setFilter:function(a){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,a),this.scaleMode=a},setFlipY:function(a){return a===void 0&&(a=!0),this.flipY=a,this},update:function(){var a=this.renderer.gl;a&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):a&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&f.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});v.exports=e},65794:v=>{v.exports={LINEAR:0,NEAREST:1}},97648:v=>{v.exports="addtexture"},84554:v=>{v.exports="onerror"},75990:v=>{v.exports="onload"},43859:v=>{v.exports="ready"},28996:v=>{v.exports="removetexture"},61632:(v,p,t)=>{v.exports={ADD:t(97648),ERROR:t(84554),LOAD:t(75990),READY:t(43859),REMOVE:t(28996)}},91003:(v,p,t)=>{var f=t(72646),i=t(65794),n={CanvasTexture:t(26080),Events:t(61632),FilterMode:i,Frame:t(79175),Parsers:t(59155),Texture:t(84637),TextureManager:t(64138),TextureSource:t(10638)};n=f(!1,n,i),v.exports=n},58196:v=>{v.exports=function(p,t,f){if(f.getElementsByTagName("TextureAtlas")){var i=p.source[t];p.add("__BASE",t,0,0,i.width,i.height);for(var n,l=f.getElementsByTagName("SubTexture"),e=0;e<l.length;e++){var a=l[e].attributes,r=a.name.value,u=parseInt(a.x.value,10),s=parseInt(a.y.value,10),o=parseInt(a.width.value,10),h=parseInt(a.height.value,10);if(n=p.add(r,t,u,s,o,h),a.frameX){var c=Math.abs(parseInt(a.frameX.value,10)),d=Math.abs(parseInt(a.frameY.value,10)),g=parseInt(a.frameWidth.value,10),m=parseInt(a.frameHeight.value,10);n.setTrim(o,h,c,d,g,m)}}return p}console.warn("Invalid Texture Atlas XML given")}},91712:v=>{v.exports=function(p,t){var f=p.source[t];return p.add("__BASE",t,0,0,f.width,f.height),p}},83771:v=>{v.exports=function(p,t){var f=p.source[t];return p.add("__BASE",t,0,0,f.width,f.height),p}},82157:(v,p,t)=>{var f=t(98409);v.exports=function(i,n,l){if(l.frames||l.textures){var e=i.source[n];i.add("__BASE",n,0,0,e.width,e.height);for(var a,r=Array.isArray(l.textures)?l.textures[n].frames:l.frames,u=0;u<r.length;u++){var s=r[u];a=i.add(s.filename,n,s.frame.x,s.frame.y,s.frame.w,s.frame.h),s.trimmed&&a.setTrim(s.sourceSize.w,s.sourceSize.h,s.spriteSourceSize.x,s.spriteSourceSize.y,s.spriteSourceSize.w,s.spriteSourceSize.h),s.rotated&&(a.rotated=!0,a.updateUVsInverted());var o=s.anchor||s.pivot;o&&(a.customPivot=!0,a.pivotX=o.x,a.pivotY=o.y),a.customData=f(s)}for(var h in l)h!=="frames"&&(Array.isArray(l[h])?i.customData[h]=l[h].slice(0):i.customData[h]=l[h]);return i}console.warn("Invalid Texture Atlas JSON Array")}},75954:(v,p,t)=>{var f=t(98409);v.exports=function(i,n,l){if(l.frames){var e=i.source[n];i.add("__BASE",n,0,0,e.width,e.height);var a,r=l.frames;for(var u in r)if(r.hasOwnProperty(u)){var s=r[u];a=i.add(u,n,s.frame.x,s.frame.y,s.frame.w,s.frame.h),s.trimmed&&a.setTrim(s.sourceSize.w,s.sourceSize.h,s.spriteSourceSize.x,s.spriteSourceSize.y,s.spriteSourceSize.w,s.spriteSourceSize.h),s.rotated&&(a.rotated=!0,a.updateUVsInverted());var o=s.anchor||s.pivot;o&&(a.customPivot=!0,a.pivotX=o.x,a.pivotY=o.y),a.customData=f(s)}for(var h in l)h!=="frames"&&(Array.isArray(l[h])?i.customData[h]=l[h].slice(0):i.customData[h]=l[h]);return i}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},11576:(v,p,t)=>{var f=t(25738);v.exports=function(i,n,l,e,a,r,u){var s=f(u,"frameWidth",null),o=f(u,"frameHeight",s);if(s===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var h=i.source[n];i.add("__BASE",n,0,0,h.width,h.height);var c=f(u,"startFrame",0),d=f(u,"endFrame",-1),g=f(u,"margin",0),m=f(u,"spacing",0),y=Math.floor((a-g+m)/(s+m))*Math.floor((r-g+m)/(o+m));y===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",i.key),(c>y||c<-y)&&(c=0),c<0&&(c=y+c),d!==-1&&(y=c+(d+1));for(var w=g,x=g,T=0,E=0,S=0;S<y;S++){T=0,E=0;var C=w+s,A=x+o;C>a&&(T=C-a),A>r&&(E=A-r),i.add(S,n,l+w,e+x,s-T,o-E),(w+=s+m)+s>a&&(w=g,x+=o+m)}return i}},78269:(v,p,t)=>{var f=t(25738);v.exports=function(i,n,l){var e=f(l,"frameWidth",null),a=f(l,"frameHeight",e);if(!e)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var r=i.source[0];i.add("__BASE",0,0,0,r.width,r.height);var u;f(l,"startFrame",0),f(l,"endFrame",-1);for(var s=f(l,"margin",0),o=f(l,"spacing",0),h=n.cutX,c=n.cutY,d=n.cutWidth,g=n.cutHeight,m=n.realWidth,y=n.realHeight,w=Math.floor((m-s+o)/(e+o)),x=Math.floor((y-s+o)/(a+o)),T=n.x,E=e-T,S=e-(m-d-T),C=n.y,A=a-C,M=a-(y-g-C),b=s,_=s,P=0,L=n.sourceIndex,F=0;F<x;F++){for(var D=F===0,k=F===x-1,R=0;R<w;R++){var O=R===0,B=R===w-1;if(u=i.add(P,L,h+b,c+_,e,a),O||D||B||k){var U=O?T:0,I=D?C:0,Y=0,N=0;O&&(Y+=e-E),B&&(Y+=e-S),D&&(N+=a-A),k&&(N+=a-M);var X=e-Y,z=a-N;u.cutWidth=X,u.cutHeight=z,u.setTrim(e,a,U,I,X,z)}b+=o,b+=O?E:B?S:e,P++}b=s,_+=o,_+=D?A:k?M:a}return i}},38869:v=>{var p=0,t=function(f,i,n,l){var e=p-l.y-l.height;f.add(n,i,l.x,e,l.width,l.height)};v.exports=function(f,i,n){var l=f.source[i];f.add("__BASE",i,0,0,l.width,l.height),p=l.height;for(var e=n.split(`
`),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,r="",u="",s={x:0,y:0,width:0,height:0},o=0;o<e.length;o++){var h=e[o].match(a);if(h){var c=h[1]==="- ",d=h[2],g=h[3];if(c&&(u!==r&&(t(f,i,u,s),r=u),s={x:0,y:0,width:0,height:0}),d!=="name")switch(d){case"x":case"y":case"width":case"height":s[d]=parseInt(g,10)}else u=g}}return u!==r&&t(f,i,u,s),f}},59155:(v,p,t)=>{v.exports={AtlasXML:t(58196),Canvas:t(91712),Image:t(83771),JSONArray:t(82157),JSONHash:t(75954),SpriteSheet:t(11576),SpriteSheetFromAtlas:t(78269),UnityYAML:t(38869)}},53012:v=>{v.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},98767:(v,p,t)=>{var f=t(25738);v.exports=function(i,n,l,e,a,r){i===void 0&&(i=0),n===void 0&&(n=0),l===void 0&&(l=r.width),e===void 0&&(e=r.height),a||(a={});var u=f(a,"isNotEmpty",!1),s=f(a,"isColliding",!1),o=f(a,"hasInterestingFace",!1);i<0&&(l+=i,i=0),n<0&&(e+=n,n=0),i+l>r.width&&(l=Math.max(r.width-i,0)),n+e>r.height&&(e=Math.max(r.height-n,0));for(var h=[],c=n;c<n+e;c++)for(var d=i;d<i+l;d++){var g=r.data[c][d];if(g!==null){if(u&&g.index===-1||s&&!g.collides||o&&!g.hasInterestingFace)continue;h.push(g)}}return h}},79247:(v,p,t)=>{var f=t(98767),i=t(17321),n=new i,l=new i;v.exports=function(e,a,r,u,s,o,h){var c=h.tilemapLayer.tilemap._convert.WorldToTileXY;c(e,a,!0,n,o,h);var d=n.x,g=n.y;c(e+r,a+u,!1,l,o,h);var m=Math.ceil(l.x),y=Math.ceil(l.y);return f(d,g,m-d,y-g,s,h)}},2387:(v,p,t)=>{var f=t(69186),i=t(46236),n=t(12063),l=t(94091),e=t(63083),a=new f({initialize:function(r){this.scene=r,this.systems=r.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],r.sys.events.once(n.BOOT,this.boot,this),r.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(n.PRE_UPDATE,this.preUpdate,this),r.on(n.UPDATE,this.update,this),r.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(r){var u;return r instanceof l?(u=r,this.removeEvent(u),u.elapsed=u.startAt,u.hasDispatched=!1,u.repeatCount=u.repeat===-1||u.loop?999999999999:u.repeat):u=new l(r),this._pendingInsertion.push(u),u},delayedCall:function(r,u,s,o){return this.addEvent({delay:r,callback:u,args:s,callbackScope:o})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++){var s=r[u];e(this._pendingRemoval,s),e(this._pendingInsertion,s),e(this._active,s)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var r=this._pendingRemoval.length,u=this._pendingInsertion.length;if(r!==0||u!==0){var s,o;for(s=0;s<r;s++){o=this._pendingRemoval[s];var h=this._active.indexOf(o);h>-1&&this._active.splice(h,1),o.destroy()}for(s=0;s<u;s++)o=this._pendingInsertion[s],this._active.push(o);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(r,u){if(this.now=r,!this.paused){u*=this.timeScale;for(var s=0;s<this._active.length;s++){var o=this._active[s];if(!o.paused&&(o.elapsed+=u*o.timeScale,o.elapsed>=o.delay)){var h=o.elapsed-o.delay;o.elapsed=o.delay,!o.hasDispatched&&o.callback&&(o.hasDispatched=!0,o.callback.apply(o.callbackScope,o.args)),o.repeatCount>0?(o.repeatCount--,o.elapsed=h,o.hasDispatched=!1):this._pendingRemoval.push(o)}}}},shutdown:function(){var r;for(r=0;r<this._pendingInsertion.length;r++)this._pendingInsertion[r].destroy();for(r=0;r<this._active.length;r++)this._active[r].destroy();for(r=0;r<this._pendingRemoval.length;r++)this._pendingRemoval[r].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var u=this.systems.events;u.off(n.PRE_UPDATE,this.preUpdate,this),u.off(n.UPDATE,this.update,this),u.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});i.register("Clock",a,"time"),v.exports=a},94091:(v,p,t)=>{var f=t(69186),i=t(25738),n=new f({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(l){return this.delay=i(l,"delay",0),this.repeat=i(l,"repeat",0),this.loop=i(l,"loop",!1),this.callback=i(l,"callback",void 0),this.callbackScope=i(l,"callbackScope",this.callback),this.args=i(l,"args",[]),this.timeScale=i(l,"timeScale",1),this.startAt=i(l,"startAt",0),this.paused=i(l,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var l=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/l}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return .001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return .001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return .001*this.getOverallRemaining()},remove:function(l){l===void 0&&(l=!1),this.elapsed=this.delay,this.hasDispatched=!l,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});v.exports=n},69165:(v,p,t)=>{v.exports={Clock:t(2387),TimerEvent:t(94091)}},53854:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(91788),l=t(27280),e=t(24191),a=new f({Extends:i,initialize:function(r){i.call(this),this.manager=r,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=e.PENDING_ADD,this._pausedState=e.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(r,u){this.emit(r,this),u&&u.func.apply(u.scope,u.params)},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===e.ACTIVE},add:function(r){return this.queue(l(this,r))},queue:function(r){return this.isPlaying()||(r.parent=this,r.parentIsTimeline=!0,this.data.push(r),this.totalData=this.data.length),this},hasOffset:function(r){return r.offset!==null},isOffsetAbsolute:function(r){return typeof r=="number"},isOffsetRelative:function(r){if(typeof r=="string"){var u=r[0];if(u==="-"||u==="+")return!0}return!1},getRelativeOffset:function(r,u){var s=r[0],o=parseFloat(r.substr(2)),h=u;switch(s){case"+":h+=o;break;case"-":h-=o}return Math.max(0,h)},calcDuration:function(){for(var r=0,u=0,s=0,o=0;o<this.totalData;o++){var h=this.data[o];h.init(),this.hasOffset(h)?this.isOffsetAbsolute(h.offset)?(h.calculatedOffset=h.offset,h.offset===0&&(s=0)):this.isOffsetRelative(h.offset)&&(h.calculatedOffset=this.getRelativeOffset(h.offset,r)):h.calculatedOffset=s,r=h.totalDuration+h.calculatedOffset,u+=h.totalDuration,s+=h.totalDuration}this.duration=u,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=e.PAUSED,!1)},resetTweens:function(r){for(var u=0;u<this.totalData;u++)this.data[u].play(r)},setCallback:function(r,u,s,o){return a.TYPES.indexOf(r)!==-1&&(this.callbacks[r]={func:u,scope:o,params:s}),this},makeActive:function(r){return this.manager.makeActive(r)},play:function(){if(this.state!==e.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=e.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=e.LOOP_DELAY):(this.state=e.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=e.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=e.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(r,u){if(this.state!==e.PAUSED){switch(this.useFrames&&(u=1*this.manager.timeScale),u*=this.timeScale,this.elapsed+=u,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case e.ACTIVE:for(var s=this.totalData,o=0;o<this.totalData;o++)this.data[o].update(r,u)&&s--;this.dispatchTimelineEvent(n.TIMELINE_UPDATE,this.callbacks.onUpdate),s===0&&this.nextState();break;case e.LOOP_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=e.ACTIVE,this.dispatchTimelineEvent(n.TIMELINE_LOOP,this.callbacks.onLoop));break;case e.COMPLETE_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=e.PENDING_REMOVE,this.dispatchTimelineEvent(n.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===e.PENDING_REMOVE}},stop:function(){this.state=e.PENDING_REMOVE},pause:function(){if(this.state!==e.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=e.PAUSED,this.emit(n.TIMELINE_PAUSE,this),this},resume:function(){return this.state===e.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(n.TIMELINE_RESUME,this)),this},hasTarget:function(r){for(var u=0;u<this.data.length;u++)if(this.data[u].hasTarget(r))return!0;return!1},destroy:function(){for(var r=0;r<this.data.length;r++)this.data[r].stop()}});a.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],v.exports=a},33028:(v,p,t)=>{var f=t(63083),i=t(69186),n=t(84041),l=t(46236),e=t(12063),a=t(77866),r=t(4963),u=t(24191),s=t(27280),o=new i({initialize:function(h){this.scene=h,this.systems=h.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,h.sys.events.once(e.BOOT,this.boot,this),h.sys.events.on(e.START,this.start,this)},boot:function(){this.systems.events.once(e.DESTROY,this.destroy,this)},start:function(){var h=this.systems.events;h.on(e.PRE_UPDATE,this.preUpdate,this),h.on(e.UPDATE,this.update,this),h.once(e.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(h){return r(this,h)},timeline:function(h){var c=r(this,h);return c.paused||(this._add.push(c),this._toProcess++),c},create:function(h){return s(this,h)},add:function(h){var c=s(this,h);return this._add.push(c),this._toProcess++,c},existing:function(h){return this._add.push(h),this._toProcess++,this},addCounter:function(h){var c=n(this,h);return this._add.push(c),this._toProcess++,c},stagger:function(h,c){return a(h,c)},preUpdate:function(){if(this._toProcess!==0){var h,c,d=this._destroy,g=this._active,m=this._pending;for(h=0;h<d.length;h++){c=d[h];var y=g.indexOf(c);y===-1?(y=m.indexOf(c))>-1&&(c.state=u.REMOVED,m.splice(y,1)):(c.state=u.REMOVED,g.splice(y,1))}for(d.length=0,d=this._add,h=0;h<d.length;h++)(c=d[h]).state===u.PENDING_ADD&&(c.init()?(c.play(),this._active.push(c)):this._pending.push(c));d.length=0,this._toProcess=0}},update:function(h,c){var d,g=this._active;c*=this.timeScale;for(var m=0;m<g.length;m++)(d=g[m]).update(h,c)&&(this._destroy.push(d),this._toProcess++)},remove:function(h){return f(this._add,h),f(this._pending,h),f(this._active,h),f(this._destroy,h),h.state=u.REMOVED,this},makeActive:function(h){if(this._add.indexOf(h)!==-1||this._active.indexOf(h)!==-1)return this;var c=this._pending.indexOf(h);return c!==-1&&this._pending.splice(c,1),this._add.push(h),h.state=u.PENDING_ADD,this._toProcess++,this},each:function(h,c){for(var d=[null],g=1;g<arguments.length;g++)d.push(arguments[g]);for(var m in this.list)d[0]=this.list[m],h.apply(c,d)},getAllTweens:function(){for(var h=this._active,c=[],d=0;d<h.length;d++)c.push(h[d]);return c},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(h,c){c===void 0&&(c=!1);var d,g,m,y=this._active,w=[];for(Array.isArray(h)||(h=[h]),g=0;g<y.length;g++)for(d=y[g],m=0;m<h.length;m++)d.hasTarget(h[m])&&w.push(d);if(c)for(y=this._pending,g=0;g<y.length;g++)for(d=y[g],m=0;m<h.length;m++)d.hasTarget(h[m])&&w.push(d);return w},isTweening:function(h){for(var c,d=this._active,g=0;g<d.length;g++)if((c=d[g]).hasTarget(h)&&c.isPlaying())return!0;return!1},killAll:function(){for(var h=this.getAllTweens(),c=0;c<h.length;c++)h[c].stop();return this},killTweensOf:function(h){for(var c=this.getTweensOf(h),d=0;d<c.length;d++)c[d].stop();return this},pauseAll:function(){for(var h=this._active,c=0;c<h.length;c++)h[c].pause();return this},resumeAll:function(){for(var h=this._active,c=0;c<h.length;c++)h[c].resume();return this},setGlobalTimeScale:function(h){return this.timeScale=h,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var h=this.systems.events;h.off(e.PRE_UPDATE,this.preUpdate,this),h.off(e.UPDATE,this.update,this),h.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(e.START,this.start,this),this.scene=null,this.systems=null}});l.register("TweenManager",o,"tweens"),v.exports=o},51146:v=>{v.exports=function(p,t,f){return p&&p.hasOwnProperty(t)?p[t]:f}},17232:(v,p,t)=>{var f=t(45044),i=t(10963);v.exports=function(n,l){var e=f.Power0;if(typeof n=="string")if(f.hasOwnProperty(n))e=f[n];else{var a="";n.indexOf(".")&&((a=n.substr(n.indexOf(".")+1)).toLowerCase()==="in"?a="easeIn":a.toLowerCase()==="out"?a="easeOut":a.toLowerCase()==="inout"&&(a="easeInOut")),n=i(n.substr(0,n.indexOf(".")+1)+a),f.hasOwnProperty(n)&&(e=f[n])}else typeof n=="function"?e=n:Array.isArray(n)&&n.length;if(!l)return e;var r=l.slice(0);return r.unshift(0),function(u){return r[0]=u,e.apply(this,r)}}},36697:v=>{v.exports=function(p,t,f){return p.hasOwnProperty(t)?typeof p[t]=="function"?function(i,n,l,e,a,r){return p[t](i,n,l,e,a,r)}:function(){return p[t]}:typeof f=="function"?f:function(){return f}}},44526:(v,p,t)=>{var f=t(57898);v.exports=function(i){var n,l=[];if(i.hasOwnProperty("props"))for(n in i.props)n.substr(0,1)!=="_"&&l.push({key:n,value:i.props[n]});else for(n in i)f.indexOf(n)===-1&&n.substr(0,1)!=="_"&&l.push({key:n,value:i[n]});return l}},74642:(v,p,t)=>{var f=t(76076);v.exports=function(i){var n=f(i,"targets",null);return n===null||(typeof n=="function"&&(n=n.call()),Array.isArray(n)||(n=[n])),n}},12984:(v,p,t)=>{var f=t(76076);v.exports=function(i){var n=f(i,"tweens",null);return n===null?[]:(typeof n=="function"&&(n=n.call()),Array.isArray(n)||(n=[n]),n)}},70893:v=>{function p(n){return!!n.getActive&&typeof n.getActive=="function"}function t(n){return!!n.getStart&&typeof n.getStart=="function"}function f(n){return!!n.getEnd&&typeof n.getEnd=="function"}var i=function(n,l){var e,a,r=function(x,T,E){return E},u=function(x,T,E){return E},s=null,o=typeof l;if(o==="number")r=function(){return l};else if(o==="string"){var h=l[0],c=parseFloat(l.substr(2));switch(h){case"+":r=function(x,T,E){return E+c};break;case"-":r=function(x,T,E){return E-c};break;case"*":r=function(x,T,E){return E*c};break;case"/":r=function(x,T,E){return E/c};break;default:r=function(){return parseFloat(l)}}}else if(o==="function")r=l;else if(o==="object")if(t(a=l)||f(a)||p(a))p(l)&&(s=l.getActive),f(l)&&(r=l.getEnd),t(l)&&(u=l.getStart);else if(l.hasOwnProperty("value"))e=i(n,l.value);else{var d=l.hasOwnProperty("to"),g=l.hasOwnProperty("from"),m=l.hasOwnProperty("start");if(d&&(g||m)){if(e=i(n,l.to),m){var y=i(n,l.start);e.getActive=y.getEnd}if(g){var w=i(n,l.from);e.getStart=w.getEnd}}}return e||(e={getActive:s,getEnd:r,getStart:u}),e};v.exports=i},84041:(v,p,t)=>{var f=t(77061),i=t(7973),n=t(51146),l=t(17232),e=t(36697),a=t(76076),r=t(70893),u=t(33290),s=t(14620);v.exports=function(o,h,c){c===void 0&&(c=f);var d=a(h,"from",0),g=a(h,"to",1),m=[{value:d}],y=e(h,"delay",c.delay),w=e(h,"duration",c.duration),x=a(h,"easeParams",c.easeParams),T=l(a(h,"ease",c.ease),x),E=e(h,"hold",c.hold),S=e(h,"repeat",c.repeat),C=e(h,"repeatDelay",c.repeatDelay),A=n(h,"yoyo",c.yoyo),M=[],b=r("value",g),_=s(m[0],0,"value",b.getEnd,b.getStart,b.getActive,T,y,w,A,E,S,C,!1,!1);_.start=d,_.current=d,_.to=g,M.push(_);var P=new u(o,M,m);P.offset=i(h,"offset",null),P.completeDelay=i(h,"completeDelay",0),P.loop=Math.round(i(h,"loop",0)),P.loopDelay=Math.round(i(h,"loopDelay",0)),P.paused=n(h,"paused",!1),P.useFrames=n(h,"useFrames",!1);for(var L=a(h,"callbackScope",P),F=[P,null],D=u.TYPES,k=0;k<D.length;k++){var R=D[k],O=a(h,R,!1);if(O){var B=a(h,R+"Scope",L),U=a(h,R+"Params",[]);P.setCallback(R,O,F.concat(U),B)}}return P}},77866:(v,p,t)=>{var f=t(17232),i=t(76076),n=t(80925);v.exports=function(l,e){var a;e===void 0&&(e={});var r=i(e,"start",0),u=i(e,"ease",null),s=i(e,"grid",null),o=i(e,"from",0),h=o==="first",c=o==="center",d=o==="last",g=typeof o=="number",m=Array.isArray(l),y=parseFloat(m?l[0]:l),w=m?parseFloat(l[1]):0,x=Math.max(y,w);if(m&&(r+=y),s){var T=s[0],E=s[1],S=0,C=0,A=0,M=0,b=[];d?(S=T-1,C=E-1):g?(S=o%T,C=Math.floor(o/T)):c&&(S=(T-1)/2,C=(E-1)/2);for(var _=n.MIN_SAFE_INTEGER,P=0;P<E;P++){b[P]=[];for(var L=0;L<T;L++){A=S-L,M=C-P;var F=Math.sqrt(A*A+M*M);F>_&&(_=F),b[P][L]=F}}}var D=u?f(u):null;return a=s?function(k,R,O,B){var U,I=0,Y=B%T,N=Math.floor(B/T);if(Y>=0&&Y<T&&N>=0&&N<E&&(I=b[N][Y]),m){var X=w-y;U=D?I/_*X*D(I/_):I/_*X}else U=D?I*y*D(I/_):I*y;return U+r}:function(k,R,O,B,U){var I,Y,N;return U--,h?I=B:c?I=Math.abs(U/2-B):d?I=U-B:g&&(I=Math.abs(o-B)),m?(N=c?(w-y)/U*(2*I):(w-y)/U*I,Y=D?N*D(I/U):N):Y=D?U*x*D(I/U):I*y,Y+r},a}},4963:(v,p,t)=>{var f=t(98409),i=t(77061),n=t(7973),l=t(51146),e=t(17232),a=t(36697),r=t(74642),u=t(12984),s=t(76076),o=t(53854),h=t(27280);v.exports=function(c,d){var g=new o(c);g.completeDelay=n(d,"completeDelay",0),g.loop=Math.round(n(d,"loop",0)),g.loopDelay=Math.round(n(d,"loopDelay",0)),g.paused=l(d,"paused",!1),g.useFrames=l(d,"useFrames",!1);var m=s(d,"callbackScope",g),y=[g],w=s(d,"onStart",!1);if(w){var x=s(d,"onStartScope",m),T=s(d,"onStartParams",[]);g.setCallback("onStart",w,y.concat(T),x)}var E=s(d,"onUpdate",!1);if(E){var S=s(d,"onUpdateScope",m),C=s(d,"onUpdateParams",[]);g.setCallback("onUpdate",E,y.concat(C),S)}var A=s(d,"onLoop",!1);if(A){var M=s(d,"onLoopScope",m),b=s(d,"onLoopParams",[]);g.setCallback("onLoop",A,y.concat(b),M)}var _=s(d,"onYoyo",!1);if(_){var P=s(d,"onYoyoScope",m),L=s(d,"onYoyoParams",[]);g.setCallback("onYoyo",_,y.concat(null,L),P)}var F=s(d,"onComplete",!1);if(F){var D=s(d,"onCompleteScope",m),k=s(d,"onCompleteParams",[]);g.setCallback("onComplete",F,y.concat(k),D)}var R=u(d);if(R.length===0)return g.paused=!0,g;var O=f(i);O.targets=r(d);var B=n(d,"totalDuration",0);O.duration=B>0?Math.floor(B/R.length):a(d,"duration",O.duration),O.delay=a(d,"delay",O.delay),O.easeParams=s(d,"easeParams",O.easeParams),O.ease=e(s(d,"ease",O.ease),O.easeParams),O.hold=a(d,"hold",O.hold),O.repeat=a(d,"repeat",O.repeat),O.repeatDelay=a(d,"repeatDelay",O.repeatDelay),O.yoyo=l(d,"yoyo",O.yoyo),O.flipX=l(d,"flipX",O.flipX),O.flipY=l(d,"flipY",O.flipY);for(var U=0;U<R.length;U++)g.queue(h(g,R[U],O));return g}},27280:(v,p,t)=>{var f=t(77061),i=t(7973),n=t(51146),l=t(17232),e=t(36697),a=t(44526),r=t(74642),u=t(76076),s=t(70893),o=t(33290),h=t(14620);v.exports=function(c,d,g){g===void 0&&(g=f);for(var m=g.targets?g.targets:r(d),y=a(d),w=e(d,"delay",g.delay),x=e(d,"duration",g.duration),T=u(d,"easeParams",g.easeParams),E=l(u(d,"ease",g.ease),T),S=e(d,"hold",g.hold),C=e(d,"repeat",g.repeat),A=e(d,"repeatDelay",g.repeatDelay),M=n(d,"yoyo",g.yoyo),b=n(d,"flipX",g.flipX),_=n(d,"flipY",g.flipY),P=[],L=0;L<y.length;L++)for(var F=y[L].key,D=y[L].value,k=0;k<m.length;k++){var R=s(F,D),O=h(m[k],k,F,R.getEnd,R.getStart,R.getActive,l(u(D,"ease",E),u(D,"easeParams",T)),e(D,"delay",w),e(D,"duration",x),n(D,"yoyo",M),e(D,"hold",S),e(D,"repeat",C),e(D,"repeatDelay",A),n(D,"flipX",b),n(D,"flipY",_));P.push(O)}var B=new o(c,P,m);B.offset=i(d,"offset",null),B.completeDelay=i(d,"completeDelay",0),B.loop=Math.round(i(d,"loop",0)),B.loopDelay=Math.round(i(d,"loopDelay",0)),B.paused=n(d,"paused",!1),B.useFrames=n(d,"useFrames",!1);for(var U=u(d,"callbackScope",B),I=[B,null],Y=o.TYPES,N=0;N<Y.length;N++){var X=Y[N],z=u(d,X,!1);if(z){var V=u(d,X+"Scope",U),G=u(d,X+"Params",[]);B.setCallback(X,z,I.concat(G),V)}}return B}},17622:(v,p,t)=>{v.exports={GetBoolean:t(51146),GetEaseFunction:t(17232),GetNewValue:t(36697),GetProps:t(44526),GetTargets:t(74642),GetTweens:t(12984),GetValueOp:t(70893),NumberTweenBuilder:t(84041),StaggerBuilder:t(77866),TimelineBuilder:t(4963),TweenBuilder:t(27280)}},84303:v=>{v.exports="complete"},20681:v=>{v.exports="loop"},12423:v=>{v.exports="pause"},94417:v=>{v.exports="resume"},79510:v=>{v.exports="start"},18812:v=>{v.exports="update"},50296:v=>{v.exports="active"},45292:v=>{v.exports="complete"},80293:v=>{v.exports="loop"},1478:v=>{v.exports="repeat"},87420:v=>{v.exports="start"},78152:v=>{v.exports="stop"},51334:v=>{v.exports="update"},45490:v=>{v.exports="yoyo"},91788:(v,p,t)=>{v.exports={TIMELINE_COMPLETE:t(84303),TIMELINE_LOOP:t(20681),TIMELINE_PAUSE:t(12423),TIMELINE_RESUME:t(94417),TIMELINE_START:t(79510),TIMELINE_UPDATE:t(18812),TWEEN_ACTIVE:t(50296),TWEEN_COMPLETE:t(45292),TWEEN_LOOP:t(80293),TWEEN_REPEAT:t(1478),TWEEN_START:t(87420),TWEEN_STOP:t(78152),TWEEN_UPDATE:t(51334),TWEEN_YOYO:t(45490)}},62983:(v,p,t)=>{var f=t(24191),i=t(72646),n={Builders:t(17622),Events:t(91788),TweenManager:t(33028),Tween:t(33290),TweenData:t(14620),Timeline:t(53854)};n=i(!1,n,f),v.exports=n},77061:v=>{v.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},57898:v=>{v.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},33290:(v,p,t)=>{var f=t(69186),i=t(26729),n=t(91788),l=t(78757),e=t(66642),a=t(24191),r=t(80925),u=new f({Extends:i,initialize:function(s,o,h){i.call(this),this.parent=s,this.parentIsTimeline=s.hasOwnProperty("isTimeline"),this.data=o,this.totalData=o.length,this.targets=h,this.totalTargets=h.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=a.PENDING_ADD,this._pausedState=a.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(s){return s===void 0&&(s=0),this.data[s].current},setTimeScale:function(s){return this.timeScale=s,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},isPaused:function(){return this.state===a.PAUSED},hasTarget:function(s){return this.targets.indexOf(s)!==-1},updateTo:function(s,o,h){h===void 0&&(h=!1);for(var c=0;c<this.totalData;c++){var d=this.data[c];d.key===s&&(d.end=o,h&&(d.start=d.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===a.ACTIVE?this.seek(0):this.state===a.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===a.PENDING_ADD?this:this.play()},calcDuration:function(){for(var s=0,o=r.MAX_SAFE_INTEGER,h=this.data,c=0;c<this.totalData;c++){var d=h[c];d.t1=d.duration+d.hold,d.yoyo&&(d.t1+=d.duration),d.t2=d.t1+d.repeatDelay,d.totalDuration=d.delay+d.t1,d.repeat===-1?d.totalDuration+=999999999999*d.t2:d.repeat>0&&(d.totalDuration+=d.t2*d.repeat),d.totalDuration>s&&(s=d.totalDuration),d.delay<o&&(o=d.delay)}this.duration=Math.max(s,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=o},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=a.PENDING_ADD,this._pausedState=a.INIT,!1;for(var s=this.data,o=this.totalTargets,h=0;h<this.totalData;h++){var c=s[h],d=c.target,g=c.gen,m=c.key,y=c.index;c.delay=g.delay(d,m,0,y,o,this),c.duration=Math.max(g.duration(d,m,0,y,o,this),.001),c.hold=g.hold(d,m,0,y,o,this),c.repeat=g.repeat(d,m,0,y,o,this),c.repeatDelay=g.repeatDelay(d,m,0,y,o,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=a.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(n.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===a.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED),this},play:function(s){s===void 0&&(s=!1);var o=this.state;return o!==a.INIT||this.parentIsTimeline?o===a.ACTIVE||o===a.PENDING_ADD&&this._pausedState===a.PENDING_ADD?this:this.parentIsTimeline||o!==a.PENDING_REMOVE&&o!==a.REMOVED?(this.parentIsTimeline?(this.resetTweenData(s),this.calculatedOffset===0?this.state=a.ACTIVE:(this.countdown=this.calculatedOffset,this.state=a.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(s),this.state=a.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=a.ACTIVE,this)},resetTweenData:function(s){for(var o=this.data,h=this.totalData,c=this.totalTargets,d=0;d<h;d++){var g=o[d],m=g.target,y=g.key,w=g.index;g.progress=0,g.elapsed=0,g.repeatCounter=g.repeat===-1?999999999999:g.repeat,s?(g.start=g.getStartValue(m,y,g.start,w,c,this),g.end=g.getEndValue(m,y,g.end,w,c,this),g.current=g.start,g.state=a.PLAYING_FORWARD):g.state=a.PENDING_RENDER,g.delay>0&&(g.elapsed=g.delay,g.state=a.DELAY),g.getActiveValue&&(m[y]=g.getActiveValue(g.target,g.key,g.start))}},resume:function(){return this.state===a.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(s,o){o===void 0&&(o=16.6),this.state===a.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var h=this.data,c=this.totalTargets,d=0;d<this.totalData;d++){var g=h[d],m=g.target,y=g.gen,w=g.key,x=g.index;g.progress=0,g.elapsed=0,g.repeatCounter=g.repeat===-1?999999999999:g.repeat,g.delay=y.delay(m,w,0,x,c,this),g.duration=Math.max(y.duration(m,w,0,x,c,this),.001),g.hold=y.hold(m,w,0,x,c,this),g.repeat=y.repeat(m,w,0,x,c,this),g.repeatDelay=y.repeatDelay(m,w,0,x,c,this),g.current=g.start,g.state=a.PLAYING_FORWARD,this.updateTweenData(this,g,0,x,c),g.delay>0&&(g.elapsed=g.delay,g.state=a.DELAY)}this.calcDuration();var T=!1;this.state===a.PAUSED&&(T=!0,this.state=a.ACTIVE),this.isSeeking=!0;do this.update(0,o);while(this.totalProgress<s);return this.isSeeking=!1,T&&(this.state=a.PAUSED),this},setCallback:function(s,o,h,c){return this.callbacks[s]={func:o,scope:c,params:h},this},complete:function(s){return s===void 0&&(s=0),s?(this.state=a.COMPLETE_DELAY,this.countdown=s):(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(s){return this.state===a.ACTIVE&&s!==void 0&&this.seek(s),this.state!==a.REMOVED&&(this.state!==a.PAUSED&&this.state!==a.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(n.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=a.PENDING_REMOVE),this},update:function(s,o){if(this.state===a.PAUSED)return!1;switch(this.useFrames&&(o=1*this.parent.timeScale),o*=this.timeScale,this.elapsed+=o,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=o,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=o,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(n.TWEEN_START,this.callbacks.onStart)));for(var h=!1,c=0;c<this.totalData;c++){var d=this.data[c];this.updateTweenData(this,d,o)&&(h=!0)}h||this.nextState();break;case a.LOOP_DELAY:this.countdown-=o,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTweenEvent(n.TWEEN_LOOP,this.callbacks.onLoop));break;case a.OFFSET_DELAY:this.countdown-=o,this.countdown<=0&&(this.state=a.ACTIVE);break;case a.COMPLETE_DELAY:this.countdown-=o,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(n.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===a.PENDING_REMOVE},dispatchTweenDataEvent:function(s,o,h){this.isSeeking||(this.emit(s,this,h.key,h.target,h.current,h.previous),o&&(o.params[1]=h.target,o.func.apply(o.scope,o.params)))},dispatchTweenEvent:function(s,o){this.isSeeking||(this.emit(s,this,this.targets),o&&(o.params[1]=this.targets,o.func.apply(o.scope,o.params)))},setStateFromEnd:function(s,o,h){return o.yoyo?(o.elapsed=h,o.progress=h/o.duration,o.flipX&&o.target.toggleFlipX(),o.flipY&&o.target.toggleFlipY(),this.dispatchTweenDataEvent(n.TWEEN_YOYO,s.callbacks.onYoyo,o),o.start=o.getStartValue(o.target,o.key,o.start,o.index,s.totalTargets,s),a.PLAYING_BACKWARD):o.repeatCounter>0?(o.repeatCounter--,o.elapsed=h,o.progress=h/o.duration,o.flipX&&o.target.toggleFlipX(),o.flipY&&o.target.toggleFlipY(),o.start=o.getStartValue(o.target,o.key,o.start,o.index,s.totalTargets,s),o.end=o.getEndValue(o.target,o.key,o.start,o.index,s.totalTargets,s),o.repeatDelay>0?(o.elapsed=o.repeatDelay-h,o.current=o.start,o.target[o.key]=o.current,a.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,s.callbacks.onRepeat,o),a.PLAYING_FORWARD)):a.COMPLETE},setStateFromStart:function(s,o,h){return o.repeatCounter>0?(o.repeatCounter--,o.elapsed=h,o.progress=h/o.duration,o.flipX&&o.target.toggleFlipX(),o.flipY&&o.target.toggleFlipY(),o.end=o.getEndValue(o.target,o.key,o.start,o.index,s.totalTargets,s),o.repeatDelay>0?(o.elapsed=o.repeatDelay-h,o.current=o.start,o.target[o.key]=o.current,a.REPEAT_DELAY):(this.dispatchTweenDataEvent(n.TWEEN_REPEAT,s.callbacks.onRepeat,o),a.PLAYING_FORWARD)):a.COMPLETE},updateTweenData:function(s,o,h){var c=o.target;switch(o.state){case a.PLAYING_FORWARD:case a.PLAYING_BACKWARD:if(!c){o.state=a.COMPLETE;break}var d=o.elapsed,g=o.duration,m=0;(d+=h)>g&&(m=d-g,d=g);var y=o.state===a.PLAYING_FORWARD,w=d/g;if(o.elapsed=d,o.progress=w,o.previous=o.current,w===1)y?(o.current=o.end,c[o.key]=o.end,o.hold>0?(o.elapsed=o.hold-m,o.state=a.HOLD_DELAY):o.state=this.setStateFromEnd(s,o,m)):(o.current=o.start,c[o.key]=o.start,o.state=this.setStateFromStart(s,o,m));else{var x=y?o.ease(w):o.ease(1-w);o.current=o.start+(o.end-o.start)*x,c[o.key]=o.current}this.dispatchTweenDataEvent(n.TWEEN_UPDATE,s.callbacks.onUpdate,o);break;case a.DELAY:o.elapsed-=h,o.elapsed<=0&&(o.elapsed=Math.abs(o.elapsed),o.state=a.PENDING_RENDER);break;case a.REPEAT_DELAY:o.elapsed-=h,o.elapsed<=0&&(o.elapsed=Math.abs(o.elapsed),o.state=a.PLAYING_FORWARD,this.dispatchTweenDataEvent(n.TWEEN_REPEAT,s.callbacks.onRepeat,o));break;case a.HOLD_DELAY:o.elapsed-=h,o.elapsed<=0&&(o.state=this.setStateFromEnd(s,o,Math.abs(o.elapsed)));break;case a.PENDING_RENDER:c?(o.start=o.getStartValue(c,o.key,c[o.key],o.index,s.totalTargets,s),o.end=o.getEndValue(c,o.key,o.start,o.index,s.totalTargets,s),o.current=o.start,c[o.key]=o.start,o.state=a.PLAYING_FORWARD):o.state=a.COMPLETE}return o.state!==a.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],e.register("tween",function(s){return this.scene.sys.tweens.add(s)}),l.register("tween",function(s){return this.scene.sys.tweens.create(s)}),v.exports=u},14620:v=>{v.exports=function(p,t,f,i,n,l,e,a,r,u,s,o,h,c,d){return{target:p,index:t,key:f,getActiveValue:l,getEndValue:i,getStartValue:n,ease:e,duration:0,totalDuration:0,delay:0,yoyo:u,hold:0,repeat:0,repeatDelay:0,flipX:c,flipY:d,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:a,duration:r,hold:s,repeat:o,repeatDelay:h},state:0}}},24191:v=>{v.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},69186:v=>{function p(l,e,a){var r=a?l[e]:Object.getOwnPropertyDescriptor(l,e);return!a&&r.value&&typeof r.value=="object"&&(r=r.value),!(!r||!function(u){return!!u.get&&typeof u.get=="function"||!!u.set&&typeof u.set=="function"}(r))&&(r.enumerable===void 0&&(r.enumerable=!0),r.configurable===void 0&&(r.configurable=!0),r)}function t(l,e){var a=Object.getOwnPropertyDescriptor(l,e);return!!a&&(a.value&&typeof a.value=="object"&&(a=a.value),a.configurable===!1)}function f(l,e,a,r){for(var u in e)if(e.hasOwnProperty(u)){var s=p(e,u,a);if(s!==!1){if(t((r||l).prototype,u)){if(n.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(l.prototype,u,s)}else l.prototype[u]=e[u]}}function i(l,e){if(e){Array.isArray(e)||(e=[e]);for(var a=0;a<e.length;a++)f(l,e[a].prototype||e[a])}}function n(l){var e,a;if(l||(l={}),l.initialize){if(typeof l.initialize!="function")throw new Error("initialize must be a function");e=l.initialize,delete l.initialize}else if(l.Extends){var r=l.Extends;e=function(){r.apply(this,arguments)}}else e=function(){};l.Extends?(e.prototype=Object.create(l.Extends.prototype),e.prototype.constructor=e,a=l.Extends,delete l.Extends):e.prototype.constructor=e;var u=null;return l.Mixins&&(u=l.Mixins,delete l.Mixins),i(e,u),f(e,l,!0,a),e}n.extend=f,n.mixin=i,n.ignoreFinals=!1,v.exports=n},45733:v=>{v.exports=function(){}},18741:v=>{v.exports=function(p,t,f,i,n){if(n===void 0&&(n=p),f>0){var l=f-p.length;if(l<=0)return null}if(!Array.isArray(t))return p.indexOf(t)===-1?(p.push(t),i&&i.call(n,t),t):null;for(var e=t.length-1;e>=0;)p.indexOf(t[e])!==-1&&t.splice(e,1),e--;if((e=t.length)===0)return null;f>0&&e>l&&(t.splice(l),e=l);for(var a=0;a<e;a++){var r=t[a];p.push(r),i&&i.call(n,r)}return t}},41969:v=>{v.exports=function(p,t,f,i,n,l){if(f===void 0&&(f=0),l===void 0&&(l=p),i>0){var e=i-p.length;if(e<=0)return null}if(!Array.isArray(t))return p.indexOf(t)===-1?(p.splice(f,0,t),n&&n.call(l,t),t):null;for(var a=t.length-1;a>=0;)p.indexOf(t[a])!==-1&&t.pop(),a--;if((a=t.length)===0)return null;i>0&&a>e&&(t.splice(e),a=e);for(var r=a-1;r>=0;r--){var u=t[r];p.splice(f,0,u),n&&n.call(l,u)}return t}},34696:v=>{v.exports=function(p,t){var f=p.indexOf(t);return f!==-1&&f<p.length&&(p.splice(f,1),p.push(t)),t}},52564:(v,p,t)=>{var f=t(30968);v.exports=function(i,n,l,e,a){e===void 0&&(e=0),a===void 0&&(a=i.length);var r=0;if(f(i,e,a))for(var u=e;u<a;u++)i[u][n]===l&&r++;return r}},51707:v=>{v.exports=function(p,t,f){var i,n=[null];for(i=3;i<arguments.length;i++)n.push(arguments[i]);for(i=0;i<p.length;i++)n[0]=p[i],t.apply(f,n);return p}},22397:(v,p,t)=>{var f=t(30968);v.exports=function(i,n,l,e,a){if(e===void 0&&(e=0),a===void 0&&(a=i.length),f(i,e,a)){var r,u=[null];for(r=5;r<arguments.length;r++)u.push(arguments[r]);for(r=e;r<a;r++)u[0]=i[r],n.apply(l,u)}return i}},81712:v=>{v.exports=function(p,t,f){if(!t.length)return NaN;if(t.length===1)return t[0];var i,n,l=1;if(f){if(p<t[0][f])return t[0];for(;t[l][f]<p;)l++}else for(;t[l]<p;)l++;return l>t.length&&(l=t.length),f?(i=t[l-1][f],(n=t[l][f])-p<=p-i?t[l]:t[l-1]):(i=t[l-1],(n=t[l])-p<=p-i?n:i)}},14999:(v,p,t)=>{var f=t(30968);v.exports=function(i,n,l,e,a){e===void 0&&(e=0),a===void 0&&(a=i.length);var r=[];if(f(i,e,a))for(var u=e;u<a;u++){var s=i[u];(!n||n&&l===void 0&&s.hasOwnProperty(n)||n&&l!==void 0&&s[n]===l)&&r.push(s)}return r}},39161:(v,p,t)=>{var f=t(30968);v.exports=function(i,n,l,e,a){if(e===void 0&&(e=0),a===void 0&&(a=i.length),f(i,e,a))for(var r=e;r<a;r++){var u=i[r];if(!n||n&&l===void 0&&u.hasOwnProperty(n)||n&&l!==void 0&&u[n]===l)return u}return null}},88829:v=>{v.exports=function(p,t,f){t===void 0&&(t=0),f===void 0&&(f=p.length);var i=t+Math.floor(Math.random()*f);return p[i]===void 0?null:p[i]}},97154:v=>{v.exports=function(p,t,f){if(t===f)return p;var i=p.indexOf(t),n=p.indexOf(f);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i>n||(p.splice(i,1),n===p.length-1?p.push(t):p.splice(n,0,t)),p}},86252:v=>{v.exports=function(p,t,f){if(t===f)return p;var i=p.indexOf(t),n=p.indexOf(f);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i<n||(p.splice(i,1),n===0?p.unshift(t):p.splice(n,0,t)),p}},69286:v=>{v.exports=function(p,t){var f=p.indexOf(t);if(f>0){var i=p[f-1],n=p.indexOf(i);p[f]=i,p[n]=t}return p}},29852:v=>{v.exports=function(p,t,f){var i=p.indexOf(t);if(i===-1||f<0||f>=p.length)throw new Error("Supplied index out of bounds");return i!==f&&(p.splice(i,1),p.splice(f,0,t)),t}},71136:v=>{v.exports=function(p,t){var f=p.indexOf(t);if(f!==-1&&f<p.length-1){var i=p[f+1],n=p.indexOf(i);p[f]=i,p[n]=t}return p}},74934:v=>{v.exports=function(p,t,f,i){var n,l=[],e=!1;if((f||i)&&(e=!0,f||(f=""),i||(i="")),t<p)for(n=p;n>=t;n--)e?l.push(f+n.toString()+i):l.push(n);else for(n=p;n<=t;n++)e?l.push(f+n.toString()+i):l.push(n);return l}},89599:(v,p,t)=>{var f=t(40496);v.exports=function(i,n,l){i===void 0&&(i=0),n===void 0&&(n=null),l===void 0&&(l=1),n===null&&(n=i,i=0);for(var e=[],a=Math.max(f((n-i)/(l||1)),0),r=0;r<a;r++)e.push(i),i+=l;return e}},48885:v=>{function p(i,n,l){var e=i[n];i[n]=i[l],i[l]=e}function t(i,n){return i<n?-1:i>n?1:0}var f=function(i,n,l,e,a){for(l===void 0&&(l=0),e===void 0&&(e=i.length-1),a===void 0&&(a=t);e>l;){if(e-l>600){var r=e-l+1,u=n-l+1,s=Math.log(r),o=.5*Math.exp(2*s/3),h=.5*Math.sqrt(s*o*(r-o)/r)*(u-r/2<0?-1:1),c=Math.max(l,Math.floor(n-u*o/r+h)),d=Math.min(e,Math.floor(n+(r-u)*o/r+h));f(i,n,c,d,a)}var g=i[n],m=l,y=e;for(p(i,l,n),a(i[e],g)>0&&p(i,l,e);m<y;){for(p(i,m,y),m++,y--;a(i[m],g)<0;)m++;for(;a(i[y],g)>0;)y--}a(i[l],g)===0?p(i,l,y):p(i,++y,e),y<=n&&(l=y+1),n<=y&&(e=y-1)}};v.exports=f},17109:(v,p,t)=>{var f=t(76076),i=t(80675),n=function(l,e,a){for(var r=[],u=0;u<l.length;u++)for(var s=0;s<e.length;s++)for(var o=0;o<a;o++)r.push({a:l[u],b:e[s]});return r};v.exports=function(l,e,a){var r=f(a,"max",0),u=f(a,"qty",1),s=f(a,"random",!1),o=f(a,"randomB",!1),h=f(a,"repeat",0),c=f(a,"yoyo",!1),d=[];if(o&&i(e),h===-1)if(r===0)h=0;else{var g=l.length*e.length*u;c&&(g*=2),h=Math.ceil(r/g)}for(var m=0;m<=h;m++){var y=n(l,e,u);s&&i(y),d=d.concat(y),c&&(y.reverse(),d=d.concat(y))}return r&&d.splice(r),d}},63083:(v,p,t)=>{var f=t(28088);v.exports=function(i,n,l,e){var a;if(e===void 0&&(e=i),!Array.isArray(n))return(a=i.indexOf(n))!==-1?(f(i,a),l&&l.call(e,n),n):null;for(var r=n.length-1,u=[];r>=0;){var s=n[r];(a=i.indexOf(s))!==-1&&(f(i,a),u.push(s),l&&l.call(e,s)),r--}return u}},83920:(v,p,t)=>{var f=t(28088);v.exports=function(i,n,l,e){if(e===void 0&&(e=i),n<0||n>i.length-1)throw new Error("Index out of bounds");var a=f(i,n);return l&&l.call(e,a),a}},55846:(v,p,t)=>{var f=t(30968);v.exports=function(i,n,l,e,a){if(n===void 0&&(n=0),l===void 0&&(l=i.length),a===void 0&&(a=i),f(i,n,l)){var r=l-n,u=i.splice(n,r);if(e)for(var s=0;s<u.length;s++){var o=u[s];e.call(a,o)}return u}return[]}},48626:(v,p,t)=>{var f=t(28088);v.exports=function(i,n,l){n===void 0&&(n=0),l===void 0&&(l=i.length);var e=n+Math.floor(Math.random()*l);return f(i,e)}},99938:v=>{v.exports=function(p,t,f){var i=p.indexOf(t),n=p.indexOf(f);return i!==-1&&n===-1&&(p[i]=f,!0)}},34383:v=>{v.exports=function(p,t){t===void 0&&(t=1);for(var f=null,i=0;i<t;i++)f=p.shift(),p.push(f);return f}},8405:v=>{v.exports=function(p,t){t===void 0&&(t=1);for(var f=null,i=0;i<t;i++)f=p.pop(),p.unshift(f);return f}},30968:v=>{v.exports=function(p,t,f,i){var n=p.length;if(t<0||t>n||t>=f||f>n||t+f>n){if(i)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},51631:v=>{v.exports=function(p,t){var f=p.indexOf(t);return f!==-1&&f>0&&(p.splice(f,1),p.unshift(t)),t}},57715:(v,p,t)=>{var f=t(30968);v.exports=function(i,n,l,e,a){if(e===void 0&&(e=0),a===void 0&&(a=i.length),f(i,e,a))for(var r=e;r<a;r++){var u=i[r];u.hasOwnProperty(n)&&(u[n]=l)}return i}},80675:v=>{v.exports=function(p){for(var t=p.length-1;t>0;t--){var f=Math.floor(Math.random()*(t+1)),i=p[t];p[t]=p[f],p[f]=i}return p}},16068:v=>{v.exports=function(p){var t=/\D/g;return p.sort(function(f,i){return parseInt(f.replace(t,""),10)-parseInt(i.replace(t,""),10)}),p}},28088:v=>{v.exports=function(p,t){if(!(t>=p.length)){for(var f=p.length-1,i=p[t],n=t;n<f;n++)p[n]=p[n+1];return p.length=f,i}}},46414:v=>{function p(f,i){return String(f).localeCompare(i)}function t(f,i,n,l){var e,a,r,u,s,o=f.length,h=0,c=2*n;for(e=0;e<o;e+=c)for(r=(a=e+n)+n,a>o&&(a=o),r>o&&(r=o),u=e,s=a;;)if(u<a&&s<r)i(f[u],f[s])<=0?l[h++]=f[u++]:l[h++]=f[s++];else if(u<a)l[h++]=f[u++];else{if(!(s<r))break;l[h++]=f[s++]}}v.exports=function(f,i){i===void 0&&(i=p);var n=function(l,e){var a=l.length;if(a<=1)return l;for(var r=new Array(a),u=1;u<a;u*=2){t(l,e,u,r);var s=l;l=r,r=s}return l}(f,i);return n!==f&&t(n,null,f.length,f),f}},49011:v=>{v.exports=function(p,t,f){if(t===f)return p;var i=p.indexOf(t),n=p.indexOf(f);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return p[i]=f,p[n]=t,p}},47205:(v,p,t)=>{v.exports={Matrix:t(84842),Add:t(18741),AddAt:t(41969),BringToTop:t(34696),CountAllMatching:t(52564),Each:t(51707),EachInRange:t(22397),FindClosestInSorted:t(81712),GetAll:t(14999),GetFirst:t(39161),GetRandom:t(88829),MoveDown:t(69286),MoveTo:t(29852),MoveUp:t(71136),MoveAbove:t(97154),MoveBelow:t(86252),NumberArray:t(74934),NumberArrayStep:t(89599),QuickSelect:t(48885),Range:t(17109),Remove:t(63083),RemoveAt:t(83920),RemoveBetween:t(55846),RemoveRandomElement:t(48626),Replace:t(99938),RotateLeft:t(34383),RotateRight:t(8405),SafeRange:t(30968),SendToBack:t(51631),SetAll:t(57715),Shuffle:t(80675),SortByDigits:t(16068),SpliceOne:t(28088),StableSort:t(46414),Swap:t(49011)}},74671:v=>{v.exports=function(p){if(!Array.isArray(p)||p.length<2||!Array.isArray(p[0]))return!1;for(var t=p[0].length,f=1;f<p.length;f++)if(p[f].length!==t)return!1;return!0}},20987:(v,p,t)=>{var f=t(47742),i=t(74671);v.exports=function(n){var l="";if(!i(n))return l;for(var e=0;e<n.length;e++){for(var a=0;a<n[e].length;a++){var r=n[e][a].toString();l+=r!=="undefined"?f(r,2):"?",a<n[e].length-1&&(l+=" |")}if(e<n.length-1){l+=`
`;for(var u=0;u<n[e].length;u++)l+="---",u<n[e].length-1&&(l+="+");l+=`
`}}return l}},78293:v=>{v.exports=function(p){return p.reverse()}},75362:v=>{v.exports=function(p){for(var t=0;t<p.length;t++)p[t].reverse();return p}},95382:(v,p,t)=>{var f=t(60741);v.exports=function(i){return f(i,180)}},56157:(v,p,t)=>{var f=t(60741);v.exports=function(i){return f(i,90)}},60741:(v,p,t)=>{var f=t(74671),i=t(45235);v.exports=function(n,l){if(l===void 0&&(l=90),!f(n))return null;if(typeof l!="string"&&(l=(l%360+360)%360),l===90||l===-270||l==="rotateLeft")(n=i(n)).reverse();else if(l===-90||l===270||l==="rotateRight")n.reverse(),n=i(n);else if(Math.abs(l)===180||l==="rotate180"){for(var e=0;e<n.length;e++)n[e].reverse();n.reverse()}return n}},5392:(v,p,t)=>{var f=t(60741);v.exports=function(i){return f(i,-90)}},61650:(v,p,t)=>{var f=t(34383),i=t(8405);v.exports=function(n,l,e){if(l===void 0&&(l=0),e===void 0&&(e=0),e!==0&&(e<0?f(n,Math.abs(e)):i(n,e)),l!==0)for(var a=0;a<n.length;a++){var r=n[a];l<0?f(r,Math.abs(l)):i(r,l)}return n}},45235:v=>{v.exports=function(p){for(var t=p.length,f=p[0].length,i=new Array(f),n=0;n<f;n++){i[n]=new Array(t);for(var l=t-1;l>-1;l--)i[n][l]=p[l][n]}return i}},84842:(v,p,t)=>{v.exports={CheckMatrix:t(74671),MatrixToString:t(20987),ReverseColumns:t(78293),ReverseRows:t(75362),Rotate180:t(95382),RotateLeft:t(56157),RotateMatrix:t(60741),RotateRight:t(5392),Translate:t(61650),TransposeMatrix:t(45235)}},57809:v=>{var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";v.exports=function(t,f){for(var i=new Uint8Array(t),n=i.length,l=f?"data:"+f+";base64,":"",e=0;e<n;e+=3)l+=p[i[e]>>2],l+=p[(3&i[e])<<4|i[e+1]>>4],l+=p[(15&i[e+1])<<2|i[e+2]>>6],l+=p[63&i[e+2]];return n%3==2?l=l.substring(0,l.length-1)+"=":n%3==1&&(l=l.substring(0,l.length-2)+"=="),l}},39118:v=>{for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),f=0;f<p.length;f++)t[p.charCodeAt(f)]=f;v.exports=function(i){var n,l,e,a,r=(i=i.substr(i.indexOf(",")+1)).length,u=.75*r,s=0;i[r-1]==="="&&(u--,i[r-2]==="="&&u--);for(var o=new ArrayBuffer(u),h=new Uint8Array(o),c=0;c<r;c+=4)n=t[i.charCodeAt(c)],l=t[i.charCodeAt(c+1)],e=t[i.charCodeAt(c+2)],a=t[i.charCodeAt(c+3)],h[s++]=n<<2|l>>4,h[s++]=(15&l)<<4|e>>2,h[s++]=(3&e)<<6|63&a;return o}},19237:(v,p,t)=>{v.exports={ArrayBufferToBase64:t(57809),Base64ToArrayBuffer:t(39118)}},74871:(v,p,t)=>{v.exports={Array:t(47205),Base64:t(19237),Objects:t(50408),String:t(80340),NOOP:t(45733)}},98409:v=>{v.exports=function(p){var t={};for(var f in p)Array.isArray(p[f])?t[f]=p[f].slice(0):t[f]=p[f];return t}},12229:v=>{var p=function(t){var f,i,n;if(typeof t!="object"||t===null)return t;for(n in f=Array.isArray(t)?[]:{},t)i=t[n],f[n]=p(i);return f};v.exports=p},72646:(v,p,t)=>{var f=t(53013),i=function(){var n,l,e,a,r,u,s=arguments[0]||{},o=1,h=arguments.length,c=!1;for(typeof s=="boolean"&&(c=s,s=arguments[1]||{},o=2),h===o&&(s=this,--o);o<h;o++)if((n=arguments[o])!=null)for(l in n)e=s[l],s!==(a=n[l])&&(c&&a&&(f(a)||(r=Array.isArray(a)))?(r?(r=!1,u=e&&Array.isArray(e)?e:[]):u=e&&f(e)?e:{},s[l]=i(c,u,a)):a!==void 0&&(s[l]=a));return s};v.exports=i},7973:(v,p,t)=>{var f=t(68533),i=t(76076);v.exports=function(n,l,e){var a=i(n,l,null);if(a===null)return e;if(Array.isArray(a))return f.RND.pick(a);if(typeof a=="object"){if(a.hasOwnProperty("randInt"))return f.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return f.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if(typeof a=="function")return a(l);return a}},25738:v=>{v.exports=function(p,t,f){var i=typeof p;return p&&i!=="number"&&i!=="string"&&p.hasOwnProperty(t)&&p[t]!==void 0?p[t]:f}},11778:(v,p,t)=>{var f=t(76076),i=t(2543);v.exports=function(n,l,e,a,r){r===void 0&&(r=e);var u=f(n,l,r);return i(u,e,a)}},76076:v=>{v.exports=function(p,t,f){if(p&&typeof p!="number"){if(p.hasOwnProperty(t))return p[t];if(t.indexOf(".")!==-1){for(var i=t.split("."),n=p,l=f,e=0;e<i.length;e++){if(!n.hasOwnProperty(i[e])){l=f;break}l=n[i[e]],n=n[i[e]]}return l}return f}return f}},36265:v=>{v.exports=function(p,t){for(var f=0;f<t.length;f++)if(!p.hasOwnProperty(t[f]))return!1;return!0}},86908:v=>{v.exports=function(p,t){for(var f=0;f<t.length;f++)if(p.hasOwnProperty(t[f]))return!0;return!1}},60419:v=>{v.exports=function(p,t){return p.hasOwnProperty(t)}},53013:v=>{v.exports=function(p){if(typeof p!="object"||p.nodeType||p===p.window)return!1;try{if(p.constructor&&!{}.hasOwnProperty.call(p.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0}},50247:(v,p,t)=>{var f=t(98409);v.exports=function(i,n){var l=f(i);for(var e in n)l.hasOwnProperty(e)||(l[e]=n[e]);return l}},92782:(v,p,t)=>{var f=t(98409);v.exports=function(i,n){var l=f(i);for(var e in n)l.hasOwnProperty(e)&&(l[e]=n[e]);return l}},59210:(v,p,t)=>{var f=t(60419);v.exports=function(i,n){for(var l={},e=0;e<n.length;e++){var a=n[e];f(i,a)&&(l[a]=i[a])}return l}},65157:v=>{v.exports=function(p,t,f){if(!p||typeof p=="number")return!1;if(p.hasOwnProperty(t))return p[t]=f,!0;if(t.indexOf(".")!==-1){for(var i=t.split("."),n=p,l=p,e=0;e<i.length;e++){if(!n.hasOwnProperty(i[e]))return!1;l=n,n=n[i[e]]}return l[i[i.length-1]]=f,!0}return!1}},50408:(v,p,t)=>{v.exports={Clone:t(98409),DeepCopy:t(12229),Extend:t(72646),GetAdvancedValue:t(7973),GetFastValue:t(25738),GetMinMaxValue:t(11778),GetValue:t(76076),HasAll:t(36265),HasAny:t(86908),HasValue:t(60419),IsPlainObject:t(53013),Merge:t(50247),MergeRight:t(92782),Pick:t(59210),SetValue:t(65157)}},57217:v=>{v.exports=function(p,t){return p.replace(/%([0-9]+)/g,function(f,i){return t[Number(i)-1]})}},47742:v=>{v.exports=function(p,t,f,i){t===void 0&&(t=0),f===void 0&&(f=" "),i===void 0&&(i=3);var n=0;if(t+1>=(p=p.toString()).length)switch(i){case 1:p=new Array(t+1-p.length).join(f)+p;break;case 3:var l=Math.ceil((n=t-p.length)/2);p=new Array(n-l+1).join(f)+p+new Array(l+1).join(f);break;default:p+=new Array(t+1-p.length).join(f)}return p}},22363:v=>{v.exports=function(p,t){return t===0?p.slice(1):p.slice(0,t-1)+p.slice(t)}},92274:v=>{v.exports=function(p){return p.split("").reverse().join("")}},61004:v=>{v.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var t=16*Math.random()|0;return(p==="x"?t:3&t|8).toString(16)})}},10963:v=>{v.exports=function(p){return p&&p[0].toUpperCase()+p.slice(1)}},80340:(v,p,t)=>{v.exports={Format:t(57217),Pad:t(47742),RemoveAt:t(22363),Reverse:t(92274),UppercaseFirst:t(10963),UUID:t(61004)}},57774:v=>{v.exports=function(p,t,f,i){if(f===void 0&&(f=!1),i===void 0)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var n,l,e,a=p.text,r=a.length,u=p.maxWidth,s=p.wordWrapCharCode,o=Number.MAX_VALUE,h=Number.MAX_VALUE,c=0,d=0,g=p.fontData.chars,m=p.lineHeight??p.fontData.lineHeight,y=p.letterSpacing,w=0,x=0,T=0,E=null,S=p._align,C=0,A=0,M=p.fontSize/p.fontData.size,b=M*p.scaleX,_=M*p.scaleY,P=null,L=0,F=[],D=Number.MAX_VALUE,k=0,R=0,O=0,B=[],U=[],I=null;if(u>0){for(n=0;n<r;n++)if((T=a.charCodeAt(n))!==10){if(E=g[T]){if(P!==null)var Y=E.kerning[L];T===s?I!==null&&(B.push({word:I.word,i:I.i,x:I.x*b,y:I.y*_,w:I.w*b,h:I.h*_,cr:!1}),I=null):(I===null&&(I={word:"",i:n,x:w,y:x,w:0,h:m,cr:!1}),I.word=I.word.concat(a[n]),I.w+=E.xOffset+E.xAdvance+(Y!==void 0?Y:0)),w+=E.xAdvance+y,P=E,L=T}}else I!==null&&(B.push({word:I.word,i:I.i,x:I.x*b,y:I.y*_,w:I.w*b,h:I.h*_,cr:!0}),I=null),w=0,x+=m,P=null;var N;I!==null&&B.push({word:I.word,i:I.i,x:I.x*b,y:I.y*_,w:I.w*b,h:I.h*_,cr:!1}),w=0,x=0,P=null,L=0;var X=0,z=[];for(n=0;n<B.length;n++){var V=B[n],G=V.x,W=V.x+V.w;N&&(X=G-(G-(N.x+N.w)+N.w),N=null),G-X>u||W-X>u?(z.push(V.i-1),V.cr?(z.push(V.i+V.word.length),X=0,N=null):N=V):V.cr&&(z.push(V.i+V.word.length),X=0,N=null)}for(n=z.length-1;n>=0;n--)l=a,e=z[n],a=l.substr(0,e)+`
`+l.substr(e+1);i.wrappedText=a,r=a.length,B=[],I=null}var H=0;for(n=0;n<r;n++)if((T=a.charCodeAt(n))!==10){if(E=g[T]){if(C=w,A=x,P!==null){var j=E.kerning[L];C+=j!==void 0?j:0}o>C&&(o=C),h>A&&(h=A);var q=C+E.xAdvance,K=A+m;c<q&&(c=q),d<K&&(d=K);var it=E.xOffset+E.xAdvance+(j!==void 0?j:0);T===s?I!==null&&(B.push({word:I.word,i:I.i,x:I.x*b,y:I.y*_,w:I.w*b,h:I.h*_}),I=null):(I===null&&(I={word:"",i:H,x:w,y:x,w:0,h:m}),I.word=I.word.concat(a[n]),I.w+=it),U.push({i:H,char:a[n],code:T,x:(E.xOffset+w)*M,y:(E.yOffset+x)*M,w:E.width*M,h:E.height*M,t:x*M,r:q*M,b:m*M,line:R,glyph:E}),w+=E.xAdvance+y,P=E,L=T,O=q*M,H++}}else I!==null&&(B.push({word:I.word,i:I.i,x:I.x*b,y:I.y*_,w:I.w*b,h:I.h*_}),I=null),w=0,x+=m,P=null,F[R]=O,O>k&&(k=O),O<D&&(D=O),R++,O=0;if(I!==null&&B.push({word:I.word,i:I.i,x:I.x*b,y:I.y*_,w:I.w*b,h:I.h*_}),F[R]=O,O>k&&(k=O),O<D&&(D=O),S>0)for(var et=0;et<U.length;et++){var J=U[et];if(S===1){var Z=(k-F[J.line])/2;J.x+=Z,J.r+=Z}else if(S===2){var $=k-F[J.line];J.x+=$,J.r+=$}}var tt=i.local,Q=i.global,nt=i.lines;return tt.x=o*M,tt.y=h*M,tt.width=c*M,tt.height=d*M,Q.x=p.x-p._displayOriginX+o*b,Q.y=p.y-p._displayOriginY+h*_,Q.width=c*b,Q.height=d*_,nt.shortest=D,nt.longest=k,nt.lengths=F,t&&(tt.x=Math.ceil(tt.x),tt.y=Math.ceil(tt.y),tt.width=Math.ceil(tt.width),tt.height=Math.ceil(tt.height),Q.x=Math.ceil(Q.x),Q.y=Math.ceil(Q.y),Q.width=Math.ceil(Q.width),Q.height=Math.ceil(Q.height),nt.shortest=Math.ceil(D),nt.longest=Math.ceil(k)),f&&(p._displayOriginX=p.originX*tt.width,p._displayOriginY=p.originY*tt.height,Q.x=p.x-p._displayOriginX*p.scaleX,Q.y=p.y-p._displayOriginY*p.scaleY,t&&(Q.x=Math.ceil(Q.x),Q.y=Math.ceil(Q.y))),i.words=B,i.characters=U,i.lines.height=m,i.scale=M,i.scaleX=p.scaleX,i.scaleY=p.scaleY,i}},54075:(v,p,t)=>{var f=t(55365),i=t(69186),n=t(92941),l=t(26729),e=t(55625),a=t(7478),r=t(34876),u=new i({Extends:l,initialize:function(s){l.call(this),this.game=s,this.data=new n(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(s,o,h){if(!this.dataLocked){var c={};c[o]=h;var d=this;FBInstant.player.setDataAsync(c).then(function(){d.emit("savedata",c)})}},changeDataHandler:function(s,o,h){if(!this.dataLocked){var c={};c[o]=h;var d=this;FBInstant.player.setDataAsync(c).then(function(){d.emit("savedata",c)})}},showLoadProgress:function(s){return s.load.on("progress",function(o){this.hasLoaded||FBInstant.setLoadingProgress(100*o)},this),s.load.on("complete",function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},this),this},gameStarted:function(){this.hasLoaded?this.gameStartedHandler():(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},gameStartedHandler:function(){var s=FBInstant.getSupportedAPIs(),o={},h=function(d){return d[1].toUpperCase()};s.forEach(function(d){d=d.replace(/\../g,h),o[d]=!0}),this.supportedAPIs=o,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var c=this;FBInstant.onPause(function(){c.emit("pause")}),FBInstant.getEntryPointAsync().then(function(d){c.entryPoint=d,c.entryPointData=FBInstant.getEntryPointData(),c.emit("startgame")}).catch(function(d){c.emit("startgame"),console.warn(d)}),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady(function(){c.paymentsReady=!0}).catch(function(d){console.warn(d)})},checkAPI:function(s){return!!this.supportedAPIs[s]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(s,o){return this.playerPhotoURL&&(s.load.setCORS("anonymous"),s.load.image(o,this.playerPhotoURL),s.load.once("filecomplete-image-"+o,function(){this.emit("photocomplete",o)},this),s.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var s=this;FBInstant.player.canSubscribeBotAsync().then(function(){s.playerCanSubscribeBot=!0,s.emit("cansubscribebot")}).catch(function(o){s.emit("cansubscribebotfail",o)})}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var s=this;FBInstant.player.subscribeBotAsync().then(function(){s.emit("subscribebot")}).catch(function(o){s.emit("subscribebotfail",o)})}else this.emit("subscribebotfail");return this},getData:function(s){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(s)||(s=[s]);var o=this;return FBInstant.player.getDataAsync(s).then(function(h){for(var c in o.dataLocked=!0,h)o.data.set(c,h[c]);o.dataLocked=!1,o.emit("getdata",h)}),this},saveData:function(s){if(!this.checkAPI("playerSetDataAsync"))return this;var o=this;return FBInstant.player.setDataAsync(s).then(function(){o.emit("savedata",s)}).catch(function(h){o.emit("savedatafail",h)}),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var s=this;return FBInstant.player.flushDataAsync().then(function(){s.emit("flushdata")}).catch(function(o){s.emit("flushdatafail",o)}),this},getStats:function(s){if(!this.checkAPI("playerGetStatsAsync"))return this;var o=this;return FBInstant.player.getStatsAsync(s).then(function(h){o.emit("getstats",h)}).catch(function(h){o.emit("getstatsfail",h)}),this},saveStats:function(s){if(!this.checkAPI("playerSetStatsAsync"))return this;var o={};for(var h in s)typeof s[h]=="number"&&(o[h]=s[h]);var c=this;return FBInstant.player.setStatsAsync(o).then(function(){c.emit("savestats",o)}).catch(function(d){c.emit("savestatsfail",d)}),this},incStats:function(s){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var o={};for(var h in s)typeof s[h]=="number"&&(o[h]=s[h]);var c=this;return FBInstant.player.incrementStatsAsync(o).then(function(d){c.emit("incstats",d)}).catch(function(d){c.emit("incstatsfail",d)}),this},saveSession:function(s){return this.checkAPI("setSessionData")?(JSON.stringify(s).length<=1e3?FBInstant.setSessionData(s):console.warn("Session data too long. Max 1000 chars."),this):this},openShare:function(s,o,h,c){return this._share("SHARE",s,o,h,c)},openInvite:function(s,o,h,c){return this._share("INVITE",s,o,h,c)},openRequest:function(s,o,h,c){return this._share("REQUEST",s,o,h,c)},openChallenge:function(s,o,h,c){return this._share("CHALLENGE",s,o,h,c)},_share:function(s,o,h,c,d){if(!this.checkAPI("shareAsync"))return this;if(d===void 0&&(d={}),h)var g=this.game.textures.getBase64(h,c);var m={intent:s,image:g,text:o,data:d},y=this;return FBInstant.shareAsync(m).then(function(){y.emit("resume")}),this},isSizeBetween:function(s,o){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(s,o):this},switchContext:function(s){if(!this.checkAPI("contextSwitchAsync"))return this;if(s!==this.contextID){var o=this;FBInstant.context.switchAsync(s).then(function(){o.contextID=FBInstant.context.getID(),o.emit("switch",o.contextID)}).catch(function(h){o.emit("switchfail",h)})}return this},chooseContext:function(s){if(!this.checkAPI("contextChooseAsync"))return this;var o=this;return FBInstant.context.chooseAsync(s).then(function(){o.contextID=FBInstant.context.getID(),o.emit("choose",o.contextID)}).catch(function(h){o.emit("choosefail",h)}),this},createContext:function(s){if(!this.checkAPI("contextCreateAsync"))return this;var o=this;return FBInstant.context.createAsync(s).then(function(){o.contextID=FBInstant.context.getID(),o.emit("create",o.contextID)}).catch(function(h){o.emit("createfail",h)}),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var s=this;return FBInstant.player.getConnectedPlayersAsync().then(function(o){s.emit("players",o)}).catch(function(o){s.emit("playersfail",o)}),this},getCatalog:function(){if(!this.paymentsReady)return this;var s=this,o=this.catalog;return FBInstant.payments.getCatalogAsync().then(function(h){o=[],h.forEach(function(c){o.push(a(c))}),s.emit("getcatalog",o)}).catch(function(h){s.emit("getcatalogfail",h)}),this},getProduct:function(s){for(var o=0;o<this.catalog.length;o++)if(this.catalog[o].productID===s)return this.catalog[o];return null},purchase:function(s,o){if(!this.paymentsReady)return this;var h={productID:s};o&&(h.developerPayload=o);var c=this;return FBInstant.payments.purchaseAsync(h).then(function(d){var g=r(d);c.emit("purchase",g)}).catch(function(d){c.emit("purchasefail",d)}),this},getPurchases:function(){if(!this.paymentsReady)return this;var s=this,o=this.purchases;return FBInstant.payments.getPurchasesAsync().then(function(h){o=[],h.forEach(function(c){o.push(r(c))}),s.emit("getpurchases",o)}).catch(function(h){s.emit("getpurchasesfail",h)}),this},consumePurchase:function(s){if(!this.paymentsReady)return this;var o=this;return FBInstant.payments.consumePurchaseAsync(s).then(function(){o.emit("consumepurchase",s)}).catch(function(h){o.emit("consumepurchasefail",h)}),this},update:function(s,o,h,c,d,g){return this._update("CUSTOM",s,o,h,c,d,g)},updateLeaderboard:function(s,o,h,c,d,g){return this._update("LEADERBOARD",s,o,h,c,d,g)},_update:function(s,o,h,c,d,g,m){if(!this.checkAPI("shareAsync"))return this;if(o===void 0&&(o=""),typeof h=="string"&&(h={default:h}),m===void 0&&(m={}),c)var y=this.game.textures.getBase64(c,d);var w={action:s,cta:o,image:y,text:h,template:g,data:m,strategy:"IMMEDIATE",notification:"NO_PUSH"},x=this;return FBInstant.updateAsync(w).then(function(){x.emit("update")}).catch(function(T){x.emit("updatefail",T)}),this},switchGame:function(s,o){if(!this.checkAPI("switchGameAsync"))return this;if(o&&JSON.stringify(o).length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this;var h=this;return FBInstant.switchGameAsync(s,o).then(function(){h.emit("switchgame",s)}).catch(function(c){h.emit("switchgamefail",c)}),this},createShortcut:function(){var s=this;return FBInstant.canCreateShortcutAsync().then(function(o){o&&FBInstant.createShortcutAsync().then(function(){s.emit("shortcutcreated")}).catch(function(h){s.emit("shortcutfailed",h)})}),this},quit:function(){FBInstant.quit()},log:function(s,o,h){return this.checkAPI("logEvent")?(h===void 0&&(h={}),s.length>=2&&s.length<=40&&FBInstant.logEvent(s,parseFloat(o),h),this):this},preloadAds:function(s){if(!this.checkAPI("getInterstitialAdAsync"))return this;var o;Array.isArray(s)||(s=[s]);var h=this,c=0;for(o=0;o<this.ads.length;o++)this.ads[o].shown||c++;if(c+s.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(o=0;o<s.length;o++){var d,g=s[o];FBInstant.getInterstitialAdAsync(g).then(function(m){return d=m,m.loadAsync()}).then(function(){var m=f(g,d,!1);h.ads.push(m),h.emit("adloaded",m)}).catch(function(m){m.code==="ADS_NO_FILL"?h.emit("adsnofill",g):m.code==="ADS_FREQUENT_LOAD"?h.emit("adsfrequentload",g):console.warn(m)})}return this},preloadVideoAds:function(s){if(!this.checkAPI("getRewardedVideoAsync"))return this;var o;Array.isArray(s)||(s=[s]);var h=this,c=0;for(o=0;o<this.ads.length;o++)this.ads[o].shown||c++;if(c+s.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(o=0;o<s.length;o++){var d,g=s[o];FBInstant.getRewardedVideoAsync(g).then(function(m){return d=m,m.loadAsync()}).then(function(){var m=f(g,d,!0);h.ads.push(m),h.emit("adloaded",m)}).catch(function(m){m.code==="ADS_NO_FILL"?h.emit("adsnofill",g):m.code==="ADS_FREQUENT_LOAD"?h.emit("adsfrequentload",g):console.warn(m)})}return this},showAd:function(s){for(var o=this,h=0;h<this.ads.length;h++){var c=this.ads[h];if(c.placementID===s&&!c.shown){c.instance.showAsync().then(function(){c.shown=!0,o.emit("adfinished",c)}).catch(function(d){d.code==="ADS_NOT_LOADED"?o.emit("adsnotloaded",c):d.code==="RATE_LIMITED"&&o.emit("adratelimited",c),o.emit("adshowerror",d,c)});break}}return this},showVideo:function(s){for(var o=this,h=0;h<this.ads.length;h++){var c=this.ads[h];if(c.placementID===s&&c.video&&!c.shown){c.instance.showAsync().then(function(){c.shown=!0,o.emit("adfinished",c)}).catch(function(d){d.code==="ADS_NOT_LOADED"?o.emit("adsnotloaded",c):d.code==="RATE_LIMITED"&&o.emit("adratelimited",c),o.emit("adshowerror",d,c)});break}}return this},matchPlayer:function(s,o){if(s===void 0&&(s=null),o===void 0&&(o=!1),!this.checkAPI("matchPlayerAsync"))return this;var h=this;return FBInstant.matchPlayerAsync(s,o).then(function(){h.getID(),h.getType(),h.emit("matchplayer",h.contextID,h.contextType)}),this},getLeaderboard:function(s){if(!this.checkAPI("getLeaderboardAsync"))return this;var o=this;return FBInstant.getLeaderboardAsync(s).then(function(h){var c=new e(o,h);o.leaderboards[s]=c,o.emit("getleaderboard",c)}).catch(function(h){console.warn(h)}),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});v.exports=u},3010:(v,p,t)=>{t(76417);var f=t(11318),i=t(72646),n={Actions:t(22603),Animations:t(88552),Cache:t(80425),Cameras:t(75527),Core:t(91004),Game:t(61003),Curves:t(994),Data:t(97216),Display:t(39795),Events:t(85817),GameObjects:{Events:t(99370),DisplayList:t(96656),GameObjectCreator:t(78757),GameObjectFactory:t(66642),UpdateList:t(66007),Components:t(19506),GetCalcMatrix:t(3142),BuildGameObject:t(90062),BuildGameObjectAnimation:t(38596),GameObject:t(38236),BitmapText:t(74797),Container:t(22675),Graphics:t(19613),Group:t(84262),Image:t(86479),Particles:t(42854),RenderTexture:t(131),Rope:t(12374),Sprite:t(38590),Text:t(77546),GetTextSize:t(83799),MeasureText:t(32800),TextStyle:t(22849),TileSprite:t(99191),Zone:t(64043),Curve:t(98435),Grid:t(35308),Line:t(9417),Rectangle:t(41231),Factories:{Container:t(51273),Graphics:t(4268),Group:t(97058),Image:t(48950),Particles:t(65419),RenderTexture:t(35346),Rope:t(56014),Sprite:t(82364),StaticBitmapText:t(93676),Text:t(33979),TileSprite:t(8175),Zone:t(59037),Curve:t(84653),Grid:t(8098),Line:t(31059),Polygon:t(42182),Rectangle:t(98971)},Creators:{Container:t(92359),Graphics:t(2923),Group:t(57736),Image:t(16836),Particles:t(12495),RenderTexture:t(34387),Rope:t(95039),Sprite:t(29525),StaticBitmapText:t(46292),Text:t(53912),TileSprite:t(24249),Zone:t(42309)}},Geom:t(67449),Input:t(74353),Loader:t(74266),Math:t(68533),Physics:{Arcade:t(77216)},Plugins:t(25753),Renderer:{Events:t(37710),WebGL:t(94621)},Scenes:t(1459),Scene:t(61116),Sound:t(84146),Structs:t(21466),Textures:t(91003),Time:t(69165),Tweens:t(62983),Utils:t(74871),Class:t(69186)};n=i(!1,n,f),v.exports=n,t.g.Phaser=n,window.Phaser=n}},at={};function xt(v){var p=at[v];if(p!==void 0)return p.exports;var t=at[v]={exports:{}};return ct[v](t,t.exports,xt),t.exports}return xt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),xt(3010)})())});export default At();
